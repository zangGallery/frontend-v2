const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Brnaag7R.js","assets/react-vendor-z79Uuty_.js","assets/ace-Crcp_Mm0.js","assets/md-editor-ChPQj20R.js","assets/web3-core-DUkMGIH9.js","assets/md-editor-Bsl8KSMX.css","assets/mode-html-dl0JeqJC.js","assets/theme-monokai-Cz4eVLlC.js","assets/ext-language_tools-C41EfQXa.js","assets/ace-RY8oei4F.js","assets/index-BYbqrZW7.js","assets/nft-DIQy8rNt.js","assets/ui-vendor-51-FR4Jz.js","assets/decimal-BESsWTTS.js","assets/rainbowkit-BwJ3vwML.js","assets/NFTHistory-CUVXZxMy.js","assets/nft-BEHUn5zE.css","assets/mint-CxgQcKfb.js","assets/mint-YFOrqmb2.css","assets/collection-DhKJSSrR.js","assets/activity-4hoipqQI.js","assets/profile-DxhPvneR.js","assets/bridge-Bloyc4X1.js","assets/404-DvhIJyWI.js"])))=>i.map(i=>d[i]);
import{r as fn,ar as Yr,j as I,v as bs,aG as zr,H as xi,a1 as Qs,aC as Xs,aH as Ai,_ as Ce,T as vi,V as Qn,z as Ni,aI as Ci,aJ as Si,aK as Ii}from"./web3-core-DUkMGIH9.js";import{i as wi,g as ys,R as j,c as Ri,a as Y,L as Ct,f as Es,B as Oi,j as ki,k as ze,u as Li}from"./react-vendor-z79Uuty_.js";import{a as Mt,R as ht,S as On,b as Di}from"./ui-vendor-51-FR4Jz.js";import{u as Pi,m as Xn,f as Lt,C as Mi,R as Bi,v as Ui,w as Fi}from"./rainbowkit-BwJ3vwML.js";import{b as Hi,i as ji,s as $i,g as qi,a as Yi,t as zi,e as kn,c as Js,d as Jn,p as Zs,f as er,w as Vi,h as dt,j as Wi,k as Ki,l as tr,z as Gi,E as Qi}from"./md-editor-ChPQj20R.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(d){if(d.ep)return;d.ep=!0;const h=n(d);fetch(d.href,h)}})();var Wt={},nr;function Xi(){if(nr)return Wt;nr=1;var e=wi();return Wt.createRoot=e.createRoot,Wt.hydrateRoot=e.hydrateRoot,Wt}var Ji=Xi();const Zi=ys(Ji),eo="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",to="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",no=Pi({appName:"zang.gallery",projectId:"3a8170812b534d0ff9d794f19a901d64",chains:[Lt,Xn],transports:{[Lt.id]:fn(`https://base-mainnet.g.alchemy.com/v2/${eo}`),[Xn.id]:fn(`https://eth-mainnet.g.alchemy.com/v2/${to}`)},ssr:!1}),Vr=Mt({key:"standardError",default:null}),so=e=>{const t=JSON.stringify(e);return t.includes("ZangNFT")&&t.includes("query for nonexistent token")},Wr=e=>{var t;return e.message?e.message==="Internal JSON-RPC error."&&((t=e.data)!=null&&t.message)?"Internal JSON-RPC error: "+e.data.message+".":e.message:"Unknown error."},Se={contractAddresses:{v1:{zang:"0x5541ff300e9b01176b953EA3153006e36D4BA273",marketplace:"0xbD5C4612084eA90847DeB475529aC74B3521498d"}},firstBlocks:{v1:{base:{zang:5300011,marketplace:5300368}}},networks:{main:{name:"Base",chainId:8453,rpcUrl:"https://base-mainnet.g.alchemy.com/v2/3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{name:"ENS",chainId:1}},api_keys:{alchemy_base:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",alchemy_mainnet:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{cacheExpiration:1e3*60*2},blockExplorer:{name:"BaseScan",url:"https://basescan.org"}},sn={calls:[],enabled:typeof window<"u"&&window.__RPC_TRACKING_ENABLED__===!0,enable(){this.enabled=!0,this.calls=[],console.log("[RPC] Tracking enabled. Refresh page to capture all calls.")},disable(){this.enabled=!1,console.log("[RPC] Tracking disabled")},reset(){this.calls=[],console.log("[RPC] Counter reset")},log(e,t){if(!this.enabled)return;const n=JSON.stringify(t,(d,h)=>typeof h=="bigint"?h.toString():h),s={id:this.calls.length+1,method:e,args:n,time:new Date().toISOString()};this.calls.push(s),console.log(`[RPC #${s.id}] ${e}`,t)},summary(){const e={};for(const t of this.calls){const n=`${t.method}(${t.args})`;e[n]=(e[n]||0)+1}return console.log("[RPC Summary] Total calls:",this.calls.length),console.table(e),{total:this.calls.length,byMethod:e}}};typeof window<"u"&&(window.rpcTracker=sn);const Kr=Yr({chain:Lt,transport:fn(`https://base-mainnet.g.alchemy.com/v2/${Se.api_keys.alchemy_base}`)}),Ze=new Proxy(Kr,{get(e,t){const n=e[t];return typeof n=="function"?async(...s)=>{var d,h;return t==="readContract"?sn.log(s[0].functionName,{address:(d=s[0].address)==null?void 0:d.slice(0,10),args:s[0].args}):t==="getContractEvents"?sn.log("getContractEvents",{address:(h=s[0].address)==null?void 0:h.slice(0,10),eventName:s[0].eventName}):t==="getBlockNumber"&&sn.log("getBlockNumber",{}),n.apply(e,s)}:n}}),I0=Yr({chain:Xn,transport:fn(`https://eth-mainnet.g.alchemy.com/v2/${Se.api_keys.alchemy_mainnet}`)}),ro=Kr,ao=Mt({key:"transactionCount",default:0}),io=Mt({key:"transactionStatus",default:{}}),oo=Mt({key:"transactionListeners",default:[]}),Gr=()=>{const[e,t]=ht(io),[n,s]=ht(oo);return{getTransactionStatus:a=>e[a],transactions:e,updateTransactionStatus:async(a,b)=>{t(_=>({..._,[a]:b}));for(const _ of n)_(a,b)},register:a=>{s(b=>b.includes(a)?b:[...b,a])}}},w0=()=>{const{updateTransactionStatus:e}=Gr(),[t,n]=ht(ao),s=()=>(n(h=>h+1),t);return async(h,p,a,b)=>{const _=s();let y;try{e(_,{status:"pending",name:p,content:a?await a("pending"):null}),y=await h(),e(_,{status:"approved",name:p,hash:y,content:a?await a("approved",{hash:y}):null});const r=await Ze.waitForTransactionReceipt({hash:y,confirmations:1});return e(_,{status:"success",name:p,hash:y,content:a?await a("success",{hash:y},!0,r):null}),{hash:y,receipt:r,success:!0}}catch(r){if(e(_,{status:"error",name:p,hash:y,errorMessage:Wr(r),content:a?await a("success",{hash:y},!1):null}),b)throw r;return{error:r,success:!1}}}};function uo(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const co=e=>{switch(e){case"success":return ho;case"info":return po;case"warning":return mo;case"error":return go;default:return null}},lo=Array(12).fill(0),fo=({visible:e,className:t})=>j.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},j.createElement("div",{className:"sonner-spinner"},lo.map((n,s)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),ho=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mo=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),po=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),go=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),bo=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),yo=()=>{const[e,t]=j.useState(document.hidden);return j.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Zn=1;class Eo{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:s,...d}=t,h=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Zn++,p=this.toasts.find(b=>b.id===h),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),p?this.toasts=this.toasts.map(b=>b.id===h?(this.publish({...b,...t,id:h,title:s}),{...b,...t,id:h,dismissible:a,title:s}):b):this.addToast({title:s,...d,dismissible:a,id:h}),h},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const d=Promise.resolve(t instanceof Function?t():t);let h=s!==void 0,p;const a=d.then(async _=>{if(p=["resolve",_],j.isValidElement(_))h=!1,this.create({id:s,type:"default",message:_});else if(To(_)&&!_.ok){h=!1;const r=typeof n.error=="function"?await n.error(`HTTP error! status: ${_.status}`):n.error,l=typeof n.description=="function"?await n.description(`HTTP error! status: ${_.status}`):n.description,u=typeof r=="object"&&!j.isValidElement(r)?r:{message:r};this.create({id:s,type:"error",description:l,...u})}else if(_ instanceof Error){h=!1;const r=typeof n.error=="function"?await n.error(_):n.error,l=typeof n.description=="function"?await n.description(_):n.description,u=typeof r=="object"&&!j.isValidElement(r)?r:{message:r};this.create({id:s,type:"error",description:l,...u})}else if(n.success!==void 0){h=!1;const r=typeof n.success=="function"?await n.success(_):n.success,l=typeof n.description=="function"?await n.description(_):n.description,u=typeof r=="object"&&!j.isValidElement(r)?r:{message:r};this.create({id:s,type:"success",description:l,...u})}}).catch(async _=>{if(p=["reject",_],n.error!==void 0){h=!1;const y=typeof n.error=="function"?await n.error(_):n.error,r=typeof n.description=="function"?await n.description(_):n.description,f=typeof y=="object"&&!j.isValidElement(y)?y:{message:y};this.create({id:s,type:"error",description:r,...f})}}).finally(()=>{h&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),b=()=>new Promise((_,y)=>a.then(()=>p[0]==="reject"?y(p[1]):_(p[1])).catch(y));return typeof s!="string"&&typeof s!="number"?{unwrap:b}:Object.assign(s,{unwrap:b})},this.custom=(t,n)=>{const s=(n==null?void 0:n.id)||Zn++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _e=new Eo,_o=(e,t)=>{const n=(t==null?void 0:t.id)||Zn++;return _e.addToast({title:e,...t,id:n}),n},To=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",xo=_o,Ao=()=>_e.toasts,vo=()=>_e.getActiveToasts(),Kt=Object.assign(xo,{success:_e.success,info:_e.info,warning:_e.warning,error:_e.error,custom:_e.custom,message:_e.message,promise:_e.promise,dismiss:_e.dismiss,loading:_e.loading},{getHistory:Ao,getToasts:vo});uo("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Gt(e){return e.label!==void 0}const No=3,Co="24px",So="16px",sr=4e3,Io=356,wo=14,Ro=45,Oo=200;function Be(...e){return e.filter(Boolean).join(" ")}function ko(e){const[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}const Lo=e=>{var t,n,s,d,h,p,a,b,_;const{invert:y,toast:r,unstyled:l,interacting:f,setHeights:u,visibleToasts:o,heights:g,index:c,toasts:m,expanded:T,removeToast:x,defaultRichColors:v,closeButton:w,style:C,cancelButtonStyle:E,actionButtonStyle:A,className:N="",descriptionClassName:k="",duration:L,position:M,gap:H,expandByDefault:$,classNames:q,icons:z,closeButtonAriaLabel:Z="Close toast"}=e,[ae,K]=j.useState(null),[V,se]=j.useState(null),[W,ee]=j.useState(!1),[te,pe]=j.useState(!1),[Ie,ie]=j.useState(!1),[st,$t]=j.useState(!1),[qt,rt]=j.useState(!1),[li,In]=j.useState(0),[di,js]=j.useState(0),yt=j.useRef(r.duration||L||sr),$s=j.useRef(null),$e=j.useRef(null),fi=c===0,hi=c+1<=o,Ae=r.type,at=r.dismissible!==!1,mi=r.className||"",pi=r.descriptionClassName||"",Yt=j.useMemo(()=>g.findIndex(G=>G.toastId===r.id)||0,[g,r.id]),gi=j.useMemo(()=>{var G;return(G=r.closeButton)!=null?G:w},[r.closeButton,w]),qs=j.useMemo(()=>r.duration||L||sr,[r.duration,L]),wn=j.useRef(0),it=j.useRef(0),Ys=j.useRef(0),ot=j.useRef(null),[bi,yi]=M.split("-"),zs=j.useMemo(()=>g.reduce((G,de,ge)=>ge>=Yt?G:G+de.height,0),[g,Yt]),Vs=yo(),Ei=r.invert||y,Rn=Ae==="loading";it.current=j.useMemo(()=>Yt*H+zs,[Yt,zs]),j.useEffect(()=>{yt.current=qs},[qs]),j.useEffect(()=>{ee(!0)},[]),j.useEffect(()=>{const G=$e.current;if(G){const de=G.getBoundingClientRect().height;return js(de),u(ge=>[{toastId:r.id,height:de,position:r.position},...ge]),()=>u(ge=>ge.filter(ve=>ve.toastId!==r.id))}},[u,r.id]),j.useLayoutEffect(()=>{if(!W)return;const G=$e.current,de=G.style.height;G.style.height="auto";const ge=G.getBoundingClientRect().height;G.style.height=de,js(ge),u(ve=>ve.find(me=>me.toastId===r.id)?ve.map(me=>me.toastId===r.id?{...me,height:ge}:me):[{toastId:r.id,height:ge,position:r.position},...ve])},[W,r.title,r.description,u,r.id,r.jsx,r.action,r.cancel]);const Ye=j.useCallback(()=>{pe(!0),In(it.current),u(G=>G.filter(de=>de.toastId!==r.id)),setTimeout(()=>{x(r)},Oo)},[r,x,u,it]);j.useEffect(()=>{if(r.promise&&Ae==="loading"||r.duration===1/0||r.type==="loading")return;let G;return T||f||Vs?(()=>{if(Ys.current<wn.current){const ve=new Date().getTime()-wn.current;yt.current=yt.current-ve}Ys.current=new Date().getTime()})():(()=>{yt.current!==1/0&&(wn.current=new Date().getTime(),G=setTimeout(()=>{r.onAutoClose==null||r.onAutoClose.call(r,r),Ye()},yt.current))})(),()=>clearTimeout(G)},[T,f,r,Ae,Vs,Ye]),j.useEffect(()=>{r.delete&&(Ye(),r.onDismiss==null||r.onDismiss.call(r,r))},[Ye,r.delete]);function _i(){var G;if(z!=null&&z.loading){var de;return j.createElement("div",{className:Be(q==null?void 0:q.loader,r==null||(de=r.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Ae==="loading"},z.loading)}return j.createElement(fo,{className:Be(q==null?void 0:q.loader,r==null||(G=r.classNames)==null?void 0:G.loader),visible:Ae==="loading"})}const Ti=r.icon||(z==null?void 0:z[Ae])||co(Ae);var Ws,Ks;return j.createElement("li",{tabIndex:0,ref:$e,className:Be(N,mi,q==null?void 0:q.toast,r==null||(t=r.classNames)==null?void 0:t.toast,q==null?void 0:q.default,q==null?void 0:q[Ae],r==null||(n=r.classNames)==null?void 0:n[Ae]),"data-sonner-toast":"","data-rich-colors":(Ws=r.richColors)!=null?Ws:v,"data-styled":!(r.jsx||r.unstyled||l),"data-mounted":W,"data-promise":!!r.promise,"data-swiped":qt,"data-removed":te,"data-visible":hi,"data-y-position":bi,"data-x-position":yi,"data-index":c,"data-front":fi,"data-swiping":Ie,"data-dismissible":at,"data-type":Ae,"data-invert":Ei,"data-swipe-out":st,"data-swipe-direction":V,"data-expanded":!!(T||$&&W),"data-testid":r.testId,style:{"--index":c,"--toasts-before":c,"--z-index":m.length-c,"--offset":`${te?li:it.current}px`,"--initial-height":$?"auto":`${di}px`,...C,...r.style},onDragEnd:()=>{ie(!1),K(null),ot.current=null},onPointerDown:G=>{G.button!==2&&(Rn||!at||($s.current=new Date,In(it.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(ie(!0),ot.current={x:G.clientX,y:G.clientY})))},onPointerUp:()=>{var G,de,ge;if(st||!at)return;ot.current=null;const ve=Number(((G=$e.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zt=Number(((de=$e.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),me=new Date().getTime()-((ge=$s.current)==null?void 0:ge.getTime()),we=ae==="x"?ve:zt,Vt=Math.abs(we)/me;if(Math.abs(we)>=Ro||Vt>.11){In(it.current),r.onDismiss==null||r.onDismiss.call(r,r),se(ae==="x"?ve>0?"right":"left":zt>0?"down":"up"),Ye(),$t(!0);return}else{var ke,Le;(ke=$e.current)==null||ke.style.setProperty("--swipe-amount-x","0px"),(Le=$e.current)==null||Le.style.setProperty("--swipe-amount-y","0px")}rt(!1),ie(!1),K(null)},onPointerMove:G=>{var de,ge,ve;if(!ot.current||!at||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;const me=G.clientY-ot.current.y,we=G.clientX-ot.current.x;var Vt;const ke=(Vt=e.swipeDirections)!=null?Vt:ko(M);!ae&&(Math.abs(we)>1||Math.abs(me)>1)&&K(Math.abs(we)>Math.abs(me)?"x":"y");let Le={x:0,y:0};const Gs=Xe=>1/(1.5+Math.abs(Xe)/20);if(ae==="y"){if(ke.includes("top")||ke.includes("bottom"))if(ke.includes("top")&&me<0||ke.includes("bottom")&&me>0)Le.y=me;else{const Xe=me*Gs(me);Le.y=Math.abs(Xe)<Math.abs(me)?Xe:me}}else if(ae==="x"&&(ke.includes("left")||ke.includes("right")))if(ke.includes("left")&&we<0||ke.includes("right")&&we>0)Le.x=we;else{const Xe=we*Gs(we);Le.x=Math.abs(Xe)<Math.abs(we)?Xe:we}(Math.abs(Le.x)>0||Math.abs(Le.y)>0)&&rt(!0),(ge=$e.current)==null||ge.style.setProperty("--swipe-amount-x",`${Le.x}px`),(ve=$e.current)==null||ve.style.setProperty("--swipe-amount-y",`${Le.y}px`)}},gi&&!r.jsx&&Ae!=="loading"?j.createElement("button",{"aria-label":Z,"data-disabled":Rn,"data-close-button":!0,onClick:Rn||!at?()=>{}:()=>{Ye(),r.onDismiss==null||r.onDismiss.call(r,r)},className:Be(q==null?void 0:q.closeButton,r==null||(s=r.classNames)==null?void 0:s.closeButton)},(Ks=z==null?void 0:z.close)!=null?Ks:bo):null,(Ae||r.icon||r.promise)&&r.icon!==null&&((z==null?void 0:z[Ae])!==null||r.icon)?j.createElement("div",{"data-icon":"",className:Be(q==null?void 0:q.icon,r==null||(d=r.classNames)==null?void 0:d.icon)},r.promise||r.type==="loading"&&!r.icon?r.icon||_i():null,r.type!=="loading"?Ti:null):null,j.createElement("div",{"data-content":"",className:Be(q==null?void 0:q.content,r==null||(h=r.classNames)==null?void 0:h.content)},j.createElement("div",{"data-title":"",className:Be(q==null?void 0:q.title,r==null||(p=r.classNames)==null?void 0:p.title)},r.jsx?r.jsx:typeof r.title=="function"?r.title():r.title),r.description?j.createElement("div",{"data-description":"",className:Be(k,pi,q==null?void 0:q.description,r==null||(a=r.classNames)==null?void 0:a.description)},typeof r.description=="function"?r.description():r.description):null),j.isValidElement(r.cancel)?r.cancel:r.cancel&&Gt(r.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:r.cancelButtonStyle||E,onClick:G=>{Gt(r.cancel)&&at&&(r.cancel.onClick==null||r.cancel.onClick.call(r.cancel,G),Ye())},className:Be(q==null?void 0:q.cancelButton,r==null||(b=r.classNames)==null?void 0:b.cancelButton)},r.cancel.label):null,j.isValidElement(r.action)?r.action:r.action&&Gt(r.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:r.actionButtonStyle||A,onClick:G=>{Gt(r.action)&&(r.action.onClick==null||r.action.onClick.call(r.action,G),!G.defaultPrevented&&Ye())},className:Be(q==null?void 0:q.actionButton,r==null||(_=r.classNames)==null?void 0:_.actionButton)},r.action.label):null)};function rr(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Do(e,t){const n={};return[e,t].forEach((s,d)=>{const h=d===1,p=h?"--mobile-offset":"--offset",a=h?So:Co;function b(_){["top","right","bottom","left"].forEach(y=>{n[`${p}-${y}`]=typeof _=="number"?`${_}px`:_})}typeof s=="number"||typeof s=="string"?b(s):typeof s=="object"?["top","right","bottom","left"].forEach(_=>{s[_]===void 0?n[`${p}-${_}`]=a:n[`${p}-${_}`]=typeof s[_]=="number"?`${s[_]}px`:s[_]}):b(a)}),n}const Po=j.forwardRef(function(t,n){const{id:s,invert:d,position:h="bottom-right",hotkey:p=["altKey","KeyT"],expand:a,closeButton:b,className:_,offset:y,mobileOffset:r,theme:l="light",richColors:f,duration:u,style:o,visibleToasts:g=No,toastOptions:c,dir:m=rr(),gap:T=wo,icons:x,containerAriaLabel:v="Notifications"}=t,[w,C]=j.useState([]),E=j.useMemo(()=>s?w.filter(W=>W.toasterId===s):w.filter(W=>!W.toasterId),[w,s]),A=j.useMemo(()=>Array.from(new Set([h].concat(E.filter(W=>W.position).map(W=>W.position)))),[E,h]),[N,k]=j.useState([]),[L,M]=j.useState(!1),[H,$]=j.useState(!1),[q,z]=j.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=j.useRef(null),ae=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=j.useRef(null),V=j.useRef(!1),se=j.useCallback(W=>{C(ee=>{var te;return(te=ee.find(pe=>pe.id===W.id))!=null&&te.delete||_e.dismiss(W.id),ee.filter(({id:pe})=>pe!==W.id)})},[]);return j.useEffect(()=>_e.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{C(ee=>ee.map(te=>te.id===W.id?{...te,delete:!0}:te))});return}setTimeout(()=>{Ri.flushSync(()=>{C(ee=>{const te=ee.findIndex(pe=>pe.id===W.id);return te!==-1?[...ee.slice(0,te),{...ee[te],...W},...ee.slice(te+1)]:[W,...ee]})})})}),[w]),j.useEffect(()=>{if(l!=="system"){z(l);return}if(l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:ee})=>{z(ee?"dark":"light")})}catch{W.addListener(({matches:te})=>{try{z(te?"dark":"light")}catch(pe){console.error(pe)}})}},[l]),j.useEffect(()=>{w.length<=1&&M(!1)},[w]),j.useEffect(()=>{const W=ee=>{var te;if(p.every(ie=>ee[ie]||ee.code===ie)){var Ie;M(!0),(Ie=Z.current)==null||Ie.focus()}ee.code==="Escape"&&(document.activeElement===Z.current||(te=Z.current)!=null&&te.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[p]),j.useEffect(()=>{if(Z.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,V.current=!1)}},[Z.current]),j.createElement("section",{ref:n,"aria-label":`${v} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((W,ee)=>{var te;const[pe,Ie]=W.split("-");return E.length?j.createElement("ol",{key:W,dir:m==="auto"?rr():m,tabIndex:-1,ref:Z,className:_,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":pe,"data-x-position":Ie,style:{"--front-toast-height":`${((te=N[0])==null?void 0:te.height)||0}px`,"--width":`${Io}px`,"--gap":`${T}px`,...o,...Do(y,r)},onBlur:ie=>{V.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(V.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||V.current||(V.current=!0,K.current=ie.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{H||M(!1)},onDragEnd:()=>M(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},E.filter(ie=>!ie.position&&ee===0||ie.position===W).map((ie,st)=>{var $t,qt;return j.createElement(Lo,{key:ie.id,icons:x,index:st,toast:ie,defaultRichColors:f,duration:($t=c==null?void 0:c.duration)!=null?$t:u,className:c==null?void 0:c.className,descriptionClassName:c==null?void 0:c.descriptionClassName,invert:d,visibleToasts:g,closeButton:(qt=c==null?void 0:c.closeButton)!=null?qt:b,interacting:H,position:W,style:c==null?void 0:c.style,unstyled:c==null?void 0:c.unstyled,classNames:c==null?void 0:c.classNames,cancelButtonStyle:c==null?void 0:c.cancelButtonStyle,actionButtonStyle:c==null?void 0:c.actionButtonStyle,closeButtonAriaLabel:c==null?void 0:c.closeButtonAriaLabel,removeToast:se,toasts:E.filter(rt=>rt.position==ie.position),heights:N.filter(rt=>rt.position==ie.position),setHeights:k,expandByDefault:a,gap:T,expanded:L,swipeDirections:t.swipeDirections})})):null}))});function Mo({hash:e}){return I.jsxs("a",{className:"inline-flex items-center gap-1.5 text-accent-cyan hover:text-accent-cyan/80 transition-colors text-sm",href:Se.blockExplorer.url+"/tx/"+e,target:"_blank",rel:"noopener noreferrer",children:["View on ",Se.blockExplorer.name,I.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}function Bo(){const{register:e}=Gr(),t=(n,s)=>{const d=s.hash?I.jsx(Mo,{hash:s.hash}):null;s.status==="pending"?Kt.loading(s.content||"Waiting for approval...",{id:n,description:s.name}):s.status==="approved"?Kt.loading(s.content||I.jsxs("div",{className:"space-y-2",children:[I.jsx("p",{children:"Transaction approved, confirming..."}),d]}),{id:n,description:s.name}):s.status==="success"?Kt.success(s.content||I.jsxs("div",{className:"space-y-2",children:[I.jsx("p",{children:"Transaction confirmed!"}),d]}),{id:n,description:s.name,duration:8e3}):s.status==="error"&&Kt.error(s.content||I.jsxs("div",{className:"space-y-2",children:[I.jsx("p",{children:"Transaction failed"}),s.errorMessage&&I.jsx("p",{className:"text-xs text-ink-400 break-words",children:s.errorMessage}),d]}),{id:n,description:s.name,duration:1e4})};return Y.useEffect(()=>{e(t)},[]),I.jsx(Po,{position:"bottom-right",theme:"dark",toastOptions:{style:{background:"#18181b",border:"1px solid #27272a",color:"#fafafa"},className:"sonner-toast"},richColors:!0,closeButton:!0})}function Uo(){const{isConnected:e}=bs(),t=zr(),{switchChain:n}=xi();return Y.useEffect(()=>{e&&t!==Lt.id&&(n==null||n({chainId:Lt.id}))},[e,t,n]),null}function Fo({children:e,props:t}){return I.jsxs("div",{className:"min-h-screen flex flex-col bg-ink-950",children:[I.jsx(Uo,{}),I.jsx("main",{className:"flex-1",children:e}),I.jsx(Bo,{}),I.jsx("footer",{className:"bg-ink-900/50 border-t border-ink-800/50 mt-auto",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[I.jsxs("div",{className:"space-y-4",children:[I.jsxs("span",{className:"font-mono text-xl font-bold text-ink-100",children:[".zang","{"]}),I.jsxs("p",{className:"text-ink-400 text-sm",children:["Text-based NFTs on Base.",I.jsx("br",{}),"By artists, for artists."]}),I.jsx("p",{className:"text-ink-500 text-xs",children:"Platform fee: 5%"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Contact"}),I.jsx("a",{href:"mailto:team@zang.gallery",className:"block text-ink-400 hover:text-accent-cyan transition-colors text-sm",children:"team@zang.gallery"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Community"}),I.jsxs("div",{className:"flex flex-col space-y-2",children:[I.jsxs("a",{href:"https://twitter.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Twitter"]}),I.jsxs("a",{href:"https://github.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})}),"GitHub"]}),I.jsxs("a",{href:"https://discord.gg/jnpCz9R3gf",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189z"})}),"Discord"]})]})]})]}),I.jsx("div",{className:"mt-8 pt-8 border-t border-ink-800/50",children:I.jsx("p",{className:"text-ink-500 text-xs text-center",children:"Built on Base"})})]})})]})}const Ho="0xC6d566A56A1aFf6508b41f6c90ff131615583BCD",jo=[{inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],stateMutability:"view",type:"function"}];function $o(e){const t=e.toLowerCase().replace("0x",""),n=Qs(Xs(["string"],[t])),s=Ai("80002105.reverse");return Qs(Xs(["bytes32","bytes32"],[s,n]))}const qo=2,Yo=100;let Ln=0;const Dn=[],Qt=new Map;async function zo(e){return new Promise((t,n)=>{const s=async()=>{Ln++;try{const d=await e();t(d)}catch(d){n(d)}finally{Ln--,Dn.length>0&&setTimeout(()=>{const d=Dn.shift();d&&d()},Yo)}};Ln<qo?s():Dn.push(s)})}function Vo(){try{const e=localStorage.getItem("ensCache");if(e){const t=JSON.parse(e),n=new Date,s={};for(const[d,h]of Object.entries(t))h&&new Date(h.expiration)>n&&(s[d]=h);return s}}catch{}return{}}function Wo(e){try{localStorage.setItem("ensCache",JSON.stringify(e))}catch{}}const Ko=Mt({key:"ensInfo",default:Vo()}),Go=()=>{const[e,t]=ht(Ko),n=async a=>{let b=null;try{b=await zo(async()=>{const y=$o(a);return await ro.readContract({abi:jo,address:Ho,functionName:"name",args:[y]})||null})}catch{}const _={value:b,expiration:new Date(new Date().getTime()+Se.ens.cacheExpiration)};return t(y=>{const r={...y,[a]:_};return Wo(r),r}),b},s=a=>(!e[a]||new Date(e[a].expiration)<new Date)&&!Qt.has(a),d=a=>{t(b=>({...b,[a]:null}))};return{lookupEns:a=>{var _,y;if(!a)return a;if(e[a]&&new Date(e[a].expiration)>new Date)return e[a].value;if(Qt.has(a))return(_=e[a])==null?void 0:_.value;const b=new Promise(r=>{setTimeout(async()=>{try{const l=await n(a);r(l)}catch{r(null)}finally{Qt.delete(a)}},0)});return Qt.set(a,b),(y=e[a])==null?void 0:y.value},lookupEnsAsync:async(a,b)=>{var r;if(!a)return a;b&&d(a);const _=s(a)||b;let y;return _?y=await n(a):y=(r=e[a])==null?void 0:r.value,y},invalidateEns:d}},Qo=(e,t)=>e.substring(0,t+2)+"..."+e.substring(e.length-t);function es({address:e,shorten:t,nChar:n,disableLink:s}){const{lookupEns:d}=Go(),h=d(e)||(t?Qo(e,n):e);return I.jsx("span",{className:"font-mono text-ink-300",children:s?h:I.jsx(Ct,{to:`/profile?address=${e}`,className:"hover:text-accent-cyan transition-colors underline decoration-ink-600 hover:decoration-accent-cyan",children:h})})}function Xo(){const[e,t]=Y.useState(!1),{isConnected:n}=bs(),s=zr(),d=[{href:"/",label:"Home"},{href:"/mint",label:"Mint"},{href:"/activity",label:"Activity"}];return n&&d.push({href:"/collection",label:"Collection"}),I.jsxs("header",{className:"sticky top-0 z-50 bg-ink-950/80 backdrop-blur-md border-b border-ink-800/50",children:[I.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[I.jsxs("div",{className:"flex items-center h-16",children:[I.jsx("div",{className:"flex-shrink-0 w-64",children:I.jsx(Vn,{href:"/",className:"group flex items-center",children:I.jsxs("span",{className:"font-mono text-2xl font-bold text-ink-100 group-hover:text-white transition-colors duration-200",children:[".zang","{"]})})}),I.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center space-x-8",children:d.map(h=>I.jsx(Vn,{href:h.href,className:"nav-link text-sm font-medium uppercase tracking-wide",children:h.label},h.href))}),I.jsx("div",{className:"hidden md:flex flex-shrink-0 justify-end w-64",children:I.jsx(Mr,{})}),I.jsx("button",{className:"md:hidden ml-auto p-2 rounded-lg text-ink-400 hover:text-white hover:bg-ink-800/50 transition-colors",onClick:()=>t(!e),"aria-label":"Toggle menu","aria-expanded":e,children:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e?I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e&&I.jsx("div",{className:"md:hidden py-4 border-t border-ink-800/50 animate-fade-in",children:I.jsxs("div",{className:"flex flex-col space-y-4",children:[d.map(h=>I.jsx(Vn,{href:h.href,className:"text-ink-300 hover:text-white text-sm font-medium uppercase tracking-wide py-2 transition-colors",onClick:()=>t(!1),children:h.label},h.href)),I.jsx("div",{className:"pt-4 border-t border-ink-800/50",children:I.jsx(Mr,{})})]})})]}),n&&s!==Se.networks.main.chainId&&I.jsx("div",{className:"bg-red-500/10 border-b border-red-500/20 px-4 py-3",children:I.jsxs("p",{className:"text-center text-red-400 text-sm",children:["Please switch to"," ",I.jsx("span",{className:"font-semibold",children:Se.networks.main.name})]})})]})}const Jo=[{type:"constructor",inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"string",name:"_imageURI",type:"string"},{internalType:"string",name:"_externalLink",type:"string"},{internalType:"address",name:"_zangCommissionAccount",type:"address"}]},{type:"function",name:"PLATFORM_FEE_TIMELOCK",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"applyPlatformFeePercentageIncrease",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"authorOf",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"balanceOf",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOfBatch",inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"contractURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"decreasePlatformFeePercentage",inputs:[{internalType:"uint16",name:"_lowerFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decreaseRoyaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint96",name:"_lowerValue",type:"uint96"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"description",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"descriptionOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"exists",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"externalLink",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"imageURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"lastTokenId",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"lock",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{internalType:"string",name:"textURI_",type:"string"},{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"description_",type:"string"},{internalType:"uint256",name:"amount_",type:"uint256"},{internalType:"uint96",name:"royaltyNumerator_",type:"uint96"},{internalType:"address",name:"royaltyRecipient_",type:"address"},{internalType:"bytes",name:"data_",type:"bytes"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"name",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"nameOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"newPlatformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"platformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"requestPlatformFeePercentageIncrease",inputs:[{internalType:"uint16",name:"_higherFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"royaltyDenominator",inputs:[],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"pure"},{type:"function",name:"royaltyInfo",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"royaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view"},{type:"function",name:"safeBatchTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setZangCommissionAccount",inputs:[{internalType:"address",name:"_zangCommissionAccount",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"textURI",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"uri",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"zangCommissionAccount",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"ApprovalForAll",inputs:[{name:"account",type:"address",indexed:!0},{name:"operator",type:"address",indexed:!0},{name:"approved",type:"bool",indexed:!1}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"TransferBatch",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"ids",type:"uint256[]",indexed:!1},{name:"values",type:"uint256[]",indexed:!1}],anonymous:!1},{type:"event",name:"TransferSingle",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"id",type:"uint256",indexed:!1},{name:"value",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"URI",inputs:[{name:"value",type:"string",indexed:!1},{name:"id",type:"uint256",indexed:!0}],anonymous:!1}],Zo=[{type:"constructor",inputs:[{internalType:"contract IZangNFT",name:"_zangNFTAddress",type:"address"}]},{type:"function",name:"buyToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"delistToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListing",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingAmount",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingPrice",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listingCount",inputs:[{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"listings",inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"zangNFTAddress",inputs:[],outputs:[{internalType:"contract IZangNFT",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1},{type:"event",name:"TokenDelisted",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenListed",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenPurchased",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_buyer",type:"address",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"_amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1}],ct={zang:Jo,marketplace:Zo},_s=(e,t,n)=>({...e,execute:(s,d)=>{if(!s.text||!s.selection){d.replaceSelection(`${t}${n}`);return}try{const h=Yi({text:s.text,selection:s.selection}),p=d.setSelectionRange(h),a=p.selectedText||"",b=a.search(/\S|$/),_=a.substring(0,b),y=a.search(/\s+$/),r=y===-1?"":a.substring(y,a.length),l=d.replaceSelection(_.concat(t,p.selectedText.trim(),n,r));d.setSelectionRange({start:l.selection.end-t.length-p.selectedText.length+_.length,end:l.selection.end-n.length-r.length})}catch{d.replaceSelection(`${t}${s.selectedText||""}${n}`)}}}),eu=_s(Hi,"**","**"),tu=_s(ji,"*","*"),nu=_s($i,"~~","~~"),mt=qi();mt[mt.findIndex(e=>e.name==="bold")]=eu;mt[mt.findIndex(e=>e.name==="italic")]=tu;mt[mt.findIndex(e=>e.name==="strikethrough")]=nu;var Pn={exports:{}},ar;function su(){return ar||(ar=1,(function(e,t){(function(n,s){e.exports=s()})(self,(()=>{return n={7629:(d,h,p)=>{const a=p(375),b=p(8571),_=p(9474),y=p(1687),r=p(8652),l=p(8160),f=p(3292),u=p(6354),o=p(8901),g=p(9708),c=p(6914),m=p(2294),T=p(6133),x=p(1152),v=p(8863),w=p(2036),C={Base:class{constructor(E){this.type=E,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new m.Ids,this._preferences=null,this._refs=new T.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof g.describe=="function","Manifest functionality disabled"),g.describe(this)}allow(...E){return l.verifyFlat(E,"allow"),this._values(E,"_valids")}alter(E){a(E&&typeof E=="object"&&!Array.isArray(E),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const A=this.clone();A.$_terms.alterations=A.$_terms.alterations||[];for(const N in E){const k=E[N];a(typeof k=="function","Alteration adjuster for",N,"must be a function"),A.$_terms.alterations.push({target:N,adjuster:k})}return A.$_temp.ruleset=!1,A}artifact(E){return a(E!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",E)}cast(E){return a(E===!1||typeof E=="string","Invalid to value"),a(E===!1||this._definition.cast[E],"Type",this.type,"does not support casting to",E),this.$_setFlag("cast",E===!1?void 0:E)}default(E,A){return this._default("default",E,A)}description(E){return a(E&&typeof E=="string","Description must be a non-empty string"),this.$_setFlag("description",E)}empty(E){const A=this.clone();return E!==void 0&&(E=A.$_compile(E,{override:!1})),A.$_setFlag("empty",E,{clone:!1})}error(E){return a(E,"Missing error"),a(E instanceof Error||typeof E=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",E)}example(E,A={}){return a(E!==void 0,"Missing example"),l.assertOptions(A,["override"]),this._inner("examples",E,{single:!0,override:A.override})}external(E,A){return typeof E=="object"&&(a(!A,"Cannot combine options with description"),A=E.description,E=E.method),a(typeof E=="function","Method must be a function"),a(A===void 0||A&&typeof A=="string","Description must be a non-empty string"),this._inner("externals",{method:E,description:A},{single:!0})}failover(E,A){return this._default("failover",E,A)}forbidden(){return this.presence("forbidden")}id(E){return E?(a(typeof E=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(E),"id cannot contain period character"),this.$_setFlag("id",E)):this.$_setFlag("id",void 0)}invalid(...E){return this._values(E,"_invalids")}label(E){return a(E&&typeof E=="string","Label name must be a non-empty string"),this.$_setFlag("label",E)}meta(E){return a(E!==void 0,"Meta cannot be undefined"),this._inner("metas",E,{single:!0})}note(...E){a(E.length,"Missing notes");for(const A of E)a(A&&typeof A=="string","Notes must be non-empty strings");return this._inner("notes",E)}only(E=!0){return a(typeof E=="boolean","Invalid mode:",E),this.$_setFlag("only",E)}optional(){return this.presence("optional")}prefs(E){a(E,"Missing preferences"),a(E.context===void 0,"Cannot override context"),a(E.externals===void 0,"Cannot override externals"),a(E.warnings===void 0,"Cannot override warnings"),a(E.debug===void 0,"Cannot override debug"),l.checkPreferences(E);const A=this.clone();return A._preferences=l.preferences(A._preferences,E),A}presence(E){return a(["optional","required","forbidden"].includes(E),"Unknown presence mode",E),this.$_setFlag("presence",E)}raw(E=!0){return this.$_setFlag("result",E?"raw":void 0)}result(E){return a(["raw","strip"].includes(E),"Unknown result mode",E),this.$_setFlag("result",E)}required(){return this.presence("required")}strict(E){const A=this.clone(),N=E!==void 0&&!E;return A._preferences=l.preferences(A._preferences,{convert:N}),A}strip(E=!0){return this.$_setFlag("result",E?"strip":void 0)}tag(...E){a(E.length,"Missing tags");for(const A of E)a(A&&typeof A=="string","Tags must be non-empty strings");return this._inner("tags",E)}unit(E){return a(E&&typeof E=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",E)}valid(...E){l.verifyFlat(E,"valid");const A=this.allow(...E);return A.$_setFlag("only",!!A._valids,{clone:!1}),A}when(E,A){const N=this.clone();N.$_terms.whens||(N.$_terms.whens=[]);const k=f.when(N,E,A);if(!["any","link"].includes(N.type)){const L=k.is?[k]:k.switch;for(const M of L)a(!M.then||M.then.type==="any"||M.then.type===N.type,"Cannot combine",N.type,"with",M.then&&M.then.type),a(!M.otherwise||M.otherwise.type==="any"||M.otherwise.type===N.type,"Cannot combine",N.type,"with",M.otherwise&&M.otherwise.type)}return N.$_terms.whens.push(k),N.$_mutateRebuild()}cache(E){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const A=this.clone();return A._cache=E||r.provider.provision(),A.$_temp.ruleset=!1,A}clone(){const E=Object.create(Object.getPrototypeOf(this));return this._assign(E)}concat(E){a(l.isSchema(E),"Invalid schema object"),a(this.type==="any"||E.type==="any"||E.type===this.type,"Cannot merge type",this.type,"with another type:",E.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!E._inRuleset(),"Cannot concatenate a schema with open ruleset");let A=this.clone();if(this.type==="any"&&E.type!=="any"){const N=E.clone();for(const k of Object.keys(A))k!=="type"&&(N[k]=A[k]);A=N}A._ids.concat(E._ids),A._refs.register(E,T.toSibling),A._preferences=A._preferences?l.preferences(A._preferences,E._preferences):E._preferences,A._valids=w.merge(A._valids,E._valids,E._invalids),A._invalids=w.merge(A._invalids,E._invalids,E._valids);for(const N of E._singleRules.keys())A._singleRules.has(N)&&(A._rules=A._rules.filter((k=>k.keep||k.name!==N)),A._singleRules.delete(N));for(const N of E._rules)E._definition.rules[N.method].multi||A._singleRules.set(N.name,N),A._rules.push(N);if(A._flags.empty&&E._flags.empty){A._flags.empty=A._flags.empty.concat(E._flags.empty);const N=Object.assign({},E._flags);delete N.empty,y(A._flags,N)}else if(E._flags.empty){A._flags.empty=E._flags.empty;const N=Object.assign({},E._flags);delete N.empty,y(A._flags,N)}else y(A._flags,E._flags);for(const N in E.$_terms){const k=E.$_terms[N];k?A.$_terms[N]?A.$_terms[N]=A.$_terms[N].concat(k):A.$_terms[N]=k.slice():A.$_terms[N]||(A.$_terms[N]=k)}return this.$_root._tracer&&this.$_root._tracer._combine(A,[this,E]),A.$_mutateRebuild()}extend(E){return a(!E.base,"Cannot extend type with another base"),o.type(this,E)}extract(E){return E=Array.isArray(E)?E:E.split("."),this._ids.reach(E)}fork(E,A){a(!this._inRuleset(),"Cannot fork inside a ruleset");let N=this;for(let k of[].concat(E))k=Array.isArray(k)?k:k.split("."),N=N._ids.fork(k,A,N);return N.$_temp.ruleset=!1,N}rule(E){const A=this._definition;l.assertOptions(E,Object.keys(A.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const N=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(N>=0&&N<this._rules.length,"Cannot apply rules to empty ruleset");const k=this.clone();for(let L=N;L<k._rules.length;++L){const M=k._rules[L],H=b(M);for(const $ in E)A.modifiers[$](H,E[$]),a(H.name===M.name,"Cannot change rule name");k._rules[L]=H,k._singleRules.get(H.name)===M&&k._singleRules.set(H.name,H)}return k.$_temp.ruleset=!1,k.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const E=this.clone();return E.$_temp.ruleset=E._rules.length,E}get $(){return this.ruleset}tailor(E){E=[].concat(E),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let A=this;if(this.$_terms.alterations)for(const{target:N,adjuster:k}of this.$_terms.alterations)E.includes(N)&&(A=k(A),a(l.isSchema(A),"Alteration adjuster for",N,"failed to return a schema object"));return A=A.$_modify({each:N=>N.tailor(E),ref:!1}),A.$_temp.ruleset=!1,A.$_mutateRebuild()}tracer(){return x.location?x.location(this):this}validate(E,A){return v.entry(E,this,A)}validateAsync(E,A){return v.entryAsync(E,this,A)}$_addRule(E){typeof E=="string"&&(E={name:E}),a(E&&typeof E=="object","Invalid options"),a(E.name&&typeof E.name=="string","Invalid rule name");for(const M in E)a(M[0]!=="_","Cannot set private rule properties");const A=Object.assign({},E);A._resolve=[],A.method=A.method||A.name;const N=this._definition.rules[A.method],k=A.args;a(N,"Unknown rule",A.method);const L=this.clone();if(k){a(Object.keys(k).length===1||Object.keys(k).length===this._definition.rules[A.name].args.length,"Invalid rule definition for",this.type,A.name);for(const M in k){let H=k[M];if(N.argsByName){const $=N.argsByName.get(M);if($.ref&&l.isResolvable(H))A._resolve.push(M),L.$_mutateRegister(H);else if($.normalize&&(H=$.normalize(H),k[M]=H),$.assert){const q=l.validateArg(H,M,$);a(!q,q,"or reference")}}H!==void 0?k[M]=H:delete k[M]}}return N.multi||(L._ruleRemove(A.name,{clone:!1}),L._singleRules.set(A.name,A)),L.$_temp.ruleset===!1&&(L.$_temp.ruleset=null),N.priority?L._rules.unshift(A):L._rules.push(A),L}$_compile(E,A){return f.schema(this.$_root,E,A)}$_createError(E,A,N,k,L,M={}){const H=M.flags!==!1?this._flags:{},$=M.messages?c.merge(this._definition.messages,M.messages):this._definition.messages;return new u.Report(E,A,N,H,$,k,L)}$_getFlag(E){return this._flags[E]}$_getRule(E){return this._singleRules.get(E)}$_mapLabels(E){return E=Array.isArray(E)?E:E.split("."),this._ids.labels(E)}$_match(E,A,N,k){(N=Object.assign({},N)).abortEarly=!0,N._externals=!1,A.snapshot();const L=!v.validate(E,this,A,N,k).errors;return A.restore(),L}$_modify(E){return l.assertOptions(E,["each","once","ref","schema"]),m.schema(this,E)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(E,{source:A,name:N,path:k,key:L})=>{const M=this._definition[A][N]&&this._definition[A][N].register;M!==!1&&this.$_mutateRegister(E,{family:M,key:L})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(E,{family:A,key:N}={}){this._refs.register(E,A),this._ids.register(E,{key:N})}$_property(E){return this._definition.properties[E]}$_reach(E){return this._ids.reach(E)}$_rootReferences(){return this._refs.roots()}$_setFlag(E,A,N={}){a(E[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const k=this._definition.flags[E]||{};if(_(A,k.default)&&(A=void 0),_(A,this._flags[E]))return this;const L=N.clone!==!1?this.clone():this;return A!==void 0?(L._flags[E]=A,L.$_mutateRegister(A)):delete L._flags[E],E[0]!=="_"&&(L.$_temp.ruleset=!1),L}$_parent(E,...A){return this[E][l.symbols.parent].call(this,...A)}$_validate(E,A,N){return v.validate(E,this,A,N)}_assign(E){E.type=this.type,E.$_root=this.$_root,E.$_temp=Object.assign({},this.$_temp),E.$_temp.whens={},E._ids=this._ids.clone(),E._preferences=this._preferences,E._valids=this._valids&&this._valids.clone(),E._invalids=this._invalids&&this._invalids.clone(),E._rules=this._rules.slice(),E._singleRules=b(this._singleRules,{shallow:!0}),E._refs=this._refs.clone(),E._flags=Object.assign({},this._flags),E._cache=null,E.$_terms={};for(const A in this.$_terms)E.$_terms[A]=this.$_terms[A]?this.$_terms[A].slice():null;E.$_super={};for(const A in this.$_super)E.$_super[A]=this._super[A].bind(E);return E}_bare(){const E=this.clone();E._reset();const A=E._definition.terms;for(const N in A){const k=A[N];E.$_terms[N]=k.init}return E.$_mutateRebuild()}_default(E,A,N={}){return l.assertOptions(N,"literal"),a(A!==void 0,"Missing",E,"value"),a(typeof A=="function"||!N.literal,"Only function value supports literal option"),typeof A=="function"&&N.literal&&(A={[l.symbols.literal]:!0,literal:A}),this.$_setFlag(E,A)}_generate(E,A,N){if(!this.$_terms.whens)return{schema:this};const k=[],L=[];for(let $=0;$<this.$_terms.whens.length;++$){const q=this.$_terms.whens[$];if(q.concat){k.push(q.concat),L.push(`${$}.concat`);continue}const z=q.ref?q.ref.resolve(E,A,N):E,Z=q.is?[q]:q.switch,ae=L.length;for(let K=0;K<Z.length;++K){const{is:V,then:se,otherwise:W}=Z[K],ee=`${$}${q.switch?"."+K:""}`;if(V.$_match(z,A.nest(V,`${ee}.is`),N)){if(se){const te=A.localize([...A.path,`${ee}.then`],A.ancestors,A.schemas),{schema:pe,id:Ie}=se._generate(E,te,N);k.push(pe),L.push(`${ee}.then${Ie?`(${Ie})`:""}`);break}}else if(W){const te=A.localize([...A.path,`${ee}.otherwise`],A.ancestors,A.schemas),{schema:pe,id:Ie}=W._generate(E,te,N);k.push(pe),L.push(`${ee}.otherwise${Ie?`(${Ie})`:""}`);break}}if(q.break&&L.length>ae)break}const M=L.join(", ");if(A.mainstay.tracer.debug(A,"rule","when",M),!M)return{schema:this};if(!A.mainstay.tracer.active&&this.$_temp.whens[M])return{schema:this.$_temp.whens[M],id:M};let H=this;this._definition.generate&&(H=this._definition.generate(this,E,A,N));for(const $ of k)H=H.concat($);return this.$_root._tracer&&this.$_root._tracer._combine(H,[this,...k]),this.$_temp.whens[M]=H,{schema:H,id:M}}_inner(E,A,N={}){a(!this._inRuleset(),`Cannot set ${E} inside a ruleset`);const k=this.clone();return k.$_terms[E]&&!N.override||(k.$_terms[E]=[]),N.single?k.$_terms[E].push(A):k.$_terms[E].push(...A),k.$_temp.ruleset=!1,k}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(E,A={}){if(!this._singleRules.has(E))return this;const N=A.clone!==!1?this.clone():this;N._singleRules.delete(E);const k=[];for(let L=0;L<N._rules.length;++L){const M=N._rules[L];M.name!==E||M.keep?k.push(M):N._inRuleset()&&L<N.$_temp.ruleset&&--N.$_temp.ruleset}return N._rules=k,N}_values(E,A){l.verifyFlat(E,A.slice(1,-1));const N=this.clone(),k=E[0]===l.symbols.override;if(k&&(E=E.slice(1)),!N[A]&&E.length?N[A]=new w:k&&(N[A]=E.length?new w:null,N.$_mutateRebuild()),!N[A])return N;k&&N[A].override();for(const L of E){a(L!==void 0,"Cannot call allow/valid/invalid with undefined"),a(L!==l.symbols.override,"Override must be the first value");const M=A==="_invalids"?"_valids":"_invalids";N[M]&&(N[M].remove(L),N[M].length||(a(A==="_valids"||!N._flags.only,"Setting invalid value",L,"leaves schema rejecting all values due to previous valid rule"),N[M]=null)),N[A].add(L,N._refs)}return N}}};C.Base.prototype[l.symbols.any]={version:l.version,compile:f.compile,root:"$_root"},C.Base.prototype.isImmutable=!0,C.Base.prototype.deny=C.Base.prototype.invalid,C.Base.prototype.disallow=C.Base.prototype.invalid,C.Base.prototype.equal=C.Base.prototype.valid,C.Base.prototype.exist=C.Base.prototype.required,C.Base.prototype.not=C.Base.prototype.invalid,C.Base.prototype.options=C.Base.prototype.prefs,C.Base.prototype.preferences=C.Base.prototype.prefs,d.exports=new C.Base},8652:(d,h,p)=>{const a=p(375),b=p(8571),_=p(8160),y={max:1e3,supported:new Set(["undefined","boolean","number","string"])};h.provider={provision:r=>new y.Cache(r)},y.Cache=class{constructor(r={}){_.assertOptions(r,["max"]),a(r.max===void 0||r.max&&r.max>0&&isFinite(r.max),"Invalid max cache size"),this._max=r.max||y.max,this._map=new Map,this._list=new y.List}get length(){return this._map.size}set(r,l){if(r!==null&&!y.supported.has(typeof r))return;let f=this._map.get(r);if(f)return f.value=l,void this._list.first(f);f=this._list.unshift({key:r,value:l}),this._map.set(r,f),this._compact()}get(r){const l=this._map.get(r);if(l)return this._list.first(l),b(l.value)}_compact(){if(this._map.size>this._max){const r=this._list.pop();this._map.delete(r.key)}}},y.List=class{constructor(){this.tail=null,this.head=null}unshift(r){return r.next=null,r.prev=this.head,this.head&&(this.head.next=r),this.head=r,this.tail||(this.tail=r),r}first(r){r!==this.head&&(this._remove(r),this.unshift(r))}pop(){return this._remove(this.tail)}_remove(r){const{next:l,prev:f}=r;return l.prev=f,f&&(f.next=l),r===this.tail&&(this.tail=l),r.prev=null,r.next=null,r}}},8160:(d,h,p)=>{const a=p(375),b=p(7916),_=p(5934);let y,r;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};h.version=_.version,h.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},h.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},h.assertOptions=function(f,u,o="Options"){a(f&&typeof f=="object"&&!Array.isArray(f),"Options must be of type object");const g=Object.keys(f).filter((c=>!u.includes(c)));a(g.length===0,`${o} contain unknown keys: ${g}`)},h.checkPreferences=function(f){r=r||p(3378);const u=r.preferences.validate(f);if(u.error)throw new b([u.error.details[0].message])},h.compare=function(f,u,o){switch(o){case"=":return f===u;case">":return f>u;case"<":return f<u;case">=":return f>=u;case"<=":return f<=u}},h.default=function(f,u){return f===void 0?u:f},h.isIsoDate=function(f){return l.isoDate.test(f)},h.isNumber=function(f){return typeof f=="number"&&!isNaN(f)},h.isResolvable=function(f){return!!f&&(f[h.symbols.ref]||f[h.symbols.template])},h.isSchema=function(f,u={}){const o=f&&f[h.symbols.any];return!!o&&(a(u.legacy||o.version===h.version,"Cannot mix different versions of joi schemas"),!0)},h.isValues=function(f){return f[h.symbols.values]},h.limit=function(f){return Number.isSafeInteger(f)&&f>=0},h.preferences=function(f,u){y=y||p(6914),f=f||{},u=u||{};const o=Object.assign({},f,u);return u.errors&&f.errors&&(o.errors=Object.assign({},f.errors,u.errors),o.errors.wrap=Object.assign({},f.errors.wrap,u.errors.wrap)),u.messages&&(o.messages=y.compile(u.messages,f.messages)),delete o[h.symbols.prefs],o},h.tryWithPath=function(f,u,o={}){try{return f()}catch(g){throw g.path!==void 0?g.path=u+"."+g.path:g.path=u,o.append&&(g.message=`${g.message} (${g.path})`),g}},h.validateArg=function(f,u,{assert:o,message:g}){if(h.isSchema(o)){const c=o.validate(f);return c.error?c.error.message:void 0}if(!o(f))return u?`${u} ${g}`:g},h.verifyFlat=function(f,u){for(const o of f)a(!Array.isArray(o),"Method no longer accepts array arguments:",u)}},3292:(d,h,p)=>{const a=p(375),b=p(8160),_=p(6133),y={};h.schema=function(r,l,f={}){b.assertOptions(f,["appendPath","override"]);try{return y.schema(r,l,f)}catch(u){throw f.appendPath&&u.path!==void 0&&(u.message=`${u.message} (${u.path})`),u}},y.schema=function(r,l,f){a(l!==void 0,"Invalid undefined schema"),Array.isArray(l)&&(a(l.length,"Invalid empty array schema"),l.length===1&&(l=l[0]));const u=(o,...g)=>f.override!==!1?o.valid(r.override,...g):o.valid(...g);if(y.simple(l))return u(r,l);if(typeof l=="function")return r.custom(l);if(a(typeof l=="object","Invalid schema content:",typeof l),b.isResolvable(l))return u(r,l);if(b.isSchema(l))return l;if(Array.isArray(l)){for(const o of l)if(!y.simple(o))return r.alternatives().try(...l);return u(r,...l)}return l instanceof RegExp?r.string().regex(l):l instanceof Date?u(r.date(),l):(a(Object.getPrototypeOf(l)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),r.object().keys(l))},h.ref=function(r,l){return _.isRef(r)?r:_.create(r,l)},h.compile=function(r,l,f={}){b.assertOptions(f,["legacy"]);const u=l&&l[b.symbols.any];if(u)return a(f.legacy||u.version===b.version,"Cannot mix different versions of joi schemas:",u.version,b.version),l;if(typeof l!="object"||!f.legacy)return h.schema(r,l,{appendPath:!0});const o=y.walk(l);return o?o.compile(o.root,l):h.schema(r,l,{appendPath:!0})},y.walk=function(r){if(typeof r!="object")return null;if(Array.isArray(r)){for(const f of r){const u=y.walk(f);if(u)return u}return null}const l=r[b.symbols.any];if(l)return{root:r[l.root],compile:l.compile};a(Object.getPrototypeOf(r)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const f in r){const u=y.walk(r[f]);if(u)return u}return null},y.simple=function(r){return r===null||["boolean","string","number"].includes(typeof r)},h.when=function(r,l,f){if(f===void 0&&(a(l&&typeof l=="object","Missing options"),f=l,l=_.create(".")),Array.isArray(f)&&(f={switch:f}),b.assertOptions(f,["is","not","then","otherwise","switch","break"]),b.isSchema(l))return a(f.is===void 0,'"is" can not be used with a schema condition'),a(f.not===void 0,'"not" can not be used with a schema condition'),a(f.switch===void 0,'"switch" can not be used with a schema condition'),y.condition(r,{is:l,then:f.then,otherwise:f.otherwise,break:f.break});if(a(_.isRef(l)||typeof l=="string","Invalid condition:",l),a(f.not===void 0||f.is===void 0,'Cannot combine "is" with "not"'),f.switch===void 0){let o=f;f.not!==void 0&&(o={is:f.not,then:f.otherwise,otherwise:f.then,break:f.break});let g=o.is!==void 0?r.$_compile(o.is):r.$_root.invalid(null,!1,0,"").required();return a(o.then!==void 0||o.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(o.break===void 0||o.then===void 0||o.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),f.is===void 0||_.isRef(f.is)||b.isSchema(f.is)||(g=g.required()),y.condition(r,{ref:h.ref(l),is:g,then:o.then,otherwise:o.otherwise,break:o.break})}a(Array.isArray(f.switch),'"switch" must be an array'),a(f.is===void 0,'Cannot combine "switch" with "is"'),a(f.not===void 0,'Cannot combine "switch" with "not"'),a(f.then===void 0,'Cannot combine "switch" with "then"');const u={ref:h.ref(l),switch:[],break:f.break};for(let o=0;o<f.switch.length;++o){const g=f.switch[o],c=o===f.switch.length-1;b.assertOptions(g,c?["is","then","otherwise"]:["is","then"]),a(g.is!==void 0,'Switch statement missing "is"'),a(g.then!==void 0,'Switch statement missing "then"');const m={is:r.$_compile(g.is),then:r.$_compile(g.then)};if(_.isRef(g.is)||b.isSchema(g.is)||(m.is=m.is.required()),c){a(f.otherwise===void 0||g.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const T=f.otherwise!==void 0?f.otherwise:g.otherwise;T!==void 0&&(a(u.break===void 0,"Cannot specify both otherwise and break"),m.otherwise=r.$_compile(T))}u.switch.push(m)}return u},y.condition=function(r,l){for(const f of["then","otherwise"])l[f]===void 0?delete l[f]:l[f]=r.$_compile(l[f]);return l}},6354:(d,h,p)=>{const a=p(5688),b=p(8160),_=p(3328);h.Report=class{constructor(y,r,l,f,u,o,g){if(this.code=y,this.flags=f,this.messages=u,this.path=o.path,this.prefs=g,this.state=o,this.value=r,this.message=null,this.template=null,this.local=l||{},this.local.label=h.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const c=this.path[this.path.length-1];typeof c!="object"&&(this.local.key=c)}}_setTemplate(y){if(this.template=y,!this.flags.label&&this.path.length===0){const r=this._template(this.template,"root");r&&(this.local.label=r)}}toString(){if(this.message)return this.message;const y=this.code;if(!this.prefs.errors.render)return this.code;const r=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return r===void 0?`Error code "${y}" is not defined, your custom type is missing the correct messages definition`:(this.message=r.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(y,r){return h.template(this.value,y,r||this.code,this.state,this.prefs)}},h.path=function(y){let r="";for(const l of y)typeof l!="object"&&(typeof l=="string"?(r&&(r+="."),r+=l):r+=`[${l}]`);return r},h.template=function(y,r,l,f,u){if(!r)return;if(_.isTemplate(r))return l!=="root"?r:null;let o=u.errors.language;if(b.isResolvable(o)&&(o=o.resolve(y,f,u)),o&&r[o]){if(r[o][l]!==void 0)return r[o][l];if(r[o]["*"]!==void 0)return r[o]["*"]}return r[l]?r[l]:r["*"]},h.label=function(y,r,l,f){if(!l.errors.label)return"";if(y.label)return y.label;let u=r.path;return l.errors.label==="key"&&r.path.length>1&&(u=r.path.slice(-1)),h.path(u)||h.template(null,l.messages,"root",r,l)||f&&h.template(null,f,"root",r,l)||"value"},h.process=function(y,r,l){if(!y)return null;const{override:f,message:u,details:o}=h.details(y);if(f)return f;if(l.errors.stack)return new h.ValidationError(u,o,r);const g=Error.stackTraceLimit;Error.stackTraceLimit=0;const c=new h.ValidationError(u,o,r);return Error.stackTraceLimit=g,c},h.details=function(y,r={}){let l=[];const f=[];for(const u of y){if(u instanceof Error){if(r.override!==!1)return{override:u};const g=u.toString();l.push(g),f.push({message:g,type:"override",context:{error:u}});continue}const o=u.toString();l.push(o),f.push({message:o,path:u.path.filter((g=>typeof g!="object")),type:u.code,context:u.local})}return l.length>1&&(l=[...new Set(l)]),{message:l.join(". "),details:f}},h.ValidationError=class extends Error{constructor(y,r,l){super(y),this._original=l,this.details=r}static isError(y){return y instanceof h.ValidationError}},h.ValidationError.prototype.isJoi=!0,h.ValidationError.prototype.name="ValidationError",h.ValidationError.prototype.annotate=a.error},8901:(d,h,p)=>{const a=p(375),b=p(8571),_=p(8160),y=p(6914),r={};h.type=function(l,f){const u=Object.getPrototypeOf(l),o=b(u),g=l._assign(Object.create(o)),c=Object.assign({},f);delete c.base,o._definition=c;const m=u._definition||{};c.messages=y.merge(m.messages,c.messages),c.properties=Object.assign({},m.properties,c.properties),g.type=c.type,c.flags=Object.assign({},m.flags,c.flags);const T=Object.assign({},m.terms);if(c.terms)for(const C in c.terms){const E=c.terms[C];a(g.$_terms[C]===void 0,"Invalid term override for",c.type,C),g.$_terms[C]=E.init,T[C]=E}c.terms=T,c.args||(c.args=m.args),c.prepare=r.prepare(c.prepare,m.prepare),c.coerce&&(typeof c.coerce=="function"&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=r.coerce(c.coerce,m.coerce),c.validate=r.validate(c.validate,m.validate);const x=Object.assign({},m.rules);if(c.rules)for(const C in c.rules){const E=c.rules[C];a(typeof E=="object","Invalid rule definition for",c.type,C);let A=E.method;if(A===void 0&&(A=function(){return this.$_addRule(C)}),A&&(a(!o[C],"Rule conflict in",c.type,C),o[C]=A),a(!x[C],"Rule conflict in",c.type,C),x[C]=E,E.alias){const N=[].concat(E.alias);for(const k of N)o[k]=E.method}E.args&&(E.argsByName=new Map,E.args=E.args.map((N=>(typeof N=="string"&&(N={name:N}),a(!E.argsByName.has(N.name),"Duplicated argument name",N.name),_.isSchema(N.assert)&&(N.assert=N.assert.strict().label(N.name)),E.argsByName.set(N.name,N),N))))}c.rules=x;const v=Object.assign({},m.modifiers);if(c.modifiers)for(const C in c.modifiers){a(!o[C],"Rule conflict in",c.type,C);const E=c.modifiers[C];a(typeof E=="function","Invalid modifier definition for",c.type,C);const A=function(N){return this.rule({[C]:N})};o[C]=A,v[C]=E}if(c.modifiers=v,c.overrides){o._super=u,g.$_super={};for(const C in c.overrides)a(u[C],"Cannot override missing",C),c.overrides[C][_.symbols.parent]=u[C],g.$_super[C]=u[C].bind(g);Object.assign(o,c.overrides)}c.cast=Object.assign({},m.cast,c.cast);const w=Object.assign({},m.manifest,c.manifest);return w.build=r.build(c.manifest&&c.manifest.build,m.manifest&&m.manifest.build),c.manifest=w,c.rebuild=r.rebuild(c.rebuild,m.rebuild),g},r.build=function(l,f){return l&&f?function(u,o){return f(l(u,o),o)}:l||f},r.coerce=function(l,f){return l&&f?{from:l.from&&f.from?[...new Set([...l.from,...f.from])]:null,method(u,o){let g;if((!f.from||f.from.includes(typeof u))&&(g=f.method(u,o),g)){if(g.errors||g.value===void 0)return g;u=g.value}if(!l.from||l.from.includes(typeof u)){const c=l.method(u,o);if(c)return c}return g}}:l||f},r.prepare=function(l,f){return l&&f?function(u,o){const g=l(u,o);if(g){if(g.errors||g.value===void 0)return g;u=g.value}return f(u,o)||g}:l||f},r.rebuild=function(l,f){return l&&f?function(u){f(u),l(u)}:l||f},r.validate=function(l,f){return l&&f?function(u,o){const g=f(u,o);if(g){if(g.errors&&(!Array.isArray(g.errors)||g.errors.length))return g;u=g.value}return l(u,o)||g}:l||f}},5107:(d,h,p)=>{const a=p(375),b=p(8571),_=p(8652),y=p(8160),r=p(3292),l=p(6354),f=p(8901),u=p(9708),o=p(6133),g=p(3328),c=p(1152);let m;const T={types:{alternatives:p(4946),any:p(8068),array:p(546),boolean:p(4937),date:p(7500),function:p(390),link:p(8785),number:p(3832),object:p(8966),string:p(7417),symbol:p(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const x={_types:new Set(Object.keys(T.types))};for(const v of x._types)x[v]=function(...w){return a(!w.length||["alternatives","link","object"].includes(v),"The",v,"type does not allow arguments"),T.generate(this,T.types[v],w)};for(const v of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])x[v]=function(...w){return this.any()[v](...w)};Object.assign(x,T.methods);for(const v in T.aliases){const w=T.aliases[v];x[v]=x[w]}return x.x=x.expression,c.setup&&c.setup(x),x}};T.methods={ValidationError:l.ValidationError,version:y.version,cache:_.provider,assert(x,v,...w){T.assert(x,v,!0,w)},attempt:(x,v,...w)=>T.assert(x,v,!1,w),build(x){return a(typeof u.build=="function","Manifest functionality disabled"),u.build(this,x)},checkPreferences(x){y.checkPreferences(x)},compile(x,v){return r.compile(this,x,v)},defaults(x){a(typeof x=="function","modifier must be a function");const v=Object.assign({},this);for(const w of v._types){const C=x(v[w]());a(y.isSchema(C),"modifier must return a valid schema object"),v[w]=function(...E){return T.generate(this,C,E)}}return v},expression:(...x)=>new g(...x),extend(...x){y.verifyFlat(x,"extend"),m=m||p(3378),a(x.length,"You need to provide at least one extension"),this.assert(x,m.extensions);const v=Object.assign({},this);v._types=new Set(v._types);for(let w of x){typeof w=="function"&&(w=w(v)),this.assert(w,m.extension);const C=T.expandExtension(w,v);for(const E of C){a(v[E.type]===void 0||v._types.has(E.type),"Cannot override name",E.type);const A=E.base||this.any(),N=f.type(A,E);v._types.add(E.type),v[E.type]=function(...k){return T.generate(this,N,k)}}}return v},isError:l.ValidationError.isError,isExpression:g.isTemplate,isRef:o.isRef,isSchema:y.isSchema,in:(...x)=>o.in(...x),override:y.symbols.override,ref:(...x)=>o.create(...x),types(){const x={};for(const v of this._types)x[v]=this[v]();for(const v in T.aliases)x[v]=this[v]();return x}},T.assert=function(x,v,w,C){const E=C[0]instanceof Error||typeof C[0]=="string"?C[0]:null,A=E!==null?C[1]:C[0],N=v.validate(x,y.preferences({errors:{stack:!0}},A||{}));let k=N.error;if(!k)return N.value;if(E instanceof Error)throw E;const L=w&&typeof k.annotate=="function"?k.annotate():k.message;throw k instanceof l.ValidationError==0&&(k=b(k)),k.message=E?`${E} ${L}`:L,k},T.generate=function(x,v,w){return a(x,"Must be invoked on a Joi instance."),v.$_root=x,v._definition.args&&w.length?v._definition.args(v,...w):v},T.expandExtension=function(x,v){if(typeof x.type=="string")return[x];const w=[];for(const C of v._types)if(x.type.test(C)){const E=Object.assign({},x);E.type=C,E.base=v[C](),w.push(E)}return w},d.exports=T.root()},6914:(d,h,p)=>{const a=p(375),b=p(8571),_=p(3328);h.compile=function(y,r){if(typeof y=="string")return a(!r,"Cannot set single message string"),new _(y);if(_.isTemplate(y))return a(!r,"Cannot set single message template"),y;a(typeof y=="object"&&!Array.isArray(y),"Invalid message options"),r=r?b(r):{};for(let l in y){const f=y[l];if(l==="root"||_.isTemplate(f)){r[l]=f;continue}if(typeof f=="string"){r[l]=new _(f);continue}a(typeof f=="object"&&!Array.isArray(f),"Invalid message for",l);const u=l;for(l in r[u]=r[u]||{},f){const o=f[l];l==="root"||_.isTemplate(o)?r[u][l]=o:(a(typeof o=="string","Invalid message for",l,"in",u),r[u][l]=new _(o))}}return r},h.decompile=function(y){const r={};for(let l in y){const f=y[l];if(l==="root"){r.root=f;continue}if(_.isTemplate(f)){r[l]=f.describe({compact:!0});continue}const u=l;for(l in r[u]={},f){const o=f[l];l!=="root"?r[u][l]=o.describe({compact:!0}):r[u].root=o}}return r},h.merge=function(y,r){if(!y)return h.compile(r);if(!r)return y;if(typeof r=="string")return new _(r);if(_.isTemplate(r))return r;const l=b(y);for(let f in r){const u=r[f];if(f==="root"||_.isTemplate(u)){l[f]=u;continue}if(typeof u=="string"){l[f]=new _(u);continue}a(typeof u=="object"&&!Array.isArray(u),"Invalid message for",f);const o=f;for(f in l[o]=l[o]||{},u){const g=u[f];f==="root"||_.isTemplate(g)?l[o][f]=g:(a(typeof g=="string","Invalid message for",f,"in",o),l[o][f]=new _(g))}}return l}},2294:(d,h,p)=>{const a=p(375),b=p(8160),_=p(6133),y={};h.Ids=y.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const r=new y.Ids;return r._byId=new Map(this._byId),r._byKey=new Map(this._byKey),r._schemaChain=this._schemaChain,r}concat(r){r._schemaChain&&(this._schemaChain=!0);for(const[l,f]of r._byId.entries())a(!this._byKey.has(l),"Schema id conflicts with existing key:",l),this._byId.set(l,f);for(const[l,f]of r._byKey.entries())a(!this._byId.has(l),"Schema key conflicts with existing id:",l),this._byKey.set(l,f)}fork(r,l,f){const u=this._collect(r);u.push({schema:f});const o=u.shift();let g={id:o.id,schema:l(o.schema)};a(b.isSchema(g.schema),"adjuster function failed to return a joi schema type");for(const c of u)g={id:c.id,schema:y.fork(c.schema,g.id,g.schema)};return g.schema}labels(r,l=[]){const f=r[0],u=this._get(f);if(!u)return[...l,...r].join(".");const o=r.slice(1);return l=[...l,u.schema._flags.label||f],o.length?u.schema._ids.labels(o,l):l.join(".")}reach(r,l=[]){const f=r[0],u=this._get(f);a(u,"Schema does not contain path",[...l,...r].join("."));const o=r.slice(1);return o.length?u.schema._ids.reach(o,[...l,f]):u.schema}register(r,{key:l}={}){if(!r||!b.isSchema(r))return;(r.$_property("schemaChain")||r._ids._schemaChain)&&(this._schemaChain=!0);const f=r._flags.id;if(f){const u=this._byId.get(f);a(!u||u.schema===r,"Cannot add different schemas with the same id:",f),a(!this._byKey.has(f),"Schema id conflicts with existing key:",f),this._byId.set(f,{schema:r,id:f})}l&&(a(!this._byKey.has(l),"Schema already contains key:",l),a(!this._byId.has(l),"Schema key conflicts with existing id:",l),this._byKey.set(l,{schema:r,id:l}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(r,l=[],f=[]){const u=r[0],o=this._get(u);a(o,"Schema does not contain path",[...l,...r].join(".")),f=[o,...f];const g=r.slice(1);return g.length?o.schema._ids._collect(g,[...l,u],f):f}_get(r){return this._byId.get(r)||this._byKey.get(r)}},y.fork=function(r,l,f){const u=h.schema(r,{each:(o,{key:g})=>{if(l===(o._flags.id||g))return f},ref:!1});return u?u.$_mutateRebuild():r},h.schema=function(r,l){let f;for(const u in r._flags){if(u[0]==="_")continue;const o=y.scan(r._flags[u],{source:"flags",name:u},l);o!==void 0&&(f=f||r.clone(),f._flags[u]=o)}for(let u=0;u<r._rules.length;++u){const o=r._rules[u],g=y.scan(o.args,{source:"rules",name:o.name},l);if(g!==void 0){f=f||r.clone();const c=Object.assign({},o);c.args=g,f._rules[u]=c,f._singleRules.get(o.name)===o&&f._singleRules.set(o.name,c)}}for(const u in r.$_terms){if(u[0]==="_")continue;const o=y.scan(r.$_terms[u],{source:"terms",name:u},l);o!==void 0&&(f=f||r.clone(),f.$_terms[u]=o)}return f},y.scan=function(r,l,f,u,o){const g=u||[];if(r===null||typeof r!="object")return;let c;if(Array.isArray(r)){for(let m=0;m<r.length;++m){const T=l.source==="terms"&&l.name==="keys"&&r[m].key,x=y.scan(r[m],l,f,[m,...g],T);x!==void 0&&(c=c||r.slice(),c[m]=x)}return c}if(f.schema!==!1&&b.isSchema(r)||f.ref!==!1&&_.isRef(r)){const m=f.each(r,{...l,path:g,key:o});return m===r?void 0:m}for(const m in r){if(m[0]==="_")continue;const T=y.scan(r[m],l,f,[m,...g],o);T!==void 0&&(c=c||Object.assign({},r),c[m]=T)}return c}},6133:(d,h,p)=>{const a=p(375),b=p(8571),_=p(9621),y=p(8160);let r;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};h.create=function(f,u={}){a(typeof f=="string","Invalid reference key:",f),y.assertOptions(u,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!u.prefix||typeof u.prefix=="object","options.prefix must be of type object");const o=Object.assign({},l.defaults,u);delete o.prefix;const g=o.separator,c=l.context(f,g,u.prefix);if(o.type=c.type,f=c.key,o.type==="value")if(c.root&&(a(!g||f[0]!==g,"Cannot specify relative path with root prefix"),o.ancestor="root",f||(f=null)),g&&g===f)f=null,o.ancestor=0;else if(o.ancestor!==void 0)a(!g||!f||f[0]!==g,"Cannot combine prefix with ancestor option");else{const[m,T]=l.ancestor(f,g);T&&(f=f.slice(T))===""&&(f=null),o.ancestor=m}return o.path=g?f===null?[]:f.split(g):[f],new l.Ref(o)},h.in=function(f,u={}){return h.create(f,{...u,in:!0})},h.isRef=function(f){return!!f&&!!f[y.symbols.ref]},l.Ref=class{constructor(f){a(typeof f=="object","Invalid reference construction"),y.assertOptions(f,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(f.separator)||typeof f.separator=="string"&&f.separator.length===1,"Invalid separator"),a(!f.adjust||typeof f.adjust=="function","options.adjust must be a function"),a(!f.map||Array.isArray(f.map),"options.map must be an array"),a(!f.map||!f.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,f),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(f,u,o,g,c={}){return a(!this.in||c.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(o.context,u,c):this.type==="local"?this._resolve(g,u,c):this.ancestor?this.ancestor==="root"?this._resolve(u.ancestors[u.ancestors.length-1],u,c):(a(this.ancestor<=u.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(u.ancestors[this.ancestor-1],u,c)):this._resolve(f,u,c)}_resolve(f,u,o){let g;if(this.type==="value"&&u.mainstay.shadow&&o.shadow!==!1&&(g=u.mainstay.shadow.get(this.absolute(u))),g===void 0&&(g=_(f,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(g=this.adjust(g)),this.map){const c=this.map.get(g);c!==void 0&&(g=c)}return u.mainstay&&u.mainstay.tracer.resolve(u,this,g),g}toString(){return this.display}absolute(f){return[...f.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const f={path:this.path};this.type!=="value"&&(f.type=this.type),this.separator!=="."&&(f.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(f.ancestor=this.ancestor),this.map&&(f.map=[...this.map]);for(const u of["adjust","iterables","render"])this[u]!==null&&this[u]!==void 0&&(f[u]=this[u]);return this.in!==!1&&(f.in=!0),{ref:f}}updateDisplay(){const f=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${f}`);if(!this.separator)return void(this.display=`ref:${f}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${f}`);if(this.ancestor==="root")return void(this.display=`ref:root:${f}`);if(this.ancestor===1)return void(this.display=`ref:${f||".."}`);const u=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${u}${f||""}`}},l.Ref.prototype[y.symbols.ref]=!0,h.build=function(f){return(f=Object.assign({},l.defaults,f)).type==="value"&&f.ancestor===void 0&&(f.ancestor=1),new l.Ref(f)},l.context=function(f,u,o={}){if(f=f.trim(),o){const g=o.global===void 0?"$":o.global;if(g!==u&&f.startsWith(g))return{key:f.slice(g.length),type:"global"};const c=o.local===void 0?"#":o.local;if(c!==u&&f.startsWith(c))return{key:f.slice(c.length),type:"local"};const m=o.root===void 0?"/":o.root;if(m!==u&&f.startsWith(m))return{key:f.slice(m.length),type:"value",root:!0}}return{key:f,type:"value"}},l.ancestor=function(f,u){if(!u)return[1,0];if(f[0]!==u)return[1,0];if(f[1]!==u)return[0,1];let o=2;for(;f[o]===u;)++o;return[o-1,o]},h.toSibling=0,h.toParent=1,h.Manager=class{constructor(){this.refs=[]}register(f,u){if(f)if(u=u===void 0?h.toParent:u,Array.isArray(f))for(const o of f)this.register(o,u);else if(y.isSchema(f))for(const o of f._refs.refs)o.ancestor-u>=0&&this.refs.push({ancestor:o.ancestor-u,root:o.root});else h.isRef(f)&&f.type==="value"&&f.ancestor-u>=0&&this.refs.push({ancestor:f.ancestor-u,root:f.root}),r=r||p(3328),r.isTemplate(f)&&this.register(f.refs(),u)}get length(){return this.refs.length}clone(){const f=new h.Manager;return f.refs=b(this.refs),f}reset(){this.refs=[]}roots(){return this.refs.filter((f=>!f.ancestor)).map((f=>f.root))}}},3378:(d,h,p)=>{const a=p(5107),b={};b.wrap=a.string().min(1).max(2).allow(!1),h.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:b.wrap,array:b.wrap,string:b.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),b.nameRx=/^[a-zA-Z0-9]\w*$/,b.rule=a.object({alias:a.array().items(a.string().pattern(b.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(b.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),h.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(b.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(b.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(b.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(b.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(b.nameRx,b.rule),terms:a.object().pattern(b.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),h.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),b.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},b.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),b.desc.buffer,b.desc.func,b.desc.ref,b.desc.regex,b.desc.special,b.desc.template,b.desc.value,a.link("/")]),b.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),b.desc.buffer,b.desc.func,b.desc.override,b.desc.ref,b.desc.regex,b.desc.template,b.desc.value),b.desc.messages=a.object().pattern(/.+/,[a.string(),b.desc.template,a.object().pattern(/.+/,[a.string(),b.desc.template])]),h.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:b.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),b.desc.ref],wrap:{label:b.wrap,array:b.wrap}},externals:a.boolean(),messages:b.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:b.desc.values,invalid:b.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),b.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:b.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(d,h,p)=>{const a=p(8571),b=p(9621),_=p(8160),y={value:Symbol("value")};d.exports=y.State=class{constructor(r,l,f){this.path=r,this.ancestors=l,this.mainstay=f.mainstay,this.schemas=f.schemas,this.debug=null}localize(r,l=null,f=null){const u=new y.State(r,l,this);return f&&u.schemas&&(u.schemas=[y.schemas(f),...u.schemas]),u}nest(r,l){const f=new y.State(this.path,this.ancestors,this);return f.schemas=f.schemas&&[y.schemas(r),...f.schemas],f.debug=l,f}shadow(r,l){this.mainstay.shadow=this.mainstay.shadow||new y.Shadow,this.mainstay.shadow.set(this.path,r,l)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},y.schemas=function(r){return _.isSchema(r)?{schema:r}:r},y.Shadow=class{constructor(){this._values=null}set(r,l,f){if(!r.length||f==="strip"&&typeof r[r.length-1]=="number")return;this._values=this._values||new Map;let u=this._values;for(let o=0;o<r.length;++o){const g=r[o];let c=u.get(g);c||(c=new Map,u.set(g,c)),u=c}u[y.value]=l}get(r){const l=this.node(r);if(l)return l[y.value]}node(r){if(this._values)return b(this._values,r,{iterables:!0})}override(r,l){if(!this._values)return;const f=r.slice(0,-1),u=r[r.length-1],o=b(this._values,f,{iterables:!0});l?o.set(u,l):o&&o.delete(u)}}},3328:(d,h,p)=>{const a=p(375),b=p(8571),_=p(5277),y=p(1447),r=p(8160),l=p(6354),f=p(6133),u={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};d.exports=u.Template=class{constructor(o,g){if(a(typeof o=="string","Template source must be a string"),a(!o.includes("\0")&&!o.includes(""),"Template source cannot contain reserved control characters"),this.source=o,this.rendered=o,this._template=null,g){const{functions:c,...m}=g;this._settings=Object.keys(m).length?b(m):void 0,this._functions=c,this._functions&&(a(Object.keys(this._functions).every((T=>typeof T=="string")),"Functions keys must be strings"),a(Object.values(this._functions).every((T=>typeof T=="function")),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const o=u.encode(this.source),g=u.split(o);let c=!1;const m=[],T=g.shift();T&&m.push(T);for(const x of g){const v=x[0]!=="{",w=v?"}":"}}",C=x.indexOf(w);if(C===-1||x[1]==="{"){m.push(`{${u.decode(x)}`);continue}let E=x.slice(v?0:1,C);const A=E[0]===":";A&&(E=E.slice(1));const N=this._ref(u.decode(E),{raw:v,wrapped:A});m.push(N),typeof N!="string"&&(c=!0);const k=x.slice(C+w.length);k&&m.push(u.decode(k))}c?this._template=m:this.rendered=m.join("")}static date(o,g){return u.dateFormat[g.dateFormat].call(o)}describe(o={}){if(!this._settings&&o.compact)return this.source;const g={template:this.source};return this._settings&&(g.options=this._settings),this._functions&&(g.functions=this._functions),g}static build(o){return new u.Template(o.template,o.options||o.functions?{...o.options,functions:o.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(o){return!!o&&!!o[r.symbols.template]}refs(){if(!this._template)return;const o=[];for(const g of this._template)typeof g!="string"&&o.push(...g.refs);return o}resolve(o,g,c,m){return this._template&&this._template.length===1?this._part(this._template[0],o,g,c,m,{}):this.render(o,g,c,m)}_part(o,...g){return o.ref?o.ref.resolve(...g):o.formula.evaluate(g)}render(o,g,c,m,T={}){if(!this.isDynamic())return this.rendered;const x=[];for(const v of this._template)if(typeof v=="string")x.push(v);else{const w=this._part(v,o,g,c,m,T),C=u.stringify(w,o,g,c,m,T);if(C!==void 0){const E=v.raw||(T.errors&&T.errors.escapeHtml)===!1?C:_(C);x.push(u.wrap(E,v.wrapped&&c.errors.wrap.label))}}return x.join("")}_ref(o,{raw:g,wrapped:c}){const m=[],T=v=>{const w=f.create(v,this._settings);return m.push(w),C=>{const E=w.resolve(...C);return E!==void 0?E:null}};try{const v=this._functions?{...u.functions,...this._functions}:u.functions;var x=new y.Parser(o,{reference:T,functions:v,constants:u.constants})}catch(v){throw v.message=`Invalid template variable "${o}" fails due to: ${v.message}`,v}if(x.single){if(x.single.type==="reference"){const v=m[0];return{ref:v,raw:g,refs:m,wrapped:c||v.type==="local"&&v.key==="label"}}return u.stringify(x.single.value)}return{formula:x,raw:g,refs:m}}toString(){return this.source}},u.Template.prototype[r.symbols.template]=!0,u.Template.prototype.isImmutable=!0,u.encode=function(o){return o.replace(/\\(\{+)/g,((g,c)=>u.opens.slice(0,c.length))).replace(/\\(\}+)/g,((g,c)=>u.closes.slice(0,c.length)))},u.decode=function(o){return o.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},u.split=function(o){const g=[];let c="";for(let m=0;m<o.length;++m){const T=o[m];if(T==="{"){let x="";for(;m+1<o.length&&o[m+1]==="{";)x+="{",++m;g.push(c),c=x}else c+=T}return g.push(c),g},u.wrap=function(o,g){return g?g.length===1?`${g}${o}${g}`:`${g[0]}${o}${g[1]}`:o},u.stringify=function(o,g,c,m,T,x={}){const v=typeof o,w=m&&m.errors&&m.errors.wrap||{};let C=!1;if(f.isRef(o)&&o.render&&(C=o.in,o=o.resolve(g,c,m,T,{in:o.in,...x})),o===null)return"null";if(v==="string")return u.wrap(o,x.arrayItems&&w.string);if(v==="number"||v==="function"||v==="symbol")return o.toString();if(v!=="object")return JSON.stringify(o);if(o instanceof Date)return u.Template.date(o,m);if(o instanceof Map){const A=[];for(const[N,k]of o.entries())A.push(`${N.toString()} -> ${k.toString()}`);o=A}if(!Array.isArray(o))return o.toString();const E=[];for(const A of o)E.push(u.stringify(A,g,c,m,T,{arrayItems:!0,...x}));return u.wrap(E.join(", "),!C&&w.array)},u.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},u.functions={if:(o,g,c)=>o?g:c,length:o=>typeof o=="string"?o.length:o&&typeof o=="object"?Array.isArray(o)?o.length:Object.keys(o).length:null,msg(o){const[g,c,m,T,x]=this,v=x.messages;if(!v)return"";const w=l.template(g,v[0],o,c,m)||l.template(g,v[1],o,c,m);return w?w.render(g,c,m,T,x):""},number:o=>typeof o=="number"?o:typeof o=="string"?parseFloat(o):typeof o=="boolean"?o?1:0:o instanceof Date?o.getTime():null}},4946:(d,h,p)=>{const a=p(375),b=p(1687),_=p(8068),y=p(8160),r=p(3292),l=p(6354),f=p(6133),u={};d.exports=_.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:f.toSibling}},args:(o,...g)=>g.length===1&&Array.isArray(g[0])?o.try(...g[0]):o.try(...g),validate(o,g){const{schema:c,error:m,state:T,prefs:x}=g;if(c._flags.match){const w=[],C=[];for(let A=0;A<c.$_terms.matches.length;++A){const N=c.$_terms.matches[A],k=T.nest(N.schema,`match.${A}`);k.snapshot();const L=N.schema.$_validate(o,k,x);L.errors?(C.push(L.errors),k.restore()):(w.push(L.value),k.commit())}if(w.length===0)return{errors:m("alternatives.any",{details:C.map((A=>l.details(A,{override:!1})))})};if(c._flags.match==="one")return w.length===1?{value:w[0]}:{errors:m("alternatives.one")};if(w.length!==c.$_terms.matches.length)return{errors:m("alternatives.all",{details:C.map((A=>l.details(A,{override:!1})))})};const E=A=>A.$_terms.matches.some((N=>N.schema.type==="object"||N.schema.type==="alternatives"&&E(N.schema)));return E(c)?{value:w.reduce(((A,N)=>b(A,N,{mergeArrays:!1})))}:{value:w[w.length-1]}}const v=[];for(let w=0;w<c.$_terms.matches.length;++w){const C=c.$_terms.matches[w];if(C.schema){const N=T.nest(C.schema,`match.${w}`);N.snapshot();const k=C.schema.$_validate(o,N,x);if(!k.errors)return N.commit(),k;N.restore(),v.push({schema:C.schema,reports:k.errors});continue}const E=C.ref?C.ref.resolve(o,T,x):o,A=C.is?[C]:C.switch;for(let N=0;N<A.length;++N){const k=A[N],{is:L,then:M,otherwise:H}=k,$=`match.${w}${C.switch?"."+N:""}`;if(L.$_match(E,T.nest(L,`${$}.is`),x)){if(M)return M.$_validate(o,T.nest(M,`${$}.then`),x)}else if(H)return H.$_validate(o,T.nest(H,`${$}.otherwise`),x)}}return u.errors(v,g)},rules:{conditional:{method(o,g){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(g.break===void 0,"Cannot use break option with alternatives conditional");const c=this.clone(),m=r.when(c,o,g),T=m.is?[m]:m.switch;for(const x of T)if(x.then&&x.otherwise){c.$_setFlag("_endedSwitch",!0,{clone:!1});break}return c.$_terms.matches.push(m),c.$_mutateRebuild()}},match:{method(o){if(a(["any","one","all"].includes(o),"Invalid alternatives match mode",o),o!=="any")for(const g of this.$_terms.matches)a(g.schema,"Cannot combine match mode",o,"with conditional rules");return this.$_setFlag("match",o)}},try:{method(...o){a(o.length,"Missing alternative schemas"),y.verifyFlat(o,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const g=this.clone();for(const c of o)g.$_terms.matches.push({schema:g.$_compile(c)});return g.$_mutateRebuild()}}},overrides:{label(o){return this.$_parent("label",o).$_modify({each:(g,c)=>c.path[0]!=="is"&&typeof g._flags.label!="string"?g.label(o):void 0,ref:!1})}},rebuild(o){o.$_modify({each:g=>{y.isSchema(g)&&g.type==="array"&&o.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(o,g){if(g.matches)for(const c of g.matches){const{schema:m,ref:T,is:x,not:v,then:w,otherwise:C}=c;o=m?o.try(m):T?o.conditional(T,{is:x,then:w,not:v,otherwise:C,switch:c.switch}):o.conditional(x,{then:w,otherwise:C})}return o}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),u.errors=function(o,{error:g,state:c}){if(!o.length)return{errors:g("alternatives.any")};if(o.length===1)return{errors:o[0].reports};const m=new Set,T=[];for(const{reports:x,schema:v}of o){if(x.length>1)return u.unmatched(o,g);const w=x[0];if(w instanceof l.Report==0)return u.unmatched(o,g);if(w.state.path.length!==c.path.length){T.push({type:v.type,report:w});continue}if(w.code==="any.only"){for(const A of w.local.valids)m.add(A);continue}const[C,E]=w.code.split(".");E!=="base"?T.push({type:v.type,report:w}):w.code==="object.base"?m.add(w.local.type):m.add(C)}return T.length?T.length===1?{errors:T[0].report}:u.unmatched(o,g):{errors:g("alternatives.types",{types:[...m]})}},u.unmatched=function(o,g){const c=[];for(const m of o)c.push(...m.reports);return{errors:g("alternatives.match",l.details(c,{override:!1}))}}},8068:(d,h,p)=>{const a=p(375),b=p(7629),_=p(8160),y=p(6914);d.exports=b.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(r,l){return a(typeof r=="function","Method must be a function"),a(l===void 0||l&&typeof l=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:r,description:l}})},validate(r,l,{method:f}){try{return f(r,l)}catch(u){return l.error("any.custom",{error:u})}},args:["method","description"],multi:!0},messages:{method(r){return this.prefs({messages:r})}},shared:{method(r){a(_.isSchema(r)&&r._flags.id,"Schema must be a schema with an id");const l=this.clone();return l.$_terms.shared=l.$_terms.shared||[],l.$_terms.shared.push(r),l.$_mutateRegister(r),l}},warning:{method(r,l){return a(r&&typeof r=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:r,local:l},warn:!0})},validate:(r,l,{code:f,local:u})=>l.error(f,u),args:["code","local"],multi:!0}},modifiers:{keep(r,l=!0){r.keep=l},message(r,l){r.message=y.compile(l)},warn(r,l=!0){r.warn=l}},manifest:{build(r,l){for(const f in l){const u=l[f];if(["examples","externals","metas","notes","tags"].includes(f))for(const o of u)r=r[f.slice(0,-1)](o);else if(f!=="alterations")if(f!=="whens"){if(f==="shared")for(const o of u)r=r.shared(o)}else for(const o of u){const{ref:g,is:c,not:m,then:T,otherwise:x,concat:v}=o;r=v?r.concat(v):g?r.when(g,{is:c,not:m,then:T,otherwise:x,switch:o.switch,break:o.break}):r.when(c,{then:T,otherwise:x,break:o.break})}else{const o={};for(const{target:g,adjuster:c}of u)o[g]=c;r=r.alter(o)}}return r}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(d,h,p)=>{const a=p(375),b=p(9474),_=p(9621),y=p(8068),r=p(8160),l=p(3292),f={};d.exports=y.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(u,{schema:o,state:g,prefs:c}){if(!Array.isArray(u))return;const m=o.$_getRule("sort");return m?f.sort(o,u,m.args.options,g,c):void 0}},validate(u,{schema:o,error:g}){if(!Array.isArray(u)){if(o._flags.single){const c=[u];return c[r.symbols.arraySingle]=!0,{value:c}}return{errors:g("array.base")}}if(o.$_getRule("items")||o.$_terms.externals)return{value:u.slice()}},rules:{has:{method(u){u=this.$_compile(u,{appendPath:!0});const o=this.$_addRule({name:"has",args:{schema:u}});return o.$_mutateRegister(u),o},validate(u,{state:o,prefs:g,error:c},{schema:m}){const T=[u,...o.ancestors];for(let v=0;v<u.length;++v){const w=o.localize([...o.path,v],T,m);if(m.$_match(u[v],w,g))return u}const x=m._flags.label;return x?c("array.hasKnown",{patternLabel:x}):c("array.hasUnknown",null)},multi:!0},items:{method(...u){r.verifyFlat(u,"items");const o=this.$_addRule("items");for(let g=0;g<u.length;++g){const c=r.tryWithPath((()=>this.$_compile(u[g])),g,{append:!0});o.$_terms.items.push(c)}return o.$_mutateRebuild()},validate(u,{schema:o,error:g,state:c,prefs:m,errorsArray:T}){const x=o.$_terms._requireds.slice(),v=o.$_terms.ordered.slice(),w=[...o.$_terms._inclusions,...x],C=!u[r.symbols.arraySingle];delete u[r.symbols.arraySingle];const E=T();let A=u.length;for(let N=0;N<A;++N){const k=u[N];let L=!1,M=!1;const H=C?N:new Number(N),$=[...c.path,H];if(!o._flags.sparse&&k===void 0){if(E.push(g("array.sparse",{key:H,path:$,pos:N,value:void 0},c.localize($))),m.abortEarly)return E;v.shift();continue}const q=[u,...c.ancestors];for(const K of o.$_terms._exclusions)if(K.$_match(k,c.localize($,q,K),m,{presence:"ignore"})){if(E.push(g("array.excludes",{pos:N,value:k},c.localize($))),m.abortEarly)return E;L=!0,v.shift();break}if(L)continue;if(o.$_terms.ordered.length){if(v.length){const K=v.shift(),V=K.$_validate(k,c.localize($,q,K),m);if(V.errors){if(E.push(...V.errors),m.abortEarly)return E}else if(K._flags.result==="strip")f.fastSplice(u,N),--N,--A;else{if(!o._flags.sparse&&V.value===void 0){if(E.push(g("array.sparse",{key:H,path:$,pos:N,value:void 0},c.localize($))),m.abortEarly)return E;continue}u[N]=V.value}continue}if(!o.$_terms.items.length){if(E.push(g("array.orderedLength",{pos:N,limit:o.$_terms.ordered.length})),m.abortEarly)return E;break}}const z=[];let Z=x.length;for(let K=0;K<Z;++K){const V=c.localize($,q,x[K]);V.snapshot();const se=x[K].$_validate(k,V,m);if(z[K]=se,!se.errors){if(V.commit(),u[N]=se.value,M=!0,f.fastSplice(x,K),--K,--Z,!o._flags.sparse&&se.value===void 0&&(E.push(g("array.sparse",{key:H,path:$,pos:N,value:void 0},c.localize($))),m.abortEarly))return E;break}V.restore()}if(M)continue;const ae=m.stripUnknown&&!!m.stripUnknown.arrays||!1;Z=w.length;for(const K of w){let V;const se=x.indexOf(K);if(se!==-1)V=z[se];else{const W=c.localize($,q,K);if(W.snapshot(),V=K.$_validate(k,W,m),!V.errors){W.commit(),K._flags.result==="strip"?(f.fastSplice(u,N),--N,--A):o._flags.sparse||V.value!==void 0?u[N]=V.value:(E.push(g("array.sparse",{key:H,path:$,pos:N,value:void 0},c.localize($))),L=!0),M=!0;break}W.restore()}if(Z===1){if(ae){f.fastSplice(u,N),--N,--A,M=!0;break}if(E.push(...V.errors),m.abortEarly)return E;L=!0;break}}if(!L&&(o.$_terms._inclusions.length||o.$_terms._requireds.length)&&!M){if(ae){f.fastSplice(u,N),--N,--A;continue}if(E.push(g("array.includes",{pos:N,value:k},c.localize($))),m.abortEarly)return E}}return x.length&&f.fillMissedErrors(o,E,x,u,c,m),v.length&&(f.fillOrderedErrors(o,E,v,u,c,m),E.length||f.fillDefault(v,u,c,m)),E.length?E:u},priority:!0,manifest:!1},length:{method(u){return this.$_addRule({name:"length",args:{limit:u},operator:"="})},validate:(u,o,{limit:g},{name:c,operator:m,args:T})=>r.compare(u.length,g,m)?u:o.error("array."+c,{limit:T.limit,value:u}),args:[{name:"limit",ref:!0,assert:r.limit,message:"must be a positive integer"}]},max:{method(u){return this.$_addRule({name:"max",method:"length",args:{limit:u},operator:"<="})}},min:{method(u){return this.$_addRule({name:"min",method:"length",args:{limit:u},operator:">="})}},ordered:{method(...u){r.verifyFlat(u,"ordered");const o=this.$_addRule("items");for(let g=0;g<u.length;++g){const c=r.tryWithPath((()=>this.$_compile(u[g])),g,{append:!0});f.validateSingle(c,o),o.$_mutateRegister(c),o.$_terms.ordered.push(c)}return o.$_mutateRebuild()}},single:{method(u){const o=u===void 0||!!u;return a(!o||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",o)}},sort:{method(u={}){r.assertOptions(u,["by","order"]);const o={order:u.order||"ascending"};return u.by&&(o.by=l.ref(u.by,{ancestor:0}),a(!o.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:o}})},validate(u,{error:o,state:g,prefs:c,schema:m},{options:T}){const{value:x,errors:v}=f.sort(m,u,T,g,c);if(v)return v;for(let w=0;w<u.length;++w)if(u[w]!==x[w])return o("array.sort",{order:T.order,by:T.by?T.by.key:"value"});return u},convert:!0},sparse:{method(u){const o=u===void 0||!!u;return this._flags.sparse===o?this:(o?this.clone():this.$_addRule("items")).$_setFlag("sparse",o,{clone:!1})}},unique:{method(u,o={}){a(!u||typeof u=="function"||typeof u=="string","comparator must be a function or a string"),r.assertOptions(o,["ignoreUndefined","separator"]);const g={name:"unique",args:{options:o,comparator:u}};if(u)if(typeof u=="string"){const c=r.default(o.separator,".");g.path=c?u.split(c):[u]}else g.comparator=u;return this.$_addRule(g)},validate(u,{state:o,error:g,schema:c},{comparator:m,options:T},{comparator:x,path:v}){const w={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},C=x||b,E=T.ignoreUndefined;for(let A=0;A<u.length;++A){const N=v?_(u[A],v):u[A],k=x?w.custom:w[typeof N];if(a(k,"Failed to find unique map container for type",typeof N),k instanceof Map){const L=k.entries();let M;for(;!(M=L.next()).done;)if(C(M.value[0],N)){const H=o.localize([...o.path,A],[u,...o.ancestors]),$={pos:A,value:u[A],dupePos:M.value[1],dupeValue:u[M.value[1]]};return v&&($.path=m),g("array.unique",$,H)}k.set(N,A)}else{if((!E||N!==void 0)&&k[N]!==void 0){const L={pos:A,value:u[A],dupePos:k[N],dupeValue:u[k[N]]};return v&&(L.path=m),g("array.unique",L,o.localize([...o.path,A],[u,...o.ancestors]))}k[N]=A}}return u},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(u,o)=>new Set(u)}},rebuild(u){u.$_terms._inclusions=[],u.$_terms._exclusions=[],u.$_terms._requireds=[];for(const o of u.$_terms.items)f.validateSingle(o,u),o._flags.presence==="required"?u.$_terms._requireds.push(o):o._flags.presence==="forbidden"?u.$_terms._exclusions.push(o):u.$_terms._inclusions.push(o);for(const o of u.$_terms.ordered)f.validateSingle(o,u)},manifest:{build:(u,o)=>(o.items&&(u=u.items(...o.items)),o.ordered&&(u=u.ordered(...o.ordered)),u)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),f.fillMissedErrors=function(u,o,g,c,m,T){const x=[];let v=0;for(const w of g){const C=w._flags.label;C?x.push(C):++v}x.length?v?o.push(u.$_createError("array.includesRequiredBoth",c,{knownMisses:x,unknownMisses:v},m,T)):o.push(u.$_createError("array.includesRequiredKnowns",c,{knownMisses:x},m,T)):o.push(u.$_createError("array.includesRequiredUnknowns",c,{unknownMisses:v},m,T))},f.fillOrderedErrors=function(u,o,g,c,m,T){const x=[];for(const v of g)v._flags.presence==="required"&&x.push(v);x.length&&f.fillMissedErrors(u,o,x,c,m,T)},f.fillDefault=function(u,o,g,c){const m=[];let T=!0;for(let x=u.length-1;x>=0;--x){const v=u[x],w=[o,...g.ancestors],C=v.$_validate(void 0,g.localize(g.path,w,v),c).value;if(T){if(C===void 0)continue;T=!1}m.unshift(C)}m.length&&o.push(...m)},f.fastSplice=function(u,o){let g=o;for(;g<u.length;)u[g++]=u[g];--u.length},f.validateSingle=function(u,o){(u.type==="array"||u._flags._arrayItems)&&(a(!o._flags.single,"Cannot specify array item with single rule enabled"),o.$_setFlag("_arrayItems",!0,{clone:!1}))},f.sort=function(u,o,g,c,m){const T=g.order==="ascending"?1:-1,x=-1*T,v=T,w=(C,E)=>{let A=f.compare(C,E,x,v);if(A!==null||(g.by&&(C=g.by.resolve(C,c,m),E=g.by.resolve(E,c,m)),A=f.compare(C,E,x,v),A!==null))return A;const N=typeof C;if(N!==typeof E)throw u.$_createError("array.sort.mismatching",o,null,c,m);if(N!=="number"&&N!=="string")throw u.$_createError("array.sort.unsupported",o,{type:N},c,m);return N==="number"?(C-E)*T:C<E?x:v};try{return{value:o.slice().sort(w)}}catch(C){return{errors:C}}},f.compare=function(u,o,g,c){return u===o?0:u===void 0?1:o===void 0?-1:u===null?c:o===null?g:null}},4937:(d,h,p)=>{const a=p(375),b=p(8068),_=p(8160),y=p(2036),r={isBool:function(l){return typeof l=="boolean"}};d.exports=b.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(l,{schema:f}){if(typeof l!="boolean"){if(typeof l=="string"){const u=f._flags.sensitive?l:l.toLowerCase();l=u==="true"||u!=="false"&&l}return typeof l!="boolean"&&(l=f.$_terms.truthy&&f.$_terms.truthy.has(l,null,null,!f._flags.sensitive)||(!f.$_terms.falsy||!f.$_terms.falsy.has(l,null,null,!f._flags.sensitive))&&l),{value:l}}},validate(l,{error:f}){if(typeof l!="boolean")return{value:l,errors:f("boolean.base")}},rules:{truthy:{method(...l){_.verifyFlat(l,"truthy");const f=this.clone();f.$_terms.truthy=f.$_terms.truthy||new y;for(let u=0;u<l.length;++u){const o=l[u];a(o!==void 0,"Cannot call truthy with undefined"),f.$_terms.truthy.add(o)}return f}},falsy:{method(...l){_.verifyFlat(l,"falsy");const f=this.clone();f.$_terms.falsy=f.$_terms.falsy||new y;for(let u=0;u<l.length;++u){const o=l[u];a(o!==void 0,"Cannot call falsy with undefined"),f.$_terms.falsy.add(o)}return f}},sensitive:{method(l=!0){return this.$_setFlag("sensitive",l)}}},cast:{number:{from:r.isBool,to:(l,f)=>l?1:0},string:{from:r.isBool,to:(l,f)=>l?"true":"false"}},manifest:{build:(l,f)=>(f.truthy&&(l=l.truthy(...f.truthy)),f.falsy&&(l=l.falsy(...f.falsy)),l)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(d,h,p)=>{const a=p(375),b=p(8068),_=p(8160),y=p(3328),r={isDate:function(l){return l instanceof Date}};d.exports=b.extend({type:"date",coerce:{from:["number","string"],method:(l,{schema:f})=>({value:r.parse(l,f._flags.format)||l})},validate(l,{schema:f,error:u,prefs:o}){if(l instanceof Date&&!isNaN(l.getTime()))return;const g=f._flags.format;return o.convert&&g&&typeof l=="string"?{value:l,errors:u("date.format",{format:g})}:{value:l,errors:u("date.base")}},rules:{compare:{method:!1,validate(l,f,{date:u},{name:o,operator:g,args:c}){const m=u==="now"?Date.now():u.getTime();return _.compare(l.getTime(),m,g)?l:f.error("date."+o,{limit:c.date,value:l})},args:[{name:"date",ref:!0,normalize:l=>l==="now"?l:r.parse(l),assert:l=>l!==null,message:"must have a valid date format"}]},format:{method(l){return a(["iso","javascript","unix"].includes(l),"Unknown date format",l),this.$_setFlag("format",l)}},greater:{method(l){return this.$_addRule({name:"greater",method:"compare",args:{date:l},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(l){return this.$_addRule({name:"less",method:"compare",args:{date:l},operator:"<"})}},max:{method(l){return this.$_addRule({name:"max",method:"compare",args:{date:l},operator:"<="})}},min:{method(l){return this.$_addRule({name:"min",method:"compare",args:{date:l},operator:">="})}},timestamp:{method(l="javascript"){return a(["javascript","unix"].includes(l),'"type" must be one of "javascript, unix"'),this.format(l)}}},cast:{number:{from:r.isDate,to:(l,f)=>l.getTime()},string:{from:r.isDate,to:(l,{prefs:f})=>y.date(l,f)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),r.parse=function(l,f){if(l instanceof Date)return l;if(typeof l!="string"&&(isNaN(l)||!isFinite(l))||/^\s*$/.test(l))return null;if(f==="iso")return _.isIsoDate(l)?r.date(l.toString()):null;const u=l;if(typeof l=="string"&&/^[+-]?\d+(\.\d+)?$/.test(l)&&(l=parseFloat(l)),f){if(f==="javascript")return r.date(1*l);if(f==="unix")return r.date(1e3*l);if(typeof u=="string")return null}return r.date(l)},r.date=function(l){const f=new Date(l);return isNaN(f.getTime())?null:f}},390:(d,h,p)=>{const a=p(375),b=p(7824);d.exports=b.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(_){return a(Number.isSafeInteger(_)&&_>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:_}})},validate:(_,y,{n:r})=>_.length===r?_:y.error("function.arity",{n:r})},class:{method(){return this.$_addRule("class")},validate:(_,y)=>/^\s*class\s/.test(_.toString())?_:y.error("function.class",{value:_})},minArity:{method(_){return a(Number.isSafeInteger(_)&&_>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:_}})},validate:(_,y,{n:r})=>_.length>=r?_:y.error("function.minArity",{n:r})},maxArity:{method(_){return a(Number.isSafeInteger(_)&&_>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:_}})},validate:(_,y,{n:r})=>_.length<=r?_:y.error("function.maxArity",{n:r})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(d,h,p)=>{const a=p(978),b=p(375),_=p(8571),y=p(3652),r=p(8068),l=p(8160),f=p(3292),u=p(6354),o=p(6133),g=p(3328),c={renameDefaults:{alias:!1,multiple:!1,override:!1}};d.exports=r.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(m,T)=>m.keys(T),validate(m,{schema:T,error:x,state:v,prefs:w}){if(!m||typeof m!==T.$_property("typeof")||Array.isArray(m))return{value:m,errors:x("object.base",{type:T.$_property("typeof")})};if(!(T.$_terms.renames||T.$_terms.dependencies||T.$_terms.keys||T.$_terms.patterns||T.$_terms.externals))return;m=c.clone(m,w);const C=[];if(T.$_terms.renames&&!c.rename(T,m,v,w,C))return{value:m,errors:C};if(!T.$_terms.keys&&!T.$_terms.patterns&&!T.$_terms.dependencies)return{value:m,errors:C};const E=new Set(Object.keys(m));if(T.$_terms.keys){const A=[m,...v.ancestors];for(const N of T.$_terms.keys){const k=N.key,L=m[k];E.delete(k);const M=v.localize([...v.path,k],A,N),H=N.schema.$_validate(L,M,w);if(H.errors){if(w.abortEarly)return{value:m,errors:H.errors};H.value!==void 0&&(m[k]=H.value),C.push(...H.errors)}else N.schema._flags.result==="strip"||H.value===void 0&&L!==void 0?delete m[k]:H.value!==void 0&&(m[k]=H.value)}}if(E.size||T._flags._hasPatternMatch){const A=c.unknown(T,m,E,C,v,w);if(A)return A}if(T.$_terms.dependencies)for(const A of T.$_terms.dependencies){if(A.key!==null&&c.isPresent(A.options)(A.key.resolve(m,v,w,null,{shadow:!1}))===!1)continue;const N=c.dependencies[A.rel](T,A,m,v,w);if(N){const k=T.$_createError(N.code,m,N.context,v,w);if(w.abortEarly)return{value:m,errors:k};C.push(k)}}return{value:m,errors:C}},rules:{and:{method(...m){return l.verifyFlat(m,"and"),c.dependency(this,"and",null,m)}},append:{method(m){return m==null||Object.keys(m).length===0?this:this.keys(m)}},assert:{method(m,T,x){g.isTemplate(m)||(m=f.ref(m)),b(x===void 0||typeof x=="string","Message must be a string"),T=this.$_compile(T,{appendPath:!0});const v=this.$_addRule({name:"assert",args:{subject:m,schema:T,message:x}});return v.$_mutateRegister(m),v.$_mutateRegister(T),v},validate(m,{error:T,prefs:x,state:v},{subject:w,schema:C,message:E}){const A=w.resolve(m,v,x),N=o.isRef(w)?w.absolute(v):[];return C.$_match(A,v.localize(N,[m,...v.ancestors],C),x)?m:T("object.assert",{subject:w,message:E})},args:["subject","schema","message"],multi:!0},instance:{method(m,T){return b(typeof m=="function","constructor must be a function"),T=T||m.name,this.$_addRule({name:"instance",args:{constructor:m,name:T}})},validate:(m,T,{constructor:x,name:v})=>m instanceof x?m:T.error("object.instance",{type:v,value:m}),args:["constructor","name"]},keys:{method(m){b(m===void 0||typeof m=="object","Object schema must be a valid object"),b(!l.isSchema(m),"Object schema cannot be a joi schema");const T=this.clone();if(m)if(Object.keys(m).length){T.$_terms.keys=T.$_terms.keys?T.$_terms.keys.filter((x=>!m.hasOwnProperty(x.key))):new c.Keys;for(const x in m)l.tryWithPath((()=>T.$_terms.keys.push({key:x,schema:this.$_compile(m[x])})),x)}else T.$_terms.keys=new c.Keys;else T.$_terms.keys=null;return T.$_mutateRebuild()}},length:{method(m){return this.$_addRule({name:"length",args:{limit:m},operator:"="})},validate:(m,T,{limit:x},{name:v,operator:w,args:C})=>l.compare(Object.keys(m).length,x,w)?m:T.error("object."+v,{limit:C.limit,value:m}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(m){return this.$_addRule({name:"max",method:"length",args:{limit:m},operator:"<="})}},min:{method(m){return this.$_addRule({name:"min",method:"length",args:{limit:m},operator:">="})}},nand:{method(...m){return l.verifyFlat(m,"nand"),c.dependency(this,"nand",null,m)}},or:{method(...m){return l.verifyFlat(m,"or"),c.dependency(this,"or",null,m)}},oxor:{method(...m){return c.dependency(this,"oxor",null,m)}},pattern:{method(m,T,x={}){const v=m instanceof RegExp;v||(m=this.$_compile(m,{appendPath:!0})),b(T!==void 0,"Invalid rule"),l.assertOptions(x,["fallthrough","matches"]),v&&b(!m.flags.includes("g")&&!m.flags.includes("y"),"pattern should not use global or sticky mode"),T=this.$_compile(T,{appendPath:!0});const w=this.clone();w.$_terms.patterns=w.$_terms.patterns||[];const C={[v?"regex":"schema"]:m,rule:T};return x.matches&&(C.matches=this.$_compile(x.matches),C.matches.type!=="array"&&(C.matches=C.matches.$_root.array().items(C.matches)),w.$_mutateRegister(C.matches),w.$_setFlag("_hasPatternMatch",!0,{clone:!1})),x.fallthrough&&(C.fallthrough=!0),w.$_terms.patterns.push(C),w.$_mutateRegister(T),w}},ref:{method(){return this.$_addRule("ref")},validate:(m,T)=>o.isRef(m)?m:T.error("object.refType",{value:m})},regex:{method(){return this.$_addRule("regex")},validate:(m,T)=>m instanceof RegExp?m:T.error("object.regex",{value:m})},rename:{method(m,T,x={}){b(typeof m=="string"||m instanceof RegExp,"Rename missing the from argument"),b(typeof T=="string"||T instanceof g,"Invalid rename to argument"),b(T!==m,"Cannot rename key to same name:",m),l.assertOptions(x,["alias","ignoreUndefined","override","multiple"]);const v=this.clone();v.$_terms.renames=v.$_terms.renames||[];for(const w of v.$_terms.renames)b(w.from!==m,"Cannot rename the same key multiple times");return T instanceof g&&v.$_mutateRegister(T),v.$_terms.renames.push({from:m,to:T,options:a(c.renameDefaults,x)}),v}},schema:{method(m="any"){return this.$_addRule({name:"schema",args:{type:m}})},validate:(m,T,{type:x})=>!l.isSchema(m)||x!=="any"&&m.type!==x?T.error("object.schema",{type:x}):m},unknown:{method(m){return this.$_setFlag("unknown",m!==!1)}},with:{method(m,T,x={}){return c.dependency(this,"with",m,T,x)}},without:{method(m,T,x={}){return c.dependency(this,"without",m,T,x)}},xor:{method(...m){return l.verifyFlat(m,"xor"),c.dependency(this,"xor",null,m)}}},overrides:{default(m,T){return m===void 0&&(m=l.symbols.deepDefault),this.$_parent("default",m,T)}},rebuild(m){if(m.$_terms.keys){const T=new y.Sorter;for(const x of m.$_terms.keys)l.tryWithPath((()=>T.add(x,{after:x.schema.$_rootReferences(),group:x.key})),x.key);m.$_terms.keys=new c.Keys(...T.nodes)}},manifest:{build(m,T){if(T.keys&&(m=m.keys(T.keys)),T.dependencies)for(const{rel:x,key:v=null,peers:w,options:C}of T.dependencies)m=c.dependency(m,x,v,w,C);if(T.patterns)for(const{regex:x,schema:v,rule:w,fallthrough:C,matches:E}of T.patterns)m=m.pattern(x||v,w,{fallthrough:C,matches:E});if(T.renames)for(const{from:x,to:v,options:w}of T.renames)m=m.rename(x,v,w);return m}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),c.clone=function(m,T){if(typeof m=="object"){if(T.nonEnumerables)return _(m,{shallow:!0});const v=Object.create(Object.getPrototypeOf(m));return Object.assign(v,m),v}const x=function(...v){return m.apply(this,v)};return x.prototype=_(m.prototype),Object.defineProperty(x,"name",{value:m.name,writable:!1}),Object.defineProperty(x,"length",{value:m.length,writable:!1}),Object.assign(x,m),x},c.dependency=function(m,T,x,v,w){b(x===null||typeof x=="string",T,"key must be a strings"),w||(w=v.length>1&&typeof v[v.length-1]=="object"?v.pop():{}),l.assertOptions(w,["separator","isPresent"]),v=[].concat(v);const C=l.default(w.separator,"."),E=[];for(const N of v)b(typeof N=="string",T,"peers must be strings"),E.push(f.ref(N,{separator:C,ancestor:0,prefix:!1}));x!==null&&(x=f.ref(x,{separator:C,ancestor:0,prefix:!1}));const A=m.clone();return A.$_terms.dependencies=A.$_terms.dependencies||[],A.$_terms.dependencies.push(new c.Dependency(T,x,E,v,w)),A},c.dependencies={and(m,T,x,v,w){const C=[],E=[],A=T.peers.length,N=c.isPresent(T.options);for(const k of T.peers)N(k.resolve(x,v,w,null,{shadow:!1}))===!1?C.push(k.key):E.push(k.key);if(C.length!==A&&E.length!==A)return{code:"object.and",context:{present:E,presentWithLabels:c.keysToLabels(m,E),missing:C,missingWithLabels:c.keysToLabels(m,C)}}},nand(m,T,x,v,w){const C=[],E=c.isPresent(T.options);for(const k of T.peers)E(k.resolve(x,v,w,null,{shadow:!1}))&&C.push(k.key);if(C.length!==T.peers.length)return;const A=T.paths[0],N=T.paths.slice(1);return{code:"object.nand",context:{main:A,mainWithLabel:c.keysToLabels(m,A),peers:N,peersWithLabels:c.keysToLabels(m,N)}}},or(m,T,x,v,w){const C=c.isPresent(T.options);for(const E of T.peers)if(C(E.resolve(x,v,w,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:T.paths,peersWithLabels:c.keysToLabels(m,T.paths)}}},oxor(m,T,x,v,w){const C=[],E=c.isPresent(T.options);for(const N of T.peers)E(N.resolve(x,v,w,null,{shadow:!1}))&&C.push(N.key);if(!C.length||C.length===1)return;const A={peers:T.paths,peersWithLabels:c.keysToLabels(m,T.paths)};return A.present=C,A.presentWithLabels=c.keysToLabels(m,C),{code:"object.oxor",context:A}},with(m,T,x,v,w){const C=c.isPresent(T.options);for(const E of T.peers)if(C(E.resolve(x,v,w,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:T.key.key,mainWithLabel:c.keysToLabels(m,T.key.key),peer:E.key,peerWithLabel:c.keysToLabels(m,E.key)}}},without(m,T,x,v,w){const C=c.isPresent(T.options);for(const E of T.peers)if(C(E.resolve(x,v,w,null,{shadow:!1})))return{code:"object.without",context:{main:T.key.key,mainWithLabel:c.keysToLabels(m,T.key.key),peer:E.key,peerWithLabel:c.keysToLabels(m,E.key)}}},xor(m,T,x,v,w){const C=[],E=c.isPresent(T.options);for(const N of T.peers)E(N.resolve(x,v,w,null,{shadow:!1}))&&C.push(N.key);if(C.length===1)return;const A={peers:T.paths,peersWithLabels:c.keysToLabels(m,T.paths)};return C.length===0?{code:"object.missing",context:A}:(A.present=C,A.presentWithLabels=c.keysToLabels(m,C),{code:"object.xor",context:A})}},c.keysToLabels=function(m,T){return Array.isArray(T)?T.map((x=>m.$_mapLabels(x))):m.$_mapLabels(T)},c.isPresent=function(m){return typeof m.isPresent=="function"?m.isPresent:T=>T!==void 0},c.rename=function(m,T,x,v,w){const C={};for(const E of m.$_terms.renames){const A=[],N=typeof E.from!="string";if(N)for(const k in T){if(T[k]===void 0&&E.options.ignoreUndefined||k===E.to)continue;const L=E.from.exec(k);L&&A.push({from:k,to:E.to,match:L})}else!Object.prototype.hasOwnProperty.call(T,E.from)||T[E.from]===void 0&&E.options.ignoreUndefined||A.push(E);for(const k of A){const L=k.from;let M=k.to;if(M instanceof g&&(M=M.render(T,x,v,k.match)),L!==M){if(!E.options.multiple&&C[M]&&(w.push(m.$_createError("object.rename.multiple",T,{from:L,to:M,pattern:N},x,v)),v.abortEarly)||Object.prototype.hasOwnProperty.call(T,M)&&!E.options.override&&!C[M]&&(w.push(m.$_createError("object.rename.override",T,{from:L,to:M,pattern:N},x,v)),v.abortEarly))return!1;T[L]===void 0?delete T[M]:T[M]=T[L],C[M]=!0,E.options.alias||delete T[L]}}}return!0},c.unknown=function(m,T,x,v,w,C){if(m.$_terms.patterns){let E=!1;const A=m.$_terms.patterns.map((k=>{if(k.matches)return E=!0,[]})),N=[T,...w.ancestors];for(const k of x){const L=T[k],M=[...w.path,k];for(let H=0;H<m.$_terms.patterns.length;++H){const $=m.$_terms.patterns[H];if($.regex){const Z=$.regex.test(k);if(w.mainstay.tracer.debug(w,"rule",`pattern.${H}`,Z?"pass":"error"),!Z)continue}else if(!$.schema.$_match(k,w.nest($.schema,`pattern.${H}`),C))continue;x.delete(k);const q=w.localize(M,N,{schema:$.rule,key:k}),z=$.rule.$_validate(L,q,C);if(z.errors){if(C.abortEarly)return{value:T,errors:z.errors};v.push(...z.errors)}if($.matches&&A[H].push(k),T[k]=z.value,!$.fallthrough)break}}if(E)for(let k=0;k<A.length;++k){const L=A[k];if(!L)continue;const M=m.$_terms.patterns[k].matches,H=w.localize(w.path,N,M),$=M.$_validate(L,H,C);if($.errors){const q=u.details($.errors,{override:!1});q.matches=L;const z=m.$_createError("object.pattern.match",T,q,w,C);if(C.abortEarly)return{value:T,errors:z};v.push(z)}}}if(x.size&&(m.$_terms.keys||m.$_terms.patterns)){if(C.stripUnknown&&m._flags.unknown===void 0||C.skipFunctions){const E=!(!C.stripUnknown||C.stripUnknown!==!0&&!C.stripUnknown.objects);for(const A of x)E?(delete T[A],x.delete(A)):typeof T[A]=="function"&&x.delete(A)}if(!l.default(m._flags.unknown,C.allowUnknown))for(const E of x){const A=w.localize([...w.path,E],[]),N=m.$_createError("object.unknown",T[E],{child:E},A,C,{flags:!1});if(C.abortEarly)return{value:T,errors:N};v.push(N)}}},c.Dependency=class{constructor(m,T,x,v,w){this.rel=m,this.key=T,this.peers=x,this.paths=v,this.options=w}describe(){const m={rel:this.rel,peers:this.paths};return this.key!==null&&(m.key=this.key.key),this.peers[0].separator!=="."&&(m.options={...m.options,separator:this.peers[0].separator}),this.options.isPresent&&(m.options={...m.options,isPresent:this.options.isPresent}),m}},c.Keys=class extends Array{concat(m){const T=this.slice(),x=new Map;for(let v=0;v<T.length;++v)x.set(T[v].key,v);for(const v of m){const w=v.key,C=x.get(w);C!==void 0?T[C]={key:w,schema:T[C].schema.concat(v.schema)}:T.push(v)}return T}}},8785:(d,h,p)=>{const a=p(375),b=p(8068),_=p(8160),y=p(3292),r=p(6354),l={};d.exports=b.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(f,u)=>f.ref(u),validate(f,{schema:u,state:o,prefs:g}){a(u.$_terms.link,"Uninitialized link schema");const c=l.generate(u,f,o,g),m=u.$_terms.link[0].ref;return c.$_validate(f,o.nest(c,`link:${m.display}:${c.type}`),g)},generate:(f,u,o,g)=>l.generate(f,u,o,g),rules:{ref:{method(f){a(!this.$_terms.link,"Cannot reinitialize schema"),f=y.ref(f),a(f.type==="value"||f.type==="local","Invalid reference type:",f.type),a(f.type==="local"||f.ancestor==="root"||f.ancestor>0,"Link cannot reference itself");const u=this.clone();return u.$_terms.link=[{ref:f}],u}},relative:{method(f=!0){return this.$_setFlag("relative",f)}}},overrides:{concat(f){a(this.$_terms.link,"Uninitialized link schema"),a(_.isSchema(f),"Invalid schema object"),a(f.type!=="link","Cannot merge type link with another link");const u=this.clone();return u.$_terms.whens||(u.$_terms.whens=[]),u.$_terms.whens.push({concat:f}),u.$_mutateRebuild()}},manifest:{build:(f,u)=>(a(u.link,"Invalid link description missing link"),f.ref(u.link))}}),l.generate=function(f,u,o,g){let c=o.mainstay.links.get(f);if(c)return c._generate(u,o,g).schema;const m=f.$_terms.link[0].ref,{perspective:T,path:x}=l.perspective(m,o);l.assert(T,"which is outside of schema boundaries",m,f,o,g);try{c=x.length?T.$_reach(x):T}catch{l.assert(!1,"to non-existing schema",m,f,o,g)}return l.assert(c.type!=="link","which is another link",m,f,o,g),f._flags.relative||o.mainstay.links.set(f,c),c._generate(u,o,g).schema},l.perspective=function(f,u){if(f.type==="local"){for(const{schema:o,key:g}of u.schemas){if((o._flags.id||g)===f.path[0])return{perspective:o,path:f.path.slice(1)};if(o.$_terms.shared){for(const c of o.$_terms.shared)if(c._flags.id===f.path[0])return{perspective:c,path:f.path.slice(1)}}}return{perspective:null,path:null}}return f.ancestor==="root"?{perspective:u.schemas[u.schemas.length-1].schema,path:f.path}:{perspective:u.schemas[f.ancestor]&&u.schemas[f.ancestor].schema,path:f.path}},l.assert=function(f,u,o,g,c,m){f||a(!1,`"${r.label(g._flags,c,m)}" contains link reference "${o.display}" ${u}`)}},3832:(d,h,p)=>{const a=p(375),b=p(8068),_=p(8160),y={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(r){const l=r.toString(),f=l.indexOf("."),u=l.indexOf("e");return(f<0?0:(u<0?l.length:u)-f-1)+(u<0?0:Math.max(0,-parseInt(l.slice(u+1))))}};d.exports=b.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(r,{schema:l,error:f}){if(!r.match(y.numberRx))return;r=r.trim();const u={value:parseFloat(r)};if(u.value===0&&(u.value=0),!l._flags.unsafe)if(r.match(/e/i)){if(y.extractSignificantDigits(r)!==y.extractSignificantDigits(String(u.value)))return u.errors=f("number.unsafe"),u}else{const o=u.value.toString();if(o.match(/e/i))return u;if(o!==y.normalizeDecimal(r))return u.errors=f("number.unsafe"),u}return u}},validate(r,{schema:l,error:f,prefs:u}){if(r===1/0||r===-1/0)return{value:r,errors:f("number.infinity")};if(!_.isNumber(r))return{value:r,errors:f("number.base")};const o={value:r};if(u.convert){const g=l.$_getRule("precision");if(g){const c=Math.pow(10,g.args.limit);o.value=Math.round(o.value*c)/c}}return o.value===0&&(o.value=0),!l._flags.unsafe&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)&&(o.errors=f("number.unsafe")),o},rules:{compare:{method:!1,validate:(r,l,{limit:f},{name:u,operator:o,args:g})=>_.compare(r,f,o)?r:l.error("number."+u,{limit:g.limit,value:r}),args:[{name:"limit",ref:!0,assert:_.isNumber,message:"must be a number"}]},greater:{method(r){return this.$_addRule({name:"greater",method:"compare",args:{limit:r},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(r,l)=>Math.trunc(r)-r==0?r:l.error("number.integer")},less:{method(r){return this.$_addRule({name:"less",method:"compare",args:{limit:r},operator:"<"})}},max:{method(r){return this.$_addRule({name:"max",method:"compare",args:{limit:r},operator:"<="})}},min:{method(r){return this.$_addRule({name:"min",method:"compare",args:{limit:r},operator:">="})}},multiple:{method(r){const l=typeof r=="number"?y.decimalPlaces(r):null,f=Math.pow(10,l);return this.$_addRule({name:"multiple",args:{base:r,baseDecimalPlace:l,pfactor:f}})},validate:(r,l,{base:f,baseDecimalPlace:u,pfactor:o},g)=>y.decimalPlaces(r)>u?l.error("number.multiple",{multiple:g.args.base,value:r}):Math.round(o*r)%Math.round(o*f)==0?r:l.error("number.multiple",{multiple:g.args.base,value:r}),args:[{name:"base",ref:!0,assert:r=>typeof r=="number"&&isFinite(r)&&r>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(r,l)=>Number.isSafeInteger(r)&&r>=0&&r<=65535?r:l.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(r){return a(Number.isSafeInteger(r),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:r}})},validate(r,l,{limit:f}){const u=r.toString().match(y.precisionRx);return Math.max((u[1]?u[1].length:0)-(u[2]?parseInt(u[2],10):0),0)<=f?r:l.error("number.precision",{limit:f,value:r})},convert:!0},sign:{method(r){return a(["negative","positive"].includes(r),"Invalid sign",r),this.$_addRule({name:"sign",args:{sign:r}})},validate:(r,l,{sign:f})=>f==="negative"&&r<0||f==="positive"&&r>0?r:l.error(`number.${f}`)},unsafe:{method(r=!0){return a(typeof r=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",r)}}},cast:{string:{from:r=>typeof r=="number",to:(r,l)=>r.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),y.extractSignificantDigits=function(r){return r.replace(y.exponentialPartRegex,"").replace(y.dotRegex,"").replace(y.trailingZerosRegex,"").replace(y.leadingSignAndZerosRegex,"")},y.normalizeDecimal=function(r){return(r=r.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&r.endsWith("0")&&(r=r.replace(/0+$/,"")),r==="-0"?"0":r}},8966:(d,h,p)=>{const a=p(7824);d.exports=a.extend({type:"object",cast:{map:{from:b=>b&&typeof b=="object",to:(b,_)=>new Map(Object.entries(b))}}})},7417:(d,h,p)=>{const a=p(375),b=p(5380),_=p(1745),y=p(9959),r=p(6064),l=p(9926),f=p(5752),u=p(8068),o=p(8160),g={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:y.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};d.exports=u.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(c,{schema:m,state:T,prefs:x}){const v=m.$_getRule("normalize");v&&(c=c.normalize(v.args.form));const w=m.$_getRule("case");w&&(c=w.args.direction==="upper"?c.toLocaleUpperCase():c.toLocaleLowerCase());const C=m.$_getRule("trim");if(C&&C.args.enabled&&(c=c.trim()),m.$_terms.replacements)for(const A of m.$_terms.replacements)c=c.replace(A.pattern,A.replacement);const E=m.$_getRule("hex");if(E&&E.args.options.byteAligned&&c.length%2!=0&&(c=`0${c}`),m.$_getRule("isoDate")){const A=g.isoDate(c);A&&(c=A)}if(m._flags.truncate){const A=m.$_getRule("max");if(A){let N=A.args.limit;if(o.isResolvable(N)&&(N=N.resolve(c,T,x),!o.limit(N)))return{value:c,errors:m.$_createError("any.ref",N,{ref:A.args.limit,arg:"limit",reason:"must be a positive integer"},T,x)};c=c.slice(0,N)}}return{value:c}}},validate(c,{schema:m,error:T}){if(typeof c!="string")return{value:c,errors:T("string.base")};if(c===""){const x=m.$_getRule("min");return x&&x.args.limit===0?void 0:{value:c,errors:T("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(c,m)=>/^[a-zA-Z0-9]+$/.test(c)?c:m.error("string.alphanum")},base64:{method(c={}){return o.assertOptions(c,["paddingRequired","urlSafe"]),c={urlSafe:!1,paddingRequired:!0,...c},a(typeof c.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof c.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:c}})},validate:(c,m,{options:T})=>g.base64Regex[T.paddingRequired][T.urlSafe].test(c)?c:m.error("string.base64")},case:{method(c){return a(["lower","upper"].includes(c),"Invalid case:",c),this.$_addRule({name:"case",args:{direction:c}})},validate:(c,m,{direction:T})=>T==="lower"&&c===c.toLocaleLowerCase()||T==="upper"&&c===c.toLocaleUpperCase()?c:m.error(`string.${T}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(c,m){let T=c.length,x=0,v=1;for(;T--;){const w=c.charAt(T)*v;x+=w-9*(w>9),v^=3}return x>0&&x%10==0?c:m.error("string.creditCard")}},dataUri:{method(c={}){return o.assertOptions(c,["paddingRequired"]),c={paddingRequired:!0,...c},a(typeof c.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:c}})},validate(c,m,{options:T}){const x=c.match(g.dataUriRegex);return x&&(!x[2]||x[2]!=="base64"||g.base64Regex[T.paddingRequired].false.test(x[3]))?c:m.error("string.dataUri")}},domain:{method(c){c&&o.assertOptions(c,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const m=g.addressOptions(c);return this.$_addRule({name:"domain",args:{options:c},address:m})},validate:(c,m,T,{address:x})=>b.isValid(c,x)?c:m.error("string.domain")},email:{method(c={}){o.assertOptions(c,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(c.multiple===void 0||typeof c.multiple=="boolean","multiple option must be an boolean");const m=g.addressOptions(c),T=new RegExp(`\\s*[${c.separator?r(c.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:c},regex:T,address:m})},validate(c,m,{options:T},{regex:x,address:v}){const w=T.multiple?c.split(x):[c],C=[];for(const E of w)_.isValid(E,v)||C.push(E);return C.length?m.error("string.email",{value:c,invalids:C}):c}},guid:{alias:"uuid",method(c={}){o.assertOptions(c,["version","separator"]);let m="";if(c.version){const v=[].concat(c.version);a(v.length>=1,"version must have at least 1 valid version specified");const w=new Set;for(let C=0;C<v.length;++C){const E=v[C];a(typeof E=="string","version at position "+C+" must be a string");const A=g.guidVersions[E.toLowerCase()];a(A,"version at position "+C+" must be one of "+Object.keys(g.guidVersions).join(", ")),a(!w.has(A),"version at position "+C+" must not be a duplicate"),m+=A,w.add(A)}}a(g.guidSeparators.has(c.separator),'separator must be one of true, false, "-", or ":"');const T=c.separator===void 0?"[:-]?":c.separator===!0?"[:-]":c.separator===!1?"[]?":`\\${c.separator}`,x=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${T})[0-9A-F]{4}\\2?[${m||"0-9A-F"}][0-9A-F]{3}\\2?[${m?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:c},regex:x})},validate(c,m,T,{regex:x}){const v=x.exec(c);return v?g.guidBrackets[v[1]]!==v[v.length-1]?m.error("string.guid"):c:m.error("string.guid")}},hex:{method(c={}){return o.assertOptions(c,["byteAligned","prefix"]),c={byteAligned:!1,prefix:!1,...c},a(typeof c.byteAligned=="boolean","byteAligned must be boolean"),a(typeof c.prefix=="boolean"||c.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:c}})},validate:(c,m,{options:T})=>(T.prefix==="optional"?g.hexRegex.withOptionalPrefix:T.prefix===!0?g.hexRegex.withPrefix:g.hexRegex.withoutPrefix).test(c)?T.byteAligned&&c.length%2!=0?m.error("string.hexAlign"):c:m.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(c,m)=>b.isValid(c,{minDomainSegments:1})||g.ipRegex.test(c)?c:m.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(c={}){o.assertOptions(c,["cidr","version"]);const{cidr:m,versions:T,regex:x}=y.regex(c),v=c.version?T:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:m,version:v}},regex:x})},validate:(c,m,{options:T},{regex:x})=>x.test(c)?c:T.version?m.error("string.ipVersion",{value:c,cidr:T.cidr,version:T.version}):m.error("string.ip",{value:c,cidr:T.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(c,{error:m})=>g.isoDate(c)?c:m("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(c,m)=>g.isoDurationRegex.test(c)?c:m.error("string.isoDuration")},length:{method(c,m){return g.length(this,"length",c,"=",m)},validate(c,m,{limit:T,encoding:x},{name:v,operator:w,args:C}){const E=!x&&c.length;return o.compare(E,T,w)?c:m.error("string."+v,{limit:C.limit,value:c,encoding:x})},args:[{name:"limit",ref:!0,assert:o.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(c,m){return g.length(this,"max",c,"<=",m)},args:["limit","encoding"]},min:{method(c,m){return g.length(this,"min",c,">=",m)},args:["limit","encoding"]},normalize:{method(c="NFC"){return a(g.normalizationForms.includes(c),"normalization form must be one of "+g.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:c}})},validate:(c,{error:m},{form:T})=>c===c.normalize(T)?c:m("string.normalize",{value:c,form:T}),convert:!0},pattern:{alias:"regex",method(c,m={}){a(c instanceof RegExp,"regex must be a RegExp"),a(!c.flags.includes("g")&&!c.flags.includes("y"),"regex should not use global or sticky mode"),typeof m=="string"&&(m={name:m}),o.assertOptions(m,["invert","name"]);const T=["string.pattern",m.invert?".invert":"",m.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:c,options:m},errorCode:T})},validate:(c,m,{regex:T,options:x},{errorCode:v})=>T.test(c)^x.invert?c:m.error(v,{name:x.name,regex:T,value:c}),args:["regex","options"],multi:!0},replace:{method(c,m){typeof c=="string"&&(c=new RegExp(r(c),"g")),a(c instanceof RegExp,"pattern must be a RegExp"),a(typeof m=="string","replacement must be a String");const T=this.clone();return T.$_terms.replacements||(T.$_terms.replacements=[]),T.$_terms.replacements.push({pattern:c,replacement:m}),T}},token:{method(){return this.$_addRule("token")},validate:(c,m)=>/^\w+$/.test(c)?c:m.error("string.token")},trim:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:c}})},validate:(c,m,{enabled:T})=>T&&c!==c.trim()?m.error("string.trim"):c,convert:!0},truncate:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",c)}},uppercase:{method(){return this.case("upper")}},uri:{method(c={}){o.assertOptions(c,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),c.domain&&o.assertOptions(c.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:m,scheme:T}=f.regex(c),x=c.domain?g.addressOptions(c.domain):null;return this.$_addRule({name:"uri",args:{options:c},regex:m,domain:x,scheme:T})},validate(c,m,{options:T},{regex:x,domain:v,scheme:w}){if(["http:/","https:/"].includes(c))return m.error("string.uri");let C=x.exec(c);if(!C&&m.prefs.convert&&T.encodeUri){const E=encodeURI(c);C=x.exec(E),C&&(c=E)}if(C){const E=C[1]||C[2];return!v||T.allowRelative&&!E||b.isValid(E,v)?c:m.error("string.domain",{value:E})}return T.relativeOnly?m.error("string.uriRelativeOnly"):T.scheme?m.error("string.uriCustomScheme",{scheme:w,value:c}):m.error("string.uri")}}},manifest:{build(c,m){if(m.replacements)for(const{pattern:T,replacement:x}of m.replacements)c=c.replace(T,x);return c}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),g.addressOptions=function(c){if(!c)return g.tlds||c;if(a(c.minDomainSegments===void 0||Number.isSafeInteger(c.minDomainSegments)&&c.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(c.maxDomainSegments===void 0||Number.isSafeInteger(c.maxDomainSegments)&&c.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),c.tlds===!1)return c;if(c.tlds===!0||c.tlds===void 0)return a(g.tlds,"Built-in TLD list disabled"),Object.assign({},c,g.tlds);a(typeof c.tlds=="object","tlds must be true, false, or an object");const m=c.tlds.deny;if(m)return Array.isArray(m)&&(c=Object.assign({},c,{tlds:{deny:new Set(m)}})),a(c.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!c.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),g.validateTlds(c.tlds.deny,"tlds.deny"),c;const T=c.tlds.allow;return T?T===!0?(a(g.tlds,"Built-in TLD list disabled"),Object.assign({},c,g.tlds)):(Array.isArray(T)&&(c=Object.assign({},c,{tlds:{allow:new Set(T)}})),a(c.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),g.validateTlds(c.tlds.allow,"tlds.allow"),c):c},g.validateTlds=function(c,m){for(const T of c)a(b.isValid(T,{minDomainSegments:1,maxDomainSegments:1}),`${m} must contain valid top level domain names`)},g.isoDate=function(c){if(!o.isIsoDate(c))return null;/.*T.*[+-]\d\d$/.test(c)&&(c+="00");const m=new Date(c);return isNaN(m.getTime())?null:m.toISOString()},g.length=function(c,m,T,x,v){return a(!v||!1,"Invalid encoding:",v),c.$_addRule({name:m,method:"length",args:{limit:T,encoding:v},operator:x})}},8826:(d,h,p)=>{const a=p(375),b=p(8068),_={};_.Map=class extends Map{slice(){return new _.Map(this)}},d.exports=b.extend({type:"symbol",terms:{map:{init:new _.Map}},coerce:{method(y,{schema:r,error:l}){const f=r.$_terms.map.get(y);return f&&(y=f),r._flags.only&&typeof y!="symbol"?{value:y,errors:l("symbol.map",{map:r.$_terms.map})}:{value:y}}},validate(y,{error:r}){if(typeof y!="symbol")return{value:y,errors:r("symbol.base")}},rules:{map:{method(y){y&&!y[Symbol.iterator]&&typeof y=="object"&&(y=Object.entries(y)),a(y&&y[Symbol.iterator],"Iterable must be an iterable or object");const r=this.clone(),l=[];for(const f of y){a(f&&f[Symbol.iterator],"Entry must be an iterable");const[u,o]=f;a(typeof u!="object"&&typeof u!="function"&&typeof u!="symbol","Key must not be of type object, function, or Symbol"),a(typeof o=="symbol","Value must be a Symbol"),r.$_terms.map.set(u,o),l.push(o)}return r.valid(...l)}}},manifest:{build:(y,r)=>(r.map&&(y=y.map(r.map)),y)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(d,h,p)=>{const a=p(375),b=p(8571),_=p(738),y=p(9621),r=p(8160),l=p(6354),f=p(493),u={result:Symbol("result")};h.entry=function(o,g,c){let m=r.defaults;c&&(a(c.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(c.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),m=r.preferences(r.defaults,c));const T=u.entry(o,g,m);a(!T.mainstay.externals.length,"Schema with external rules must use validateAsync()");const x={value:T.value};return T.error&&(x.error=T.error),T.mainstay.warnings.length&&(x.warning=l.details(T.mainstay.warnings)),T.mainstay.debug&&(x.debug=T.mainstay.debug),T.mainstay.artifacts&&(x.artifacts=T.mainstay.artifacts),x},h.entryAsync=async function(o,g,c){let m=r.defaults;c&&(m=r.preferences(r.defaults,c));const T=u.entry(o,g,m),x=T.mainstay;if(T.error)throw x.debug&&(T.error.debug=x.debug),T.error;if(x.externals.length){let w=T.value;const C=[];for(const E of x.externals){const A=E.state.path,N=E.schema.type==="link"?x.links.get(E.schema):null;let k,L,M=w;const H=A.length?[w]:[],$=A.length?y(o,A):o;if(A.length){k=A[A.length-1];let q=w;for(const z of A.slice(0,-1))q=q[z],H.unshift(q);L=H[0],M=L[k]}try{const q=(Z,ae)=>(N||E.schema).$_createError(Z,M,ae,E.state,m),z=await E.method(M,{schema:E.schema,linked:N,state:E.state,prefs:c,original:$,error:q,errorsArray:u.errorsArray,warn:(Z,ae)=>x.warnings.push((N||E.schema).$_createError(Z,M,ae,E.state,m)),message:(Z,ae)=>(N||E.schema).$_createError("external",M,ae,E.state,m,{messages:Z})});if(z===void 0||z===M)continue;if(z instanceof l.Report){if(x.tracer.log(E.schema,E.state,"rule","external","error"),C.push(z),m.abortEarly)break;continue}if(Array.isArray(z)&&z[r.symbols.errors]){if(x.tracer.log(E.schema,E.state,"rule","external","error"),C.push(...z),m.abortEarly)break;continue}L?(x.tracer.value(E.state,"rule",M,z,"external"),L[k]=z):(x.tracer.value(E.state,"rule",w,z,"external"),w=z)}catch(q){throw m.errors.label&&(q.message+=` (${E.label})`),q}}if(T.value=w,C.length)throw T.error=l.process(C,o,m),x.debug&&(T.error.debug=x.debug),T.error}if(!m.warnings&&!m.debug&&!m.artifacts)return T.value;const v={value:T.value};return x.warnings.length&&(v.warning=l.details(x.warnings)),x.debug&&(v.debug=x.debug),x.artifacts&&(v.artifacts=x.artifacts),v},u.Mainstay=class{constructor(o,g,c){this.externals=[],this.warnings=[],this.tracer=o,this.debug=g,this.links=c,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const o=this._snapshots.pop();this.externals=o.externals,this.warnings=o.warnings}commit(){this._snapshots.pop()}},u.entry=function(o,g,c){const{tracer:m,cleanup:T}=u.tracer(g,c),x=c.debug?[]:null,v=g._ids._schemaChain?new Map:null,w=new u.Mainstay(m,x,v),C=g._ids._schemaChain?[{schema:g}]:null,E=new f([],[],{mainstay:w,schemas:C}),A=h.validate(o,g,E,c);T&&g.$_root.untrace();const N=l.process(A.errors,o,c);return{value:A.value,error:N,mainstay:w}},u.tracer=function(o,g){return o.$_root._tracer?{tracer:o.$_root._tracer._register(o)}:g.debug?(a(o.$_root.trace,"Debug mode not supported"),{tracer:o.$_root.trace()._register(o),cleanup:!0}):{tracer:u.ignore}},h.validate=function(o,g,c,m,T={}){if(g.$_terms.whens&&(g=g._generate(o,c,m).schema),g._preferences&&(m=u.prefs(g,m)),g._cache&&m.cache){const N=g._cache.get(o);if(c.mainstay.tracer.debug(c,"validate","cached",!!N),N)return N}const x=(N,k,L)=>g.$_createError(N,o,k,L||c,m),v={original:o,prefs:m,schema:g,state:c,error:x,errorsArray:u.errorsArray,warn:(N,k,L)=>c.mainstay.warnings.push(x(N,k,L)),message:(N,k)=>g.$_createError("custom",o,k,c,m,{messages:N})};c.mainstay.tracer.entry(g,c);const w=g._definition;if(w.prepare&&o!==void 0&&m.convert){const N=w.prepare(o,v);if(N){if(c.mainstay.tracer.value(c,"prepare",o,N.value),N.errors)return u.finalize(N.value,[].concat(N.errors),v);o=N.value}}if(w.coerce&&o!==void 0&&m.convert&&(!w.coerce.from||w.coerce.from.includes(typeof o))){const N=w.coerce.method(o,v);if(N){if(c.mainstay.tracer.value(c,"coerced",o,N.value),N.errors)return u.finalize(N.value,[].concat(N.errors),v);o=N.value}}const C=g._flags.empty;C&&C.$_match(u.trim(o,g),c.nest(C),r.defaults)&&(c.mainstay.tracer.value(c,"empty",o,void 0),o=void 0);const E=T.presence||g._flags.presence||(g._flags._endedSwitch?null:m.presence);if(o===void 0){if(E==="forbidden")return u.finalize(o,null,v);if(E==="required")return u.finalize(o,[g.$_createError("any.required",o,null,c,m)],v);if(E==="optional"){if(g._flags.default!==r.symbols.deepDefault)return u.finalize(o,null,v);c.mainstay.tracer.value(c,"default",o,{}),o={}}}else if(E==="forbidden")return u.finalize(o,[g.$_createError("any.unknown",o,null,c,m)],v);const A=[];if(g._valids){const N=g._valids.get(o,c,m,g._flags.insensitive);if(N)return m.convert&&(c.mainstay.tracer.value(c,"valids",o,N.value),o=N.value),c.mainstay.tracer.filter(g,c,"valid",N),u.finalize(o,null,v);if(g._flags.only){const k=g.$_createError("any.only",o,{valids:g._valids.values({display:!0})},c,m);if(m.abortEarly)return u.finalize(o,[k],v);A.push(k)}}if(g._invalids){const N=g._invalids.get(o,c,m,g._flags.insensitive);if(N){c.mainstay.tracer.filter(g,c,"invalid",N);const k=g.$_createError("any.invalid",o,{invalids:g._invalids.values({display:!0})},c,m);if(m.abortEarly)return u.finalize(o,[k],v);A.push(k)}}if(w.validate){const N=w.validate(o,v);if(N&&(c.mainstay.tracer.value(c,"base",o,N.value),o=N.value,N.errors)){if(!Array.isArray(N.errors))return A.push(N.errors),u.finalize(o,A,v);if(N.errors.length)return A.push(...N.errors),u.finalize(o,A,v)}}return g._rules.length?u.rules(o,A,v):u.finalize(o,A,v)},u.rules=function(o,g,c){const{schema:m,state:T,prefs:x}=c;for(const v of m._rules){const w=m._definition.rules[v.method];if(w.convert&&x.convert){T.mainstay.tracer.log(m,T,"rule",v.name,"full");continue}let C,E=v.args;if(v._resolve.length){E=Object.assign({},E);for(const N of v._resolve){const k=w.argsByName.get(N),L=E[N].resolve(o,T,x),M=k.normalize?k.normalize(L):L,H=r.validateArg(M,null,k);if(H){C=m.$_createError("any.ref",L,{arg:N,ref:E[N],reason:H},T,x);break}E[N]=M}}C=C||w.validate(o,c,E,v);const A=u.rule(C,v);if(A.errors){if(T.mainstay.tracer.log(m,T,"rule",v.name,"error"),v.warn){T.mainstay.warnings.push(...A.errors);continue}if(x.abortEarly)return u.finalize(o,A.errors,c);g.push(...A.errors)}else T.mainstay.tracer.log(m,T,"rule",v.name,"pass"),T.mainstay.tracer.value(T,"rule",o,A.value,v.name),o=A.value}return u.finalize(o,g,c)},u.rule=function(o,g){return o instanceof l.Report?(u.error(o,g),{errors:[o],value:null}):Array.isArray(o)&&o[r.symbols.errors]?(o.forEach((c=>u.error(c,g))),{errors:o,value:null}):{errors:null,value:o}},u.error=function(o,g){return g.message&&o._setTemplate(g.message),o},u.finalize=function(o,g,c){g=g||[];const{schema:m,state:T,prefs:x}=c;if(g.length){const w=u.default("failover",void 0,g,c);w!==void 0&&(T.mainstay.tracer.value(T,"failover",o,w),o=w,g=[])}if(g.length&&m._flags.error)if(typeof m._flags.error=="function"){g=m._flags.error(g),Array.isArray(g)||(g=[g]);for(const w of g)a(w instanceof Error||w instanceof l.Report,"error() must return an Error object")}else g=[m._flags.error];if(o===void 0){const w=u.default("default",o,g,c);T.mainstay.tracer.value(T,"default",o,w),o=w}if(m._flags.cast&&o!==void 0){const w=m._definition.cast[m._flags.cast];if(w.from(o)){const C=w.to(o,c);T.mainstay.tracer.value(T,"cast",o,C,m._flags.cast),o=C}}if(m.$_terms.externals&&x.externals&&x._externals!==!1)for(const{method:w}of m.$_terms.externals)T.mainstay.externals.push({method:w,schema:m,state:T,label:l.label(m._flags,T,x)});const v={value:o,errors:g.length?g:null};return m._flags.result&&(v.value=m._flags.result==="strip"?void 0:c.original,T.mainstay.tracer.value(T,m._flags.result,o,v.value),T.shadow(o,m._flags.result)),m._cache&&x.cache!==!1&&!m._refs.length&&m._cache.set(c.original,v),o===void 0||v.errors||m._flags.artifact===void 0||(T.mainstay.artifacts=T.mainstay.artifacts||new Map,T.mainstay.artifacts.has(m._flags.artifact)||T.mainstay.artifacts.set(m._flags.artifact,[]),T.mainstay.artifacts.get(m._flags.artifact).push(T.path)),v},u.prefs=function(o,g){const c=g===r.defaults;return c&&o._preferences[r.symbols.prefs]?o._preferences[r.symbols.prefs]:(g=r.preferences(g,o._preferences),c&&(o._preferences[r.symbols.prefs]=g),g)},u.default=function(o,g,c,m){const{schema:T,state:x,prefs:v}=m,w=T._flags[o];if(v.noDefaults||w===void 0)return g;if(x.mainstay.tracer.log(T,x,"rule",o,"full"),!w)return w;if(typeof w=="function"){const C=w.length?[b(x.ancestors[0]),m]:[];try{return w(...C)}catch(E){return void c.push(T.$_createError(`any.${o}`,null,{error:E},x,v))}}return typeof w!="object"?w:w[r.symbols.literal]?w.literal:r.isResolvable(w)?w.resolve(g,x,v):b(w)},u.trim=function(o,g){if(typeof o!="string")return o;const c=g.$_getRule("trim");return c&&c.args.enabled?o.trim():o},u.ignore={active:!1,debug:_,entry:_,filter:_,log:_,resolve:_,value:_},u.errorsArray=function(){const o=[];return o[r.symbols.errors]=!0,o}},2036:(d,h,p)=>{const a=p(375),b=p(9474),_=p(8160),y={};d.exports=y.Values=class{constructor(r,l){this._values=new Set(r),this._refs=new Set(l),this._lowercase=y.lowercases(r),this._override=!1}get length(){return this._values.size+this._refs.size}add(r,l){_.isResolvable(r)?this._refs.has(r)||(this._refs.add(r),l&&l.register(r)):this.has(r,null,null,!1)||(this._values.add(r),typeof r=="string"&&this._lowercase.set(r.toLowerCase(),r))}static merge(r,l,f){if(r=r||new y.Values,l){if(l._override)return l.clone();for(const u of[...l._values,...l._refs])r.add(u)}if(f)for(const u of[...f._values,...f._refs])r.remove(u);return r.length?r:null}remove(r){_.isResolvable(r)?this._refs.delete(r):(this._values.delete(r),typeof r=="string"&&this._lowercase.delete(r.toLowerCase()))}has(r,l,f,u){return!!this.get(r,l,f,u)}get(r,l,f,u){if(!this.length)return!1;if(this._values.has(r))return{value:r};if(typeof r=="string"&&r&&u){const o=this._lowercase.get(r.toLowerCase());if(o)return{value:o}}if(!this._refs.size&&typeof r!="object")return!1;if(typeof r=="object"){for(const o of this._values)if(b(o,r))return{value:o}}if(l)for(const o of this._refs){const g=o.resolve(r,l,f,null,{in:!0});if(g===void 0)continue;const c=o.in&&typeof g=="object"?Array.isArray(g)?g:Object.keys(g):[g];for(const m of c)if(typeof m==typeof r){if(u&&r&&typeof r=="string"){if(m.toLowerCase()===r.toLowerCase())return{value:m,ref:o}}else if(b(m,r))return{value:m,ref:o}}}return!1}override(){this._override=!0}values(r){if(r&&r.display){const l=[];for(const f of[...this._values,...this._refs])f!==void 0&&l.push(f);return l}return Array.from([...this._values,...this._refs])}clone(){const r=new y.Values(this._values,this._refs);return r._override=this._override,r}concat(r){a(!r._override,"Cannot concat override set of values");const l=new y.Values([...this._values,...r._values],[...this._refs,...r._refs]);return l._override=this._override,l}describe(){const r=[];this._override&&r.push({override:!0});for(const l of this._values.values())r.push(l&&typeof l=="object"?{value:l}:l);for(const l of this._refs.values())r.push(l.describe());return r}},y.Values.prototype[_.symbols.values]=!0,y.Values.prototype.slice=y.Values.prototype.clone,y.lowercases=function(r){const l=new Map;if(r)for(const f of r)typeof f=="string"&&l.set(f.toLowerCase(),f);return l}},978:(d,h,p)=>{const a=p(375),b=p(8571),_=p(1687),y=p(9621),r={};d.exports=function(l,f,u={}){if(a(l&&typeof l=="object","Invalid defaults value: must be an object"),a(!f||f===!0||typeof f=="object","Invalid source value: must be true, falsy or an object"),a(typeof u=="object","Invalid options: must be an object"),!f)return null;if(u.shallow)return r.applyToDefaultsWithShallow(l,f,u);const o=b(l);if(f===!0)return o;const g=u.nullOverride!==void 0&&u.nullOverride;return _(o,f,{nullOverride:g,mergeArrays:!1})},r.applyToDefaultsWithShallow=function(l,f,u){const o=u.shallow;a(Array.isArray(o),"Invalid keys");const g=new Map,c=f===!0?null:new Set;for(let x of o){x=Array.isArray(x)?x:x.split(".");const v=y(l,x);v&&typeof v=="object"?g.set(v,c&&y(f,x)||v):c&&c.add(x)}const m=b(l,{},g);if(!c)return m;for(const x of c)r.reachCopy(m,f,x);const T=u.nullOverride!==void 0&&u.nullOverride;return _(m,f,{nullOverride:T,mergeArrays:!1})},r.reachCopy=function(l,f,u){for(const c of u){if(!(c in f))return;const m=f[c];if(typeof m!="object"||m===null)return;f=m}const o=f;let g=l;for(let c=0;c<u.length-1;++c){const m=u[c];typeof g[m]!="object"&&(g[m]={}),g=g[m]}g[u[u.length-1]]=o}},375:(d,h,p)=>{const a=p(7916);d.exports=function(b,..._){if(!b)throw _.length===1&&_[0]instanceof Error?_[0]:new a(_)}},8571:(d,h,p)=>{const a=p(9621),b=p(4277),_=p(7043),y={needsProtoHack:new Set([b.set,b.map,b.weakSet,b.weakMap])};d.exports=y.clone=function(r,l={},f=null){if(typeof r!="object"||r===null)return r;let u=y.clone,o=f;if(l.shallow){if(l.shallow!==!0)return y.cloneWithShallow(r,l);u=T=>T}else if(o){const T=o.get(r);if(T)return T}else o=new Map;const g=b.getInternalProto(r);if(g===b.buffer)return!1;if(g===b.date)return new Date(r.getTime());if(g===b.regex)return new RegExp(r);const c=y.base(r,g,l);if(c===r)return r;if(o&&o.set(r,c),g===b.set)for(const T of r)c.add(u(T,l,o));else if(g===b.map)for(const[T,x]of r)c.set(T,u(x,l,o));const m=_.keys(r,l);for(const T of m){if(T==="__proto__")continue;if(g===b.array&&T==="length"){c.length=r.length;continue}const x=Object.getOwnPropertyDescriptor(r,T);x?x.get||x.set?Object.defineProperty(c,T,x):x.enumerable?c[T]=u(r[T],l,o):Object.defineProperty(c,T,{enumerable:!1,writable:!0,configurable:!0,value:u(r[T],l,o)}):Object.defineProperty(c,T,{enumerable:!0,writable:!0,configurable:!0,value:u(r[T],l,o)})}return c},y.cloneWithShallow=function(r,l){const f=l.shallow;(l=Object.assign({},l)).shallow=!1;const u=new Map;for(const o of f){const g=a(r,o);typeof g!="object"&&typeof g!="function"||u.set(g,g)}return y.clone(r,l,u)},y.base=function(r,l,f){if(f.prototype===!1)return y.needsProtoHack.has(l)?new l.constructor:l===b.array?[]:{};const u=Object.getPrototypeOf(r);if(u&&u.isImmutable)return r;if(l===b.array){const o=[];return u!==l&&Object.setPrototypeOf(o,u),o}if(y.needsProtoHack.has(l)){const o=new u.constructor;return u!==l&&Object.setPrototypeOf(o,u),o}return Object.create(u)}},9474:(d,h,p)=>{const a=p(4277),b={mismatched:null};d.exports=function(_,y,r){return r=Object.assign({prototype:!0},r),!!b.isDeepEqual(_,y,r,[])},b.isDeepEqual=function(_,y,r,l){if(_===y)return _!==0||1/_==1/y;const f=typeof _;if(f!==typeof y||_===null||y===null)return!1;if(f==="function"){if(!r.deepFunction||_.toString()!==y.toString())return!1}else if(f!=="object")return _!=_&&y!=y;const u=b.getSharedType(_,y,!!r.prototype);switch(u){case a.buffer:return!1;case a.promise:return _===y;case a.regex:return _.toString()===y.toString();case b.mismatched:return!1}for(let o=l.length-1;o>=0;--o)if(l[o].isSame(_,y))return!0;l.push(new b.SeenEntry(_,y));try{return!!b.isDeepEqualObj(u,_,y,r,l)}finally{l.pop()}},b.getSharedType=function(_,y,r){if(r)return Object.getPrototypeOf(_)!==Object.getPrototypeOf(y)?b.mismatched:a.getInternalProto(_);const l=a.getInternalProto(_);return l!==a.getInternalProto(y)?b.mismatched:l},b.valueOf=function(_){const y=_.valueOf;if(y===void 0)return _;try{return y.call(_)}catch(r){return r}},b.hasOwnEnumerableProperty=function(_,y){return Object.prototype.propertyIsEnumerable.call(_,y)},b.isSetSimpleEqual=function(_,y){for(const r of Set.prototype.values.call(_))if(!Set.prototype.has.call(y,r))return!1;return!0},b.isDeepEqualObj=function(_,y,r,l,f){const{isDeepEqual:u,valueOf:o,hasOwnEnumerableProperty:g}=b,{keys:c,getOwnPropertySymbols:m}=Object;if(_===a.array){if(!l.part){if(y.length!==r.length)return!1;for(let C=0;C<y.length;++C)if(!u(y[C],r[C],l,f))return!1;return!0}for(const C of y)for(const E of r)if(u(C,E,l,f))return!0}else if(_===a.set){if(y.size!==r.size)return!1;if(!b.isSetSimpleEqual(y,r)){const C=new Set(Set.prototype.values.call(r));for(const E of Set.prototype.values.call(y)){if(C.delete(E))continue;let A=!1;for(const N of C)if(u(E,N,l,f)){C.delete(N),A=!0;break}if(!A)return!1}}}else if(_===a.map){if(y.size!==r.size)return!1;for(const[C,E]of Map.prototype.entries.call(y))if(E===void 0&&!Map.prototype.has.call(r,C)||!u(E,Map.prototype.get.call(r,C),l,f))return!1}else if(_===a.error&&(y.name!==r.name||y.message!==r.message))return!1;const T=o(y),x=o(r);if((y!==T||r!==x)&&!u(T,x,l,f))return!1;const v=c(y);if(!l.part&&v.length!==c(r).length&&!l.skip)return!1;let w=0;for(const C of v)if(l.skip&&l.skip.includes(C))r[C]===void 0&&++w;else if(!g(r,C)||!u(y[C],r[C],l,f))return!1;if(!l.part&&v.length-w!==c(r).length)return!1;if(l.symbols!==!1){const C=m(y),E=new Set(m(r));for(const A of C){if(!l.skip||!l.skip.includes(A)){if(g(y,A)){if(!g(r,A)||!u(y[A],r[A],l,f))return!1}else if(g(r,A))return!1}E.delete(A)}for(const A of E)if(g(r,A))return!1}return!0},b.SeenEntry=class{constructor(_,y){this.obj=_,this.ref=y}isSame(_,y){return this.obj===_&&this.ref===y}}},7916:(d,h,p)=>{const a=p(8761);d.exports=class extends Error{constructor(b){super(b.filter((_=>_!=="")).map((_=>typeof _=="string"?_:_ instanceof Error?_.message:a(_))).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,h.assert)}}},5277:d=>{const h={};d.exports=function(p){if(!p)return"";let a="";for(let b=0;b<p.length;++b){const _=p.charCodeAt(b);h.isSafe(_)?a+=p[b]:a+=h.escapeHtmlChar(_)}return a},h.escapeHtmlChar=function(p){return h.namedHtml.get(p)||(p>=256?"&#"+p+";":`&#x${p.toString(16).padStart(2,"0")};`)},h.isSafe=function(p){return h.safeCharCodes.has(p)},h.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),h.safeCharCodes=(function(){const p=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&p.add(a);return p})()},6064:d=>{d.exports=function(h){return h.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:d=>{d.exports=function(){}},1687:(d,h,p)=>{const a=p(375),b=p(8571),_=p(7043),y={};d.exports=y.merge=function(r,l,f){if(a(r&&typeof r=="object","Invalid target value: must be an object"),a(l==null||typeof l=="object","Invalid source value: must be null, undefined, or an object"),!l)return r;if(f=Object.assign({nullOverride:!0,mergeArrays:!0},f),Array.isArray(l)){a(Array.isArray(r),"Cannot merge array onto an object"),f.mergeArrays||(r.length=0);for(let o=0;o<l.length;++o)r.push(b(l[o],{symbols:f.symbols}));return r}const u=_.keys(l,f);for(let o=0;o<u.length;++o){const g=u[o];if(g==="__proto__"||!Object.prototype.propertyIsEnumerable.call(l,g))continue;const c=l[g];if(c&&typeof c=="object"){if(r[g]===c)continue;!r[g]||typeof r[g]!="object"||Array.isArray(r[g])!==Array.isArray(c)||c instanceof Date||c instanceof RegExp?r[g]=b(c,{symbols:f.symbols}):y.merge(r[g],c,f)}else(c!=null||f.nullOverride)&&(r[g]=c)}return r}},9621:(d,h,p)=>{const a=p(375),b={};d.exports=function(_,y,r){if(y===!1||y==null)return _;typeof(r=r||{})=="string"&&(r={separator:r});const l=Array.isArray(y);a(!l||!r.separator,"Separator option is not valid for array-based chain");const f=l?y:y.split(r.separator||".");let u=_;for(let o=0;o<f.length;++o){let g=f[o];const c=r.iterables&&b.iterables(u);if(Array.isArray(u)||c==="set"){const m=Number(g);Number.isInteger(m)&&(g=m<0?u.length+m:m)}if(!u||typeof u=="function"&&r.functions===!1||!c&&u[g]===void 0){a(!r.strict||o+1===f.length,"Missing segment",g,"in reach path ",y),a(typeof u=="object"||r.functions===!0||typeof u!="function","Invalid segment",g,"in reach path ",y),u=r.default;break}u=c?c==="set"?[...u][g]:u.get(g):u[g]}return u},b.iterables=function(_){return _ instanceof Set?"set":_ instanceof Map?"map":void 0}},8761:d=>{d.exports=function(...h){try{return JSON.stringify(...h)}catch(p){return"[Cannot display object: "+p.message+"]"}}},4277:(d,h)=>{const p={};h=d.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},p.typeMap=new Map([["[object Error]",h.error],["[object Map]",h.map],["[object Promise]",h.promise],["[object Set]",h.set],["[object WeakMap]",h.weakMap],["[object WeakSet]",h.weakSet]]),h.getInternalProto=function(a){if(Array.isArray(a))return h.array;if(a instanceof Date)return h.date;if(a instanceof RegExp)return h.regex;if(a instanceof Error)return h.error;const b=Object.prototype.toString.call(a);return p.typeMap.get(b)||h.generic}},7043:(d,h)=>{h.keys=function(p,a={}){return a.symbols!==!1?Reflect.ownKeys(p):Object.getOwnPropertyNames(p)}},3652:(d,h,p)=>{const a=p(375),b={};h.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(_,y){const r=[].concat((y=y||{}).before||[]),l=[].concat(y.after||[]),f=y.group||"?",u=y.sort||0;a(!r.includes(f),`Item cannot come before itself: ${f}`),a(!r.includes("?"),"Item cannot come before unassociated items"),a(!l.includes(f),`Item cannot come after itself: ${f}`),a(!l.includes("?"),"Item cannot come after unassociated items"),Array.isArray(_)||(_=[_]);for(const o of _){const g={seq:this._items.length,sort:u,before:r,after:l,group:f,node:o};this._items.push(g)}if(!y.manual){const o=this._sort();a(o,"item",f!=="?"?`added into group ${f}`:"","created a dependencies error")}return this.nodes}merge(_){Array.isArray(_)||(_=[_]);for(const r of _)if(r)for(const l of r._items)this._items.push(Object.assign({},l));this._items.sort(b.mergeSort);for(let r=0;r<this._items.length;++r)this._items[r].seq=r;const y=this._sort();return a(y,"merge created a dependencies error"),this.nodes}sort(){const _=this._sort();return a(_,"sort created a dependencies error"),this.nodes}_sort(){const _={},y=Object.create(null),r=Object.create(null);for(const g of this._items){const c=g.seq,m=g.group;r[m]=r[m]||[],r[m].push(c),_[c]=g.before;for(const T of g.after)y[T]=y[T]||[],y[T].push(c)}for(const g in _){const c=[];for(const m in _[g]){const T=_[g][m];r[T]=r[T]||[],c.push(...r[T])}_[g]=c}for(const g in y)if(r[g])for(const c of r[g])_[c].push(...y[g]);const l={};for(const g in _){const c=_[g];for(const m of c)l[m]=l[m]||[],l[m].push(g)}const f={},u=[];for(let g=0;g<this._items.length;++g){let c=g;if(l[g]){c=null;for(let m=0;m<this._items.length;++m){if(f[m]===!0)continue;l[m]||(l[m]=[]);const T=l[m].length;let x=0;for(let v=0;v<T;++v)f[l[m][v]]&&++x;if(x===T){c=m;break}}}c!==null&&(f[c]=!0,u.push(c))}if(u.length!==this._items.length)return!1;const o={};for(const g of this._items)o[g.seq]=g;this._items=[],this.nodes=[];for(const g of u){const c=o[g];this.nodes.push(c.node),this._items.push(c)}return!0}},b.mergeSort=(_,y)=>_.sort===y.sort?0:_.sort<y.sort?-1:1},5380:(d,h,p)=>{const a=p(443),b=p(2178),_={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};h.analyze=function(y,r={}){if(!y)return b.code("DOMAIN_NON_EMPTY_STRING");if(typeof y!="string")throw new Error("Invalid input: domain must be a string");if(y.length>256)return b.code("DOMAIN_TOO_LONG");if(_.nonAsciiRx.test(y)){if(r.allowUnicode===!1)return b.code("DOMAIN_INVALID_UNICODE_CHARS");y=y.normalize("NFC")}if(_.domainControlRx.test(y))return b.code("DOMAIN_INVALID_CHARS");y=_.punycode(y),r.allowFullyQualified&&y[y.length-1]==="."&&(y=y.slice(0,-1));const l=r.minDomainSegments||_.minDomainSegments,f=y.split(".");if(f.length<l)return b.code("DOMAIN_SEGMENTS_COUNT");if(r.maxDomainSegments&&f.length>r.maxDomainSegments)return b.code("DOMAIN_SEGMENTS_COUNT_MAX");const u=r.tlds;if(u){const o=f[f.length-1].toLowerCase();if(u.deny&&u.deny.has(o)||u.allow&&!u.allow.has(o))return b.code("DOMAIN_FORBIDDEN_TLDS")}for(let o=0;o<f.length;++o){const g=f[o];if(!g.length)return b.code("DOMAIN_EMPTY_SEGMENT");if(g.length>63)return b.code("DOMAIN_LONG_SEGMENT");if(o<f.length-1){if(!_.domainSegmentRx.test(g))return b.code("DOMAIN_INVALID_CHARS")}else if(!_.tldSegmentRx.test(g))return b.code("DOMAIN_INVALID_TLDS_CHARS")}return null},h.isValid=function(y,r){return!h.analyze(y,r)},_.punycode=function(y){y.includes("%")&&(y=y.replace(/%/g,"%25"));try{return new _.URL(`http://${y}`).host}catch{return y}}},1745:(d,h,p)=>{const a=p(9848),b=p(5380),_=p(2178),y={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};h.analyze=function(r,l){return y.email(r,l)},h.isValid=function(r,l){return!y.email(r,l)},y.email=function(r,l={}){if(typeof r!="string")throw new Error("Invalid input: email must be a string");if(!r)return _.code("EMPTY_STRING");const f=!y.nonAsciiRx.test(r);if(!f){if(l.allowUnicode===!1)return _.code("FORBIDDEN_UNICODE");r=r.normalize("NFC")}const u=r.split("@");if(u.length!==2)return u.length>2?_.code("MULTIPLE_AT_CHAR"):_.code("MISSING_AT_CHAR");const[o,g]=u;if(!o)return _.code("EMPTY_LOCAL");if(!l.ignoreLength){if(r.length>254)return _.code("ADDRESS_TOO_LONG");if(y.encoder.encode(o).length>64)return _.code("LOCAL_TOO_LONG")}return y.local(o,f)||b.analyze(g,l)},y.local=function(r,l){const f=r.split(".");for(const u of f){if(!u.length)return _.code("EMPTY_LOCAL_SEGMENT");if(l){if(!y.atextRx.test(u))return _.code("INVALID_LOCAL_CHARS")}else for(const o of u){if(y.atextRx.test(o))continue;const g=y.binary(o);if(!y.atomRx.test(g))return _.code("INVALID_LOCAL_CHARS")}}},y.binary=function(r){return Array.from(y.encoder.encode(r)).map((l=>String.fromCharCode(l))).join("")},y.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,y.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(d,h)=>{h.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},h.code=function(p){return{code:p,error:h.codes[p]}}},9959:(d,h,p)=>{const a=p(375),b=p(5752);h.regex=function(_={}){a(_.cidr===void 0||typeof _.cidr=="string","options.cidr must be a string");const y=_.cidr?_.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(y),"options.cidr must be one of required, optional, forbidden"),a(_.version===void 0||typeof _.version=="string"||Array.isArray(_.version),"options.version must be a string or an array of string");let r=_.version||["ipv4","ipv6","ipvfuture"];Array.isArray(r)||(r=[r]),a(r.length>=1,"options.version must have at least 1 version specified");for(let u=0;u<r.length;++u)a(typeof r[u]=="string","options.version must only contain strings"),r[u]=r[u].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(r[u]),"options.version contains unknown version "+r[u]+" - must be one of ipv4, ipv6, ipvfuture");r=Array.from(new Set(r));const l=`(?:${r.map((u=>{if(y==="forbidden")return b.ip[u];const o=`\\/${u==="ipv4"?b.ip.v4Cidr:b.ip.v6Cidr}`;return y==="required"?`${b.ip[u]}${o}`:`${b.ip[u]}(?:${o})?`})).join("|")})`,f=new RegExp(`^${l}$`);return{cidr:y,versions:r,regex:f,raw:l}}},5752:(d,h,p)=>{const a=p(375),b=p(6064),_={generate:function(){const y={},r="\\dA-Fa-f",l="["+r+"]",f="\\w-\\.~",u="!\\$&'\\(\\)\\*\\+,;=",o="%"+r,g=f+o+u+":@",c="["+g+"]",m="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";y.ipv4address="(?:"+m+"\\.){3}"+m;const T=l+"{1,4}",x="(?:"+T+":"+T+"|"+y.ipv4address+")",v="(?:"+T+":){6}"+x,w="::(?:"+T+":){5}"+x,C="(?:"+T+")?::(?:"+T+":){4}"+x,E="(?:(?:"+T+":){0,1}"+T+")?::(?:"+T+":){3}"+x,A="(?:(?:"+T+":){0,2}"+T+")?::(?:"+T+":){2}"+x,N="(?:(?:"+T+":){0,3}"+T+")?::"+T+":"+x,k="(?:(?:"+T+":){0,4}"+T+")?::"+x,L="(?:(?:"+T+":){0,5}"+T+")?::"+T,M="(?:(?:"+T+":){0,6}"+T+")?::";y.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",y.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",y.ipv6address="(?:"+v+"|"+w+"|"+C+"|"+E+"|"+A+"|"+N+"|"+k+"|"+L+"|"+M+")",y.ipvFuture="v"+l+"+\\.["+f+u+":]+",y.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",y.schemeRegex=new RegExp(y.scheme);const H="["+f+o+u+":]*",$="["+f+o+u+"]{1,255}",q="(?:\\[(?:"+y.ipv6address+"|"+y.ipvFuture+")\\]|"+y.ipv4address+"|"+$+")",z="(?:"+H+"@)?"+q+"(?::\\d*)?",Z="(?:"+H+"@)?("+q+")(?::\\d*)?",ae=c+"*",K=c+"+",V="(?:\\/"+ae+")*",se="\\/(?:"+K+V+")?",W=K+V,ee="["+f+o+u+"@]+"+V,te="(?:\\/\\/\\/"+ae+V+")";return y.hierPart="(?:(?:\\/\\/"+z+V+")|"+se+"|"+W+"|"+te+")",y.hierPartCapture="(?:(?:\\/\\/"+Z+V+")|"+se+"|"+W+")",y.relativeRef="(?:(?:\\/\\/"+z+V+")|"+se+"|"+ee+"|)",y.relativeRefCapture="(?:(?:\\/\\/"+Z+V+")|"+se+"|"+ee+"|)",y.query="["+g+"\\/\\?]*(?=#|$)",y.queryWithSquareBrackets="["+g+"\\[\\]\\/\\?]*(?=#|$)",y.fragment="["+g+"\\/\\?]*",y}};_.rfc3986=_.generate(),h.ip={v4Cidr:_.rfc3986.ipv4Cidr,v6Cidr:_.rfc3986.ipv6Cidr,ipv4:_.rfc3986.ipv4address,ipv6:_.rfc3986.ipv6address,ipvfuture:_.rfc3986.ipvFuture},_.createRegex=function(y){const r=_.rfc3986,l="(?:\\?"+(y.allowQuerySquareBrackets?r.queryWithSquareBrackets:r.query)+")?(?:#"+r.fragment+")?",f=y.domain?r.relativeRefCapture:r.relativeRef;if(y.relativeOnly)return _.wrap(f+l);let u="";if(y.scheme){a(y.scheme instanceof RegExp||typeof y.scheme=="string"||Array.isArray(y.scheme),"scheme must be a RegExp, String, or Array");const c=[].concat(y.scheme);a(c.length>=1,"scheme must have at least 1 scheme specified");const m=[];for(let T=0;T<c.length;++T){const x=c[T];a(x instanceof RegExp||typeof x=="string","scheme at position "+T+" must be a RegExp or String"),x instanceof RegExp?m.push(x.source.toString()):(a(r.schemeRegex.test(x),"scheme at position "+T+" must be a valid scheme"),m.push(b(x)))}u=m.join("|")}const o="(?:"+(u?"(?:"+u+")":r.scheme)+":"+(y.domain?r.hierPartCapture:r.hierPart)+")",g=y.allowRelative?"(?:"+o+"|"+f+")":o;return _.wrap(g+l,u)},_.wrap=function(y,r){return{raw:y=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${y}`,regex:new RegExp(`^${y}$`),scheme:r}},_.uriRegex=_.createRegex({}),h.regex=function(y={}){return y.scheme||y.allowRelative||y.relativeOnly||y.allowQuerySquareBrackets||y.domain?_.createRegex(y):_.uriRegex}},1447:(d,h)=>{const p={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};h.Parser=class{constructor(a,b={}){if(!b[p.settings]&&b.constants)for(const _ in b.constants){const y=b.constants[_];if(y!==null&&!["boolean","number","string"].includes(typeof y))throw new Error(`Formula constant ${_} contains invalid ${typeof y} value type`)}this.settings=b[p.settings]?b:Object.assign({[p.settings]:!0,constants:{},functions:{}},b),this.single=null,this._parts=null,this._parse(a)}_parse(a){let b=[],_="",y=0,r=!1;const l=u=>{if(y)throw new Error("Formula missing closing parenthesis");const o=b.length?b[b.length-1]:null;if(r||_||u){if(o&&o.type==="reference"&&u===")")return o.type="function",o.value=this._subFormula(_,o.value),void(_="");if(u===")"){const g=new h.Parser(_,this.settings);b.push({type:"segment",value:g})}else if(r){if(r==="]")return b.push({type:"reference",value:_}),void(_="");b.push({type:"literal",value:_})}else if(p.operatorCharacters.includes(_))o&&o.type==="operator"&&p.operators.includes(o.value+_)?o.value+=_:b.push({type:"operator",value:_});else if(_.match(p.numberRx))b.push({type:"constant",value:parseFloat(_)});else if(this.settings.constants[_]!==void 0)b.push({type:"constant",value:this.settings.constants[_]});else{if(!_.match(p.tokenRx))throw new Error(`Formula contains invalid token: ${_}`);b.push({type:"reference",value:_})}_=""}};for(const u of a)r?u===r?(l(),r=!1):_+=u:y?u==="("?(_+=u,++y):u===")"?(--y,y?_+=u:l(u)):_+=u:u in p.literals?r=p.literals[u]:u==="("?(l(),++y):p.operatorCharacters.includes(u)?(l(),_=u,l()):u!==" "?_+=u:l();l(),b=b.map(((u,o)=>u.type!=="operator"||u.value!=="-"||o&&b[o-1].type!=="operator"?u:{type:"operator",value:"n"}));let f=!1;for(const u of b){if(u.type==="operator"){if(p.operatorsPrefix.includes(u.value))continue;if(!f)throw new Error("Formula contains an operator in invalid position");if(!p.operators.includes(u.value))throw new Error(`Formula contains an unknown operator ${u.value}`)}else if(f)throw new Error("Formula missing expected operator");f=!f}if(!f)throw new Error("Formula contains invalid trailing operator");b.length===1&&["reference","literal","constant"].includes(b[0].type)&&(this.single={type:b[0].type==="reference"?"reference":"value",value:b[0].value}),this._parts=b.map((u=>{if(u.type==="operator")return p.operatorsPrefix.includes(u.value)?u:u.value;if(u.type!=="reference")return u.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(u.value))throw new Error(`Formula contains invalid reference ${u.value}`);return this.settings.reference?this.settings.reference(u.value):p.reference(u.value)}))}_subFormula(a,b){const _=this.settings.functions[b];if(typeof _!="function")throw new Error(`Formula contains unknown function ${b}`);let y=[];if(a){let r="",l=0,f=!1;const u=()=>{if(!r)throw new Error(`Formula contains function ${b} with invalid arguments ${a}`);y.push(r),r=""};for(let o=0;o<a.length;++o){const g=a[o];f?(r+=g,g===f&&(f=!1)):g in p.literals&&!l?(r+=g,f=p.literals[g]):g!==","||l?(r+=g,g==="("?++l:g===")"&&--l):u()}u()}return y=y.map((r=>new h.Parser(r,this.settings))),function(r){const l=[];for(const f of y)l.push(f.evaluate(r));return _.call(r,...l)}}evaluate(a){const b=this._parts.slice();for(let _=b.length-2;_>=0;--_){const y=b[_];if(y&&y.type==="operator"){const r=b[_+1];b.splice(_+1,1);const l=p.evaluate(r,a);b[_]=p.single(y.value,l)}}return p.operatorsOrder.forEach((_=>{for(let y=1;y<b.length-1;)if(_.includes(b[y])){const r=b[y],l=p.evaluate(b[y-1],a),f=p.evaluate(b[y+1],a);b.splice(y,2);const u=p.calculate(r,l,f);b[y-1]=u===0?0:u}else y+=2})),p.evaluate(b[0],a)}},h.Parser.prototype[p.symbol]=!0,p.reference=function(a){return function(b){return b&&b[a]!==void 0?b[a]:null}},p.evaluate=function(a,b){return a===null?null:typeof a=="function"?a(b):a[p.symbol]?a.evaluate(b):a},p.single=function(a,b){if(a==="!")return!b;const _=-b;return _===0?0:_},p.calculate=function(a,b,_){if(a==="??")return p.exists(b)?b:_;if(typeof b=="string"||typeof _=="string"){if(a==="+")return(b=p.exists(b)?b:"")+(p.exists(_)?_:"")}else switch(a){case"^":return Math.pow(b,_);case"*":return b*_;case"/":return b/_;case"%":return b%_;case"+":return b+_;case"-":return b-_}switch(a){case"<":return b<_;case"<=":return b<=_;case">":return b>_;case">=":return b>=_;case"==":return b===_;case"!=":return b!==_;case"&&":return b&&_;case"||":return b||_}return null},p.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:d=>{d.exports=JSON.parse('{"version":"17.13.3"}')}},s={},(function d(h){var p=s[h];if(p!==void 0)return p.exports;var a=s[h]={exports:{}};return n[h](a,a.exports,d),a.exports})(5107);var n,s}))})(Pn)),Pn.exports}var ru=su();const ne=ys(ru),Qr=-1,yn=0,St=1,hn=2,Ts=3,xs=4,As=5,vs=6,Xr=7,Jr=8,ir=typeof self=="object"?self:globalThis,au=(e,t)=>{const n=(d,h)=>(e.set(h,d),d),s=d=>{if(e.has(d))return e.get(d);const[h,p]=t[d];switch(h){case yn:case Qr:return n(p,d);case St:{const a=n([],d);for(const b of p)a.push(s(b));return a}case hn:{const a=n({},d);for(const[b,_]of p)a[s(b)]=s(_);return a}case Ts:return n(new Date(p),d);case xs:{const{source:a,flags:b}=p;return n(new RegExp(a,b),d)}case As:{const a=n(new Map,d);for(const[b,_]of p)a.set(s(b),s(_));return a}case vs:{const a=n(new Set,d);for(const b of p)a.add(s(b));return a}case Xr:{const{name:a,message:b}=p;return n(new ir[a](b),d)}case Jr:return n(BigInt(p),d);case"BigInt":return n(Object(BigInt(p)),d);case"ArrayBuffer":return n(new Uint8Array(p).buffer,p);case"DataView":{const{buffer:a}=new Uint8Array(p);return n(new DataView(a),p)}}return n(new ir[h](p),d)};return s},or=e=>au(new Map,e)(0),ut="",{toString:iu}={},{keys:ou}=Object,Et=e=>{const t=typeof e;if(t!=="object"||!e)return[yn,t];const n=iu.call(e).slice(8,-1);switch(n){case"Array":return[St,ut];case"Object":return[hn,ut];case"Date":return[Ts,ut];case"RegExp":return[xs,ut];case"Map":return[As,ut];case"Set":return[vs,ut];case"DataView":return[St,n]}return n.includes("Array")?[St,n]:n.includes("Error")?[Xr,n]:[hn,n]},Xt=([e,t])=>e===yn&&(t==="function"||t==="symbol"),uu=(e,t,n,s)=>{const d=(p,a)=>{const b=s.push(p)-1;return n.set(a,b),b},h=p=>{if(n.has(p))return n.get(p);let[a,b]=Et(p);switch(a){case yn:{let y=p;switch(b){case"bigint":a=Jr,y=p.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+b);y=null;break;case"undefined":return d([Qr],p)}return d([a,y],p)}case St:{if(b){let l=p;return b==="DataView"?l=new Uint8Array(p.buffer):b==="ArrayBuffer"&&(l=new Uint8Array(p)),d([b,[...l]],p)}const y=[],r=d([a,y],p);for(const l of p)y.push(h(l));return r}case hn:{if(b)switch(b){case"BigInt":return d([b,p.toString()],p);case"Boolean":case"Number":case"String":return d([b,p.valueOf()],p)}if(t&&"toJSON"in p)return h(p.toJSON());const y=[],r=d([a,y],p);for(const l of ou(p))(e||!Xt(Et(p[l])))&&y.push([h(l),h(p[l])]);return r}case Ts:return d([a,p.toISOString()],p);case xs:{const{source:y,flags:r}=p;return d([a,{source:y,flags:r}],p)}case As:{const y=[],r=d([a,y],p);for(const[l,f]of p)(e||!(Xt(Et(l))||Xt(Et(f))))&&y.push([h(l),h(f)]);return r}case vs:{const y=[],r=d([a,y],p);for(const l of p)(e||!Xt(Et(l)))&&y.push(h(l));return r}}const{message:_}=p;return d([a,{name:b,message:_}],p)};return h},ur=(e,{json:t,lossy:n}={})=>{const s=[];return uu(!(t||n),!!t,new Map,s)(e),s},cu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?or(ur(e,t)):structuredClone(e):(e,t)=>or(ur(e,t)),lu=Zr("end"),du=Zr("start");function Zr(e){return t;function t(n){const s=n&&n.position&&n.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function fu(e){const t=du(e),n=lu(e);if(t&&n)return{start:t,end:n}}const Je=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Pe={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Je,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Je],h2:[["className","sr-only"]],img:[...Je,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Je,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Je],table:[...Je],ul:[...Je,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Ke={}.hasOwnProperty;function hu(e,t){let n={type:"root",children:[]};const s={schema:t?{...Pe,...t}:Pe,stack:[]},d=ea(s,e);return d&&(Array.isArray(d)?d.length===1?n=d[0]:n.children=d:n=d),n}function ea(e,t){if(t&&typeof t=="object"){const n=t;switch(typeof n.type=="string"?n.type:""){case"comment":return mu(e,n);case"doctype":return pu(e,n);case"element":return gu(e,n);case"root":return bu(e,n);case"text":return yu(e,n)}}}function mu(e,t){if(e.schema.allowComments){const n=typeof t.value=="string"?t.value:"",s=n.indexOf("-->"),h={type:"comment",value:s<0?n:n.slice(0,s)};return Bt(h,t),h}}function pu(e,t){if(e.schema.allowDoctypes){const n={type:"doctype"};return Bt(n,t),n}}function gu(e,t){const n=typeof t.tagName=="string"?t.tagName:"";e.stack.push(n);const s=ta(e,t.children),d=Eu(e,t.properties);e.stack.pop();let h=!1;if(n&&n!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(n))&&(h=!0,e.schema.ancestors&&Ke.call(e.schema.ancestors,n))){const a=e.schema.ancestors[n];let b=-1;for(h=!1;++b<a.length;)e.stack.includes(a[b])&&(h=!0)}if(!h)return e.schema.strip&&!e.schema.strip.includes(n)?s:void 0;const p={type:"element",tagName:n,properties:d,children:s};return Bt(p,t),p}function bu(e,t){const s={type:"root",children:ta(e,t.children)};return Bt(s,t),s}function yu(e,t){const s={type:"text",value:typeof t.value=="string"?t.value:""};return Bt(s,t),s}function ta(e,t){const n=[];if(Array.isArray(t)){const s=t;let d=-1;for(;++d<s.length;){const h=ea(e,s[d]);h&&(Array.isArray(h)?n.push(...h):n.push(h))}}return n}function Eu(e,t){const n=e.stack[e.stack.length-1],s=e.schema.attributes,d=e.schema.required,h=s&&Ke.call(s,n)?s[n]:void 0,p=s&&Ke.call(s,"*")?s["*"]:void 0,a=t&&typeof t=="object"?t:{},b={};let _;for(_ in a)if(Ke.call(a,_)){const y=a[_];let r=cr(e,lr(h,_),_,y);r==null&&(r=cr(e,lr(p,_),_,y)),r!=null&&(b[_]=r)}if(d&&Ke.call(d,n)){const y=d[n];for(_ in y)Ke.call(y,_)&&!Ke.call(b,_)&&(b[_]=y[_])}return b}function cr(e,t,n,s){return t?Array.isArray(s)?_u(e,t,n,s):na(e,t,n,s):void 0}function _u(e,t,n,s){let d=-1;const h=[];for(;++d<s.length;){const p=na(e,t,n,s[d]);(typeof p=="number"||typeof p=="string")&&h.push(p)}return h}function na(e,t,n,s){if(!(typeof s!="boolean"&&typeof s!="number"&&typeof s!="string")&&Tu(e,n,s)){if(typeof t=="object"&&t.length>1){let d=!1,h=0;for(;++h<t.length;){const p=t[h];if(p&&typeof p=="object"&&"flags"in p){if(p.test(String(s))){d=!0;break}}else if(p===s){d=!0;break}}if(!d)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(n)?e.schema.clobberPrefix+s:s}}function Tu(e,t,n){const s=e.schema.protocols&&Ke.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!s||s.length===0)return!0;const d=String(n),h=d.indexOf(":"),p=d.indexOf("?"),a=d.indexOf("#"),b=d.indexOf("/");if(h<0||b>-1&&h>b||p>-1&&h>p||a>-1&&h>a)return!0;let _=-1;for(;++_<s.length;){const y=s[_];if(h===y.length&&d.slice(0,y.length)===y)return!0}return!1}function Bt(e,t){const n=fu(t);t.data&&(e.data=cu(t.data)),n&&(e.position=n)}function lr(e,t){let n,s=-1;if(e)for(;++s<e.length;){const d=e[s],h=typeof d=="string"?d:d[0];if(h===t)return d;h==="data*"&&(n=d)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return n}function sa(e){return function(t){return hu(t,e)}}const xu=ne.string().domain({tlds:{allow:["eth"]}}),Au=ne.string().pattern(/^0x[a-fA-F0-9]{40}$/),vu=(e,t)=>{if(!e)return t.error("any.required");if(e.includes(".eth")){if(xu.validate(e).error)return t.error("custom.address")}else if(Au.validate(e).error)return t.error("custom.address");return e},ra=ne.when("useCustomRecipient",{is:!0,then:ne.string().custom(vu),otherwise:ne.string().empty("")}).messages({"custom.address":'"Address" must be a valid Ethereum name or address'}),aa=e=>(t,n)=>{const s=n.original+"";return s.includes(".")&&s.split(".")[1].length>e?n.error("number.precision",{limit:e}):t},ia=e=>(t,n)=>{const s=ne.number().positive().unsafe(!0).label(e);try{ne.assert(t,s)}catch(d){return n.message(d.details[0].message)}return t.includes(".")&&t.split(".")[1].length>18?n.message(`"${e}" must have at most 18 decimal places after the decimal point`):t.endsWith(".")?t.splice(-1):t},Nu=ne.object().keys({title:ne.string().allow("").label("Title"),description:ne.string().allow("").label("Description"),editionSize:ne.number().integer().min(1).empty("").required().label("Edition size"),royaltyPercentage:ne.number().custom(aa(2)).min(0).max(100).empty("").required().label("Royalty percentage"),useCustomRecipient:ne.boolean().required(),customRecipient:ra.label("Address"),textType:ne.valid("text/plain","text/markdown","text/html").required()}),Cu=ne.object().keys({to:ra.label("Address"),amount:ne.number().integer().min(1).empty("").required().label("Amount")}),Su=ne.object().keys({amount:ne.number().integer().min(1).empty("").required().label("Amount")});ne.object().keys({amount:ne.number().min(1).empty("").label("Amount"),price:ne.string().custom(ia("Price")).empty("").label("Price")});const Iu=ne.object().keys({amount:ne.number().min(1).empty("").required().label("Amount"),price:ne.string().custom(ia("Price")).empty("").required().label("Price")});ne.object().keys({amount:ne.number().integer().min(1).empty("").required().label("Amount")});const wu=ne.object().keys({royaltyPercentage:ne.number().custom(aa(2)).min(0).max(100).empty("").required().label("Royalty percentage")}),Ru={...Pe,protocols:{...Pe.protocols,src:[...Pe.protocols.src,"data"]}},Ou={...Pe,tagNames:[...Pe.tagNames,"style"],protocols:{...Pe.protocols,src:[...Pe.protocols.src,"data"]},attributes:{...Pe.attributes,"*":[...Pe.attributes["*"],"class","className","style"]},clobber:[]},oa={buy:Su,editRoyalty:wu,list:Iu,validHTML:Ou,validMarkdown:Ru,mint:Nu,transfer:Cu};function ku(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?dr(e.position):"start"in e||"end"in e?dr(e):"line"in e||"column"in e?ts(e):""}function ts(e){return fr(e&&e.line)+":"+fr(e&&e.column)}function dr(e){return ts(e&&e.start)+"-"+ts(e&&e.end)}function fr(e){return e&&typeof e=="number"?e:1}class ye extends Error{constructor(t,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let d="",h={},p=!1;if(n&&("line"in n&&"column"in n?h={place:n}:"start"in n&&"end"in n?h={place:n}:"type"in n?h={ancestors:[n],place:n.position}:h={...n}),typeof t=="string"?d=t:!h.cause&&t&&(p=!0,d=t.message,h.cause=t),!h.ruleId&&!h.source&&typeof s=="string"){const b=s.indexOf(":");b===-1?h.ruleId=s:(h.source=s.slice(0,b),h.ruleId=s.slice(b+1))}if(!h.place&&h.ancestors&&h.ancestors){const b=h.ancestors[h.ancestors.length-1];b&&(h.place=b.position)}const a=h.place&&"start"in h.place?h.place.start:h.place;this.ancestors=h.ancestors||void 0,this.cause=h.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=d,this.line=a?a.line:void 0,this.name=ku(h.place)||"1:1",this.place=h.place||void 0,this.reason=this.message,this.ruleId=h.ruleId||void 0,this.source=h.source||void 0,this.stack=p&&h.cause&&typeof h.cause.stack=="string"?h.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ye.prototype.file="";ye.prototype.name="";ye.prototype.reason="";ye.prototype.message="";ye.prototype.stack="";ye.prototype.column=void 0;ye.prototype.line=void 0;ye.prototype.ancestors=void 0;ye.prototype.cause=void 0;ye.prototype.fatal=void 0;ye.prototype.place=void 0;ye.prototype.ruleId=void 0;ye.prototype.source=void 0;const Ue={basename:Lu,dirname:Du,extname:Pu,join:Mu,sep:"/"};function Lu(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ut(e);let n=0,s=-1,d=e.length,h;if(t===void 0||t.length===0||t.length>e.length){for(;d--;)if(e.codePointAt(d)===47){if(h){n=d+1;break}}else s<0&&(h=!0,s=d+1);return s<0?"":e.slice(n,s)}if(t===e)return"";let p=-1,a=t.length-1;for(;d--;)if(e.codePointAt(d)===47){if(h){n=d+1;break}}else p<0&&(h=!0,p=d+1),a>-1&&(e.codePointAt(d)===t.codePointAt(a--)?a<0&&(s=d):(a=-1,s=p));return n===s?s=p:s<0&&(s=e.length),e.slice(n,s)}function Du(e){if(Ut(e),e.length===0)return".";let t=-1,n=e.length,s;for(;--n;)if(e.codePointAt(n)===47){if(s){t=n;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Pu(e){Ut(e);let t=e.length,n=-1,s=0,d=-1,h=0,p;for(;t--;){const a=e.codePointAt(t);if(a===47){if(p){s=t+1;break}continue}n<0&&(p=!0,n=t+1),a===46?d<0?d=t:h!==1&&(h=1):d>-1&&(h=-1)}return d<0||n<0||h===0||h===1&&d===n-1&&d===s+1?"":e.slice(d,n)}function Mu(...e){let t=-1,n;for(;++t<e.length;)Ut(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Bu(n)}function Bu(e){Ut(e);const t=e.codePointAt(0)===47;let n=Uu(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Uu(e,t){let n="",s=0,d=-1,h=0,p=-1,a,b;for(;++p<=e.length;){if(p<e.length)a=e.codePointAt(p);else{if(a===47)break;a=47}if(a===47){if(!(d===p-1||h===1))if(d!==p-1&&h===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(b=n.lastIndexOf("/"),b!==n.length-1){b<0?(n="",s=0):(n=n.slice(0,b),s=n.length-1-n.lastIndexOf("/")),d=p,h=0;continue}}else if(n.length>0){n="",s=0,d=p,h=0;continue}}t&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+e.slice(d+1,p):n=e.slice(d+1,p),s=p-d-1;d=p,h=0}else a===46&&h>-1?h++:h=-1}return n}function Ut(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Fu={cwd:Hu};function Hu(){return"/"}function ns(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ju(e){if(typeof e=="string")e=new URL(e);else if(!ns(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return $u(e)}function $u(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const s=t.codePointAt(n+2);if(s===70||s===102){const d=new TypeError("File URL path must not include encoded / characters");throw d.code="ERR_INVALID_FILE_URL_PATH",d}}return decodeURIComponent(t)}const Mn=["history","path","basename","stem","extname","dirname"];class ss{constructor(t){let n;t?ns(t)?n={path:t}:typeof t=="string"||qu(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Fu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Mn.length;){const h=Mn[s];h in n&&n[h]!==void 0&&n[h]!==null&&(this[h]=h==="history"?[...n[h]]:n[h])}let d;for(d in n)Mn.includes(d)||(this[d]=n[d])}get basename(){return typeof this.path=="string"?Ue.basename(this.path):void 0}set basename(t){Un(t,"basename"),Bn(t,"basename"),this.path=Ue.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ue.dirname(this.path):void 0}set dirname(t){hr(this.basename,"dirname"),this.path=Ue.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ue.extname(this.path):void 0}set extname(t){if(Bn(t,"extname"),hr(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ue.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ns(t)&&(t=ju(t)),Un(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ue.basename(this.path,this.extname):void 0}set stem(t){Un(t,"stem"),Bn(t,"stem"),this.path=Ue.join(this.dirname||"",t+(this.extname||""))}fail(t,n,s){const d=this.message(t,n,s);throw d.fatal=!0,d}info(t,n,s){const d=this.message(t,n,s);return d.fatal=void 0,d}message(t,n,s){const d=new ye(t,n,s);return this.path&&(d.name=this.path+":"+d.name,d.file=this.path),d.fatal=!1,this.messages.push(d),d}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Bn(e,t){if(e&&e.includes(Ue.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ue.sep+"`")}function Un(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function hr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Yu=(function(e){const s=this.constructor.prototype,d=s[e],h=function(){return d.apply(h,arguments)};return Object.setPrototypeOf(h,s),h}),zu={}.hasOwnProperty;class Ns extends Yu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zi()}copy(){const t=new Ns;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];t.use(...s)}return t.data(kn(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(jn("data",this.frozen),this.namespace[t]=n,this):zu.call(this.namespace,t)&&this.namespace[t]||void 0:t?(jn("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const d=n.call(t,...s);typeof d=="function"&&this.transformers.use(d)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Jt(t),s=this.parser||this.Parser;return Fn("parse",s),s(String(n),n)}process(t,n){const s=this;return this.freeze(),Fn("process",this.parser||this.Parser),Hn("process",this.compiler||this.Compiler),n?d(void 0,n):new Promise(d);function d(h,p){const a=Jt(t),b=s.parse(a);s.run(b,a,function(y,r,l){if(y||!r||!l)return _(y);const f=r,u=s.stringify(f,l);Ku(u)?l.value=u:l.result=u,_(y,l)});function _(y,r){y||!r?p(y):h?h(r):n(void 0,r)}}}processSync(t){let n=!1,s;return this.freeze(),Fn("processSync",this.parser||this.Parser),Hn("processSync",this.compiler||this.Compiler),this.process(t,d),pr("processSync","process",n),s;function d(h,p){n=!0,Js(h),s=p}}run(t,n,s){mr(t),this.freeze();const d=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?h(void 0,s):new Promise(h);function h(p,a){const b=Jt(n);d.run(t,b,_);function _(y,r,l){const f=r||t;y?a(y):p?p(f):s(void 0,f,l)}}}runSync(t,n){let s=!1,d;return this.run(t,n,h),pr("runSync","run",s),d;function h(p,a){Js(p),d=a,s=!0}}stringify(t,n){this.freeze();const s=Jt(n),d=this.compiler||this.Compiler;return Hn("stringify",d),mr(t),d(t,s)}use(t,...n){const s=this.attachers,d=this.namespace;if(jn("use",this.frozen),t!=null)if(typeof t=="function")b(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):p(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function h(_){if(typeof _=="function")b(_,[]);else if(typeof _=="object")if(Array.isArray(_)){const[y,...r]=_;b(y,r)}else p(_);else throw new TypeError("Expected usable value, not `"+_+"`")}function p(_){if(!("plugins"in _)&&!("settings"in _))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(_.plugins),_.settings&&(d.settings=kn(!0,d.settings,_.settings))}function a(_){let y=-1;if(_!=null)if(Array.isArray(_))for(;++y<_.length;){const r=_[y];h(r)}else throw new TypeError("Expected a list of plugins, not `"+_+"`")}function b(_,y){let r=-1,l=-1;for(;++r<s.length;)if(s[r][0]===_){l=r;break}if(l===-1)s.push([_,...y]);else if(y.length>0){let[f,...u]=y;const o=s[l][1];Jn(o)&&Jn(f)&&(f=kn(!0,o,f)),s[l]=[_,f,...u]}}}}const Vu=new Ns().freeze();function Fn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Hn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function jn(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mr(e){if(!Jn(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function pr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jt(e){return Wu(e)?e:new ss(e)}function Wu(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Ku(e){return typeof e=="string"||Gu(e)}function Gu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}class Ft{constructor(t,n,s){this.normal=n,this.property=t,s&&(this.space=s)}}Ft.prototype.normal={};Ft.prototype.property={};Ft.prototype.space=void 0;function ua(e,t){const n={},s={};for(const d of e)Object.assign(n,d.property),Object.assign(s,d.normal);return new Ft(n,s,t)}function Dt(e){return e.toLowerCase()}class xe{constructor(t,n){this.attribute=n,this.property=t}}xe.prototype.attribute="";xe.prototype.booleanish=!1;xe.prototype.boolean=!1;xe.prototype.commaOrSpaceSeparated=!1;xe.prototype.commaSeparated=!1;xe.prototype.defined=!1;xe.prototype.mustUseProperty=!1;xe.prototype.number=!1;xe.prototype.overloadedBoolean=!1;xe.prototype.property="";xe.prototype.spaceSeparated=!1;xe.prototype.space=void 0;let Qu=0;const Q=tt(),ue=tt(),rs=tt(),F=tt(),re=tt(),ft=tt(),Ne=tt();function tt(){return 2**++Qu}const as=Object.freeze(Object.defineProperty({__proto__:null,boolean:Q,booleanish:ue,commaOrSpaceSeparated:Ne,commaSeparated:ft,number:F,overloadedBoolean:rs,spaceSeparated:re},Symbol.toStringTag,{value:"Module"})),$n=Object.keys(as);class Cs extends xe{constructor(t,n,s,d){let h=-1;if(super(t,n),gr(this,"space",d),typeof s=="number")for(;++h<$n.length;){const p=$n[h];gr(this,$n[h],(s&as[p])===as[p])}}}Cs.prototype.defined=!0;function gr(e,t,n){n&&(e[t]=n)}function gt(e){const t={},n={};for(const[s,d]of Object.entries(e.properties)){const h=new Cs(s,e.transform(e.attributes||{},s),d,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(h.mustUseProperty=!0),t[s]=h,n[Dt(s)]=s,n[Dt(h.attribute)]=s}return new Ft(t,n,e.space)}const ca=gt({properties:{ariaActiveDescendant:null,ariaAtomic:ue,ariaAutoComplete:null,ariaBusy:ue,ariaChecked:ue,ariaColCount:F,ariaColIndex:F,ariaColSpan:F,ariaControls:re,ariaCurrent:null,ariaDescribedBy:re,ariaDetails:null,ariaDisabled:ue,ariaDropEffect:re,ariaErrorMessage:null,ariaExpanded:ue,ariaFlowTo:re,ariaGrabbed:ue,ariaHasPopup:null,ariaHidden:ue,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:re,ariaLevel:F,ariaLive:null,ariaModal:ue,ariaMultiLine:ue,ariaMultiSelectable:ue,ariaOrientation:null,ariaOwns:re,ariaPlaceholder:null,ariaPosInSet:F,ariaPressed:ue,ariaReadOnly:ue,ariaRelevant:null,ariaRequired:ue,ariaRoleDescription:re,ariaRowCount:F,ariaRowIndex:F,ariaRowSpan:F,ariaSelected:ue,ariaSetSize:F,ariaSort:null,ariaValueMax:F,ariaValueMin:F,ariaValueNow:F,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function la(e,t){return t in e?e[t]:t}function da(e,t){return la(e,t.toLowerCase())}const Xu=gt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ft,acceptCharset:re,accessKey:re,action:null,allow:null,allowFullScreen:Q,allowPaymentRequest:Q,allowUserMedia:Q,alt:null,as:null,async:Q,autoCapitalize:null,autoComplete:re,autoFocus:Q,autoPlay:Q,blocking:re,capture:null,charSet:null,checked:Q,cite:null,className:re,cols:F,colSpan:null,content:null,contentEditable:ue,controls:Q,controlsList:re,coords:F|ft,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Q,defer:Q,dir:null,dirName:null,disabled:Q,download:rs,draggable:ue,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Q,formTarget:null,headers:re,height:F,hidden:rs,high:F,href:null,hrefLang:null,htmlFor:re,httpEquiv:re,id:null,imageSizes:null,imageSrcSet:null,inert:Q,inputMode:null,integrity:null,is:null,isMap:Q,itemId:null,itemProp:re,itemRef:re,itemScope:Q,itemType:re,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Q,low:F,manifest:null,max:null,maxLength:F,media:null,method:null,min:null,minLength:F,multiple:Q,muted:Q,name:null,nonce:null,noModule:Q,noValidate:Q,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Q,optimum:F,pattern:null,ping:re,placeholder:null,playsInline:Q,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Q,referrerPolicy:null,rel:re,required:Q,reversed:Q,rows:F,rowSpan:F,sandbox:re,scope:null,scoped:Q,seamless:Q,selected:Q,shadowRootClonable:Q,shadowRootDelegatesFocus:Q,shadowRootMode:null,shape:null,size:F,sizes:null,slot:null,span:F,spellCheck:ue,src:null,srcDoc:null,srcLang:null,srcSet:null,start:F,step:null,style:null,tabIndex:F,target:null,title:null,translate:null,type:null,typeMustMatch:Q,useMap:null,value:ue,width:F,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:re,axis:null,background:null,bgColor:null,border:F,borderColor:null,bottomMargin:F,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Q,declare:Q,event:null,face:null,frame:null,frameBorder:null,hSpace:F,leftMargin:F,link:null,longDesc:null,lowSrc:null,marginHeight:F,marginWidth:F,noResize:Q,noHref:Q,noShade:Q,noWrap:Q,object:null,profile:null,prompt:null,rev:null,rightMargin:F,rules:null,scheme:null,scrolling:ue,standby:null,summary:null,text:null,topMargin:F,valueType:null,version:null,vAlign:null,vLink:null,vSpace:F,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Q,disableRemotePlayback:Q,prefix:null,property:null,results:F,security:null,unselectable:null},space:"html",transform:da}),Ju=gt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ne,accentHeight:F,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:F,amplitude:F,arabicForm:null,ascent:F,attributeName:null,attributeType:null,azimuth:F,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:F,by:null,calcMode:null,capHeight:F,className:re,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:F,diffuseConstant:F,direction:null,display:null,dur:null,divisor:F,dominantBaseline:null,download:Q,dx:null,dy:null,edgeMode:null,editable:null,elevation:F,enableBackground:null,end:null,event:null,exponent:F,externalResourcesRequired:null,fill:null,fillOpacity:F,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ft,g2:ft,glyphName:ft,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:F,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:F,horizOriginX:F,horizOriginY:F,id:null,ideographic:F,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:F,k:F,k1:F,k2:F,k3:F,k4:F,kernelMatrix:Ne,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:F,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:F,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:F,overlineThickness:F,paintOrder:null,panose1:null,path:null,pathLength:F,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:re,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:F,pointsAtY:F,pointsAtZ:F,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ne,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ne,rev:Ne,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ne,requiredFeatures:Ne,requiredFonts:Ne,requiredFormats:Ne,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:F,specularExponent:F,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:F,strikethroughThickness:F,string:null,stroke:null,strokeDashArray:Ne,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:F,strokeOpacity:F,strokeWidth:null,style:null,surfaceScale:F,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ne,tabIndex:F,tableValues:null,target:null,targetX:F,targetY:F,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ne,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:F,underlineThickness:F,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:F,values:null,vAlphabetic:F,vMathematical:F,vectorEffect:null,vHanging:F,vIdeographic:F,version:null,vertAdvY:F,vertOriginX:F,vertOriginY:F,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:F,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:la}),fa=gt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),ha=gt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:da}),ma=gt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Zu=/[A-Z]/g,br=/-[a-z]/g,ec=/^data[-\w.:]+$/i;function Ss(e,t){const n=Dt(t);let s=t,d=xe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ec.test(t)){if(t.charAt(4)==="-"){const h=t.slice(5).replace(br,nc);s="data"+h.charAt(0).toUpperCase()+h.slice(1)}else{const h=t.slice(4);if(!br.test(h)){let p=h.replace(Zu,tc);p.charAt(0)!=="-"&&(p="-"+p),t="data"+p}}d=Cs}return new d(s,t)}function tc(e){return"-"+e.toLowerCase()}function nc(e){return e.charAt(1).toUpperCase()}const En=ua([ca,Xu,fa,ha,ma],"html"),Ht=ua([ca,Ju,fa,ha,ma],"svg"),yr=/[#.]/g;function sc(e,t){const n=e||"",s={};let d=0,h,p;for(;d<n.length;){yr.lastIndex=d;const a=yr.exec(n),b=n.slice(d,a?a.index:n.length);b&&(h?h==="#"?s.id=b:Array.isArray(s.className)?s.className.push(b):s.className=[b]:p=b,d+=b.length),a&&(h=a[0],d++)}return{type:"element",tagName:p||t||"div",properties:s,children:[]}}function pa(e,t,n){const s=n?oc(n):void 0;function d(h,p,...a){let b;if(h==null){b={type:"root",children:[]};const _=p;a.unshift(_)}else{b=sc(h,t);const _=b.tagName.toLowerCase(),y=s?s.get(_):void 0;if(b.tagName=y||_,rc(p))a.unshift(p);else for(const[r,l]of Object.entries(p))ac(e,b.properties,r,l)}for(const _ of a)is(b.children,_);return b.type==="element"&&b.tagName==="template"&&(b.content={type:"root",children:b.children},b.children=[]),b}return d}function rc(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const s of n){const d=t[s];if(d&&typeof d=="object"){if(!Array.isArray(d))return!0;const h=d;for(const p of h)if(typeof p!="number"&&typeof p!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function ac(e,t,n,s){const d=Ss(e,n);let h;if(s!=null){if(typeof s=="number"){if(Number.isNaN(s))return;h=s}else typeof s=="boolean"?h=s:typeof s=="string"?d.spaceSeparated?h=Zs(s):d.commaSeparated?h=er(s):d.commaOrSpaceSeparated?h=Zs(er(s).join(" ")):h=Er(d,d.property,s):Array.isArray(s)?h=[...s]:h=d.property==="style"?ic(s):String(s);if(Array.isArray(h)){const p=[];for(const a of h)p.push(Er(d,d.property,a));h=p}d.property==="className"&&Array.isArray(t.className)&&(h=t.className.concat(h)),t[d.property]=h}}function is(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)is(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?is(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Er(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Dt(n)===Dt(t)))return!0}return n}function ic(e){const t=[];for(const[n,s]of Object.entries(e))t.push([n,s].join(": "));return t.join("; ")}function oc(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const uc=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],cc=pa(En,"div"),lc=pa(Ht,"g",uc);function dc(e){const t=String(e),n=[];return{toOffset:d,toPoint:s};function s(h){if(typeof h=="number"&&h>-1&&h<=t.length){let p=0;for(;;){let a=n[p];if(a===void 0){const b=_r(t,n[p-1]);a=b===-1?t.length+1:b+1,n[p]=a}if(a>h)return{line:p+1,column:h-(p>0?n[p-1]:0)+1,offset:h};p++}}}function d(h){if(h&&typeof h.line=="number"&&typeof h.column=="number"&&!Number.isNaN(h.line)&&!Number.isNaN(h.column)){for(;n.length<h.line;){const a=n[n.length-1],b=_r(t,a),_=b===-1?t.length+1:b+1;if(a===_)break;n.push(_)}const p=(h.line>1?n[h.line-2]:0)+h.column-1;if(p<n[h.line-1])return p}}}function _r(e,t){const n=e.indexOf("\r",t),s=e.indexOf(`
`,t);return s===-1?n:n===-1||n+1===s?s:n<s?n:s}const ga={}.hasOwnProperty,fc=Object.prototype;function hc(e,t){const n=t||{};return Is({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ht:En,verbose:n.verbose||!1},e)}function Is(e,t){let n;switch(t.nodeName){case"#comment":{const s=t;return n={type:"comment",value:s.data},rn(e,s,n),n}case"#document":case"#document-fragment":{const s=t,d="mode"in s?s.mode==="quirks"||s.mode==="limited-quirks":!1;if(n={type:"root",children:ba(e,t.childNodes),data:{quirksMode:d}},e.file&&e.location){const h=String(e.file),p=dc(h),a=p.toPoint(0),b=p.toPoint(h.length);n.position={start:a,end:b}}return n}case"#documentType":{const s=t;return n={type:"doctype"},rn(e,s,n),n}case"#text":{const s=t;return n={type:"text",value:s.value},rn(e,s,n),n}default:return n=mc(e,t),n}}function ba(e,t){let n=-1;const s=[];for(;++n<t.length;){const d=Is(e,t[n]);s.push(d)}return s}function mc(e,t){const n=e.schema;e.schema=t.namespaceURI===Vi.svg?Ht:En;let s=-1;const d={};for(;++s<t.attrs.length;){const a=t.attrs[s],b=(a.prefix?a.prefix+":":"")+a.name;ga.call(fc,b)||(d[b]=a.value)}const p=(e.schema.space==="svg"?lc:cc)(t.tagName,d,ba(e,t.childNodes));if(rn(e,t,p),p.tagName==="template"){const a=t,b=a.sourceCodeLocation,_=b&&b.startTag&&lt(b.startTag),y=b&&b.endTag&&lt(b.endTag),r=Is(e,a.content);_&&y&&e.file&&(r.position={start:_.end,end:y.start}),p.content=r}return e.schema=n,p}function rn(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const s=pc(e,n,t.sourceCodeLocation);s&&(e.location=!0,n.position=s)}}function pc(e,t,n){const s=lt(n);if(t.type==="element"){const d=t.children[t.children.length-1];if(s&&!n.endTag&&d&&d.position&&d.position.end&&(s.end=Object.assign({},d.position.end)),e.verbose){const h={};let p;if(n.attrs)for(p in n.attrs)ga.call(n.attrs,p)&&(h[Ss(e.schema,p).property]=lt(n.attrs[p]));n.startTag;const a=lt(n.startTag),b=n.endTag?lt(n.endTag):void 0,_={opening:a};b&&(_.closing=b),_.properties=h,t.data={position:_}}}return s}function lt(e){const t=Tr({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Tr({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Tr(e){return e.line&&e.column?e:void 0}const gc=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),oe="";var S;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(S||(S={}));const Ee={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function ya(e){return e>=55296&&e<=57343}function bc(e){return e>=56320&&e<=57343}function yc(e,t){return(e-55296)*1024+9216+t}function Ea(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function _a(e){return e>=64976&&e<=65007||gc.has(e)}var P;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(P||(P={}));const Ec=65536;class _c{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Ec,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:s,col:d,offset:h}=this,p=d+n,a=h+n;return{code:t,startLine:s,endLine:s,startCol:p,endCol:p,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(bc(n))return this.pos++,this._addGap(),yc(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,S.EOF;return this._err(P.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let s=0;s<t.length;s++)if((this.html.charCodeAt(this.pos+s)|32)!==t.charCodeAt(s))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;const s=this.html.charCodeAt(n);return s===S.CARRIAGE_RETURN?S.LINE_FEED:s}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;let t=this.html.charCodeAt(this.pos);return t===S.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,S.LINE_FEED):t===S.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,ya(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===S.LINE_FEED||t===S.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Ea(t)?this._err(P.controlCharacterInInputStream):_a(t)&&this._err(P.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var J;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(J||(J={}));function Ta(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Tc=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xc=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function Ac(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=xc.get(e))!==null&&t!==void 0?t:e}var he;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(he||(he={}));const vc=32;var Ge;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ge||(Ge={}));function os(e){return e>=he.ZERO&&e<=he.NINE}function Nc(e){return e>=he.UPPER_A&&e<=he.UPPER_F||e>=he.LOWER_A&&e<=he.LOWER_F}function Cc(e){return e>=he.UPPER_A&&e<=he.UPPER_Z||e>=he.LOWER_A&&e<=he.LOWER_Z||os(e)}function Sc(e){return e===he.EQUALS||Cc(e)}var fe;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(fe||(fe={}));var qe;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(qe||(qe={}));class Ic{constructor(t,n,s){this.decodeTree=t,this.emitCodePoint=n,this.errors=s,this.state=fe.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=qe.Strict}startEntity(t){this.decodeMode=t,this.state=fe.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case fe.EntityStart:return t.charCodeAt(n)===he.NUM?(this.state=fe.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=fe.NamedEntity,this.stateNamedEntity(t,n));case fe.NumericStart:return this.stateNumericStart(t,n);case fe.NumericDecimal:return this.stateNumericDecimal(t,n);case fe.NumericHex:return this.stateNumericHex(t,n);case fe.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|vc)===he.LOWER_X?(this.state=fe.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=fe.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,s,d){if(n!==s){const h=s-n;this.result=this.result*Math.pow(d,h)+Number.parseInt(t.substr(n,h),d),this.consumed+=h}}stateNumericHex(t,n){const s=n;for(;n<t.length;){const d=t.charCodeAt(n);if(os(d)||Nc(d))n+=1;else return this.addToNumericResult(t,s,n,16),this.emitNumericEntity(d,3)}return this.addToNumericResult(t,s,n,16),-1}stateNumericDecimal(t,n){const s=n;for(;n<t.length;){const d=t.charCodeAt(n);if(os(d))n+=1;else return this.addToNumericResult(t,s,n,10),this.emitNumericEntity(d,2)}return this.addToNumericResult(t,s,n,10),-1}emitNumericEntity(t,n){var s;if(this.consumed<=n)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===he.SEMI)this.consumed+=1;else if(this.decodeMode===qe.Strict)return 0;return this.emitCodePoint(Ac(this.result),this.consumed),this.errors&&(t!==he.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:s}=this;let d=s[this.treeIndex],h=(d&Ge.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const p=t.charCodeAt(n);if(this.treeIndex=wc(s,d,this.treeIndex+Math.max(1,h),p),this.treeIndex<0)return this.result===0||this.decodeMode===qe.Attribute&&(h===0||Sc(p))?0:this.emitNotTerminatedNamedEntity();if(d=s[this.treeIndex],h=(d&Ge.VALUE_LENGTH)>>14,h!==0){if(p===he.SEMI)return this.emitNamedEntityData(this.treeIndex,h,this.consumed+this.excess);this.decodeMode!==qe.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:s}=this,d=(s[n]&Ge.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,d,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,s){const{decodeTree:d}=this;return this.emitCodePoint(n===1?d[t]&~Ge.VALUE_LENGTH:d[t+1],s),n===3&&this.emitCodePoint(d[t+2],s),s}end(){var t;switch(this.state){case fe.NamedEntity:return this.result!==0&&(this.decodeMode!==qe.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case fe.NumericDecimal:return this.emitNumericEntity(0,2);case fe.NumericHex:return this.emitNumericEntity(0,3);case fe.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case fe.EntityStart:return 0}}}function wc(e,t,n,s){const d=(t&Ge.BRANCH_LENGTH)>>7,h=t&Ge.JUMP_TABLE;if(d===0)return h!==0&&s===h?n:-1;if(h){const b=s-h;return b<0||b>=d?-1:e[n+b]-1}let p=n,a=p+d-1;for(;p<=a;){const b=p+a>>>1,_=e[b];if(_<s)p=b+1;else if(_>s)a=b-1;else return e[b+d]}return-1}var B;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(B||(B={}));var et;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(et||(et={}));var Re;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Re||(Re={}));var D;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(D||(D={}));var i;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(i||(i={}));const Rc=new Map([[D.A,i.A],[D.ADDRESS,i.ADDRESS],[D.ANNOTATION_XML,i.ANNOTATION_XML],[D.APPLET,i.APPLET],[D.AREA,i.AREA],[D.ARTICLE,i.ARTICLE],[D.ASIDE,i.ASIDE],[D.B,i.B],[D.BASE,i.BASE],[D.BASEFONT,i.BASEFONT],[D.BGSOUND,i.BGSOUND],[D.BIG,i.BIG],[D.BLOCKQUOTE,i.BLOCKQUOTE],[D.BODY,i.BODY],[D.BR,i.BR],[D.BUTTON,i.BUTTON],[D.CAPTION,i.CAPTION],[D.CENTER,i.CENTER],[D.CODE,i.CODE],[D.COL,i.COL],[D.COLGROUP,i.COLGROUP],[D.DD,i.DD],[D.DESC,i.DESC],[D.DETAILS,i.DETAILS],[D.DIALOG,i.DIALOG],[D.DIR,i.DIR],[D.DIV,i.DIV],[D.DL,i.DL],[D.DT,i.DT],[D.EM,i.EM],[D.EMBED,i.EMBED],[D.FIELDSET,i.FIELDSET],[D.FIGCAPTION,i.FIGCAPTION],[D.FIGURE,i.FIGURE],[D.FONT,i.FONT],[D.FOOTER,i.FOOTER],[D.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[D.FORM,i.FORM],[D.FRAME,i.FRAME],[D.FRAMESET,i.FRAMESET],[D.H1,i.H1],[D.H2,i.H2],[D.H3,i.H3],[D.H4,i.H4],[D.H5,i.H5],[D.H6,i.H6],[D.HEAD,i.HEAD],[D.HEADER,i.HEADER],[D.HGROUP,i.HGROUP],[D.HR,i.HR],[D.HTML,i.HTML],[D.I,i.I],[D.IMG,i.IMG],[D.IMAGE,i.IMAGE],[D.INPUT,i.INPUT],[D.IFRAME,i.IFRAME],[D.KEYGEN,i.KEYGEN],[D.LABEL,i.LABEL],[D.LI,i.LI],[D.LINK,i.LINK],[D.LISTING,i.LISTING],[D.MAIN,i.MAIN],[D.MALIGNMARK,i.MALIGNMARK],[D.MARQUEE,i.MARQUEE],[D.MATH,i.MATH],[D.MENU,i.MENU],[D.META,i.META],[D.MGLYPH,i.MGLYPH],[D.MI,i.MI],[D.MO,i.MO],[D.MN,i.MN],[D.MS,i.MS],[D.MTEXT,i.MTEXT],[D.NAV,i.NAV],[D.NOBR,i.NOBR],[D.NOFRAMES,i.NOFRAMES],[D.NOEMBED,i.NOEMBED],[D.NOSCRIPT,i.NOSCRIPT],[D.OBJECT,i.OBJECT],[D.OL,i.OL],[D.OPTGROUP,i.OPTGROUP],[D.OPTION,i.OPTION],[D.P,i.P],[D.PARAM,i.PARAM],[D.PLAINTEXT,i.PLAINTEXT],[D.PRE,i.PRE],[D.RB,i.RB],[D.RP,i.RP],[D.RT,i.RT],[D.RTC,i.RTC],[D.RUBY,i.RUBY],[D.S,i.S],[D.SCRIPT,i.SCRIPT],[D.SEARCH,i.SEARCH],[D.SECTION,i.SECTION],[D.SELECT,i.SELECT],[D.SOURCE,i.SOURCE],[D.SMALL,i.SMALL],[D.SPAN,i.SPAN],[D.STRIKE,i.STRIKE],[D.STRONG,i.STRONG],[D.STYLE,i.STYLE],[D.SUB,i.SUB],[D.SUMMARY,i.SUMMARY],[D.SUP,i.SUP],[D.TABLE,i.TABLE],[D.TBODY,i.TBODY],[D.TEMPLATE,i.TEMPLATE],[D.TEXTAREA,i.TEXTAREA],[D.TFOOT,i.TFOOT],[D.TD,i.TD],[D.TH,i.TH],[D.THEAD,i.THEAD],[D.TITLE,i.TITLE],[D.TR,i.TR],[D.TRACK,i.TRACK],[D.TT,i.TT],[D.U,i.U],[D.UL,i.UL],[D.SVG,i.SVG],[D.VAR,i.VAR],[D.WBR,i.WBR],[D.XMP,i.XMP]]);function _n(e){var t;return(t=Rc.get(e))!==null&&t!==void 0?t:i.UNKNOWN}const U=i,Oc={[B.HTML]:new Set([U.ADDRESS,U.APPLET,U.AREA,U.ARTICLE,U.ASIDE,U.BASE,U.BASEFONT,U.BGSOUND,U.BLOCKQUOTE,U.BODY,U.BR,U.BUTTON,U.CAPTION,U.CENTER,U.COL,U.COLGROUP,U.DD,U.DETAILS,U.DIR,U.DIV,U.DL,U.DT,U.EMBED,U.FIELDSET,U.FIGCAPTION,U.FIGURE,U.FOOTER,U.FORM,U.FRAME,U.FRAMESET,U.H1,U.H2,U.H3,U.H4,U.H5,U.H6,U.HEAD,U.HEADER,U.HGROUP,U.HR,U.HTML,U.IFRAME,U.IMG,U.INPUT,U.LI,U.LINK,U.LISTING,U.MAIN,U.MARQUEE,U.MENU,U.META,U.NAV,U.NOEMBED,U.NOFRAMES,U.NOSCRIPT,U.OBJECT,U.OL,U.P,U.PARAM,U.PLAINTEXT,U.PRE,U.SCRIPT,U.SECTION,U.SELECT,U.SOURCE,U.STYLE,U.SUMMARY,U.TABLE,U.TBODY,U.TD,U.TEMPLATE,U.TEXTAREA,U.TFOOT,U.TH,U.THEAD,U.TITLE,U.TR,U.TRACK,U.UL,U.WBR,U.XMP]),[B.MATHML]:new Set([U.MI,U.MO,U.MN,U.MS,U.MTEXT,U.ANNOTATION_XML]),[B.SVG]:new Set([U.TITLE,U.FOREIGN_OBJECT,U.DESC]),[B.XLINK]:new Set,[B.XML]:new Set,[B.XMLNS]:new Set},us=new Set([U.H1,U.H2,U.H3,U.H4,U.H5,U.H6]);D.STYLE,D.SCRIPT,D.XMP,D.IFRAME,D.NOEMBED,D.NOFRAMES,D.PLAINTEXT;var R;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(R||(R={}));const Te={DATA:R.DATA,RCDATA:R.RCDATA,RAWTEXT:R.RAWTEXT,SCRIPT_DATA:R.SCRIPT_DATA,PLAINTEXT:R.PLAINTEXT,CDATA_SECTION:R.CDATA_SECTION};function kc(e){return e>=S.DIGIT_0&&e<=S.DIGIT_9}function vt(e){return e>=S.LATIN_CAPITAL_A&&e<=S.LATIN_CAPITAL_Z}function Lc(e){return e>=S.LATIN_SMALL_A&&e<=S.LATIN_SMALL_Z}function Ve(e){return Lc(e)||vt(e)}function xr(e){return Ve(e)||kc(e)}function Zt(e){return e+32}function xa(e){return e===S.SPACE||e===S.LINE_FEED||e===S.TABULATION||e===S.FORM_FEED}function Ar(e){return xa(e)||e===S.SOLIDUS||e===S.GREATER_THAN_SIGN}function Dc(e){return e===S.NULL?P.nullCharacterReference:e>1114111?P.characterReferenceOutsideUnicodeRange:ya(e)?P.surrogateCharacterReference:_a(e)?P.noncharacterCharacterReference:Ea(e)||e===S.CARRIAGE_RETURN?P.controlCharacterReference:null}class Pc{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=R.DATA,this.returnState=R.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new _c(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Ic(Tc,(s,d)=>{this.preprocessor.pos=this.entityStartPos+d-1,this._flushCodePointConsumedAsCharacterReference(s)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(P.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:s=>{this._err(P.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+s)},validateNumericCharacterReference:s=>{const d=Dc(s);d&&this._err(d,1)}}:void 0)}_err(t,n=0){var s,d;(d=(s=this.handler).onParseError)===null||d===void 0||d.call(s,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,s){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||s==null||s()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:J.START_TAG,tagName:"",tagID:i.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:J.END_TAG,tagName:"",tagID:i.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:J.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:J.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const s=this.currentToken;if(Ta(s,this.currentAttr.name)===null){if(s.attrs.push(this.currentAttr),s.location&&this.currentLocation){const d=(t=(n=s.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);d[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(P.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=_n(t.tagName),t.type===J.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(P.endTagWithAttributes),t.selfClosing&&this._err(P.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case J.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case J.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case J.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:J.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=xa(t)?J.WHITESPACE_CHARACTER:t===S.NULL?J.NULL_CHARACTER:J.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(J.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=R.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?qe.Attribute:qe.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===R.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case R.DATA:{this._stateData(t);break}case R.RCDATA:{this._stateRcdata(t);break}case R.RAWTEXT:{this._stateRawtext(t);break}case R.SCRIPT_DATA:{this._stateScriptData(t);break}case R.PLAINTEXT:{this._statePlaintext(t);break}case R.TAG_OPEN:{this._stateTagOpen(t);break}case R.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case R.TAG_NAME:{this._stateTagName(t);break}case R.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case R.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case R.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case R.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case R.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case R.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case R.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case R.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case R.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case R.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case R.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case R.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case R.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case R.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case R.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case R.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case R.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case R.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case R.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case R.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case R.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case R.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case R.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case R.BOGUS_COMMENT:{this._stateBogusComment(t);break}case R.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case R.COMMENT_START:{this._stateCommentStart(t);break}case R.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case R.COMMENT:{this._stateComment(t);break}case R.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case R.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case R.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case R.COMMENT_END:{this._stateCommentEnd(t);break}case R.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case R.DOCTYPE:{this._stateDoctype(t);break}case R.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case R.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case R.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case R.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case R.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case R.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case R.CDATA_SECTION:{this._stateCdataSection(t);break}case R.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case R.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case R.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case R.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case S.LESS_THAN_SIGN:{this.state=R.TAG_OPEN;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitCodePoint(t);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case S.AMPERSAND:{this._startCharacterReference();break}case S.LESS_THAN_SIGN:{this.state=R.RCDATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case S.LESS_THAN_SIGN:{this.state=R.RAWTEXT_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Ve(t))this._createStartTagToken(),this.state=R.TAG_NAME,this._stateTagName(t);else switch(t){case S.EXCLAMATION_MARK:{this.state=R.MARKUP_DECLARATION_OPEN;break}case S.SOLIDUS:{this.state=R.END_TAG_OPEN;break}case S.QUESTION_MARK:{this._err(P.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=R.BOGUS_COMMENT,this._stateBogusComment(t);break}case S.EOF:{this._err(P.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(P.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=R.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Ve(t))this._createEndTagToken(),this.state=R.TAG_NAME,this._stateTagName(t);else switch(t){case S.GREATER_THAN_SIGN:{this._err(P.missingEndTagName),this.state=R.DATA;break}case S.EOF:{this._err(P.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(P.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.tagName+=oe;break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(vt(t)?Zt(t):t)}}_stateRcdataLessThanSign(t){t===S.SOLIDUS?this.state=R.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Ve(t)?(this.state=R.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=R.BEFORE_ATTRIBUTE_NAME,!1;case S.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=R.SELF_CLOSING_START_TAG,!1;case S.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=R.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===S.SOLIDUS?this.state=R.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Ve(t)?(this.state=R.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case S.SOLIDUS:{this.state=R.SCRIPT_DATA_END_TAG_OPEN;break}case S.EXCLAMATION_MARK:{this.state=R.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=R.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Ve(t)?(this.state=R.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===S.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===S.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===S.SOLIDUS?this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ve(t)?(this._emitChars("<"),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Ve(t)?(this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ee.SCRIPT,!1)&&Ar(this.preprocessor.peek(Ee.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ee.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(P.unexpectedNullCharacter),this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(oe);break}case S.EOF:{this._err(P.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===S.SOLIDUS?(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ee.SCRIPT,!1)&&Ar(this.preprocessor.peek(Ee.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ee.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case S.EQUALS_SIGN:{this._err(P.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=R.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this._leaveAttrName(),this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case S.EQUALS_SIGN:{this._leaveAttrName(),this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:{this._err(P.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.currentAttr.name+=oe;break}default:this.currentAttr.name+=String.fromCodePoint(vt(t)?Zt(t):t)}}_stateAfterAttributeName(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case S.EQUALS_SIGN:{this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{this.state=R.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this.state=R.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(P.missingAttributeValue),this.state=R.DATA,this.emitCurrentTagToken();break}default:this.state=R.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case S.QUOTATION_MARK:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.currentAttr.value+=oe;break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case S.APOSTROPHE:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.currentAttr.value+=oe;break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(P.unexpectedNullCharacter),this.currentAttr.value+=oe;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:case S.EQUALS_SIGN:case S.GRAVE_ACCENT:{this._err(P.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this._leaveAttrValue(),this.state=R.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this._err(P.missingWhitespaceBetweenAttributes),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case S.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(P.eofInTag),this._emitEOFToken();break}default:this._err(P.unexpectedSolidusInTag),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(n);break}case S.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.data+=oe;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ee.DASH_DASH,!0)?(this._createCommentToken(Ee.DASH_DASH.length+1),this.state=R.COMMENT_START):this._consumeSequenceIfMatch(Ee.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ee.DOCTYPE.length+1),this.state=R.DOCTYPE):this._consumeSequenceIfMatch(Ee.CDATA_START,!0)?this.inForeignNode?this.state=R.CDATA_SECTION:(this._err(P.cdataInHtmlContent),this._createCommentToken(Ee.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=R.BOGUS_COMMENT):this._ensureHibernation()||(this._err(P.incorrectlyOpenedComment),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case S.HYPHEN_MINUS:{this.state=R.COMMENT_START_DASH;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptClosingOfEmptyComment),this.state=R.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=R.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptClosingOfEmptyComment),this.state=R.DATA,this.emitCurrentComment(n);break}case S.EOF:{this._err(P.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=R.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END_DASH;break}case S.LESS_THAN_SIGN:{n.data+="<",this.state=R.COMMENT_LESS_THAN_SIGN;break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.data+=oe;break}case S.EOF:{this._err(P.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case S.EXCLAMATION_MARK:{n.data+="!",this.state=R.COMMENT_LESS_THAN_SIGN_BANG;break}case S.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=R.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===S.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=R.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===S.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=R.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==S.GREATER_THAN_SIGN&&t!==S.EOF&&this._err(P.nestedComment),this.state=R.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case S.EOF:{this._err(P.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=R.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(n);break}case S.EXCLAMATION_MARK:{this.state=R.COMMENT_END_BANG;break}case S.HYPHEN_MINUS:{n.data+="-";break}case S.EOF:{this._err(P.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=R.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case S.HYPHEN_MINUS:{n.data+="--!",this.state=R.COMMENT_END_DASH;break}case S.GREATER_THAN_SIGN:{this._err(P.incorrectlyClosedComment),this.state=R.DATA,this.emitCurrentComment(n);break}case S.EOF:{this._err(P.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=R.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case S.EOF:{this._err(P.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingWhitespaceBeforeDoctypeName),this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(vt(t))this._createDoctypeToken(String.fromCharCode(Zt(t))),this.state=R.DOCTYPE_NAME;else switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.NULL:{this._err(P.unexpectedNullCharacter),this._createDoctypeToken(oe),this.state=R.DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this._err(P.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=R.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.AFTER_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.name+=oe;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(vt(t)?Zt(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ee.PUBLIC,!1)?this.state=R.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ee.SYSTEM,!1)?this.state=R.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(P.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(P.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(P.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(P.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{n.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(P.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case S.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.publicId+=oe;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case S.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.publicId+=oe;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.QUOTATION_MARK:{this._err(P.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(P.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.QUOTATION_MARK:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(P.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(P.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(P.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{n.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(P.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(n);break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case S.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.systemId+=oe;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case S.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(P.unexpectedNullCharacter),n.systemId+=oe;break}case S.GREATER_THAN_SIGN:{this._err(P.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.EOF:{this._err(P.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(P.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=R.DATA;break}case S.NULL:{this._err(P.unexpectedNullCharacter);break}case S.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case S.RIGHT_SQUARE_BRACKET:{this.state=R.CDATA_SECTION_BRACKET;break}case S.EOF:{this._err(P.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===S.RIGHT_SQUARE_BRACKET?this.state=R.CDATA_SECTION_END:(this._emitChars("]"),this.state=R.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case S.GREATER_THAN_SIGN:{this.state=R.DATA;break}case S.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=R.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(S.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&xr(this.preprocessor.peek(1))?R.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){xr(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===S.SEMICOLON&&this._err(P.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const Aa=new Set([i.DD,i.DT,i.LI,i.OPTGROUP,i.OPTION,i.P,i.RB,i.RP,i.RT,i.RTC]),vr=new Set([...Aa,i.CAPTION,i.COLGROUP,i.TBODY,i.TD,i.TFOOT,i.TH,i.THEAD,i.TR]),mn=new Set([i.APPLET,i.CAPTION,i.HTML,i.MARQUEE,i.OBJECT,i.TABLE,i.TD,i.TEMPLATE,i.TH]),Mc=new Set([...mn,i.OL,i.UL]),Bc=new Set([...mn,i.BUTTON]),Nr=new Set([i.ANNOTATION_XML,i.MI,i.MN,i.MO,i.MS,i.MTEXT]),Cr=new Set([i.DESC,i.FOREIGN_OBJECT,i.TITLE]),Uc=new Set([i.TR,i.TEMPLATE,i.HTML]),Fc=new Set([i.TBODY,i.TFOOT,i.THEAD,i.TEMPLATE,i.HTML]),Hc=new Set([i.TABLE,i.TEMPLATE,i.HTML]),jc=new Set([i.TD,i.TH]);class $c{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,s){this.treeAdapter=n,this.handler=s,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=i.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===i.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===B.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const s=this._indexOf(t);this.items[s]=n,s===this.stackTop&&(this.current=n)}insertAfter(t,n,s){const d=this._indexOf(t)+1;this.items.splice(d,0,n),this.tagIDs.splice(d,0,s),this.stackTop++,d===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,d===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==B.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const s=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(s,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(us,B.HTML)}popUntilTableCellPopped(){this.popUntilPopped(jc,B.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let s=this.stackTop;s>=0;s--)if(t.has(this.tagIDs[s])&&this.treeAdapter.getNamespaceURI(this.items[s])===n)return s;return-1}clearBackTo(t,n){const s=this._indexOfTagNames(t,n);this.shortenToLength(s+1)}clearBackToTableContext(){this.clearBackTo(Hc,B.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Fc,B.HTML)}clearBackToTableRowContext(){this.clearBackTo(Uc,B.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===i.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===i.HTML}hasInDynamicScope(t,n){for(let s=this.stackTop;s>=0;s--){const d=this.tagIDs[s];switch(this.treeAdapter.getNamespaceURI(this.items[s])){case B.HTML:{if(d===t)return!0;if(n.has(d))return!1;break}case B.SVG:{if(Cr.has(d))return!1;break}case B.MATHML:{if(Nr.has(d))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,mn)}hasInListItemScope(t){return this.hasInDynamicScope(t,Mc)}hasInButtonScope(t){return this.hasInDynamicScope(t,Bc)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case B.HTML:{if(us.has(n))return!0;if(mn.has(n))return!1;break}case B.SVG:{if(Cr.has(n))return!1;break}case B.MATHML:{if(Nr.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===B.HTML)switch(this.tagIDs[n]){case t:return!0;case i.TABLE:case i.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===B.HTML)switch(this.tagIDs[t]){case i.TBODY:case i.THEAD:case i.TFOOT:return!0;case i.TABLE:case i.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===B.HTML)switch(this.tagIDs[n]){case t:return!0;case i.OPTION:case i.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Aa.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&vr.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&vr.has(this.currentTagId);)this.pop()}}const qn=3;var Fe;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Fe||(Fe={}));const Sr={type:Fe.Marker};class qc{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const s=[],d=n.length,h=this.treeAdapter.getTagName(t),p=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const b=this.entries[a];if(b.type===Fe.Marker)break;const{element:_}=b;if(this.treeAdapter.getTagName(_)===h&&this.treeAdapter.getNamespaceURI(_)===p){const y=this.treeAdapter.getAttrList(_);y.length===d&&s.push({idx:a,attrs:y})}}return s}_ensureNoahArkCondition(t){if(this.entries.length<qn)return;const n=this.treeAdapter.getAttrList(t),s=this._getNoahArkConditionCandidates(t,n);if(s.length<qn)return;const d=new Map(n.map(p=>[p.name,p.value]));let h=0;for(let p=0;p<s.length;p++){const a=s[p];a.attrs.every(b=>d.get(b.name)===b.value)&&(h+=1,h>=qn&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Sr)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Fe.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const s=this.entries.indexOf(this.bookmark);this.entries.splice(s,0,{type:Fe.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Sr);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(s=>s.type===Fe.Marker||this.treeAdapter.getTagName(s.element)===t);return n&&n.type===Fe.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Fe.Element&&n.element===t)}}const We={createDocument(){return{nodeName:"#document",mode:Re.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const s=e.childNodes.indexOf(n);e.childNodes.splice(s,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,s){const d=e.childNodes.find(h=>h.nodeName==="#documentType");if(d)d.name=t,d.publicId=n,d.systemId=s;else{const h={nodeName:"#documentType",name:t,publicId:n,systemId:s,parentNode:null};We.appendChild(e,h)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(We.isTextNode(n)){n.value+=t;return}}We.appendChild(e,We.createTextNode(t))},insertTextBefore(e,t,n){const s=e.childNodes[e.childNodes.indexOf(n)-1];s&&We.isTextNode(s)?s.value+=t:We.insertBefore(e,We.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(s=>s.name));for(let s=0;s<t.length;s++)n.has(t[s].name)||e.attrs.push(t[s])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},va="html",Yc="about:legacy-compat",zc="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Na=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Vc=[...Na,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Wc=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Ca=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Kc=[...Ca,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Ir(e,t){return t.some(n=>e.startsWith(n))}function Gc(e){return e.name===va&&e.publicId===null&&(e.systemId===null||e.systemId===Yc)}function Qc(e){if(e.name!==va)return Re.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===zc)return Re.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Wc.has(n))return Re.QUIRKS;let s=t===null?Vc:Na;if(Ir(n,s))return Re.QUIRKS;if(s=t===null?Ca:Kc,Ir(n,s))return Re.LIMITED_QUIRKS}return Re.NO_QUIRKS}const wr={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Xc="definitionurl",Jc="definitionURL",Zc=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),el=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:B.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:B.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:B.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:B.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:B.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:B.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:B.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:B.XML}],["xml:space",{prefix:"xml",name:"space",namespace:B.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:B.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:B.XMLNS}]]),tl=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),nl=new Set([i.B,i.BIG,i.BLOCKQUOTE,i.BODY,i.BR,i.CENTER,i.CODE,i.DD,i.DIV,i.DL,i.DT,i.EM,i.EMBED,i.H1,i.H2,i.H3,i.H4,i.H5,i.H6,i.HEAD,i.HR,i.I,i.IMG,i.LI,i.LISTING,i.MENU,i.META,i.NOBR,i.OL,i.P,i.PRE,i.RUBY,i.S,i.SMALL,i.SPAN,i.STRONG,i.STRIKE,i.SUB,i.SUP,i.TABLE,i.TT,i.U,i.UL,i.VAR]);function sl(e){const t=e.tagID;return t===i.FONT&&e.attrs.some(({name:s})=>s===et.COLOR||s===et.SIZE||s===et.FACE)||nl.has(t)}function Sa(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Xc){e.attrs[t].name=Jc;break}}function Ia(e){for(let t=0;t<e.attrs.length;t++){const n=Zc.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function ws(e){for(let t=0;t<e.attrs.length;t++){const n=el.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function rl(e){const t=tl.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=_n(e.tagName))}function al(e,t){return t===B.MATHML&&(e===i.MI||e===i.MO||e===i.MN||e===i.MS||e===i.MTEXT)}function il(e,t,n){if(t===B.MATHML&&e===i.ANNOTATION_XML){for(let s=0;s<n.length;s++)if(n[s].name===et.ENCODING){const d=n[s].value.toLowerCase();return d===wr.TEXT_HTML||d===wr.APPLICATION_XML}}return t===B.SVG&&(e===i.FOREIGN_OBJECT||e===i.DESC||e===i.TITLE)}function ol(e,t,n,s){return(!s||s===B.HTML)&&il(e,t,n)||(!s||s===B.MATHML)&&al(e,t)}const ul="hidden",cl=8,ll=3;var O;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(O||(O={}));const dl={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},wa=new Set([i.TABLE,i.TBODY,i.TFOOT,i.THEAD,i.TR]),Rr={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:We,onParseError:null};class Ra{constructor(t,n,s=null,d=null){this.fragmentContext=s,this.scriptHandler=d,this.currentToken=null,this.stopped=!1,this.insertionMode=O.INITIAL,this.originalInsertionMode=O.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Rr,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Pc(this.options,this),this.activeFormattingElements=new qc(this.treeAdapter),this.fragmentContextID=s?_n(this.treeAdapter.getTagName(s)):i.UNKNOWN,this._setContextModes(s??this.document,this.fragmentContextID),this.openElements=new $c(this.document,this.treeAdapter,this)}static parse(t,n){const s=new this(n);return s.tokenizer.write(t,!0),s.document}static getFragmentParser(t,n){const s={...Rr,...n};t??(t=s.treeAdapter.createElement(D.TEMPLATE,B.HTML,[]));const d=s.treeAdapter.createElement("documentmock",B.HTML,[]),h=new this(s,d,t);return h.fragmentContextID===i.TEMPLATE&&h.tmplInsertionModeStack.unshift(O.IN_TEMPLATE),h._initTokenizerForFragmentParsing(),h._insertFakeRootElement(),h._resetInsertionMode(),h._findFormInFragmentContext(),h}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,s){var d;if(!this.onParseError)return;const h=(d=t.location)!==null&&d!==void 0?d:dl,p={code:n,startLine:h.startLine,startCol:h.startCol,startOffset:h.startOffset,endLine:s?h.startLine:h.endLine,endCol:s?h.startCol:h.endCol,endOffset:s?h.startOffset:h.endOffset};this.onParseError(p)}onItemPush(t,n,s){var d,h;(h=(d=this.treeAdapter).onItemPush)===null||h===void 0||h.call(d,t),s&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var s,d;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(d=(s=this.treeAdapter).onItemPop)===null||d===void 0||d.call(s,t,this.openElements.current),n){let h,p;this.openElements.stackTop===0&&this.fragmentContext?(h=this.fragmentContext,p=this.fragmentContextID):{current:h,currentTagId:p}=this.openElements,this._setContextModes(h,p)}}_setContextModes(t,n){const s=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===B.HTML;this.currentNotInHTML=!s,this.tokenizer.inForeignNode=!s&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,B.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=O.TEXT}switchToPlaintextParsing(){this.insertionMode=O.TEXT,this.originalInsertionMode=O.IN_BODY,this.tokenizer.state=Te.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===D.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==B.HTML))switch(this.fragmentContextID){case i.TITLE:case i.TEXTAREA:{this.tokenizer.state=Te.RCDATA;break}case i.STYLE:case i.XMP:case i.IFRAME:case i.NOEMBED:case i.NOFRAMES:case i.NOSCRIPT:{this.tokenizer.state=Te.RAWTEXT;break}case i.SCRIPT:{this.tokenizer.state=Te.SCRIPT_DATA;break}case i.PLAINTEXT:{this.tokenizer.state=Te.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",s=t.publicId||"",d=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,s,d),t.location){const p=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));p&&this.treeAdapter.setNodeSourceCodeLocation(p,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const s=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,s)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const s=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(s??this.document,t)}}_appendElement(t,n){const s=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(s,t.location)}_insertElement(t,n){const s=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(s,t.location),this.openElements.push(s,t.tagID)}_insertFakeElement(t,n){const s=this.treeAdapter.createElement(t,B.HTML,[]);this._attachElementToTree(s,null),this.openElements.push(s,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,B.HTML,t.attrs),s=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,s),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(D.HTML,B.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,i.HTML)}_appendCommentNode(t,n){const s=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,s),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_insertCharacters(t){let n,s;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:s}=this._findFosterParentingLocation(),s?this.treeAdapter.insertTextBefore(n,t.chars,s):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const d=this.treeAdapter.getChildNodes(n),h=s?d.lastIndexOf(s):d.length,p=d[h-1];if(this.treeAdapter.getNodeSourceCodeLocation(p)){const{endLine:b,endCol:_,endOffset:y}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(p,{endLine:b,endCol:_,endOffset:y})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(p,t.location)}_adoptNodes(t,n){for(let s=this.treeAdapter.getFirstChild(t);s;s=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(s),this.treeAdapter.appendChild(n,s)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const s=n.location,d=this.treeAdapter.getTagName(t),h=n.type===J.END_TAG&&d===n.tagName?{endTag:{...s},endLine:s.endLine,endCol:s.endCol,endOffset:s.endOffset}:{endLine:s.startLine,endCol:s.startCol,endOffset:s.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,h)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,s;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,s=this.fragmentContextID):{current:n,currentTagId:s}=this.openElements,t.tagID===i.SVG&&this.treeAdapter.getTagName(n)===D.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===B.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===i.MGLYPH||t.tagID===i.MALIGNMARK)&&s!==void 0&&!this._isIntegrationPoint(s,n,B.HTML)}_processToken(t){switch(t.type){case J.CHARACTER:{this.onCharacter(t);break}case J.NULL_CHARACTER:{this.onNullCharacter(t);break}case J.COMMENT:{this.onComment(t);break}case J.DOCTYPE:{this.onDoctype(t);break}case J.START_TAG:{this._processStartTag(t);break}case J.END_TAG:{this.onEndTag(t);break}case J.EOF:{this.onEof(t);break}case J.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,s){const d=this.treeAdapter.getNamespaceURI(n),h=this.treeAdapter.getAttrList(n);return ol(t,d,h,s)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(d=>d.type===Fe.Marker||this.openElements.contains(d.element)),s=n===-1?t-1:n-1;for(let d=s;d>=0;d--){const h=this.activeFormattingElements.entries[d];this._insertElement(h.token,this.treeAdapter.getNamespaceURI(h.element)),h.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=O.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(i.P),this.openElements.popUntilTagNamePopped(i.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case i.TR:{this.insertionMode=O.IN_ROW;return}case i.TBODY:case i.THEAD:case i.TFOOT:{this.insertionMode=O.IN_TABLE_BODY;return}case i.CAPTION:{this.insertionMode=O.IN_CAPTION;return}case i.COLGROUP:{this.insertionMode=O.IN_COLUMN_GROUP;return}case i.TABLE:{this.insertionMode=O.IN_TABLE;return}case i.BODY:{this.insertionMode=O.IN_BODY;return}case i.FRAMESET:{this.insertionMode=O.IN_FRAMESET;return}case i.SELECT:{this._resetInsertionModeForSelect(t);return}case i.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case i.HTML:{this.insertionMode=this.headElement?O.AFTER_HEAD:O.BEFORE_HEAD;return}case i.TD:case i.TH:{if(t>0){this.insertionMode=O.IN_CELL;return}break}case i.HEAD:{if(t>0){this.insertionMode=O.IN_HEAD;return}break}}this.insertionMode=O.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const s=this.openElements.tagIDs[n];if(s===i.TEMPLATE)break;if(s===i.TABLE){this.insertionMode=O.IN_SELECT_IN_TABLE;return}}this.insertionMode=O.IN_SELECT}_isElementCausesFosterParenting(t){return wa.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case i.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===B.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case i.TABLE:{const s=this.treeAdapter.getParentNode(n);return s?{parent:s,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const s=this.treeAdapter.getNamespaceURI(t);return Oc[s].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jd(this,t);return}switch(this.insertionMode){case O.INITIAL:{_t(this,t);break}case O.BEFORE_HTML:{It(this,t);break}case O.BEFORE_HEAD:{wt(this,t);break}case O.IN_HEAD:{Rt(this,t);break}case O.IN_HEAD_NO_SCRIPT:{Ot(this,t);break}case O.AFTER_HEAD:{kt(this,t);break}case O.IN_BODY:case O.IN_CAPTION:case O.IN_CELL:case O.IN_TEMPLATE:{ka(this,t);break}case O.TEXT:case O.IN_SELECT:case O.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case O.IN_TABLE:case O.IN_TABLE_BODY:case O.IN_ROW:{Yn(this,t);break}case O.IN_TABLE_TEXT:{Ua(this,t);break}case O.IN_COLUMN_GROUP:{pn(this,t);break}case O.AFTER_BODY:{gn(this,t);break}case O.AFTER_AFTER_BODY:{an(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Hd(this,t);return}switch(this.insertionMode){case O.INITIAL:{_t(this,t);break}case O.BEFORE_HTML:{It(this,t);break}case O.BEFORE_HEAD:{wt(this,t);break}case O.IN_HEAD:{Rt(this,t);break}case O.IN_HEAD_NO_SCRIPT:{Ot(this,t);break}case O.AFTER_HEAD:{kt(this,t);break}case O.TEXT:{this._insertCharacters(t);break}case O.IN_TABLE:case O.IN_TABLE_BODY:case O.IN_ROW:{Yn(this,t);break}case O.IN_COLUMN_GROUP:{pn(this,t);break}case O.AFTER_BODY:{gn(this,t);break}case O.AFTER_AFTER_BODY:{an(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){cs(this,t);return}switch(this.insertionMode){case O.INITIAL:case O.BEFORE_HTML:case O.BEFORE_HEAD:case O.IN_HEAD:case O.IN_HEAD_NO_SCRIPT:case O.AFTER_HEAD:case O.IN_BODY:case O.IN_TABLE:case O.IN_CAPTION:case O.IN_COLUMN_GROUP:case O.IN_TABLE_BODY:case O.IN_ROW:case O.IN_CELL:case O.IN_SELECT:case O.IN_SELECT_IN_TABLE:case O.IN_TEMPLATE:case O.IN_FRAMESET:case O.AFTER_FRAMESET:{cs(this,t);break}case O.IN_TABLE_TEXT:{Tt(this,t);break}case O.AFTER_BODY:{yl(this,t);break}case O.AFTER_AFTER_BODY:case O.AFTER_AFTER_FRAMESET:{El(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case O.INITIAL:{_l(this,t);break}case O.BEFORE_HEAD:case O.IN_HEAD:case O.IN_HEAD_NO_SCRIPT:case O.AFTER_HEAD:{this._err(t,P.misplacedDoctype);break}case O.IN_TABLE_TEXT:{Tt(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,P.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?$d(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case O.INITIAL:{_t(this,t);break}case O.BEFORE_HTML:{Tl(this,t);break}case O.BEFORE_HEAD:{Al(this,t);break}case O.IN_HEAD:{Me(this,t);break}case O.IN_HEAD_NO_SCRIPT:{Cl(this,t);break}case O.AFTER_HEAD:{Il(this,t);break}case O.IN_BODY:{be(this,t);break}case O.IN_TABLE:{pt(this,t);break}case O.IN_TABLE_TEXT:{Tt(this,t);break}case O.IN_CAPTION:{vd(this,t);break}case O.IN_COLUMN_GROUP:{ks(this,t);break}case O.IN_TABLE_BODY:{An(this,t);break}case O.IN_ROW:{vn(this,t);break}case O.IN_CELL:{Sd(this,t);break}case O.IN_SELECT:{ja(this,t);break}case O.IN_SELECT_IN_TABLE:{wd(this,t);break}case O.IN_TEMPLATE:{Od(this,t);break}case O.AFTER_BODY:{Ld(this,t);break}case O.IN_FRAMESET:{Dd(this,t);break}case O.AFTER_FRAMESET:{Md(this,t);break}case O.AFTER_AFTER_BODY:{Ud(this,t);break}case O.AFTER_AFTER_FRAMESET:{Fd(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?qd(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case O.INITIAL:{_t(this,t);break}case O.BEFORE_HTML:{xl(this,t);break}case O.BEFORE_HEAD:{vl(this,t);break}case O.IN_HEAD:{Nl(this,t);break}case O.IN_HEAD_NO_SCRIPT:{Sl(this,t);break}case O.AFTER_HEAD:{wl(this,t);break}case O.IN_BODY:{xn(this,t);break}case O.TEXT:{md(this,t);break}case O.IN_TABLE:{Pt(this,t);break}case O.IN_TABLE_TEXT:{Tt(this,t);break}case O.IN_CAPTION:{Nd(this,t);break}case O.IN_COLUMN_GROUP:{Cd(this,t);break}case O.IN_TABLE_BODY:{ls(this,t);break}case O.IN_ROW:{Ha(this,t);break}case O.IN_CELL:{Id(this,t);break}case O.IN_SELECT:{$a(this,t);break}case O.IN_SELECT_IN_TABLE:{Rd(this,t);break}case O.IN_TEMPLATE:{kd(this,t);break}case O.AFTER_BODY:{Ya(this,t);break}case O.IN_FRAMESET:{Pd(this,t);break}case O.AFTER_FRAMESET:{Bd(this,t);break}case O.AFTER_AFTER_BODY:{an(this,t);break}}}onEof(t){switch(this.insertionMode){case O.INITIAL:{_t(this,t);break}case O.BEFORE_HTML:{It(this,t);break}case O.BEFORE_HEAD:{wt(this,t);break}case O.IN_HEAD:{Rt(this,t);break}case O.IN_HEAD_NO_SCRIPT:{Ot(this,t);break}case O.AFTER_HEAD:{kt(this,t);break}case O.IN_BODY:case O.IN_TABLE:case O.IN_CAPTION:case O.IN_COLUMN_GROUP:case O.IN_TABLE_BODY:case O.IN_ROW:case O.IN_CELL:case O.IN_SELECT:case O.IN_SELECT_IN_TABLE:{Ma(this,t);break}case O.TEXT:{pd(this,t);break}case O.IN_TABLE_TEXT:{Tt(this,t);break}case O.IN_TEMPLATE:{qa(this,t);break}case O.AFTER_BODY:case O.IN_FRAMESET:case O.AFTER_FRAMESET:case O.AFTER_AFTER_BODY:case O.AFTER_AFTER_FRAMESET:{Os(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===S.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case O.IN_HEAD:case O.IN_HEAD_NO_SCRIPT:case O.AFTER_HEAD:case O.TEXT:case O.IN_COLUMN_GROUP:case O.IN_SELECT:case O.IN_SELECT_IN_TABLE:case O.IN_FRAMESET:case O.AFTER_FRAMESET:{this._insertCharacters(t);break}case O.IN_BODY:case O.IN_CAPTION:case O.IN_CELL:case O.IN_TEMPLATE:case O.AFTER_BODY:case O.AFTER_AFTER_BODY:case O.AFTER_AFTER_FRAMESET:{Oa(this,t);break}case O.IN_TABLE:case O.IN_TABLE_BODY:case O.IN_ROW:{Yn(this,t);break}case O.IN_TABLE_TEXT:{Ba(this,t);break}}}}function fl(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Pa(e,t),n}function hl(e,t){let n=null,s=e.openElements.stackTop;for(;s>=0;s--){const d=e.openElements.items[s];if(d===t.element)break;e._isSpecialElement(d,e.openElements.tagIDs[s])&&(n=d)}return n||(e.openElements.shortenToLength(Math.max(s,0)),e.activeFormattingElements.removeEntry(t)),n}function ml(e,t,n){let s=t,d=e.openElements.getCommonAncestor(t);for(let h=0,p=d;p!==n;h++,p=d){d=e.openElements.getCommonAncestor(p);const a=e.activeFormattingElements.getElementEntry(p),b=a&&h>=ll;!a||b?(b&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(p)):(p=pl(e,a),s===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(s),e.treeAdapter.appendChild(p,s),s=p)}return s}function pl(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),s=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,s),t.element=s,s}function gl(e,t,n){const s=e.treeAdapter.getTagName(t),d=_n(s);if(e._isElementCausesFosterParenting(d))e._fosterParentElement(n);else{const h=e.treeAdapter.getNamespaceURI(t);d===i.TEMPLATE&&h===B.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function bl(e,t,n){const s=e.treeAdapter.getNamespaceURI(n.element),{token:d}=n,h=e.treeAdapter.createElement(d.tagName,s,d.attrs);e._adoptNodes(t,h),e.treeAdapter.appendChild(t,h),e.activeFormattingElements.insertElementAfterBookmark(h,d),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,h,d.tagID)}function Rs(e,t){for(let n=0;n<cl;n++){const s=fl(e,t);if(!s)break;const d=hl(e,s);if(!d)break;e.activeFormattingElements.bookmark=s;const h=ml(e,d,s.element),p=e.openElements.getCommonAncestor(s.element);e.treeAdapter.detachNode(h),p&&gl(e,p,h),bl(e,d,s)}}function cs(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function yl(e,t){e._appendCommentNode(t,e.openElements.items[0])}function El(e,t){e._appendCommentNode(t,e.document)}function Os(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let s=e.openElements.stackTop;s>=n;s--)e._setEndLocation(e.openElements.items[s],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const s=e.openElements.items[0],d=e.treeAdapter.getNodeSourceCodeLocation(s);if(d&&!d.endTag&&(e._setEndLocation(s,t),e.openElements.stackTop>=1)){const h=e.openElements.items[1],p=e.treeAdapter.getNodeSourceCodeLocation(h);p&&!p.endTag&&e._setEndLocation(h,t)}}}}function _l(e,t){e._setDocumentType(t);const n=t.forceQuirks?Re.QUIRKS:Qc(t);Gc(t)||e._err(t,P.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=O.BEFORE_HTML}function _t(e,t){e._err(t,P.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Re.QUIRKS),e.insertionMode=O.BEFORE_HTML,e._processToken(t)}function Tl(e,t){t.tagID===i.HTML?(e._insertElement(t,B.HTML),e.insertionMode=O.BEFORE_HEAD):It(e,t)}function xl(e,t){const n=t.tagID;(n===i.HTML||n===i.HEAD||n===i.BODY||n===i.BR)&&It(e,t)}function It(e,t){e._insertFakeRootElement(),e.insertionMode=O.BEFORE_HEAD,e._processToken(t)}function Al(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.HEAD:{e._insertElement(t,B.HTML),e.headElement=e.openElements.current,e.insertionMode=O.IN_HEAD;break}default:wt(e,t)}}function vl(e,t){const n=t.tagID;n===i.HEAD||n===i.BODY||n===i.HTML||n===i.BR?wt(e,t):e._err(t,P.endTagWithoutMatchingOpenElement)}function wt(e,t){e._insertFakeElement(D.HEAD,i.HEAD),e.headElement=e.openElements.current,e.insertionMode=O.IN_HEAD,e._processToken(t)}function Me(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.BASE:case i.BASEFONT:case i.BGSOUND:case i.LINK:case i.META:{e._appendElement(t,B.HTML),t.ackSelfClosing=!0;break}case i.TITLE:{e._switchToTextParsing(t,Te.RCDATA);break}case i.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Te.RAWTEXT):(e._insertElement(t,B.HTML),e.insertionMode=O.IN_HEAD_NO_SCRIPT);break}case i.NOFRAMES:case i.STYLE:{e._switchToTextParsing(t,Te.RAWTEXT);break}case i.SCRIPT:{e._switchToTextParsing(t,Te.SCRIPT_DATA);break}case i.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=O.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(O.IN_TEMPLATE);break}case i.HEAD:{e._err(t,P.misplacedStartTagForHeadElement);break}default:Rt(e,t)}}function Nl(e,t){switch(t.tagID){case i.HEAD:{e.openElements.pop(),e.insertionMode=O.AFTER_HEAD;break}case i.BODY:case i.BR:case i.HTML:{Rt(e,t);break}case i.TEMPLATE:{nt(e,t);break}default:e._err(t,P.endTagWithoutMatchingOpenElement)}}function nt(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==i.TEMPLATE&&e._err(t,P.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(i.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,P.endTagWithoutMatchingOpenElement)}function Rt(e,t){e.openElements.pop(),e.insertionMode=O.AFTER_HEAD,e._processToken(t)}function Cl(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.BASEFONT:case i.BGSOUND:case i.HEAD:case i.LINK:case i.META:case i.NOFRAMES:case i.STYLE:{Me(e,t);break}case i.NOSCRIPT:{e._err(t,P.nestedNoscriptInHead);break}default:Ot(e,t)}}function Sl(e,t){switch(t.tagID){case i.NOSCRIPT:{e.openElements.pop(),e.insertionMode=O.IN_HEAD;break}case i.BR:{Ot(e,t);break}default:e._err(t,P.endTagWithoutMatchingOpenElement)}}function Ot(e,t){const n=t.type===J.EOF?P.openElementsLeftAfterEof:P.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=O.IN_HEAD,e._processToken(t)}function Il(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.BODY:{e._insertElement(t,B.HTML),e.framesetOk=!1,e.insertionMode=O.IN_BODY;break}case i.FRAMESET:{e._insertElement(t,B.HTML),e.insertionMode=O.IN_FRAMESET;break}case i.BASE:case i.BASEFONT:case i.BGSOUND:case i.LINK:case i.META:case i.NOFRAMES:case i.SCRIPT:case i.STYLE:case i.TEMPLATE:case i.TITLE:{e._err(t,P.abandonedHeadElementChild),e.openElements.push(e.headElement,i.HEAD),Me(e,t),e.openElements.remove(e.headElement);break}case i.HEAD:{e._err(t,P.misplacedStartTagForHeadElement);break}default:kt(e,t)}}function wl(e,t){switch(t.tagID){case i.BODY:case i.HTML:case i.BR:{kt(e,t);break}case i.TEMPLATE:{nt(e,t);break}default:e._err(t,P.endTagWithoutMatchingOpenElement)}}function kt(e,t){e._insertFakeElement(D.BODY,i.BODY),e.insertionMode=O.IN_BODY,Tn(e,t)}function Tn(e,t){switch(t.type){case J.CHARACTER:{ka(e,t);break}case J.WHITESPACE_CHARACTER:{Oa(e,t);break}case J.COMMENT:{cs(e,t);break}case J.START_TAG:{be(e,t);break}case J.END_TAG:{xn(e,t);break}case J.EOF:{Ma(e,t);break}}}function Oa(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function ka(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Rl(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Ol(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function kl(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_FRAMESET)}function Ll(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML)}function Dl(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&us.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,B.HTML)}function Pl(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ml(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML),n||(e.formElement=e.openElements.current))}function Bl(e,t){e.framesetOk=!1;const n=t.tagID;for(let s=e.openElements.stackTop;s>=0;s--){const d=e.openElements.tagIDs[s];if(n===i.LI&&d===i.LI||(n===i.DD||n===i.DT)&&(d===i.DD||d===i.DT)){e.openElements.generateImpliedEndTagsWithExclusion(d),e.openElements.popUntilTagNamePopped(d);break}if(d!==i.ADDRESS&&d!==i.DIV&&d!==i.P&&e._isSpecialElement(e.openElements.items[s],d))break}e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML)}function Ul(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML),e.tokenizer.state=Te.PLAINTEXT}function Fl(e,t){e.openElements.hasInScope(i.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML),e.framesetOk=!1}function Hl(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(D.A);n&&(Rs(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jl(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function $l(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(i.NOBR)&&(Rs(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,B.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ql(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Yl(e,t){e.treeAdapter.getDocumentMode(e.document)!==Re.QUIRKS&&e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._insertElement(t,B.HTML),e.framesetOk=!1,e.insertionMode=O.IN_TABLE}function La(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,B.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Da(e){const t=Ta(e,et.TYPE);return t!=null&&t.toLowerCase()===ul}function zl(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,B.HTML),Da(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Vl(e,t){e._appendElement(t,B.HTML),t.ackSelfClosing=!0}function Wl(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._appendElement(t,B.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Kl(e,t){t.tagName=D.IMG,t.tagID=i.IMG,La(e,t)}function Gl(e,t){e._insertElement(t,B.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Te.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=O.TEXT}function Ql(e,t){e.openElements.hasInButtonScope(i.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Te.RAWTEXT)}function Xl(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Te.RAWTEXT)}function Or(e,t){e._switchToTextParsing(t,Te.RAWTEXT)}function Jl(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===O.IN_TABLE||e.insertionMode===O.IN_CAPTION||e.insertionMode===O.IN_TABLE_BODY||e.insertionMode===O.IN_ROW||e.insertionMode===O.IN_CELL?O.IN_SELECT_IN_TABLE:O.IN_SELECT}function Zl(e,t){e.openElements.currentTagId===i.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML)}function ed(e,t){e.openElements.hasInScope(i.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,B.HTML)}function td(e,t){e.openElements.hasInScope(i.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(i.RTC),e._insertElement(t,B.HTML)}function nd(e,t){e._reconstructActiveFormattingElements(),Sa(t),ws(t),t.selfClosing?e._appendElement(t,B.MATHML):e._insertElement(t,B.MATHML),t.ackSelfClosing=!0}function sd(e,t){e._reconstructActiveFormattingElements(),Ia(t),ws(t),t.selfClosing?e._appendElement(t,B.SVG):e._insertElement(t,B.SVG),t.ackSelfClosing=!0}function kr(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,B.HTML)}function be(e,t){switch(t.tagID){case i.I:case i.S:case i.B:case i.U:case i.EM:case i.TT:case i.BIG:case i.CODE:case i.FONT:case i.SMALL:case i.STRIKE:case i.STRONG:{jl(e,t);break}case i.A:{Hl(e,t);break}case i.H1:case i.H2:case i.H3:case i.H4:case i.H5:case i.H6:{Dl(e,t);break}case i.P:case i.DL:case i.OL:case i.UL:case i.DIV:case i.DIR:case i.NAV:case i.MAIN:case i.MENU:case i.ASIDE:case i.CENTER:case i.FIGURE:case i.FOOTER:case i.HEADER:case i.HGROUP:case i.DIALOG:case i.DETAILS:case i.ADDRESS:case i.ARTICLE:case i.SEARCH:case i.SECTION:case i.SUMMARY:case i.FIELDSET:case i.BLOCKQUOTE:case i.FIGCAPTION:{Ll(e,t);break}case i.LI:case i.DD:case i.DT:{Bl(e,t);break}case i.BR:case i.IMG:case i.WBR:case i.AREA:case i.EMBED:case i.KEYGEN:{La(e,t);break}case i.HR:{Wl(e,t);break}case i.RB:case i.RTC:{ed(e,t);break}case i.RT:case i.RP:{td(e,t);break}case i.PRE:case i.LISTING:{Pl(e,t);break}case i.XMP:{Ql(e,t);break}case i.SVG:{sd(e,t);break}case i.HTML:{Rl(e,t);break}case i.BASE:case i.LINK:case i.META:case i.STYLE:case i.TITLE:case i.SCRIPT:case i.BGSOUND:case i.BASEFONT:case i.TEMPLATE:{Me(e,t);break}case i.BODY:{Ol(e,t);break}case i.FORM:{Ml(e,t);break}case i.NOBR:{$l(e,t);break}case i.MATH:{nd(e,t);break}case i.TABLE:{Yl(e,t);break}case i.INPUT:{zl(e,t);break}case i.PARAM:case i.TRACK:case i.SOURCE:{Vl(e,t);break}case i.IMAGE:{Kl(e,t);break}case i.BUTTON:{Fl(e,t);break}case i.APPLET:case i.OBJECT:case i.MARQUEE:{ql(e,t);break}case i.IFRAME:{Xl(e,t);break}case i.SELECT:{Jl(e,t);break}case i.OPTION:case i.OPTGROUP:{Zl(e,t);break}case i.NOEMBED:case i.NOFRAMES:{Or(e,t);break}case i.FRAMESET:{kl(e,t);break}case i.TEXTAREA:{Gl(e,t);break}case i.NOSCRIPT:{e.options.scriptingEnabled?Or(e,t):kr(e,t);break}case i.PLAINTEXT:{Ul(e,t);break}case i.COL:case i.TH:case i.TD:case i.TR:case i.HEAD:case i.FRAME:case i.TBODY:case i.TFOOT:case i.THEAD:case i.CAPTION:case i.COLGROUP:break;default:kr(e,t)}}function rd(e,t){if(e.openElements.hasInScope(i.BODY)&&(e.insertionMode=O.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function ad(e,t){e.openElements.hasInScope(i.BODY)&&(e.insertionMode=O.AFTER_BODY,Ya(e,t))}function id(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function od(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(i.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(i.FORM):n&&e.openElements.remove(n))}function ud(e){e.openElements.hasInButtonScope(i.P)||e._insertFakeElement(D.P,i.P),e._closePElement()}function cd(e){e.openElements.hasInListItemScope(i.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(i.LI),e.openElements.popUntilTagNamePopped(i.LI))}function ld(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function dd(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function fd(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function hd(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(D.BR,i.BR),e.openElements.pop(),e.framesetOk=!1}function Pa(e,t){const n=t.tagName,s=t.tagID;for(let d=e.openElements.stackTop;d>0;d--){const h=e.openElements.items[d],p=e.openElements.tagIDs[d];if(s===p&&(s!==i.UNKNOWN||e.treeAdapter.getTagName(h)===n)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.stackTop>=d&&e.openElements.shortenToLength(d);break}if(e._isSpecialElement(h,p))break}}function xn(e,t){switch(t.tagID){case i.A:case i.B:case i.I:case i.S:case i.U:case i.EM:case i.TT:case i.BIG:case i.CODE:case i.FONT:case i.NOBR:case i.SMALL:case i.STRIKE:case i.STRONG:{Rs(e,t);break}case i.P:{ud(e);break}case i.DL:case i.UL:case i.OL:case i.DIR:case i.DIV:case i.NAV:case i.PRE:case i.MAIN:case i.MENU:case i.ASIDE:case i.BUTTON:case i.CENTER:case i.FIGURE:case i.FOOTER:case i.HEADER:case i.HGROUP:case i.DIALOG:case i.ADDRESS:case i.ARTICLE:case i.DETAILS:case i.SEARCH:case i.SECTION:case i.SUMMARY:case i.LISTING:case i.FIELDSET:case i.BLOCKQUOTE:case i.FIGCAPTION:{id(e,t);break}case i.LI:{cd(e);break}case i.DD:case i.DT:{ld(e,t);break}case i.H1:case i.H2:case i.H3:case i.H4:case i.H5:case i.H6:{dd(e);break}case i.BR:{hd(e);break}case i.BODY:{rd(e,t);break}case i.HTML:{ad(e,t);break}case i.FORM:{od(e);break}case i.APPLET:case i.OBJECT:case i.MARQUEE:{fd(e,t);break}case i.TEMPLATE:{nt(e,t);break}default:Pa(e,t)}}function Ma(e,t){e.tmplInsertionModeStack.length>0?qa(e,t):Os(e,t)}function md(e,t){var n;t.tagID===i.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function pd(e,t){e._err(t,P.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Yn(e,t){if(e.openElements.currentTagId!==void 0&&wa.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=O.IN_TABLE_TEXT,t.type){case J.CHARACTER:{Ua(e,t);break}case J.WHITESPACE_CHARACTER:{Ba(e,t);break}}else jt(e,t)}function gd(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_CAPTION}function bd(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_COLUMN_GROUP}function yd(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(D.COLGROUP,i.COLGROUP),e.insertionMode=O.IN_COLUMN_GROUP,ks(e,t)}function Ed(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_TABLE_BODY}function _d(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(D.TBODY,i.TBODY),e.insertionMode=O.IN_TABLE_BODY,An(e,t)}function Td(e,t){e.openElements.hasInTableScope(i.TABLE)&&(e.openElements.popUntilTagNamePopped(i.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function xd(e,t){Da(t)?e._appendElement(t,B.HTML):jt(e,t),t.ackSelfClosing=!0}function Ad(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,B.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function pt(e,t){switch(t.tagID){case i.TD:case i.TH:case i.TR:{_d(e,t);break}case i.STYLE:case i.SCRIPT:case i.TEMPLATE:{Me(e,t);break}case i.COL:{yd(e,t);break}case i.FORM:{Ad(e,t);break}case i.TABLE:{Td(e,t);break}case i.TBODY:case i.TFOOT:case i.THEAD:{Ed(e,t);break}case i.INPUT:{xd(e,t);break}case i.CAPTION:{gd(e,t);break}case i.COLGROUP:{bd(e,t);break}default:jt(e,t)}}function Pt(e,t){switch(t.tagID){case i.TABLE:{e.openElements.hasInTableScope(i.TABLE)&&(e.openElements.popUntilTagNamePopped(i.TABLE),e._resetInsertionMode());break}case i.TEMPLATE:{nt(e,t);break}case i.BODY:case i.CAPTION:case i.COL:case i.COLGROUP:case i.HTML:case i.TBODY:case i.TD:case i.TFOOT:case i.TH:case i.THEAD:case i.TR:break;default:jt(e,t)}}function jt(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Tn(e,t),e.fosterParentingEnabled=n}function Ba(e,t){e.pendingCharacterTokens.push(t)}function Ua(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Tt(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)jt(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Fa=new Set([i.CAPTION,i.COL,i.COLGROUP,i.TBODY,i.TD,i.TFOOT,i.TH,i.THEAD,i.TR]);function vd(e,t){const n=t.tagID;Fa.has(n)?e.openElements.hasInTableScope(i.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=O.IN_TABLE,pt(e,t)):be(e,t)}function Nd(e,t){const n=t.tagID;switch(n){case i.CAPTION:case i.TABLE:{e.openElements.hasInTableScope(i.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=O.IN_TABLE,n===i.TABLE&&Pt(e,t));break}case i.BODY:case i.COL:case i.COLGROUP:case i.HTML:case i.TBODY:case i.TD:case i.TFOOT:case i.TH:case i.THEAD:case i.TR:break;default:xn(e,t)}}function ks(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.COL:{e._appendElement(t,B.HTML),t.ackSelfClosing=!0;break}case i.TEMPLATE:{Me(e,t);break}default:pn(e,t)}}function Cd(e,t){switch(t.tagID){case i.COLGROUP:{e.openElements.currentTagId===i.COLGROUP&&(e.openElements.pop(),e.insertionMode=O.IN_TABLE);break}case i.TEMPLATE:{nt(e,t);break}case i.COL:break;default:pn(e,t)}}function pn(e,t){e.openElements.currentTagId===i.COLGROUP&&(e.openElements.pop(),e.insertionMode=O.IN_TABLE,e._processToken(t))}function An(e,t){switch(t.tagID){case i.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_ROW;break}case i.TH:case i.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(D.TR,i.TR),e.insertionMode=O.IN_ROW,vn(e,t);break}case i.CAPTION:case i.COL:case i.COLGROUP:case i.TBODY:case i.TFOOT:case i.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE,pt(e,t));break}default:pt(e,t)}}function ls(e,t){const n=t.tagID;switch(t.tagID){case i.TBODY:case i.TFOOT:case i.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE);break}case i.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE,Pt(e,t));break}case i.BODY:case i.CAPTION:case i.COL:case i.COLGROUP:case i.HTML:case i.TD:case i.TH:case i.TR:break;default:Pt(e,t)}}function vn(e,t){switch(t.tagID){case i.TH:case i.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,B.HTML),e.insertionMode=O.IN_CELL,e.activeFormattingElements.insertMarker();break}case i.CAPTION:case i.COL:case i.COLGROUP:case i.TBODY:case i.TFOOT:case i.THEAD:case i.TR:{e.openElements.hasInTableScope(i.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE_BODY,An(e,t));break}default:pt(e,t)}}function Ha(e,t){switch(t.tagID){case i.TR:{e.openElements.hasInTableScope(i.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE_BODY);break}case i.TABLE:{e.openElements.hasInTableScope(i.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE_BODY,ls(e,t));break}case i.TBODY:case i.TFOOT:case i.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(i.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=O.IN_TABLE_BODY,ls(e,t));break}case i.BODY:case i.CAPTION:case i.COL:case i.COLGROUP:case i.HTML:case i.TD:case i.TH:break;default:Pt(e,t)}}function Sd(e,t){const n=t.tagID;Fa.has(n)?(e.openElements.hasInTableScope(i.TD)||e.openElements.hasInTableScope(i.TH))&&(e._closeTableCell(),vn(e,t)):be(e,t)}function Id(e,t){const n=t.tagID;switch(n){case i.TD:case i.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=O.IN_ROW);break}case i.TABLE:case i.TBODY:case i.TFOOT:case i.THEAD:case i.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Ha(e,t));break}case i.BODY:case i.CAPTION:case i.COL:case i.COLGROUP:case i.HTML:break;default:xn(e,t)}}function ja(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.OPTION:{e.openElements.currentTagId===i.OPTION&&e.openElements.pop(),e._insertElement(t,B.HTML);break}case i.OPTGROUP:{e.openElements.currentTagId===i.OPTION&&e.openElements.pop(),e.openElements.currentTagId===i.OPTGROUP&&e.openElements.pop(),e._insertElement(t,B.HTML);break}case i.HR:{e.openElements.currentTagId===i.OPTION&&e.openElements.pop(),e.openElements.currentTagId===i.OPTGROUP&&e.openElements.pop(),e._appendElement(t,B.HTML),t.ackSelfClosing=!0;break}case i.INPUT:case i.KEYGEN:case i.TEXTAREA:case i.SELECT:{e.openElements.hasInSelectScope(i.SELECT)&&(e.openElements.popUntilTagNamePopped(i.SELECT),e._resetInsertionMode(),t.tagID!==i.SELECT&&e._processStartTag(t));break}case i.SCRIPT:case i.TEMPLATE:{Me(e,t);break}}}function $a(e,t){switch(t.tagID){case i.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===i.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===i.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===i.OPTGROUP&&e.openElements.pop();break}case i.OPTION:{e.openElements.currentTagId===i.OPTION&&e.openElements.pop();break}case i.SELECT:{e.openElements.hasInSelectScope(i.SELECT)&&(e.openElements.popUntilTagNamePopped(i.SELECT),e._resetInsertionMode());break}case i.TEMPLATE:{nt(e,t);break}}}function wd(e,t){const n=t.tagID;n===i.CAPTION||n===i.TABLE||n===i.TBODY||n===i.TFOOT||n===i.THEAD||n===i.TR||n===i.TD||n===i.TH?(e.openElements.popUntilTagNamePopped(i.SELECT),e._resetInsertionMode(),e._processStartTag(t)):ja(e,t)}function Rd(e,t){const n=t.tagID;n===i.CAPTION||n===i.TABLE||n===i.TBODY||n===i.TFOOT||n===i.THEAD||n===i.TR||n===i.TD||n===i.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(i.SELECT),e._resetInsertionMode(),e.onEndTag(t)):$a(e,t)}function Od(e,t){switch(t.tagID){case i.BASE:case i.BASEFONT:case i.BGSOUND:case i.LINK:case i.META:case i.NOFRAMES:case i.SCRIPT:case i.STYLE:case i.TEMPLATE:case i.TITLE:{Me(e,t);break}case i.CAPTION:case i.COLGROUP:case i.TBODY:case i.TFOOT:case i.THEAD:{e.tmplInsertionModeStack[0]=O.IN_TABLE,e.insertionMode=O.IN_TABLE,pt(e,t);break}case i.COL:{e.tmplInsertionModeStack[0]=O.IN_COLUMN_GROUP,e.insertionMode=O.IN_COLUMN_GROUP,ks(e,t);break}case i.TR:{e.tmplInsertionModeStack[0]=O.IN_TABLE_BODY,e.insertionMode=O.IN_TABLE_BODY,An(e,t);break}case i.TD:case i.TH:{e.tmplInsertionModeStack[0]=O.IN_ROW,e.insertionMode=O.IN_ROW,vn(e,t);break}default:e.tmplInsertionModeStack[0]=O.IN_BODY,e.insertionMode=O.IN_BODY,be(e,t)}}function kd(e,t){t.tagID===i.TEMPLATE&&nt(e,t)}function qa(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(i.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Os(e,t)}function Ld(e,t){t.tagID===i.HTML?be(e,t):gn(e,t)}function Ya(e,t){var n;if(t.tagID===i.HTML){if(e.fragmentContext||(e.insertionMode=O.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===i.HTML){e._setEndLocation(e.openElements.items[0],t);const s=e.openElements.items[1];s&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(s))===null||n===void 0)&&n.endTag)&&e._setEndLocation(s,t)}}else gn(e,t)}function gn(e,t){e.insertionMode=O.IN_BODY,Tn(e,t)}function Dd(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.FRAMESET:{e._insertElement(t,B.HTML);break}case i.FRAME:{e._appendElement(t,B.HTML),t.ackSelfClosing=!0;break}case i.NOFRAMES:{Me(e,t);break}}}function Pd(e,t){t.tagID===i.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==i.FRAMESET&&(e.insertionMode=O.AFTER_FRAMESET))}function Md(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.NOFRAMES:{Me(e,t);break}}}function Bd(e,t){t.tagID===i.HTML&&(e.insertionMode=O.AFTER_AFTER_FRAMESET)}function Ud(e,t){t.tagID===i.HTML?be(e,t):an(e,t)}function an(e,t){e.insertionMode=O.IN_BODY,Tn(e,t)}function Fd(e,t){switch(t.tagID){case i.HTML:{be(e,t);break}case i.NOFRAMES:{Me(e,t);break}}}function Hd(e,t){t.chars=oe,e._insertCharacters(t)}function jd(e,t){e._insertCharacters(t),e.framesetOk=!1}function za(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==B.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function $d(e,t){if(sl(t))za(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),s=e.treeAdapter.getNamespaceURI(n);s===B.MATHML?Sa(t):s===B.SVG&&(rl(t),Ia(t)),ws(t),t.selfClosing?e._appendElement(t,s):e._insertElement(t,s),t.ackSelfClosing=!0}}function qd(e,t){if(t.tagID===i.P||t.tagID===i.BR){za(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const s=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(s)===B.HTML){e._endTagOutsideForeignContent(t);break}const d=e.treeAdapter.getTagName(s);if(d.toLowerCase()===t.tagName){t.tagName=d,e.openElements.shortenToLength(n);break}}}D.AREA,D.BASE,D.BASEFONT,D.BGSOUND,D.BR,D.COL,D.EMBED,D.FRAME,D.HR,D.IMG,D.INPUT,D.KEYGEN,D.LINK,D.META,D.PARAM,D.SOURCE,D.TRACK,D.WBR;function Yd(e,t){return Ra.parse(e,t)}function zd(e,t,n){typeof e=="string"&&(n=t,t=e,e=null);const s=Ra.getFragmentParser(e,n);return s.tokenizer.write(t,!0),s.getFragment()}const Vd={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `-->` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `-->` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `<!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `<!--`. Expected `-->`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},Wd="https://html.spec.whatwg.org/multipage/parsing.html#parse-error-",Kd=/-[a-z]/g,Gd=/%c(?:([-+])(\d+))?/g,Qd=/%x/g,Xd={2:!0,1:!1,0:null},Jd={};function Zd(e,t){const n=t||Jd,s=n.onerror,d=e instanceof ss?e:new ss(e),h=n.fragment?zd:Yd,p=String(d),a=h(p,{sourceCodeLocationInfo:!0,onParseError:n.onerror?b:null,scriptingEnabled:!1});return hc(a,{file:d,space:n.space,verbose:n.verbose});function b(_){const y=_.code,r=ef(y),l=n[r],f=l??!0,u=typeof f=="number"?f:f?1:0;if(u){const g=Vd[r],c=new ye(o(g.reason),{place:{start:{line:_.startLine,column:_.startCol,offset:_.startOffset},end:{line:_.endLine,column:_.endCol,offset:_.endOffset}},ruleId:y,source:"hast-util-from-html"});d.path&&(c.file=d.path,c.name=d.path+":"+c.name),c.fatal=Xd[u],c.note=o(g.description),c.url=g.url===!1?void 0:Wd+y,s(c)}function o(g){return g.replace(Gd,c).replace(Qd,m);function c(T,x,v){const w=(v?Number.parseInt(v,10):0)*(x==="-"?-1:1),C=p.charAt(_.startOffset+w);return nf(C)}function m(){return sf(p.charCodeAt(_.startOffset))}}}}function ef(e){return e.replace(Kd,tf)}function tf(e){return e.charAt(1).toUpperCase()}function nf(e){return e==="`"?"` ` `":e}function sf(e){return"0x"+e.toString(16).toUpperCase()}function rf(e){const t=this,{emitParseErrors:n,...s}={...t.data("settings"),...e};t.parser=d;function d(h,p){return Zd(h,{...s,onerror:n?function(a){p.path&&(a.name=p.path+":"+a.name,a.file=p.path),p.messages.push(a)}:void 0})}}const af=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],of=/^>|^->|<!--|-->|--!>|<!-$/g,uf=[">"],cf=["<",">"];function lf(e,t,n,s){return s.settings.bogusComments?"<?"+dt(e.value,Object.assign({},s.settings.characterReferences,{subset:uf}))+">":"<!--"+e.value.replace(of,d)+"-->";function d(h){return dt(h,Object.assign({},s.settings.characterReferences,{subset:cf}))}}function df(e,t,n,s){return"<!"+(s.settings.upperDoctype?"DOCTYPE":"doctype")+(s.settings.tightDoctype?"":" ")+"html>"}const ff=/[ \t\n\f\r]/g;function Ls(e){return typeof e=="object"?e.type==="text"?Lr(e.value):!1:Lr(e)}function Lr(e){return e.replace(ff,"")===""}const le=Wa(1),Va=Wa(-1),hf=[];function Wa(e){return t;function t(n,s,d){const h=n?n.children:hf;let p=(s||0)+e,a=h[p];if(!d)for(;a&&Ls(a);)p+=e,a=h[p];return a}}const mf={}.hasOwnProperty;function Ka(e){return t;function t(n,s,d){return mf.call(e,n.tagName)&&e[n.tagName](n,s,d)}}const Ds=Ka({body:gf,caption:zn,colgroup:zn,dd:_f,dt:Ef,head:zn,html:pf,li:yf,optgroup:Tf,option:xf,p:bf,rp:Dr,rt:Dr,tbody:vf,td:Pr,tfoot:Nf,th:Pr,thead:Af,tr:Cf});function zn(e,t,n){const s=le(n,t,!0);return!s||s.type!=="comment"&&!(s.type==="text"&&Ls(s.value.charAt(0)))}function pf(e,t,n){const s=le(n,t);return!s||s.type!=="comment"}function gf(e,t,n){const s=le(n,t);return!s||s.type!=="comment"}function bf(e,t,n){const s=le(n,t);return s?s.type==="element"&&(s.tagName==="address"||s.tagName==="article"||s.tagName==="aside"||s.tagName==="blockquote"||s.tagName==="details"||s.tagName==="div"||s.tagName==="dl"||s.tagName==="fieldset"||s.tagName==="figcaption"||s.tagName==="figure"||s.tagName==="footer"||s.tagName==="form"||s.tagName==="h1"||s.tagName==="h2"||s.tagName==="h3"||s.tagName==="h4"||s.tagName==="h5"||s.tagName==="h6"||s.tagName==="header"||s.tagName==="hgroup"||s.tagName==="hr"||s.tagName==="main"||s.tagName==="menu"||s.tagName==="nav"||s.tagName==="ol"||s.tagName==="p"||s.tagName==="pre"||s.tagName==="section"||s.tagName==="table"||s.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function yf(e,t,n){const s=le(n,t);return!s||s.type==="element"&&s.tagName==="li"}function Ef(e,t,n){const s=le(n,t);return!!(s&&s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd"))}function _f(e,t,n){const s=le(n,t);return!s||s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd")}function Dr(e,t,n){const s=le(n,t);return!s||s.type==="element"&&(s.tagName==="rp"||s.tagName==="rt")}function Tf(e,t,n){const s=le(n,t);return!s||s.type==="element"&&s.tagName==="optgroup"}function xf(e,t,n){const s=le(n,t);return!s||s.type==="element"&&(s.tagName==="option"||s.tagName==="optgroup")}function Af(e,t,n){const s=le(n,t);return!!(s&&s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot"))}function vf(e,t,n){const s=le(n,t);return!s||s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot")}function Nf(e,t,n){return!le(n,t)}function Cf(e,t,n){const s=le(n,t);return!s||s.type==="element"&&s.tagName==="tr"}function Pr(e,t,n){const s=le(n,t);return!s||s.type==="element"&&(s.tagName==="td"||s.tagName==="th")}const Sf=Ka({body:Rf,colgroup:Of,head:wf,html:If,tbody:kf});function If(e){const t=le(e,-1);return!t||t.type!=="comment"}function wf(e){const t=new Set;for(const s of e.children)if(s.type==="element"&&(s.tagName==="base"||s.tagName==="title")){if(t.has(s.tagName))return!1;t.add(s.tagName)}const n=e.children[0];return!n||n.type==="element"}function Rf(e){const t=le(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Ls(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function Of(e,t,n){const s=Va(n,t),d=le(e,-1,!0);return n&&s&&s.type==="element"&&s.tagName==="colgroup"&&Ds(s,n.children.indexOf(s),n)?!1:!!(d&&d.type==="element"&&d.tagName==="col")}function kf(e,t,n){const s=Va(n,t),d=le(e,-1);return n&&s&&s.type==="element"&&(s.tagName==="thead"||s.tagName==="tbody")&&Ds(s,n.children.indexOf(s),n)?!1:!!(d&&d.type==="element"&&d.tagName==="tr")}const en={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Lf(e,t,n,s){const d=s.schema,h=d.space==="svg"?!1:s.settings.omitOptionalTags;let p=d.space==="svg"?s.settings.closeEmptyElements:s.settings.voids.includes(e.tagName.toLowerCase());const a=[];let b;d.space==="html"&&e.tagName==="svg"&&(s.schema=Ht);const _=Df(s,e.properties),y=s.all(d.space==="html"&&e.tagName==="template"?e.content:e);return s.schema=d,y&&(p=!1),(_||!h||!Sf(e,t,n))&&(a.push("<",e.tagName,_?" "+_:""),p&&(d.space==="svg"||s.settings.closeSelfClosing)&&(b=_.charAt(_.length-1),(!s.settings.tightSelfClosing||b==="/"||b&&b!=='"'&&b!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(y),!p&&(!h||!Ds(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function Df(e,t){const n=[];let s=-1,d;if(t){for(d in t)if(t[d]!==null&&t[d]!==void 0){const h=Pf(e,d,t[d]);h&&n.push(h)}}for(;++s<n.length;){const h=e.settings.tightAttributes?n[s].charAt(n[s].length-1):void 0;s!==n.length-1&&h!=='"'&&h!=="'"&&(n[s]+=" ")}return n.join("")}function Pf(e,t,n){const s=Ss(e.schema,t),d=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,h=e.settings.allowDangerousCharacters?0:1;let p=e.quote,a;if(s.overloadedBoolean&&(n===s.attribute||n==="")?n=!0:(s.boolean||s.overloadedBoolean)&&(typeof n!="string"||n===s.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const b=dt(s.attribute,Object.assign({},e.settings.characterReferences,{subset:en.name[d][h]}));return n===!0||(n=Array.isArray(n)?(s.commaSeparated?Wi:Ki)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?b:(e.settings.preferUnquoted&&(a=dt(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:en.unquoted[d][h]}))),a!==n&&(e.settings.quoteSmart&&tr(n,p)>tr(n,e.alternative)&&(p=e.alternative),a=p+dt(n,Object.assign({},e.settings.characterReferences,{subset:(p==="'"?en.single:en.double)[d][h],attribute:!0}))+p),b+(a&&"="+a))}const Mf=["<","&"];function Ga(e,t,n,s){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:dt(e.value,Object.assign({},s.settings.characterReferences,{subset:Mf}))}function Bf(e,t,n,s){return s.settings.allowDangerousHtml?e.value:Ga(e,t,n,s)}function Uf(e,t,n,s){return s.all(e)}const Ff=Gi("type",{invalid:Hf,unknown:jf,handlers:{comment:lf,doctype:df,element:Lf,raw:Bf,root:Uf,text:Ga}});function Hf(e){throw new Error("Expected node, not `"+e+"`")}function jf(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const $f={},qf={},Yf=[];function zf(e,t){const n=t||$f,s=n.quote||'"',d=s==='"'?"'":'"';if(s!=='"'&&s!=="'")throw new Error("Invalid quote `"+s+"`, expected `'` or `\"`");return{one:Vf,all:Wf,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||af,characterReferences:n.characterReferences||qf,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Ht:En,quote:s,alternative:d}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Vf(e,t,n){return Ff(e,t,n,this)}function Wf(e){const t=[],n=e&&e.children||Yf;let s=-1;for(;++s<n.length;)t[s]=this.one(n[s],s,e);return t.join("")}function Kf(e){const t=this,n={...t.data("settings"),...e};t.compiler=s;function s(d){return zf(d,n)}}function Ps({source:e}){const[t,n]=Y.useState(300),s=Y.useRef(null),d=()=>{var p,a,b;if(s.current)try{const _=(b=(a=(p=s.current.contentWindow)==null?void 0:p.document)==null?void 0:a.body)==null?void 0:b.scrollHeight;_&&_>50&&n(Math.max(_+32,200))}catch{}};Y.useEffect(()=>{const p=setTimeout(d,100);return()=>clearTimeout(p)},[e]);const h=p=>{const a=Vu().use(rf,{fragment:!0}).use(sa,oa.validHTML).use(Kf).processSync(p);return`<!DOCTYPE html>
<html>
<head>
    <style>
        * { box-sizing: border-box; }
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100%;
            background: #18181b;
            color: #e4e4e7;
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body>${String(a)}</body>
</html>`};return I.jsx("iframe",{ref:s,onLoad:d,style:{width:"100%",height:`${t}px`,border:"none",borderRadius:"8px",display:"block"},srcDoc:h(e),sandbox:"allow-scripts allow-same-origin",title:"NFT HTML Content"})}const Gf=Y.lazy(()=>Ce(()=>import("./index-Brnaag7R.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5])).then(async e=>(await Ce(()=>import("./mode-html-dl0JeqJC.js").then(n=>n.m),__vite__mapDeps([6,1])),await Ce(()=>import("./theme-monokai-Cz4eVLlC.js").then(n=>n.t),__vite__mapDeps([7,1])),await Ce(()=>import("./ext-language_tools-C41EfQXa.js").then(n=>n.e),__vite__mapDeps([8,1])),(await Ce(()=>import("./ace-RY8oei4F.js").then(n=>n.a),__vite__mapDeps([9,1,2]))).config.set("useWorker",!1),{default:e.default}))),Qf=Y.lazy(()=>Ce(()=>import("./index-BYbqrZW7.js").then(e=>e.i),__vite__mapDeps([10,1])).then(e=>({default:e.Split})));function Xf({value:e,setValue:t,setPreviewOpen:n}){return I.jsx("div",{className:"rounded-lg border border-ink-700 relative",style:{zIndex:0},children:I.jsx("div",{style:{height:"500px"},children:I.jsxs(Qf,{horizontal:!1,onSplitChanged:()=>window.dispatchEvent(new Event("resize")),children:[I.jsx("div",{className:"h-full",children:I.jsx(Gf,{mode:"html",theme:"monokai",onChange:t,value:e,name:"html-editor",editorProps:{$blockScrolling:!1},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showPrintMargin:!1},width:"100%",height:"100%",fontSize:14})}),I.jsxs("div",{className:"h-full overflow-auto bg-ink-950 relative",children:[I.jsx("button",{type:"button",onClick:()=>n(!0),className:"absolute top-2 right-2 z-10 p-1.5 bg-ink-800/80 hover:bg-ink-700 rounded text-ink-400 hover:text-white transition-colors",title:"Expand preview",children:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),I.jsx(Ps,{source:e})]})]})})})}function R0({value:e,setValue:t}){const[n,s]=Y.useState(!1);return I.jsxs(Y.Fragment,{children:[I.jsx(Y.Suspense,{fallback:I.jsx("div",{className:"rounded-lg border border-ink-700 bg-ink-900 flex items-center justify-center",style:{height:"500px"},children:I.jsx("div",{className:"text-ink-400",children:"Loading editor..."})}),children:I.jsx(Xf,{value:e,setValue:t,setPreviewOpen:s})}),n&&I.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[I.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>s(!1)}),I.jsxs("div",{className:"relative w-full max-w-4xl h-[80vh] bg-ink-950 rounded-xl border border-ink-700 overflow-hidden",children:[I.jsx("div",{className:"absolute top-3 right-3 z-10",children:I.jsx("button",{type:"button",onClick:()=>s(!1),className:"p-2 bg-ink-800 hover:bg-ink-700 rounded-lg text-ink-400 hover:text-white transition-colors",children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),I.jsx("div",{className:"h-full",children:I.jsx(Ps,{source:e})})]})]})]})}function Jf({type:e}){if(!e)return null;const t={"text/plain":{label:"TXT",bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:""},"text/markdown":{label:"MD",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400",icon:"#"},"text/html":{label:"HTML",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",icon:"<>"}},n=t[e]||t["text/plain"];return I.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-mono ${n.bg} ${n.border} ${n.text} border`,children:[I.jsx("span",{className:"opacity-60 w-4 text-center",children:n.icon}),n.label]})}function Zf({id:e,prefetchedData:t}){const n=Es(),[s,d]=Y.useState(t?{name:t.name,description:t.description,text_uri:t.text_uri}:null),[h,p]=Y.useState((t==null?void 0:t.author)||null),[a,b]=Y.useState((t==null?void 0:t.content_type)||null),[_,y]=Y.useState((t==null?void 0:t.content)??null),[r,l]=Y.useState(!0),f=t==null?void 0:t._stats,[u,o]=Y.useState((f==null?void 0:f.totalSupply)??null),[g,c]=Y.useState(f!=null&&f.floorPrice?parseFloat(f.floorPrice)/1e18:null),[m,T]=Y.useState((f==null?void 0:f.listedCount)??null),[x,v]=Y.useState(f!=null&&f.totalVolume?parseFloat(f.totalVolume)/1e18:null),w=Se.contractAddresses.v1.zang,C=Se.contractAddresses.v1.marketplace;if(Y.useEffect(()=>{if(!e||f!==void 0)return;(async()=>{try{const k=t?Promise.resolve(t):fetch(`/api/nft/${e}`).then(z=>z.ok?z.json():null),[L,M]=await Promise.all([k,Ze.readContract({address:w,abi:ct.zang,functionName:"totalSupply",args:[BigInt(e)]})]);!t&&L&&(p(L.author),d({name:L.name,description:L.description,text_uri:L.text_uri}),b(L.content_type),y(L.content)),o(Number(M));const H=await Ze.readContract({address:C,abi:ct.marketplace,functionName:"listingCount",args:[BigInt(e)]}),$=Number(H);if($>0){const z=[];for(let V=0;V<$;V++)z.push(Ze.readContract({address:C,abi:ct.marketplace,functionName:"listings",args:[BigInt(e),BigInt(V)]}));const K=(await Promise.all(z)).map(([V,se,W])=>({price:V,seller:se,amount:W})).filter(V=>V.seller!==vi);if(T(K.reduce((V,se)=>V+Number(se.amount),0)),K.length>0){const V=K.map(se=>parseFloat(Qn(se.price)));c(Math.min(...V))}}else T(0);const q=await Ze.getContractEvents({address:C,abi:ct.marketplace,eventName:"TokenPurchased",args:{_tokenId:BigInt(e)},fromBlock:BigInt(Se.firstBlocks.v1.base.marketplace)});if(q.length>0){const z=q.reduce((Z,ae)=>{const K=parseFloat(Qn(ae.args._price)),V=Number(ae.args._amount);return Z+K*V},0);v(z)}else v(0)}catch(k){so(k)&&l(!1)}})()},[e,f,t,w,C]),!r)return null;const E=()=>n("/nft?id="+e),A=N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),E())};return I.jsx("div",{className:"group relative cursor-pointer",onClick:E,onKeyDown:A,role:"button",tabIndex:0,children:I.jsxs("div",{className:"relative bg-ink-900/40 border border-ink-800 rounded-xl overflow-hidden transition-all duration-300 hover:border-ink-600 hover:bg-ink-900/60 hover:-translate-y-1 hover:shadow-xl hover:shadow-ink-950/50",children:[I.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-ink-800/50 bg-ink-900/30",children:[I.jsxs("span",{className:"text-ink-600 text-xs font-mono",children:["#",e]}),I.jsx(Jf,{type:a})]}),I.jsxs("div",{className:"relative h-52 overflow-hidden",children:[I.jsx("div",{className:"absolute inset-0 p-4 overflow-hidden",children:a&&_!==null?a==="text/html"?I.jsx("div",{className:"absolute inset-0 [&>iframe]:!h-full [&>iframe]:!min-h-full",children:I.jsx(Ps,{source:_})}):a==="text/markdown"?I.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-ink-300","data-color-mode":"dark",children:I.jsx(Qi.Markdown,{source:_,rehypePlugins:[()=>sa(oa.validMarkdown)]})}):I.jsx("pre",{className:"font-mono text-sm text-ink-300 leading-relaxed whitespace-pre overflow-x-auto",children:_}):I.jsx("div",{className:"space-y-2",children:I.jsx(On,{count:5,baseColor:"#1c1c1e",highlightColor:"#2a2a2e"})})}),I.jsx("div",{className:"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-ink-900/90 to-transparent pointer-events-none"}),I.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-ink-950/40",children:I.jsx("span",{className:"px-4 py-2 bg-white/10 backdrop-blur-sm rounded-lg text-white text-sm font-medium border border-white/20",children:"Read more "})})]}),I.jsxs("div",{className:"px-3 py-2.5 bg-gradient-to-b from-ink-900 to-ink-900/80",children:[I.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I.jsx("h3",{className:"text-ink-100 font-medium text-sm leading-tight line-clamp-1 group-hover:text-white transition-colors flex-1 min-w-0",children:(s==null?void 0:s.name)||I.jsx(On,{baseColor:"#1c1c1e",highlightColor:"#2a2a2e",width:"70%"})}),h&&I.jsx("span",{className:"text-ink-500 text-xs font-mono shrink-0",children:I.jsx(es,{address:h,shorten:!0,nChar:4,disableLink:!0})})]}),I.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5 text-xs",children:[u!==null?I.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[u," ed."]}):I.jsx(On,{width:30,baseColor:"#1c1c1e",highlightColor:"#2a2a2e"}),m!==null&&m>0&&I.jsxs(Y.Fragment,{children:[I.jsx("span",{className:"text-ink-700",children:""}),I.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[m," listed"]})]}),g!==null&&I.jsxs(Y.Fragment,{children:[I.jsx("span",{className:"text-ink-700",children:""}),I.jsxs("span",{className:"text-green-400 whitespace-nowrap font-mono",children:[g," "]})]}),x!==null&&x>0&&I.jsxs(Y.Fragment,{children:[I.jsx("span",{className:"text-ink-700",children:""}),I.jsxs("span",{className:"text-ink-400 whitespace-nowrap font-mono",children:[x.toFixed(4),"  vol"]})]})]})]})]})})}function Vn({href:e,children:t,...n}){const s=Es(),d=h=>{h.preventDefault(),s(e)};return I.jsx("a",{href:e,onClick:d,...n,children:t})}function Mr(){const{address:e}=bs(),{data:t}=Ni({address:e,chainId:Se.networks.main.chainId}),n=t?`${parseFloat(Qn(t.value)).toFixed(4)} ETH`:null;return I.jsx(Mi.Custom,{children:({account:s,chain:d,openAccountModal:h,openChainModal:p,openConnectModal:a,mounted:b})=>{const _=b,y=_&&s&&d;return I.jsx("div",{...!_&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}},children:y?d.unsupported?I.jsx("button",{onClick:p,className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-red-400 bg-red-900/20 rounded-lg border border-red-700/50 hover:bg-red-900/30 transition-colors",children:"Wrong network"}):I.jsxs("div",{className:"flex items-center bg-ink-800/50 rounded-lg border border-ink-700/50 overflow-hidden",children:[n&&d.id===Se.networks.main.chainId&&I.jsx("div",{className:"px-3 py-2 flex items-center gap-2 text-ink-300 text-sm border-r border-ink-700/50",children:I.jsx("span",{className:"font-mono",children:n})}),I.jsxs("button",{onClick:h,className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-ink-100 hover:bg-ink-700/50 transition-colors",children:[s.ensAvatar&&I.jsx("img",{className:"w-5 h-5 rounded-full object-cover",src:s.ensAvatar,alt:""}),I.jsx("span",{className:"font-mono text-xs",children:s.ensName||s.displayName})]})]}):I.jsxs("button",{onClick:a,className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-ink-100 bg-ink-800/50 rounded-lg border border-ink-700/50 hover:bg-ink-700/50 transition-colors",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),I.jsx("span",{children:"Connect"})]})})}})}function eh(){const[e,t]=ht(Vr);return e?I.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:I.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3",children:[I.jsx("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),I.jsx("div",{className:"flex-1",children:I.jsxs("p",{className:"text-red-400 text-sm",children:[I.jsx("span",{className:"font-semibold",children:"Error:"})," ",e]})}),I.jsx("button",{onClick:()=>t(null),className:"text-red-400 hover:text-red-300 transition-colors","aria-label":"Dismiss error",children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}const je=Object.create(null);je.open="0";je.close="1";je.ping="2";je.pong="3";je.message="4";je.upgrade="5";je.noop="6";const on=Object.create(null);Object.keys(je).forEach(e=>{on[je[e]]=e});const ds={type:"error",data:"parser error"},Qa=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Xa=typeof ArrayBuffer=="function",Ja=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ms=({type:e,data:t},n,s)=>Qa&&t instanceof Blob?n?s(t):Br(t,s):Xa&&(t instanceof ArrayBuffer||Ja(t))?n?s(t):Br(new Blob([t]),s):s(je[e]+(t||"")),Br=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function Ur(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Wn;function th(e,t){if(Qa&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ur).then(t);if(Xa&&(e.data instanceof ArrayBuffer||Ja(e.data)))return t(Ur(e.data));Ms(e,!1,n=>{Wn||(Wn=new TextEncoder),t(Wn.encode(n))})}const Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Fr.length;e++)Nt[Fr.charCodeAt(e)]=e;const nh=e=>{let t=e.length*.75,n=e.length,s,d=0,h,p,a,b;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const _=new ArrayBuffer(t),y=new Uint8Array(_);for(s=0;s<n;s+=4)h=Nt[e.charCodeAt(s)],p=Nt[e.charCodeAt(s+1)],a=Nt[e.charCodeAt(s+2)],b=Nt[e.charCodeAt(s+3)],y[d++]=h<<2|p>>4,y[d++]=(p&15)<<4|a>>2,y[d++]=(a&3)<<6|b&63;return _},sh=typeof ArrayBuffer=="function",Bs=(e,t)=>{if(typeof e!="string")return{type:"message",data:Za(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:rh(e.substring(1),t)}:on[n]?e.length>1?{type:on[n],data:e.substring(1)}:{type:on[n]}:ds},rh=(e,t)=>{if(sh){const n=nh(e);return Za(n,t)}else return{base64:!0,data:e}},Za=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ei="",ah=(e,t)=>{const n=e.length,s=new Array(n);let d=0;e.forEach((h,p)=>{Ms(h,!1,a=>{s[p]=a,++d===n&&t(s.join(ei))})})},ih=(e,t)=>{const n=e.split(ei),s=[];for(let d=0;d<n.length;d++){const h=Bs(n[d],t);if(s.push(h),h.type==="error")break}return s};function oh(){return new TransformStream({transform(e,t){th(e,n=>{const s=n.length;let d;if(s<126)d=new Uint8Array(1),new DataView(d.buffer).setUint8(0,s);else if(s<65536){d=new Uint8Array(3);const h=new DataView(d.buffer);h.setUint8(0,126),h.setUint16(1,s)}else{d=new Uint8Array(9);const h=new DataView(d.buffer);h.setUint8(0,127),h.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(d[0]|=128),t.enqueue(d),t.enqueue(n)})}})}let Kn;function tn(e){return e.reduce((t,n)=>t+n.length,0)}function nn(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let d=0;d<t;d++)n[d]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function uh(e,t){Kn||(Kn=new TextDecoder);const n=[];let s=0,d=-1,h=!1;return new TransformStream({transform(p,a){for(n.push(p);;){if(s===0){if(tn(n)<1)break;const b=nn(n,1);h=(b[0]&128)===128,d=b[0]&127,d<126?s=3:d===126?s=1:s=2}else if(s===1){if(tn(n)<2)break;const b=nn(n,2);d=new DataView(b.buffer,b.byteOffset,b.length).getUint16(0),s=3}else if(s===2){if(tn(n)<8)break;const b=nn(n,8),_=new DataView(b.buffer,b.byteOffset,b.length),y=_.getUint32(0);if(y>Math.pow(2,21)-1){a.enqueue(ds);break}d=y*Math.pow(2,32)+_.getUint32(4),s=3}else{if(tn(n)<d)break;const b=nn(n,d);a.enqueue(Bs(h?b:Kn.decode(b),t)),s=0}if(d===0||d>e){a.enqueue(ds);break}}}})}const ti=4;function ce(e){if(e)return ch(e)}function ch(e){for(var t in ce.prototype)e[t]=ce.prototype[t];return e}ce.prototype.on=ce.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ce.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ce.prototype.off=ce.prototype.removeListener=ce.prototype.removeAllListeners=ce.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,d=0;d<n.length;d++)if(s=n[d],s===t||s.fn===t){n.splice(d,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ce.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,d=n.length;s<d;++s)n[s].apply(this,t)}return this};ce.prototype.emitReserved=ce.prototype.emit;ce.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ce.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Nn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lh="arraybuffer";function ni(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const dh=Oe.setTimeout,fh=Oe.clearTimeout;function Cn(e,t){t.useNativeTimers?(e.setTimeoutFn=dh.bind(Oe),e.clearTimeoutFn=fh.bind(Oe)):(e.setTimeoutFn=Oe.setTimeout.bind(Oe),e.clearTimeoutFn=Oe.clearTimeout.bind(Oe))}const hh=1.33;function mh(e){return typeof e=="string"?ph(e):Math.ceil((e.byteLength||e.size)*hh)}function ph(e){let t=0,n=0;for(let s=0,d=e.length;s<d;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function si(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gh(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function bh(e){let t={},n=e.split("&");for(let s=0,d=n.length;s<d;s++){let h=n[s].split("=");t[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return t}class yh extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class Us extends ce{constructor(t){super(),this.writable=!1,Cn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new yh(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Bs(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=gh(t);return n.length?"?"+n:""}}class Eh extends Us{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};ih(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,ah(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=si()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let ri=!1;try{ri=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const _h=ri;function Th(){}class xh extends Eh{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(d,h)=>{this.onError("xhr post error",d,h)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class He extends ce{constructor(t,n,s){super(),this.createRequest=t,Cn(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=ni(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let d in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(d)&&s.setRequestHeader(d,this._opts.extraHeaders[d])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var d;s.readyState===3&&((d=this._opts.cookieJar)===null||d===void 0||d.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(d){this.setTimeoutFn(()=>{this._onError(d)},0);return}typeof document<"u"&&(this._index=He.requestsCount++,He.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Th,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete He.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}He.requestsCount=0;He.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hr);else if(typeof addEventListener=="function"){const e="onpagehide"in Oe?"pagehide":"unload";addEventListener(e,Hr,!1)}}function Hr(){for(let e in He.requests)He.requests.hasOwnProperty(e)&&He.requests[e].abort()}const Ah=(function(){const e=ai({xdomain:!1});return e&&e.responseType!==null})();class vh extends xh{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Ah&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new He(ai,this.uri(),t)}}function ai(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||_h))return new XMLHttpRequest}catch{}if(!t)try{return new Oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ii=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Nh extends Us{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=ii?{}:ni(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(d){return this.emitReserved("error",d)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],d=n===t.length-1;Ms(s,this.supportsBinary,h=>{try{this.doWrite(s,h)}catch{}d&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=si()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Gn=Oe.WebSocket||Oe.MozWebSocket;class Ch extends Nh{createSocket(t,n,s){return ii?new Gn(t,n,s):n?new Gn(t,n):new Gn(t)}doWrite(t,n){this.ws.send(n)}}class Sh extends Us{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=uh(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),d=oh();d.readable.pipeTo(t.writable),this._writer=d.writable.getWriter();const h=()=>{s.read().then(({done:a,value:b})=>{a||(this.onPacket(b),h())}).catch(a=>{})};h();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this._writer.write(p).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],d=n===t.length-1;this._writer.write(s).then(()=>{d&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Ih={websocket:Ch,webtransport:Sh,polling:vh},wh=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Rh=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fs(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let d=wh.exec(e||""),h={},p=14;for(;p--;)h[Rh[p]]=d[p]||"";return n!=-1&&s!=-1&&(h.source=t,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=Oh(h,h.path),h.queryKey=kh(h,h.query),h}function Oh(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function kh(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,d,h){d&&(n[d]=h)}),n}const hs=typeof addEventListener=="function"&&typeof removeEventListener=="function",un=[];hs&&addEventListener("offline",()=>{un.forEach(e=>e())},!1);class Qe extends ce{constructor(t,n){if(super(),this.binaryType=lh,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=fs(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=fs(n.host).host);Cn(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const d=s.prototype.name;this.transports.push(d),this._transportsByName[d]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bh(this.opts.query)),hs&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},un.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=ti,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Qe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Qe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const d=this.writeBuffer[s].data;if(d&&(n+=mh(d)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Nn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,d){if(typeof n=="function"&&(d=n,n=void 0),typeof s=="function"&&(d=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const h={type:t,data:n,options:s};this.emitReserved("packetCreate",h),this.writeBuffer.push(h),d&&this.once("flush",d),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Qe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hs&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=un.indexOf(this._offlineEventListener);s!==-1&&un.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Qe.protocol=ti;class Lh extends Qe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Qe.priorWebsocketSuccess=!1;const d=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",r=>{if(!s)if(r.type==="pong"&&r.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Qe.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const l=new Error("probe error");l.transport=n.name,this.emitReserved("upgradeError",l)}}))};function h(){s||(s=!0,y(),n.close(),n=null)}const p=r=>{const l=new Error("probe error: "+r);l.transport=n.name,h(),this.emitReserved("upgradeError",l)};function a(){p("transport closed")}function b(){p("socket closed")}function _(r){n&&r.name!==n.name&&h()}const y=()=>{n.removeListener("open",d),n.removeListener("error",p),n.removeListener("close",a),this.off("close",b),this.off("upgrading",_)};n.once("open",d),n.once("error",p),n.once("close",a),this.once("close",b),this.once("upgrading",_),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Dh=class extends Lh{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(d=>Ih[d]).filter(d=>!!d)),super(t,s)}};function Ph(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=fs(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const h=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+h+":"+s.port+t,s.href=s.protocol+"://"+h+(n&&n.port===s.port?"":":"+s.port),s}const Mh=typeof ArrayBuffer=="function",Bh=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,oi=Object.prototype.toString,Uh=typeof Blob=="function"||typeof Blob<"u"&&oi.call(Blob)==="[object BlobConstructor]",Fh=typeof File=="function"||typeof File<"u"&&oi.call(File)==="[object FileConstructor]";function Fs(e){return Mh&&(e instanceof ArrayBuffer||Bh(e))||Uh&&e instanceof Blob||Fh&&e instanceof File}function cn(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(cn(e[n]))return!0;return!1}if(Fs(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return cn(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&cn(e[n]))return!0;return!1}function Hh(e){const t=[],n=e.data,s=e;return s.data=ms(n,t),s.attachments=t.length,{packet:s,buffers:t}}function ms(e,t){if(!e)return e;if(Fs(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=ms(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=ms(e[s],t));return n}return e}function jh(e,t){return e.data=ps(e.data,t),delete e.attachments,e}function ps(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ps(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ps(e[n],t));return e}const ui=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$h=5;var X;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(X||(X={}));class qh{constructor(t){this.replacer=t}encode(t){return(t.type===X.EVENT||t.type===X.ACK)&&cn(t)?this.encodeAsBinary({type:t.type===X.EVENT?X.BINARY_EVENT:X.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===X.BINARY_EVENT||t.type===X.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Hh(t),s=this.encodeAsString(n.packet),d=n.buffers;return d.unshift(s),d}}class Hs extends ce{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===X.BINARY_EVENT;s||n.type===X.BINARY_ACK?(n.type=s?X.EVENT:X.ACK,this.reconstructor=new Yh(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Fs(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(X[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===X.BINARY_EVENT||s.type===X.BINARY_ACK){const h=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const p=t.substring(h,n);if(p!=Number(p)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(p)}if(t.charAt(n+1)==="/"){const h=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(h,n)}else s.nsp="/";const d=t.charAt(n+1);if(d!==""&&Number(d)==d){const h=n+1;for(;++n;){const p=t.charAt(n);if(p==null||Number(p)!=p){--n;break}if(n===t.length)break}s.id=Number(t.substring(h,n+1))}if(t.charAt(++n)){const h=this.tryParse(t.substr(n));if(Hs.isPayloadValid(s.type,h))s.data=h;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case X.CONNECT:return bn(n);case X.DISCONNECT:return n===void 0;case X.CONNECT_ERROR:return typeof n=="string"||bn(n);case X.EVENT:case X.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&ui.indexOf(n[0])===-1);case X.ACK:case X.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Yh{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=jh(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function zh(e){return typeof e=="string"}const Vh=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Wh(e){return e===void 0||Vh(e)}function bn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Kh(e,t){switch(e){case X.CONNECT:return t===void 0||bn(t);case X.DISCONNECT:return t===void 0;case X.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&ui.indexOf(t[0])===-1);case X.ACK:return Array.isArray(t);case X.CONNECT_ERROR:return typeof t=="string"||bn(t);default:return!1}}function Gh(e){return zh(e.nsp)&&Wh(e.id)&&Kh(e.type,e.data)}const Qh=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hs,Encoder:qh,get PacketType(){return X},isPacketValid:Gh,protocol:$h},Symbol.toStringTag,{value:"Module"}));function De(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Xh=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ci extends ce{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[De(t,"open",this.onopen.bind(this)),De(t,"packet",this.onpacket.bind(this)),De(t,"error",this.onerror.bind(this)),De(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,d,h;if(Xh.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const p={type:X.EVENT,data:n};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,r=n.pop();this._registerAckCallback(y,r),p.id=y}const a=(d=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||d===void 0?void 0:d.writable,b=this.connected&&!(!((h=this.io.engine)===null||h===void 0)&&h._hasPingExpired());return this.flags.volatile&&!a||(b?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p)),this.flags={},this}_registerAckCallback(t,n){var s;const d=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(d===void 0){this.acks[t]=n;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},d),p=(...a)=>{this.io.clearTimeoutFn(h),n.apply(this,a)};p.withError=!0,this.acks[t]=p}emitWithAck(t,...n){return new Promise((s,d)=>{const h=(p,a)=>p?d(p):s(a);h.withError=!0,n.push(h),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((d,...h)=>(this._queue[0],d!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(d)):(this._queue.shift(),n&&n(null,...h)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:X.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case X.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case X.EVENT:case X.BINARY_EVENT:this.onevent(t);break;case X.ACK:case X.BINARY_ACK:this.onack(t);break;case X.DISCONNECT:this.ondisconnect();break;case X.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...d){s||(s=!0,n.packet({type:X.ACK,id:t,data:d}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:X.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function bt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}bt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};bt.prototype.reset=function(){this.attempts=0};bt.prototype.setMin=function(e){this.ms=e};bt.prototype.setMax=function(e){this.max=e};bt.prototype.setJitter=function(e){this.jitter=e};class gs extends ce{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Cn(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new bt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const d=n.parser||Qh;this.encoder=new d.Encoder,this.decoder=new d.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Dh(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const d=De(n,"open",function(){s.onopen(),t&&t()}),h=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},p=De(n,"error",h);if(this._timeout!==!1){const a=this._timeout,b=this.setTimeoutFn(()=>{d(),h(new Error("timeout")),n.close()},a);this.opts.autoUnref&&b.unref(),this.subs.push(()=>{this.clearTimeoutFn(b)})}return this.subs.push(d),this.subs.push(p),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(De(t,"ping",this.onping.bind(this)),De(t,"data",this.ondata.bind(this)),De(t,"error",this.onerror.bind(this)),De(t,"close",this.onclose.bind(this)),De(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Nn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new ci(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(d=>{d?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",d)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const xt={};function ln(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Ph(e,t.path||"/socket.io"),s=n.source,d=n.id,h=n.path,p=xt[d]&&h in xt[d].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||p;let b;return a?b=new gs(s,t):(xt[d]||(xt[d]=new gs(s,t)),b=xt[d]),n.query&&!t.query&&(t.query=n.queryKey),b.socket(n.path,t)}Object.assign(ln,{Manager:gs,Socket:ci,io:ln,connect:ln});let At=null;function Sn(){return At||(At=ln(void 0,{transports:["websocket","polling"],autoConnect:!0}),At.on("connect",()=>{console.log("WebSocket connected")}),At.on("disconnect",()=>{console.log("WebSocket disconnected")})),At}function Jh(e){Y.useEffect(()=>{const t=Sn(),n=s=>{e&&e(s)};return t.on("newEvents",n),()=>{t.off("newEvents",n)}},[e])}function k0(e,t){Y.useEffect(()=>{if(!e)return;const n=Sn();n.emit("subscribe",e);const s=d=>{const h=d.filter(p=>p.tokenId===e);h.length>0&&t&&t(h)};return n.on("newEvents",s),()=>{n.emit("unsubscribe",e),n.off("newEvents",s)}},[e,t])}function Zh(){const[e,t]=Y.useState(!1);return Y.useEffect(()=>{const n=Sn();t(n.connected);const s=()=>t(!0),d=()=>t(!1);return n.on("connect",s),n.on("disconnect",d),()=>{n.off("connect",s),n.off("disconnect",d)}},[]),e}function e0(e){Y.useEffect(()=>{const t=Sn(),n=s=>{e&&e(s)};return t.on("syncStatus",n),()=>{t.off("syncStatus",n)}},[e])}function t0(e){if(!e)return"unknown";const n=new Date-new Date(e),s=Math.floor(n/1e3),d=Math.floor(s/60),h=Math.floor(d/60);return s<10?"just now":s<60?`${s}s ago`:d<60?`${d}m ago`:h<24?`${h}h ago`:new Date(e).toLocaleDateString()}function n0(e,t=30){if(!e)return"unknown";const n=new Date,s=new Date(e),d=(n-s)/1e3;return d<t*2?"fresh":d<t*5?"stale":"very-stale"}function s0({meta:e,onRefresh:t,compact:n=!1}){const[s,d]=Y.useState(""),[h,p]=Y.useState(!1);Y.useEffect(()=>{const f=()=>d(t0(e==null?void 0:e.lastSyncTime));f();const u=setInterval(f,1e3);return()=>clearInterval(u)},[e==null?void 0:e.lastSyncTime]);const a=Y.useCallback(async()=>{if(!(!t||h)){p(!0);try{await t()}finally{p(!1)}}},[t,h]);if(!e)return null;const b=n0(e.lastSyncTime,e.syncIntervalSeconds),_=e.isSyncing||h,y={fresh:"text-green-500",stale:"text-yellow-500","very-stale":"text-red-500",unknown:"text-ink-500"},r={fresh:"bg-green-500",stale:"bg-yellow-500","very-stale":"bg-red-500",unknown:"bg-ink-500"},l=e.isCatchingUp||e.syncProgress!==void 0&&e.syncProgress<99;return n?I.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-ink-500",children:[I.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${_||l?"bg-blue-500 animate-pulse":r[b]}`}),I.jsx("span",{children:_?"Syncing...":l?`Syncing ${e.syncProgress}%`:s})]}):I.jsxs("div",{className:"flex items-center justify-between gap-4 px-3 py-2 bg-ink-900/30 rounded-lg border border-ink-800/50",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:`w-2 h-2 rounded-full ${_||l?"bg-blue-500 animate-pulse":r[b]}`}),I.jsx("span",{className:"text-xs text-ink-400",children:_?"Syncing blockchain data...":l?I.jsxs(I.Fragment,{children:["Catching up... ",I.jsxs("span",{className:"text-blue-400",children:[e.syncProgress,"%"]}),e.blocksRemaining&&I.jsxs("span",{className:"text-ink-600 ml-1",children:["(",Math.round(e.blocksRemaining/1e3),"k blocks remaining)"]})]}):I.jsxs(I.Fragment,{children:["Updated ",I.jsx("span",{className:y[b],children:s}),e.lastSyncBlock&&I.jsxs("span",{className:"text-ink-600 ml-1",children:["(block ",e.lastSyncBlock.toLocaleString(),")"]})]})})]}),t&&!_&&!l&&b!=="fresh"&&I.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-xs text-ink-400 hover:text-ink-200 transition-colors",children:[I.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}function r0(){const[e,t]=Y.useState(null),n=Y.useCallback(s=>{s&&t(s)},[]);return[e,n]}var dn={exports:{}},a0=dn.exports,jr;function i0(){return jr||(jr=1,(function(e,t){(function(s,d){e.exports=d()})(a0,function(){return(function(n){var s={};function d(h){if(s[h])return s[h].exports;var p=s[h]={exports:{},id:h,loaded:!1};return n[h].call(p.exports,p,p.exports,d),p.loaded=!0,p.exports}return d.m=n,d.c=s,d.p="",d(0)})([function(n,s,d){const h=d(1),p=d(2),a=new Array(4);function b(o){for(let g=0;g<a.length;g++)a[g]=0;for(let g=0;g<o.length;g++)a[g%4]=(a[g%4]<<5)-a[g%4]+o.charCodeAt(g)}function _(){const o=a[0]^a[0]<<11;return a[0]=a[1],a[1]=a[2],a[2]=a[3],a[3]=a[3]^a[3]>>19^o^o>>8,(a[3]>>>0)/(1<<31>>>0)}function y(){const o=Math.floor(_()*360),g=_()*60+40,c=(_()+_()+_()+_())*25;return[o/360,g/100,c/100]}function r(o){const g=o,c=o,m=Math.ceil(g/2),T=g-m,x=[];for(let v=0;v<c;v++){let w=[];for(let E=0;E<m;E++)w[E]=Math.floor(_()*2.3);const C=w.slice(0,T).reverse();w=w.concat(C);for(let E=0;E<w.length;E++)x.push(w[E])}return x}function l(o,g,c,m,T,x){for(let v=0;v<m;v++)for(let w=0;w<T;w++)o.buffer[o.index(g+v,c+w)]=x}function f(o){if(!o.seed)throw new Error("No seed provided");return b(o.seed),Object.assign({size:8,scale:16,color:y(),bgcolor:y(),spotcolor:y()},o)}function u(o){const g=f({seed:o.toLowerCase()}),c=r(g.size),m=Math.sqrt(c.length),T=new h(g.size*g.scale,g.size*g.scale,3);T.color(...p(...g.bgcolor));const x=T.color(...p(...g.color)),v=T.color(...p(...g.spotcolor));for(let w=0;w<c.length;w++){const C=Math.floor(w/m),E=w%m;if(c[w]){const A=c[w]==1?x:v;l(T,E*g.scale,C*g.scale,g.scale,g.scale,A)}}return`data:image/png;base64,${T.getBase64()}`}n.exports=u},function(n,s){/**
 * A handy class to calculate color values.
 *
 * @version 1.0
 * @author Robert Eisele <robert@xarg.org>
 * @copyright Copyright (c) 2010, Robert Eisele
 * @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
 * @license http://www.opensource.org/licenses/bsd-license.php BSD License
 *
 */n.exports=function(d,h,p){function a(m,T){for(var x=2;x<arguments.length;x++)for(var v=0;v<arguments[x].length;v++)m[T++]=arguments[x].charAt(v)}function b(m){return String.fromCharCode(m>>8&255,m&255)}function _(m){return String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,m&255)}function y(m){return String.fromCharCode(m&255,m>>8&255)}this.width=d,this.height=h,this.depth=p,this.pix_size=h*(d+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*p+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+p+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var r=new Array,l=0;l<this.buffer_size;l++)this.buffer[l]="\0";a(this.buffer,this.ihdr_offs,_(this.ihdr_size-12),"IHDR",_(d),_(h),"\b"),a(this.buffer,this.plte_offs,_(this.plte_size-12),"PLTE"),a(this.buffer,this.trns_offs,_(this.trns_size-12),"tRNS"),a(this.buffer,this.idat_offs,_(this.idat_size-12),"IDAT"),a(this.buffer,this.iend_offs,_(this.iend_size-12),"IEND");var f=30912;f+=31-f%31,a(this.buffer,this.idat_offs+8,b(f));for(var l=0;(l<<16)-1<this.pix_size;l++){var u,o;l+65535<this.pix_size?(u=65535,o="\0"):(u=this.pix_size-(l<<16)-l,o=""),a(this.buffer,this.idat_offs+8+2+(l<<16)+(l<<2),o,y(u),y(~u))}for(var l=0;l<256;l++){for(var g=l,c=0;c<8;c++)g&1?g=-306674912^g>>1&2147483647:g=g>>1&2147483647;r[l]=g}this.index=function(m,T){var x=T*(this.width+1)+m+1,v=this.idat_offs+8+2+5*Math.floor(x/65535+1)+x;return v},this.color=function(m,T,x,v){v=v>=0?v:255;var w=((v<<8|m)<<8|T)<<8|x;if(typeof this.palette[w]>"u"){if(this.pindex==this.depth)return"\0";var C=this.plte_offs+8+3*this.pindex;this.buffer[C+0]=String.fromCharCode(m),this.buffer[C+1]=String.fromCharCode(T),this.buffer[C+2]=String.fromCharCode(x),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(v),this.palette[w]=String.fromCharCode(this.pindex++)}return this.palette[w]},this.getBase64=function(){var m=this.getDump(),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x,v,w,C,E,A,N,k=m.length,L=0,M="";do x=m.charCodeAt(L),C=x>>2,v=m.charCodeAt(L+1),E=(x&3)<<4|v>>4,w=m.charCodeAt(L+2),k<L+2?A=64:A=(v&15)<<2|w>>6,k<L+3?N=64:N=w&63,M+=T.charAt(C)+T.charAt(E)+T.charAt(A)+T.charAt(N);while((L+=3)<k);return M},this.getDump=function(){for(var m=65521,T=5552,x=1,v=0,w=T,C=0;C<this.height;C++)for(var E=-1;E<this.width;E++)x+=this.buffer[this.index(E,C)].charCodeAt(0),v+=x,(w-=1)==0&&(x%=m,v%=m,w=T);x%=m,v%=m,a(this.buffer,this.idat_offs+this.idat_size-8,_(v<<16|x));function A(N,k,L){for(var M=-1,H=4;H<L-4;H+=1)M=r[(M^N[k+H].charCodeAt(0))&255]^M>>8&16777215;a(N,k+L-4,_(M^-1))}return A(this.buffer,this.ihdr_offs,this.ihdr_size),A(this.buffer,this.plte_offs,this.plte_size),A(this.buffer,this.trns_offs,this.trns_size),A(this.buffer,this.idat_offs,this.idat_size),A(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}}},function(n,s){function d(p,a,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?p+(a-p)*6*b:b<1/2?a:b<2/3?p+(a-p)*(2/3-b)*6:p}function h(p,a,b){let _,y,r;if(a==0)_=y=r=b;else{const l=b<.5?b*(1+a):b+a-b*a,f=2*b-l;_=d(f,l,p+1/3),y=d(f,l,p),r=d(f,l,p-1/3)}return[Math.round(_*255),Math.round(y*255),Math.round(r*255),255]}n.exports=h}])})})(dn)),dn.exports}var o0=i0();const $r=ys(o0);function u0({phrases:e}){const[t,n]=Y.useState(0),[s,d]=Y.useState(""),[h,p]=Y.useState(!1),a=Math.max(...e.map(b=>b.length));return Y.useEffect(()=>{const b=e[t],_=setTimeout(()=>{h?s.length>0?d(s.slice(0,-1)):(p(!1),n(y=>(y+1)%e.length)):s.length<b.length?d(b.slice(0,s.length+1)):setTimeout(()=>p(!0),2e3)},h?50:100);return()=>clearTimeout(_)},[s,h,t,e]),I.jsxs("span",{className:"inline-block text-center",style:{width:`${a+1}ch`},children:[I.jsx("span",{className:"text-white",children:s}),I.jsx("span",{className:"animate-pulse text-accent-cyan",children:"|"})]})}function qr({value:e,suffix:t=""}){const[n,s]=Y.useState(0);return Y.useEffect(()=>{if(e==null)return;const d=1500,h=30,p=e/h;let a=0,b=0;const _=setInterval(()=>{b++,a=Math.min(Math.round(p*b),e),s(a),b>=h&&clearInterval(_)},d/h);return()=>clearInterval(_)},[e]),I.jsxs("span",{children:[n.toLocaleString(),t]})}function c0({events:e}){const[t,n]=Y.useState(0);if(Y.useEffect(()=>{if(!e||e.length===0)return;const p=setInterval(()=>{n(a=>(a+1)%e.length)},3e3);return()=>clearInterval(p)},[e]),!e||e.length===0)return null;const s=e[t],d=p=>{switch(p.type){case"mint":return`New ${p.contentType} minted`;case"purchase":return`Sold for ${p.price} ETH`;case"list":return`Listed for ${p.price} ETH`;default:return"New activity"}},h=p=>{switch(p.type){case"mint":return"";case"purchase":return"";case"list":return"";default:return""}};return I.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-ink-400",children:[I.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),I.jsxs(Ct,{to:`/nft?id=${s.id}`,className:"transition-opacity duration-300 hover:text-ink-200",children:[h(s)," ",I.jsxs("span",{className:"text-ink-500",children:["#",s.id]})," ",I.jsx("span",{className:"text-ink-200 font-medium",children:s.title})," "," ",d(s)]})]})}function l0(){const e=Es(),[t,n]=Y.useState(null),[s,d]=Y.useState([]),[h,p]=Y.useState({}),[,a]=ht(Vr),[b,_]=Y.useState([]),[y,r]=Y.useState(null),[l,f]=Y.useState(null),[u,o]=r0(),[g,c]=Y.useState([]),[m,T]=Y.useState([]),x=Se.contractAddresses.v1.zang;Y.useEffect(()=>{(async()=>{try{const E=await fetch("/api/home");if(!E.ok)throw new Error("Failed to fetch home data");const A=await E.json();if(n(A.lastNftId),A.stats&&(f(A.stats.uniqueArtists),r(A.stats.totalVolumeEth)),c(A.topArtists||[]),T(A.topCollectors||[]),A._meta&&o(A._meta),A.nfts&&A.nfts.length>0){const N=A.nfts.map(L=>parseInt(L.id,10));d(N);const k={};for(const L of A.nfts)k[L.id]={token_id:L.id,name:L.name,description:L.description,author:L.author,content_type:L.contentType,content:L.content,_stats:{totalSupply:L.totalSupply,floorPrice:L.floorPrice,listedCount:L.listedCount,totalVolume:L.totalVolume}};p(k)}if(A.recentEvents&&A.recentEvents.length>0){const N=A.recentEvents.filter(k=>k.type!=="TransferSingle"||k.type==="TransferSingle").map(k=>{let L="transfer";return k.type==="TransferSingle"?L="mint":k.type==="TokenPurchased"?L="purchase":k.type==="TokenListed"&&(L="list"),{type:L,id:k.tokenId.toString(),title:k.title||`#${k.tokenId}`,blockNumber:k.blockNumber,price:k.price}}).filter(k=>k.type!=="transfer").slice(0,10);_(N)}}catch(E){console.error("Error fetching home data:",E);try{const A=await Ze.readContract({address:x,abi:ct.zang,functionName:"lastTokenId"});n(Number(A))}catch(A){a(Wr(A))}}})()},[a,x,o]),Zh();const v=Y.useCallback(async C=>{const E=C.filter(L=>L.type==="TransferSingle"||L.type==="TokenListed"||L.type==="TokenPurchased");if(E.length===0)return;const A=[...new Set(E.map(L=>L.tokenId.toString()))],N={};try{const L=await fetch("/api/nfts/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:A})});if(L.ok){const{nfts:M}=await L.json();for(const H of M)if(H.data){let $="text";H.data.content_type==="text/html"?$="HTML":H.data.content_type==="text/markdown"&&($="Markdown"),N[H.id]={title:H.data.name||`#${H.id}`,contentType:$}}}}catch{}const k=E.map(L=>{var H,$;let M="transfer";return L.type==="TransferSingle"?M="mint":L.type==="TokenPurchased"?M="purchase":L.type==="TokenListed"&&(M="list"),{type:M,id:L.tokenId.toString(),blockNumber:L.blockNumber,title:((H=N[L.tokenId])==null?void 0:H.title)||`#${L.tokenId}`,contentType:(($=N[L.tokenId])==null?void 0:$.contentType)||"text"}}).filter(L=>L.type!=="transfer");if(_(L=>[...k,...L].slice(0,15)),E.some(L=>L.type==="TransferSingle"))try{const L=await Ze.readContract({address:x,abi:ct.zang,functionName:"lastTokenId"});n(Number(L))}catch{}},[x]);Jh(v);const w=Y.useCallback(C=>{o({lastSyncBlock:C.lastSyncBlock,lastSyncTime:C.lastSyncTime,isSyncing:C.isSyncing,syncProgress:C.syncProgress,blocksRemaining:C.blocksRemaining,isCatchingUp:C.isCatchingUp})},[o]);return e0(w),I.jsxs("div",{className:"min-h-screen bg-ink-950",children:[I.jsx(Xo,{}),I.jsx(eh,{}),I.jsxs("section",{className:"relative overflow-hidden",children:[I.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:I.jsxs("div",{className:"text-center space-y-8",children:[I.jsx("p",{className:"text-ink-500 font-mono text-xs sm:text-sm tracking-widest uppercase",children:"A canvas for writers & creators"}),I.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-mono leading-tight",children:[I.jsx("span",{className:"text-ink-400 hidden sm:inline",children:">"})," ",I.jsx(u0,{phrases:["Write beautifully.","Words, forever.","Code is poetry.","Text is art.","Create freely."]})]}),I.jsxs("p",{className:"text-ink-400 text-lg sm:text-xl max-w-2xl mx-auto leading-relaxed",children:["Mint your"," ",I.jsx("span",{className:"text-ink-200",children:"poetry"}),","," ",I.jsx("span",{className:"text-ink-200",children:"stories"}),","," ",I.jsx("span",{className:"text-ink-200",children:"code"}),", and"," ",I.jsx("span",{className:"text-ink-200",children:"HTML art"})," as NFTs. No images required. Pure text, onchain forever."]}),I.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[I.jsx("button",{onClick:()=>e("/mint"),className:"group relative px-8 py-4 bg-white text-ink-950 font-medium rounded-lg hover:bg-ink-100 transition-all duration-200 text-lg",children:I.jsxs("span",{className:"flex items-center justify-center gap-3",children:[I.jsx("span",{className:"font-mono text-ink-500",children:"$"}),"Start Writing"]})}),I.jsx("button",{onClick:()=>{document.getElementById("gallery").scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 border border-ink-700 text-ink-300 font-medium rounded-lg hover:border-ink-500 hover:text-white transition-all duration-200 text-lg",children:"Browse Gallery"})]}),I.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 pt-6",children:[t&&I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"text-3xl font-mono text-white",children:I.jsx(qr,{value:t})}),I.jsx("div",{className:"text-ink-500 text-sm",children:"texts minted"})]}),l&&l>0&&I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"text-3xl font-mono text-white",children:I.jsx(qr,{value:l})}),I.jsx("div",{className:"text-ink-500 text-sm",children:"artists"})]}),y!==null&&y>0&&I.jsxs("div",{className:"text-center",children:[I.jsxs("div",{className:"text-3xl font-mono text-white",children:[y.toFixed(4)," ",I.jsx("span",{className:"text-ink-400",children:""})]}),I.jsx("div",{className:"text-ink-500 text-sm",children:"total volume"})]})]}),I.jsx("div",{className:"pt-8",children:I.jsx(c0,{events:b})})]})}),I.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ink-800 to-transparent"})]}),I.jsxs("section",{id:"gallery",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[I.jsxs("div",{className:"flex items-center justify-between mb-10",children:[I.jsxs("div",{className:"space-y-1",children:[I.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Latest Works"}),I.jsx("p",{className:"text-ink-500 text-sm",children:"Fresh from the creative minds"})]}),u&&I.jsx("div",{className:"hidden sm:block",children:I.jsx(s0,{meta:u,compact:!0})})]}),t===null?I.jsx("div",{className:"flex justify-center py-8",children:I.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[I.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I.jsx("span",{children:"Loading..."})]})}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.slice(0,12).map(C=>I.jsx(Zf,{id:C,prefetchedData:h[C]},C))}),t>12&&I.jsx("div",{className:"text-center mt-10",children:I.jsxs(Ct,{to:"/activity",className:"inline-flex items-center gap-2 px-6 py-3 bg-ink-800 text-ink-200 font-medium rounded-lg hover:bg-ink-700 hover:text-white transition-colors",children:["See All Works",I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]}),g.length>0&&I.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[I.jsxs("div",{className:"space-y-1 mb-10",children:[I.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Artists"}),I.jsx("p",{className:"text-ink-500 text-sm",children:"By sales volume"})]}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.slice(0,6).map((C,E)=>I.jsxs(Ct,{to:`/profile?address=${C.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[I.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:E+1}),I.jsx("img",{src:$r(C.address),alt:"",className:"w-12 h-12 rounded-lg"}),I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("div",{className:"text-ink-200 font-mono text-sm",children:I.jsx(es,{address:C.address,shorten:!0,nChar:6,disableLink:!0})}),I.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[C.totalCreated," works  ",C.volumeEth.toFixed(4)," ETH"]})]})]},C.address))})]}),m.length>0&&I.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[I.jsxs("div",{className:"space-y-1 mb-10",children:[I.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Collectors"}),I.jsx("p",{className:"text-ink-500 text-sm",children:"By purchase volume"})]}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.slice(0,6).map((C,E)=>I.jsxs(Ct,{to:`/profile?address=${C.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[I.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:E+1}),I.jsx("img",{src:$r(C.address),alt:"",className:"w-12 h-12 rounded-lg"}),I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("div",{className:"text-ink-200 font-mono text-sm",children:I.jsx(es,{address:C.address,shorten:!0,nChar:6,disableLink:!0})}),I.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[C.totalCollected," collected  ",C.volumeEth.toFixed(4)," ETH"]})]})]},C.address))})]})]})}function d0(){const{pathname:e}=Li();return Y.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function f0(){return I.jsx("div",{className:"min-h-screen bg-ink-950 flex items-center justify-center",children:I.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[I.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I.jsx("span",{children:"Loading..."})]})})}const h0=Y.lazy(()=>Ce(()=>import("./nft-DIQy8rNt.js"),__vite__mapDeps([11,4,1,12,3,5,13,14,15,16]))),m0=Y.lazy(()=>Ce(()=>import("./mint-CxgQcKfb.js"),__vite__mapDeps([17,4,1,13,12,3,5,14,18]))),p0=Y.lazy(()=>Ce(()=>import("./collection-DhKJSSrR.js"),__vite__mapDeps([19,4,1,12,3,5,14]))),g0=Y.lazy(()=>Ce(()=>import("./activity-4hoipqQI.js"),__vite__mapDeps([20,4,1,12,3,5,15,14]))),b0=Y.lazy(()=>Ce(()=>import("./profile-DxhPvneR.js"),__vite__mapDeps([21,4,1,12,3,5,14]))),y0=Y.lazy(()=>Ce(()=>import("./bridge-Bloyc4X1.js"),__vite__mapDeps([22,4,1,12,3,5,14]))),E0=Y.lazy(()=>Ce(()=>import("./404-DvhIJyWI.js"),__vite__mapDeps([23,4,1,12,3,5,14]))),_0=new Ci;function T0(){return I.jsx(Si,{config:no,children:I.jsx(Ii,{client:_0,children:I.jsx(Bi,{theme:Ui({accentColor:"#22d3ee",accentColorForeground:"#0a0a0a",borderRadius:"medium"}),children:I.jsxs(Di,{children:[I.jsx(d0,{}),I.jsx(Fo,{children:I.jsx(Y.Suspense,{fallback:I.jsx(f0,{}),children:I.jsxs(ki,{children:[I.jsx(ze,{path:"/",element:I.jsx(l0,{})}),I.jsx(ze,{path:"/nft",element:I.jsx(h0,{})}),I.jsx(ze,{path:"/mint",element:I.jsx(m0,{})}),I.jsx(ze,{path:"/collection",element:I.jsx(p0,{})}),I.jsx(ze,{path:"/activity",element:I.jsx(g0,{})}),I.jsx(ze,{path:"/profile",element:I.jsx(b0,{})}),I.jsx(ze,{path:"/bridge",element:I.jsx(y0,{})}),I.jsx(ze,{path:"*",element:I.jsx(E0,{})})]})})})]})})})})}Zi.createRoot(document.getElementById("root")).render(I.jsx(j.StrictMode,{children:I.jsx(Oi,{children:I.jsx(T0,{})})}));const L0=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"}));export{es as A,Xo as H,Zf as N,Vn as R,eh as S,Mo as V,R0 as a,oa as b,Se as c,mt as d,w0 as e,Wr as f,I0 as g,r0 as h,e0 as i,k0 as j,Ps as k,ln as l,$r as m,s0 as n,so as o,Ze as p,L0 as q,sa as r,Vr as s,Go as u,ct as v};
