import{j as e}from"./web3-core-DUkMGIH9.js";import{u as F,a}from"./react-vendor-z79Uuty_.js";import{u as B,m as H,H as T,c as A,N as M}from"./index-D1S1TGIa.js";import{S as n}from"./ui-vendor-51-FR4Jz.js";import"./md-editor-ChPQj20R.js";import"./rainbowkit-D_dEjGNW.js";function G(){var f,v,b,N,w,C;const y=F(),r=(f=new URLSearchParams(y.search).get("address"))==null?void 0:f.toLowerCase(),{lookupEns:x}=B(),[s,L]=a.useState(null),[l,i]=a.useState(!0),[m,c]=a.useState(null),[d,g]=a.useState("created"),[_,u]=a.useState(!1),p=r?H(r):null;a.useEffect(()=>{if(!r){c("No address provided"),i(!1);return}if(!/^0x[a-fA-F0-9]{40}$/.test(r)){c("Invalid address format"),i(!1);return}(async()=>{i(!0),c(null);try{const o=await fetch(`/api/author/${r}`);if(!o.ok)throw new Error("Failed to fetch profile");const $=await o.json();L($)}catch(o){c(o.message)}finally{i(!1)}})()},[r]),a.useEffect(()=>{const o=x(r)||h(r);document.title=o?`${o} - zang`:"Profile - zang"},[r,x]);const h=t=>t?`${t.slice(0,6)}...${t.slice(-4)}`:"",P=()=>{navigator.clipboard.writeText(r),u(!0),setTimeout(()=>u(!1),2e3)},k=r?x(r):null,E=k||h(r),j=d==="created"?(s==null?void 0:s.created)||[]:(s==null?void 0:s.collected)||[],S=t=>({token_id:t.token_id,name:t.name,description:t.description,author:t.author,content_type:t.content_type,content:t.content,_stats:{totalSupply:t.total_supply?parseInt(t.total_supply,10):null,floorPrice:t.floor_price,listedCount:t.listed_count||0,totalVolume:t.total_volume||"0"}});return e.jsxs("div",{className:"min-h-screen bg-ink-950",children:[e.jsx(T,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:m?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"inline-block p-8 rounded-2xl bg-ink-900/50 border border-ink-800",children:[e.jsx("p",{className:"text-red-400 text-lg mb-4",children:m}),e.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-accent-cyan text-ink-950 font-medium rounded-lg hover:bg-accent-cyan/90 transition-colors",children:"Back to Home"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-ink-900/50 rounded-2xl border border-ink-800 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[p?e.jsx("img",{src:p,alt:"Avatar",className:"w-20 h-20 rounded-xl"}):e.jsx(n,{width:80,height:80,className:"rounded-xl",baseColor:"#27272a",highlightColor:"#3f3f46"}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2 font-mono",children:E||e.jsx(n,{width:200,baseColor:"#27272a",highlightColor:"#3f3f46"})}),k&&e.jsx("p",{className:"text-ink-400 font-mono text-sm mb-2",children:h(r)}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3",children:[e.jsx("button",{onClick:P,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-ink-800 text-ink-300 hover:text-white hover:bg-ink-700 transition-colors text-sm",children:_?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})}),e.jsxs("a",{href:`${A.blockExplorer.url}/address/${r}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-ink-800 text-ink-300 hover:text-white hover:bg-ink-700 transition-colors text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Basescan"]})]})]}),e.jsxs("div",{className:"flex gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:l?e.jsx(n,{width:40,baseColor:"#27272a",highlightColor:"#3f3f46"}):((v=s==null?void 0:s.stats)==null?void 0:v.totalCreated)||0}),e.jsx("div",{className:"text-xs text-ink-400 uppercase tracking-wide",children:"Created"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:l?e.jsx(n,{width:40,baseColor:"#27272a",highlightColor:"#3f3f46"}):((b=s==null?void 0:s.stats)==null?void 0:b.totalCollected)||0}),e.jsx("div",{className:"text-xs text-ink-400 uppercase tracking-wide",children:"Collected"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:l?e.jsx(n,{width:60,baseColor:"#27272a",highlightColor:"#3f3f46"}):e.jsxs(e.Fragment,{children:[((N=s==null?void 0:s.stats)==null?void 0:N.totalVolume)||"0"," ",e.jsx("span",{className:"text-ink-400 text-base",children:"ETH"})]})}),e.jsx("div",{className:"text-xs text-ink-400 uppercase tracking-wide",children:"Volume"})]})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>g("created"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="created"?"bg-accent-cyan text-ink-950":"bg-ink-800 text-ink-300 hover:text-white hover:bg-ink-700"}`,children:["Created (",((w=s==null?void 0:s.stats)==null?void 0:w.totalCreated)||0,")"]}),e.jsxs("button",{onClick:()=>g("collected"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="collected"?"bg-accent-cyan text-ink-950":"bg-ink-800 text-ink-300 hover:text-white hover:bg-ink-700"}`,children:["Collected (",((C=s==null?void 0:s.stats)==null?void 0:C.totalCollected)||0,")"]})]}),l?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"bg-ink-900/50 rounded-2xl border border-ink-800 overflow-hidden",children:[e.jsx(n,{height:208,baseColor:"#27272a",highlightColor:"#3f3f46"}),e.jsx("div",{className:"p-4",children:e.jsx(n,{count:2,baseColor:"#27272a",highlightColor:"#3f3f46"})})]},t))}):j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(t=>e.jsx(M,{id:t.token_id,prefetchedData:S(t)},t.token_id))}):e.jsx("div",{className:"text-center py-16",children:e.jsx("div",{className:"inline-block p-8 rounded-2xl bg-ink-900/50 border border-ink-800",children:e.jsx("p",{className:"text-ink-400 text-lg",children:d==="created"?"No artworks created yet":"No artworks collected yet"})})})]})})]})}export{G as default};
