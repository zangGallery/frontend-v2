import{v as C,j as e}from"./web3-core-DUkMGIH9.js";import{a as r}from"./react-vendor-z79Uuty_.js";import{s as I,H as L,S,N as F,p as N,v as j,c as z,f as y}from"./index-C6BJuccv.js";import{R as B}from"./ui-vendor-51-FR4Jz.js";import"./md-editor-C0JwPbmY.js";import{I as A}from"./index.es-A6KY3FT1.js";import"./rainbowkit-M05sXE1j.js";function V(){const{address:n,isConnected:f}=C(),[c,b]=r.useState(null),[s,g]=r.useState([]),[d,p]=r.useState({}),[,x]=B(I),u=z.contractAddresses.v1.zang,v=5;r.useEffect(()=>{!f||!n||(g([]),p({}))},[n,f]),r.useEffect(()=>{(async()=>{try{const a=await N.readContract({address:u,abi:j.zang,functionName:"lastTokenId"});b(Number(a))}catch(a){x(y(a))}})()},[x]);const k=async(t,a)=>{try{const l=await N.readContract({address:u,abi:j.zang,functionName:"balanceOf",args:[a,BigInt(t)]});p(o=>({...o,[t]:Number(l)}))}catch(l){x(y(l))}},m=async(t,a)=>{if(!a)return;const l=[...s];for(let o=0;o<t;o++){const h=c-l.length;h>=1&&(l.push(h),k(h,a))}g(l)};r.useEffect(()=>{m(20,n)},[c,n]);const i=s.filter(t=>d[t]!==void 0&&d[t]!==0),T=s.length>0&&Object.keys(d).length<s.length,w=c!==null&&(s.length===0||i.length===0&&s.length<c),E=c===null||T||w;return r.useEffect(()=>{i.length<20&&s.length<c&&m(20,n)},[s,n]),e.jsxs("div",{className:"min-h-screen bg-ink-950",children:[e.jsx(L,{}),e.jsx(S,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-center text-white mb-8",children:"Your Collection"}),n?E?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-accent-cyan",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-ink-400",children:"Loading your collection..."})]}):i.length>0?e.jsx(A,{dataLength:s.length,next:()=>m(v,n),hasMore:s.length<c,loader:e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-pulse text-ink-400",children:"Loading more..."})}),endMessage:e.jsx("div",{className:"text-center py-8 text-ink-400",children:"You've seen all your NFTs"}),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-2",children:i.map(t=>e.jsx(F,{id:t},t))})}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"inline-block p-8 rounded-2xl bg-ink-900/50 border border-ink-800",children:[e.jsx("p",{className:"text-ink-400 text-lg mb-4",children:"Your collection is empty"}),e.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-accent-cyan text-ink-950 font-medium rounded-lg hover:bg-accent-cyan/90 transition-colors",children:"Explore NFTs"})]})}):e.jsx("div",{className:"text-center py-16",children:e.jsx("div",{className:"inline-block p-8 rounded-2xl bg-ink-900/50 border border-ink-800",children:e.jsx("p",{className:"text-ink-400 text-lg",children:"Connect a wallet to view your collection"})})})]})]})}export{V as default};
