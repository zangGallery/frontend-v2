const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DFc3JcDT.js","assets/react-vendor-z79Uuty_.js","assets/ace-Crcp_Mm0.js","assets/md-editor-C0JwPbmY.js","assets/web3-core-DUkMGIH9.js","assets/md-editor-Bsl8KSMX.css","assets/mode-html-dl0JeqJC.js","assets/theme-monokai-Cz4eVLlC.js","assets/ext-language_tools-C41EfQXa.js","assets/ace-RY8oei4F.js","assets/index-BYbqrZW7.js","assets/nft-DnDOoivp.js","assets/ui-vendor-51-FR4Jz.js","assets/decimal-BESsWTTS.js","assets/rainbowkit-M05sXE1j.js","assets/NFTHistory-t35_Duvs.js","assets/nft-BEHUn5zE.css","assets/mint-rlXUdo2M.js","assets/mint-YFOrqmb2.css","assets/gallery-D1K8z08t.js","assets/index.es-A6KY3FT1.js","assets/collection-DL0YtRao.js","assets/activity-B0i_vLNZ.js","assets/profile-dbM165ba.js","assets/bridge-Co0xAqaZ.js","assets/404-DeB9ysh7.js"])))=>i.map(i=>d[i]);
import{r as rn,ar as Ls,j as S,v as qn,aG as Ps,H as br,a1 as us,aC as ds,aH as vr,_ as xe,T as _r,V as jn,z as xr,aI as wr,aJ as kr,aK as Tr}from"./web3-core-DUkMGIH9.js";import{i as Er,g as Hn,R as I,c as Sr,a as B,L as It,f as ln,B as Ar,j as Rr,k as Ge,u as Nr}from"./react-vendor-z79Uuty_.js";import{a as Pt,R as _t,S as gn,b as jr}from"./ui-vendor-51-FR4Jz.js";import{u as Cr,m as Cn,f as Lt,C as Or,R as $r,v as Ir,w as Mr}from"./rainbowkit-M05sXE1j.js";import{b as Dr,i as Lr,s as Pr,g as Br,a as Fr,E as zr}from"./md-editor-C0JwPbmY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))d(_);new MutationObserver(_=>{for(const v of _)if(v.type==="childList")for(const g of v.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&d(g)}).observe(document,{childList:!0,subtree:!0});function n(_){const v={};return _.integrity&&(v.integrity=_.integrity),_.referrerPolicy&&(v.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?v.credentials="include":_.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function d(_){if(_.ep)return;_.ep=!0;const v=n(_);fetch(_.href,v)}})();var Ut={},fs;function Ur(){if(fs)return Ut;fs=1;var c=Er();return Ut.createRoot=c.createRoot,Ut.hydrateRoot=c.hydrateRoot,Ut}var qr=Ur();const Hr=Hn(qr),Vr="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",Wr="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",Gr=Cr({appName:"zang.gallery",projectId:"3a8170812b534d0ff9d794f19a901d64",chains:[Lt,Cn],transports:{[Lt.id]:rn(`https://base-mainnet.g.alchemy.com/v2/${Vr}`),[Cn.id]:rn(`https://eth-mainnet.g.alchemy.com/v2/${Wr}`)},ssr:!1}),Bs=Pt({key:"standardError",default:null}),Yr=c=>{const t=JSON.stringify(c);return t.includes("ZangNFT")&&t.includes("query for nonexistent token")},Fs=c=>{var t;return c.message?c.message==="Internal JSON-RPC error."&&((t=c.data)!=null&&t.message)?"Internal JSON-RPC error: "+c.data.message+".":c.message:"Unknown error."},Te={contractAddresses:{v1:{zang:"0x5541ff300e9b01176b953EA3153006e36D4BA273",marketplace:"0xbD5C4612084eA90847DeB475529aC74B3521498d"}},firstBlocks:{v1:{base:{zang:5300011,marketplace:5300368}}},networks:{main:{name:"Base",chainId:8453,rpcUrl:"https://base-mainnet.g.alchemy.com/v2/3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{name:"ENS",chainId:1}},api_keys:{alchemy_base:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",alchemy_mainnet:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{cacheExpiration:1e3*60*2},blockExplorer:{name:"BaseScan",url:"https://basescan.org"}},Zt={calls:[],enabled:typeof window<"u"&&window.__RPC_TRACKING_ENABLED__===!0,enable(){this.enabled=!0,this.calls=[],console.log("[RPC] Tracking enabled. Refresh page to capture all calls.")},disable(){this.enabled=!1,console.log("[RPC] Tracking disabled")},reset(){this.calls=[],console.log("[RPC] Counter reset")},log(c,t){if(!this.enabled)return;const n=JSON.stringify(t,(_,v)=>typeof v=="bigint"?v.toString():v),d={id:this.calls.length+1,method:c,args:n,time:new Date().toISOString()};this.calls.push(d),console.log(`[RPC #${d.id}] ${c}`,t)},summary(){const c={};for(const t of this.calls){const n=`${t.method}(${t.args})`;c[n]=(c[n]||0)+1}return console.log("[RPC Summary] Total calls:",this.calls.length),console.table(c),{total:this.calls.length,byMethod:c}}};typeof window<"u"&&(window.rpcTracker=Zt);const zs=Ls({chain:Lt,transport:rn(`https://base-mainnet.g.alchemy.com/v2/${Te.api_keys.alchemy_base}`)}),at=new Proxy(zs,{get(c,t){const n=c[t];return typeof n=="function"?async(...d)=>{var _,v;return t==="readContract"?Zt.log(d[0].functionName,{address:(_=d[0].address)==null?void 0:_.slice(0,10),args:d[0].args}):t==="getContractEvents"?Zt.log("getContractEvents",{address:(v=d[0].address)==null?void 0:v.slice(0,10),eventName:d[0].eventName}):t==="getBlockNumber"&&Zt.log("getBlockNumber",{}),n.apply(c,d)}:n}}),Al=Ls({chain:Cn,transport:rn(`https://eth-mainnet.g.alchemy.com/v2/${Te.api_keys.alchemy_mainnet}`)}),Kr=zs,Xr=Pt({key:"transactionCount",default:0}),Zr=Pt({key:"transactionStatus",default:{}}),Jr=Pt({key:"transactionListeners",default:[]}),Us=()=>{const[c,t]=_t(Zr),[n,d]=_t(Jr);return{getTransactionStatus:r=>c[r],transactions:c,updateTransactionStatus:async(r,b)=>{t(y=>({...y,[r]:b}));for(const y of n)y(r,b)},register:r=>{d(b=>b.includes(r)?b:[...b,r])}}},Rl=()=>{const{updateTransactionStatus:c}=Us(),[t,n]=_t(Xr),d=()=>(n(v=>v+1),t);return async(v,g,r,b)=>{const y=d();let m;try{c(y,{status:"pending",name:g,content:r?await r("pending"):null}),m=await v(),c(y,{status:"approved",name:g,hash:m,content:r?await r("approved",{hash:m}):null});const e=await at.waitForTransactionReceipt({hash:m,confirmations:1});return c(y,{status:"success",name:g,hash:m,content:r?await r("success",{hash:m},!0,e):null}),{hash:m,receipt:e,success:!0}}catch(e){if(c(y,{status:"error",name:g,hash:m,errorMessage:Fs(e),content:r?await r("success",{hash:m},!1):null}),b)throw e;return{error:e,success:!1}}}};function Qr(c){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=c:n.appendChild(document.createTextNode(c))}const ei=c=>{switch(c){case"success":return si;case"info":return ii;case"warning":return ri;case"error":return ai;default:return null}},ti=Array(12).fill(0),ni=({visible:c,className:t})=>I.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":c},I.createElement("div",{className:"sonner-spinner"},ti.map((n,d)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${d}`})))),si=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ri=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ii=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ai=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oi=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),li=()=>{const[c,t]=I.useState(document.hidden);return I.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),c};let On=1;class ci{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:d,..._}=t,v=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:On++,g=this.toasts.find(b=>b.id===v),r=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(v)&&this.dismissedToasts.delete(v),g?this.toasts=this.toasts.map(b=>b.id===v?(this.publish({...b,...t,id:v,title:d}),{...b,...t,id:v,dismissible:r,title:d}):b):this.addToast({title:d,..._,dismissible:r,id:v}),v},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(d=>d({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let d;n.loading!==void 0&&(d=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const _=Promise.resolve(t instanceof Function?t():t);let v=d!==void 0,g;const r=_.then(async y=>{if(g=["resolve",y],I.isValidElement(y))v=!1,this.create({id:d,type:"default",message:y});else if(di(y)&&!y.ok){v=!1;const e=typeof n.error=="function"?await n.error(`HTTP error! status: ${y.status}`):n.error,o=typeof n.description=="function"?await n.description(`HTTP error! status: ${y.status}`):n.description,i=typeof e=="object"&&!I.isValidElement(e)?e:{message:e};this.create({id:d,type:"error",description:o,...i})}else if(y instanceof Error){v=!1;const e=typeof n.error=="function"?await n.error(y):n.error,o=typeof n.description=="function"?await n.description(y):n.description,i=typeof e=="object"&&!I.isValidElement(e)?e:{message:e};this.create({id:d,type:"error",description:o,...i})}else if(n.success!==void 0){v=!1;const e=typeof n.success=="function"?await n.success(y):n.success,o=typeof n.description=="function"?await n.description(y):n.description,i=typeof e=="object"&&!I.isValidElement(e)?e:{message:e};this.create({id:d,type:"success",description:o,...i})}}).catch(async y=>{if(g=["reject",y],n.error!==void 0){v=!1;const m=typeof n.error=="function"?await n.error(y):n.error,e=typeof n.description=="function"?await n.description(y):n.description,l=typeof m=="object"&&!I.isValidElement(m)?m:{message:m};this.create({id:d,type:"error",description:e,...l})}}).finally(()=>{v&&(this.dismiss(d),d=void 0),n.finally==null||n.finally.call(n)}),b=()=>new Promise((y,m)=>r.then(()=>g[0]==="reject"?m(g[1]):y(g[1])).catch(m));return typeof d!="string"&&typeof d!="number"?{unwrap:b}:Object.assign(d,{unwrap:b})},this.custom=(t,n)=>{const d=(n==null?void 0:n.id)||On++;return this.create({jsx:t(d),id:d,...n}),d},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _e=new ci,ui=(c,t)=>{const n=(t==null?void 0:t.id)||On++;return _e.addToast({title:c,...t,id:n}),n},di=c=>c&&typeof c=="object"&&"ok"in c&&typeof c.ok=="boolean"&&"status"in c&&typeof c.status=="number",fi=ui,hi=()=>_e.toasts,pi=()=>_e.getActiveToasts(),qt=Object.assign(fi,{success:_e.success,info:_e.info,warning:_e.warning,error:_e.error,custom:_e.custom,message:_e.message,promise:_e.promise,dismiss:_e.dismiss,loading:_e.loading},{getHistory:hi,getToasts:pi});Qr("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ht(c){return c.label!==void 0}const mi=3,gi="24px",yi="16px",hs=4e3,bi=356,vi=14,_i=45,xi=200;function $e(...c){return c.filter(Boolean).join(" ")}function wi(c){const[t,n]=c.split("-"),d=[];return t&&d.push(t),n&&d.push(n),d}const ki=c=>{var t,n,d,_,v,g,r,b,y;const{invert:m,toast:e,unstyled:o,interacting:l,setHeights:i,visibleToasts:s,heights:f,index:a,toasts:u,expanded:p,removeToast:x,defaultRichColors:k,closeButton:A,style:E,cancelButtonStyle:h,actionButtonStyle:w,className:T="",descriptionClassName:R="",duration:j,position:C,gap:$,expandByDefault:M,classNames:L,icons:z,closeButtonAriaLabel:K="Close toast"}=c,[ee,H]=I.useState(null),[D,J]=I.useState(null),[P,X]=I.useState(!1),[q,ne]=I.useState(!1),[ce,Z]=I.useState(!1),[Le,Ye]=I.useState(!1),[tt,Pe]=I.useState(!1),[Ke,Xe]=I.useState(0),[Be,ot]=I.useState(0),Fe=I.useRef(e.duration||j||hs),ze=I.useRef(null),ye=I.useRef(null),lt=a===0,Ft=a+1<=s,ue=e.type,Ze=e.dismissible!==!1,kt=e.className||"",nt=e.descriptionClassName||"",Ne=I.useMemo(()=>f.findIndex(V=>V.toastId===e.id)||0,[f,e.id]),Ee=I.useMemo(()=>{var V;return(V=e.closeButton)!=null?V:A},[e.closeButton,A]),ct=I.useMemo(()=>e.duration||j||hs,[e.duration,j]),ut=I.useRef(0),Ue=I.useRef(0),dt=I.useRef(0),qe=I.useRef(null),[ft,ht]=C.split("-"),Se=I.useMemo(()=>f.reduce((V,se,Y)=>Y>=Ne?V:V+se.height,0),[f,Ne]),He=li(),Tt=e.invert||m,st=ue==="loading";Ue.current=I.useMemo(()=>Ne*$+Se,[Ne,Se]),I.useEffect(()=>{Fe.current=ct},[ct]),I.useEffect(()=>{X(!0)},[]),I.useEffect(()=>{const V=ye.current;if(V){const se=V.getBoundingClientRect().height;return ot(se),i(Y=>[{toastId:e.id,height:se,position:e.position},...Y]),()=>i(Y=>Y.filter(re=>re.toastId!==e.id))}},[i,e.id]),I.useLayoutEffect(()=>{if(!P)return;const V=ye.current,se=V.style.height;V.style.height="auto";const Y=V.getBoundingClientRect().height;V.style.height=se,ot(Y),i(re=>re.find(ie=>ie.toastId===e.id)?re.map(ie=>ie.toastId===e.id?{...ie,height:Y}:ie):[{toastId:e.id,height:Y,position:e.position},...re])},[P,e.title,e.description,i,e.id,e.jsx,e.action,e.cancel]);const Oe=I.useCallback(()=>{ne(!0),Xe(Ue.current),i(V=>V.filter(se=>se.toastId!==e.id)),setTimeout(()=>{x(e)},xi)},[e,x,i,Ue]);I.useEffect(()=>{if(e.promise&&ue==="loading"||e.duration===1/0||e.type==="loading")return;let V;return p||l||He?(()=>{if(dt.current<ut.current){const re=new Date().getTime()-ut.current;Fe.current=Fe.current-re}dt.current=new Date().getTime()})():(()=>{Fe.current!==1/0&&(ut.current=new Date().getTime(),V=setTimeout(()=>{e.onAutoClose==null||e.onAutoClose.call(e,e),Oe()},Fe.current))})(),()=>clearTimeout(V)},[p,l,e,ue,He,Oe]),I.useEffect(()=>{e.delete&&(Oe(),e.onDismiss==null||e.onDismiss.call(e,e))},[Oe,e.delete]);function pt(){var V;if(z!=null&&z.loading){var se;return I.createElement("div",{className:$e(L==null?void 0:L.loader,e==null||(se=e.classNames)==null?void 0:se.loader,"sonner-loader"),"data-visible":ue==="loading"},z.loading)}return I.createElement(ni,{className:$e(L==null?void 0:L.loader,e==null||(V=e.classNames)==null?void 0:V.loader),visible:ue==="loading"})}const mt=e.icon||(z==null?void 0:z[ue])||ei(ue);var zt,Je;return I.createElement("li",{tabIndex:0,ref:ye,className:$e(T,kt,L==null?void 0:L.toast,e==null||(t=e.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[ue],e==null||(n=e.classNames)==null?void 0:n[ue]),"data-sonner-toast":"","data-rich-colors":(zt=e.richColors)!=null?zt:k,"data-styled":!(e.jsx||e.unstyled||o),"data-mounted":P,"data-promise":!!e.promise,"data-swiped":tt,"data-removed":q,"data-visible":Ft,"data-y-position":ft,"data-x-position":ht,"data-index":a,"data-front":lt,"data-swiping":ce,"data-dismissible":Ze,"data-type":ue,"data-invert":Tt,"data-swipe-out":Le,"data-swipe-direction":D,"data-expanded":!!(p||M&&P),"data-testid":e.testId,style:{"--index":a,"--toasts-before":a,"--z-index":u.length-a,"--offset":`${q?Ke:Ue.current}px`,"--initial-height":M?"auto":`${Be}px`,...E,...e.style},onDragEnd:()=>{Z(!1),H(null),qe.current=null},onPointerDown:V=>{V.button!==2&&(st||!Ze||(ze.current=new Date,Xe(Ue.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(Z(!0),qe.current={x:V.clientX,y:V.clientY})))},onPointerUp:()=>{var V,se,Y;if(Le||!Ze)return;qe.current=null;const re=Number(((V=ye.current)==null?void 0:V.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gt=Number(((se=ye.current)==null?void 0:se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ie=new Date().getTime()-((Y=ze.current)==null?void 0:Y.getTime()),de=ee==="x"?re:gt,rt=Math.abs(de)/ie;if(Math.abs(de)>=_i||rt>.11){Xe(Ue.current),e.onDismiss==null||e.onDismiss.call(e,e),J(ee==="x"?re>0?"right":"left":gt>0?"down":"up"),Oe(),Ye(!0);return}else{var be,we;(be=ye.current)==null||be.style.setProperty("--swipe-amount-x","0px"),(we=ye.current)==null||we.style.setProperty("--swipe-amount-y","0px")}Pe(!1),Z(!1),H(null)},onPointerMove:V=>{var se,Y,re;if(!qe.current||!Ze||((se=window.getSelection())==null?void 0:se.toString().length)>0)return;const ie=V.clientY-qe.current.y,de=V.clientX-qe.current.x;var rt;const be=(rt=c.swipeDirections)!=null?rt:wi(C);!ee&&(Math.abs(de)>1||Math.abs(ie)>1)&&H(Math.abs(de)>Math.abs(ie)?"x":"y");let we={x:0,y:0};const ke=he=>1/(1.5+Math.abs(he)/20);if(ee==="y"){if(be.includes("top")||be.includes("bottom"))if(be.includes("top")&&ie<0||be.includes("bottom")&&ie>0)we.y=ie;else{const he=ie*ke(ie);we.y=Math.abs(he)<Math.abs(ie)?he:ie}}else if(ee==="x"&&(be.includes("left")||be.includes("right")))if(be.includes("left")&&de<0||be.includes("right")&&de>0)we.x=de;else{const he=de*ke(de);we.x=Math.abs(he)<Math.abs(de)?he:de}(Math.abs(we.x)>0||Math.abs(we.y)>0)&&Pe(!0),(Y=ye.current)==null||Y.style.setProperty("--swipe-amount-x",`${we.x}px`),(re=ye.current)==null||re.style.setProperty("--swipe-amount-y",`${we.y}px`)}},Ee&&!e.jsx&&ue!=="loading"?I.createElement("button",{"aria-label":K,"data-disabled":st,"data-close-button":!0,onClick:st||!Ze?()=>{}:()=>{Oe(),e.onDismiss==null||e.onDismiss.call(e,e)},className:$e(L==null?void 0:L.closeButton,e==null||(d=e.classNames)==null?void 0:d.closeButton)},(Je=z==null?void 0:z.close)!=null?Je:oi):null,(ue||e.icon||e.promise)&&e.icon!==null&&((z==null?void 0:z[ue])!==null||e.icon)?I.createElement("div",{"data-icon":"",className:$e(L==null?void 0:L.icon,e==null||(_=e.classNames)==null?void 0:_.icon)},e.promise||e.type==="loading"&&!e.icon?e.icon||pt():null,e.type!=="loading"?mt:null):null,I.createElement("div",{"data-content":"",className:$e(L==null?void 0:L.content,e==null||(v=e.classNames)==null?void 0:v.content)},I.createElement("div",{"data-title":"",className:$e(L==null?void 0:L.title,e==null||(g=e.classNames)==null?void 0:g.title)},e.jsx?e.jsx:typeof e.title=="function"?e.title():e.title),e.description?I.createElement("div",{"data-description":"",className:$e(R,nt,L==null?void 0:L.description,e==null||(r=e.classNames)==null?void 0:r.description)},typeof e.description=="function"?e.description():e.description):null),I.isValidElement(e.cancel)?e.cancel:e.cancel&&Ht(e.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:e.cancelButtonStyle||h,onClick:V=>{Ht(e.cancel)&&Ze&&(e.cancel.onClick==null||e.cancel.onClick.call(e.cancel,V),Oe())},className:$e(L==null?void 0:L.cancelButton,e==null||(b=e.classNames)==null?void 0:b.cancelButton)},e.cancel.label):null,I.isValidElement(e.action)?e.action:e.action&&Ht(e.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:e.actionButtonStyle||w,onClick:V=>{Ht(e.action)&&(e.action.onClick==null||e.action.onClick.call(e.action,V),!V.defaultPrevented&&Oe())},className:$e(L==null?void 0:L.actionButton,e==null||(y=e.classNames)==null?void 0:y.actionButton)},e.action.label):null)};function ps(){if(typeof window>"u"||typeof document>"u")return"ltr";const c=document.documentElement.getAttribute("dir");return c==="auto"||!c?window.getComputedStyle(document.documentElement).direction:c}function Ti(c,t){const n={};return[c,t].forEach((d,_)=>{const v=_===1,g=v?"--mobile-offset":"--offset",r=v?yi:gi;function b(y){["top","right","bottom","left"].forEach(m=>{n[`${g}-${m}`]=typeof y=="number"?`${y}px`:y})}typeof d=="number"||typeof d=="string"?b(d):typeof d=="object"?["top","right","bottom","left"].forEach(y=>{d[y]===void 0?n[`${g}-${y}`]=r:n[`${g}-${y}`]=typeof d[y]=="number"?`${d[y]}px`:d[y]}):b(r)}),n}const Ei=I.forwardRef(function(t,n){const{id:d,invert:_,position:v="bottom-right",hotkey:g=["altKey","KeyT"],expand:r,closeButton:b,className:y,offset:m,mobileOffset:e,theme:o="light",richColors:l,duration:i,style:s,visibleToasts:f=mi,toastOptions:a,dir:u=ps(),gap:p=vi,icons:x,containerAriaLabel:k="Notifications"}=t,[A,E]=I.useState([]),h=I.useMemo(()=>d?A.filter(P=>P.toasterId===d):A.filter(P=>!P.toasterId),[A,d]),w=I.useMemo(()=>Array.from(new Set([v].concat(h.filter(P=>P.position).map(P=>P.position)))),[h,v]),[T,R]=I.useState([]),[j,C]=I.useState(!1),[$,M]=I.useState(!1),[L,z]=I.useState(o!=="system"?o:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=I.useRef(null),ee=g.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=I.useRef(null),D=I.useRef(!1),J=I.useCallback(P=>{E(X=>{var q;return(q=X.find(ne=>ne.id===P.id))!=null&&q.delete||_e.dismiss(P.id),X.filter(({id:ne})=>ne!==P.id)})},[]);return I.useEffect(()=>_e.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{E(X=>X.map(q=>q.id===P.id?{...q,delete:!0}:q))});return}setTimeout(()=>{Sr.flushSync(()=>{E(X=>{const q=X.findIndex(ne=>ne.id===P.id);return q!==-1?[...X.slice(0,q),{...X[q],...P},...X.slice(q+1)]:[P,...X]})})})}),[A]),I.useEffect(()=>{if(o!=="system"){z(o);return}if(o==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:X})=>{z(X?"dark":"light")})}catch{P.addListener(({matches:q})=>{try{z(q?"dark":"light")}catch(ne){console.error(ne)}})}},[o]),I.useEffect(()=>{A.length<=1&&C(!1)},[A]),I.useEffect(()=>{const P=X=>{var q;if(g.every(Z=>X[Z]||X.code===Z)){var ce;C(!0),(ce=K.current)==null||ce.focus()}X.code==="Escape"&&(document.activeElement===K.current||(q=K.current)!=null&&q.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[g]),I.useEffect(()=>{if(K.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,D.current=!1)}},[K.current]),I.createElement("section",{ref:n,"aria-label":`${k} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((P,X)=>{var q;const[ne,ce]=P.split("-");return h.length?I.createElement("ol",{key:P,dir:u==="auto"?ps():u,tabIndex:-1,ref:K,className:y,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":ne,"data-x-position":ce,style:{"--front-toast-height":`${((q=T[0])==null?void 0:q.height)||0}px`,"--width":`${bi}px`,"--gap":`${p}px`,...s,...Ti(m,e)},onBlur:Z=>{D.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(D.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||D.current||(D.current=!0,H.current=Z.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{$||C(!1)},onDragEnd:()=>C(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},h.filter(Z=>!Z.position&&X===0||Z.position===P).map((Z,Le)=>{var Ye,tt;return I.createElement(ki,{key:Z.id,icons:x,index:Le,toast:Z,defaultRichColors:l,duration:(Ye=a==null?void 0:a.duration)!=null?Ye:i,className:a==null?void 0:a.className,descriptionClassName:a==null?void 0:a.descriptionClassName,invert:_,visibleToasts:f,closeButton:(tt=a==null?void 0:a.closeButton)!=null?tt:b,interacting:$,position:P,style:a==null?void 0:a.style,unstyled:a==null?void 0:a.unstyled,classNames:a==null?void 0:a.classNames,cancelButtonStyle:a==null?void 0:a.cancelButtonStyle,actionButtonStyle:a==null?void 0:a.actionButtonStyle,closeButtonAriaLabel:a==null?void 0:a.closeButtonAriaLabel,removeToast:J,toasts:h.filter(Pe=>Pe.position==Z.position),heights:T.filter(Pe=>Pe.position==Z.position),setHeights:R,expandByDefault:r,gap:p,expanded:j,swipeDirections:t.swipeDirections})})):null}))});function Si({hash:c}){return S.jsxs("a",{className:"inline-flex items-center gap-1.5 text-accent-cyan hover:text-accent-cyan/80 transition-colors text-sm",href:Te.blockExplorer.url+"/tx/"+c,target:"_blank",rel:"noopener noreferrer",children:["View on ",Te.blockExplorer.name,S.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}function Ai(){const{register:c}=Us(),t=(n,d)=>{const _=d.hash?S.jsx(Si,{hash:d.hash}):null;d.status==="pending"?qt.loading(d.content||"Waiting for approval...",{id:n,description:d.name}):d.status==="approved"?qt.loading(d.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction approved, confirming..."}),_]}),{id:n,description:d.name}):d.status==="success"?qt.success(d.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction confirmed!"}),_]}),{id:n,description:d.name,duration:8e3}):d.status==="error"&&qt.error(d.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction failed"}),d.errorMessage&&S.jsx("p",{className:"text-xs text-ink-400 break-words",children:d.errorMessage}),_]}),{id:n,description:d.name,duration:1e4})};return B.useEffect(()=>{c(t)},[]),S.jsx(Ei,{position:"bottom-right",theme:"dark",toastOptions:{style:{background:"#18181b",border:"1px solid #27272a",color:"#fafafa"},className:"sonner-toast"},richColors:!0,closeButton:!0})}function Ri(){const{isConnected:c}=qn(),t=Ps(),{switchChain:n}=br();return B.useEffect(()=>{c&&t!==Lt.id&&(n==null||n({chainId:Lt.id}))},[c,t,n]),null}function Ni({children:c,props:t}){return S.jsxs("div",{className:"min-h-screen flex flex-col bg-ink-950",children:[S.jsx(Ri,{}),S.jsx("main",{className:"flex-1",children:c}),S.jsx(Ai,{}),S.jsx("footer",{className:"bg-ink-900/50 border-t border-ink-800/50 mt-auto",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("span",{className:"font-mono text-xl font-bold text-ink-100",children:[".zang","{"]}),S.jsxs("p",{className:"text-ink-400 text-sm",children:["Text-based NFTs on Base.",S.jsx("br",{}),"By artists, for artists."]}),S.jsx("p",{className:"text-ink-500 text-xs",children:"Platform fee: 5%"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Contact"}),S.jsx("a",{href:"mailto:team@zang.gallery",className:"block text-ink-400 hover:text-accent-cyan transition-colors text-sm",children:"team@zang.gallery"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Community"}),S.jsxs("div",{className:"flex flex-col space-y-2",children:[S.jsxs("a",{href:"https://twitter.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Twitter"]}),S.jsxs("a",{href:"https://github.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})}),"GitHub"]}),S.jsxs("a",{href:"https://discord.gg/jnpCz9R3gf",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189z"})}),"Discord"]})]})]})]}),S.jsx("div",{className:"mt-8 pt-8 border-t border-ink-800/50",children:S.jsx("p",{className:"text-ink-500 text-xs text-center",children:"Built on Base"})})]})})]})}const ji="0xC6d566A56A1aFf6508b41f6c90ff131615583BCD",Ci=[{inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],stateMutability:"view",type:"function"}];function Oi(c){const t=c.toLowerCase().replace("0x",""),n=us(ds(["string"],[t])),d=vr("80002105.reverse");return us(ds(["bytes32","bytes32"],[d,n]))}const $i=2,Ii=100;let yn=0;const bn=[],Vt=new Map;async function Mi(c){return new Promise((t,n)=>{const d=async()=>{yn++;try{const _=await c();t(_)}catch(_){n(_)}finally{yn--,bn.length>0&&setTimeout(()=>{const _=bn.shift();_&&_()},Ii)}};yn<$i?d():bn.push(d)})}function Di(){try{const c=localStorage.getItem("ensCache");if(c){const t=JSON.parse(c),n=new Date,d={};for(const[_,v]of Object.entries(t))v&&new Date(v.expiration)>n&&(d[_]=v);return d}}catch{}return{}}function Li(c){try{localStorage.setItem("ensCache",JSON.stringify(c))}catch{}}const Pi=Pt({key:"ensInfo",default:Di()}),Bi=()=>{const[c,t]=_t(Pi),n=async r=>{let b=null;try{b=await Mi(async()=>{const m=Oi(r);return await Kr.readContract({abi:Ci,address:ji,functionName:"name",args:[m]})||null})}catch{}const y={value:b,expiration:new Date(new Date().getTime()+Te.ens.cacheExpiration)};return t(m=>{const e={...m,[r]:y};return Li(e),e}),b},d=r=>(!c[r]||new Date(c[r].expiration)<new Date)&&!Vt.has(r),_=r=>{t(b=>({...b,[r]:null}))};return{lookupEns:r=>{var y,m;if(!r)return r;if(c[r]&&new Date(c[r].expiration)>new Date)return c[r].value;if(Vt.has(r))return(y=c[r])==null?void 0:y.value;const b=new Promise(e=>{setTimeout(async()=>{try{const o=await n(r);e(o)}catch{e(null)}finally{Vt.delete(r)}},0)});return Vt.set(r,b),(m=c[r])==null?void 0:m.value},lookupEnsAsync:async(r,b)=>{var e;if(!r)return r;b&&_(r);const y=d(r)||b;let m;return y?m=await n(r):m=(e=c[r])==null?void 0:e.value,m},invalidateEns:_}},Fi=(c,t)=>c.substring(0,t+2)+"..."+c.substring(c.length-t);function $n({address:c,shorten:t,nChar:n,disableLink:d}){const{lookupEns:_}=Bi(),v=_(c)||(t?Fi(c,n):c);return S.jsx("span",{className:"font-mono text-ink-300",children:d?v:S.jsx(It,{to:`/profile?address=${c}`,className:"hover:text-accent-cyan transition-colors underline decoration-ink-600 hover:decoration-accent-cyan",children:v})})}function zi(){const[c,t]=B.useState(!1),{isConnected:n}=qn(),d=Ps(),_=[{href:"/",label:"Home"},{href:"/mint",label:"Mint"},{href:"/activity",label:"Activity"}];return n&&_.push({href:"/collection",label:"Collection"}),S.jsxs("header",{className:"sticky top-0 z-50 bg-ink-950/80 backdrop-blur-md border-b border-ink-800/50",children:[S.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"flex items-center h-16",children:[S.jsx("div",{className:"flex-shrink-0 w-64",children:S.jsx(Sn,{href:"/",className:"group flex items-center",children:S.jsxs("span",{className:"font-mono text-2xl font-bold text-ink-100 group-hover:text-white transition-colors duration-200",children:[".zang","{"]})})}),S.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center space-x-8",children:_.map(v=>S.jsx(Sn,{href:v.href,className:"nav-link text-sm font-medium uppercase tracking-wide",children:v.label},v.href))}),S.jsx("div",{className:"hidden md:flex flex-shrink-0 justify-end w-64",children:S.jsx(Ns,{})}),S.jsx("button",{className:"md:hidden ml-auto p-2 rounded-lg text-ink-400 hover:text-white hover:bg-ink-800/50 transition-colors",onClick:()=>t(!c),"aria-label":"Toggle menu","aria-expanded":c,children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),c&&S.jsx("div",{className:"md:hidden py-4 border-t border-ink-800/50 animate-fade-in",children:S.jsxs("div",{className:"flex flex-col space-y-4",children:[_.map(v=>S.jsx(Sn,{href:v.href,className:"text-ink-300 hover:text-white text-sm font-medium uppercase tracking-wide py-2 transition-colors",onClick:()=>t(!1),children:v.label},v.href)),S.jsx("div",{className:"pt-4 border-t border-ink-800/50",children:S.jsx(Ns,{})})]})})]}),n&&d!==Te.networks.main.chainId&&S.jsx("div",{className:"bg-red-500/10 border-b border-red-500/20 px-4 py-3",children:S.jsxs("p",{className:"text-center text-red-400 text-sm",children:["Please switch to"," ",S.jsx("span",{className:"font-semibold",children:Te.networks.main.name})]})})]})}const Ui=[{type:"constructor",inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"string",name:"_imageURI",type:"string"},{internalType:"string",name:"_externalLink",type:"string"},{internalType:"address",name:"_zangCommissionAccount",type:"address"}]},{type:"function",name:"PLATFORM_FEE_TIMELOCK",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"applyPlatformFeePercentageIncrease",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"authorOf",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"balanceOf",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOfBatch",inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"contractURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"decreasePlatformFeePercentage",inputs:[{internalType:"uint16",name:"_lowerFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decreaseRoyaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint96",name:"_lowerValue",type:"uint96"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"description",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"descriptionOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"exists",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"externalLink",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"imageURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"lastTokenId",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"lock",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{internalType:"string",name:"textURI_",type:"string"},{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"description_",type:"string"},{internalType:"uint256",name:"amount_",type:"uint256"},{internalType:"uint96",name:"royaltyNumerator_",type:"uint96"},{internalType:"address",name:"royaltyRecipient_",type:"address"},{internalType:"bytes",name:"data_",type:"bytes"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"name",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"nameOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"newPlatformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"platformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"requestPlatformFeePercentageIncrease",inputs:[{internalType:"uint16",name:"_higherFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"royaltyDenominator",inputs:[],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"pure"},{type:"function",name:"royaltyInfo",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"royaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view"},{type:"function",name:"safeBatchTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setZangCommissionAccount",inputs:[{internalType:"address",name:"_zangCommissionAccount",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"textURI",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"uri",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"zangCommissionAccount",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"ApprovalForAll",inputs:[{name:"account",type:"address",indexed:!0},{name:"operator",type:"address",indexed:!0},{name:"approved",type:"bool",indexed:!1}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"TransferBatch",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"ids",type:"uint256[]",indexed:!1},{name:"values",type:"uint256[]",indexed:!1}],anonymous:!1},{type:"event",name:"TransferSingle",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"id",type:"uint256",indexed:!1},{name:"value",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"URI",inputs:[{name:"value",type:"string",indexed:!1},{name:"id",type:"uint256",indexed:!0}],anonymous:!1}],qi=[{type:"constructor",inputs:[{internalType:"contract IZangNFT",name:"_zangNFTAddress",type:"address"}]},{type:"function",name:"buyToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"delistToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListing",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingAmount",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingPrice",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listingCount",inputs:[{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"listings",inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"zangNFTAddress",inputs:[],outputs:[{internalType:"contract IZangNFT",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1},{type:"event",name:"TokenDelisted",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenListed",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenPurchased",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_buyer",type:"address",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"_amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1}],vt={zang:Ui,marketplace:qi},Vn=(c,t,n)=>({...c,execute:(d,_)=>{if(!d.text||!d.selection){_.replaceSelection(`${t}${n}`);return}try{const v=Fr({text:d.text,selection:d.selection}),g=_.setSelectionRange(v),r=g.selectedText||"",b=r.search(/\S|$/),y=r.substring(0,b),m=r.search(/\s+$/),e=m===-1?"":r.substring(m,r.length),o=_.replaceSelection(y.concat(t,g.selectedText.trim(),n,e));_.setSelectionRange({start:o.selection.end-t.length-g.selectedText.length+y.length,end:o.selection.end-n.length-e.length})}catch{_.replaceSelection(`${t}${d.selectedText||""}${n}`)}}}),Hi=Vn(Dr,"**","**"),Vi=Vn(Lr,"*","*"),Wi=Vn(Pr,"~~","~~"),xt=Br();xt[xt.findIndex(c=>c.name==="bold")]=Hi;xt[xt.findIndex(c=>c.name==="italic")]=Vi;xt[xt.findIndex(c=>c.name==="strikethrough")]=Wi;var vn={exports:{}},ms;function Gi(){return ms||(ms=1,(function(c,t){(function(n,d){c.exports=d()})(self,(()=>{return n={7629:(_,v,g)=>{const r=g(375),b=g(8571),y=g(9474),m=g(1687),e=g(8652),o=g(8160),l=g(3292),i=g(6354),s=g(8901),f=g(9708),a=g(6914),u=g(2294),p=g(6133),x=g(1152),k=g(8863),A=g(2036),E={Base:class{constructor(h){this.type=h,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new u.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return r(typeof f.describe=="function","Manifest functionality disabled"),f.describe(this)}allow(...h){return o.verifyFlat(h,"allow"),this._values(h,"_valids")}alter(h){r(h&&typeof h=="object"&&!Array.isArray(h),"Invalid targets argument"),r(!this._inRuleset(),"Cannot set alterations inside a ruleset");const w=this.clone();w.$_terms.alterations=w.$_terms.alterations||[];for(const T in h){const R=h[T];r(typeof R=="function","Alteration adjuster for",T,"must be a function"),w.$_terms.alterations.push({target:T,adjuster:R})}return w.$_temp.ruleset=!1,w}artifact(h){return r(h!==void 0,"Artifact cannot be undefined"),r(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",h)}cast(h){return r(h===!1||typeof h=="string","Invalid to value"),r(h===!1||this._definition.cast[h],"Type",this.type,"does not support casting to",h),this.$_setFlag("cast",h===!1?void 0:h)}default(h,w){return this._default("default",h,w)}description(h){return r(h&&typeof h=="string","Description must be a non-empty string"),this.$_setFlag("description",h)}empty(h){const w=this.clone();return h!==void 0&&(h=w.$_compile(h,{override:!1})),w.$_setFlag("empty",h,{clone:!1})}error(h){return r(h,"Missing error"),r(h instanceof Error||typeof h=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",h)}example(h,w={}){return r(h!==void 0,"Missing example"),o.assertOptions(w,["override"]),this._inner("examples",h,{single:!0,override:w.override})}external(h,w){return typeof h=="object"&&(r(!w,"Cannot combine options with description"),w=h.description,h=h.method),r(typeof h=="function","Method must be a function"),r(w===void 0||w&&typeof w=="string","Description must be a non-empty string"),this._inner("externals",{method:h,description:w},{single:!0})}failover(h,w){return this._default("failover",h,w)}forbidden(){return this.presence("forbidden")}id(h){return h?(r(typeof h=="string","id must be a non-empty string"),r(/^[^\.]+$/.test(h),"id cannot contain period character"),this.$_setFlag("id",h)):this.$_setFlag("id",void 0)}invalid(...h){return this._values(h,"_invalids")}label(h){return r(h&&typeof h=="string","Label name must be a non-empty string"),this.$_setFlag("label",h)}meta(h){return r(h!==void 0,"Meta cannot be undefined"),this._inner("metas",h,{single:!0})}note(...h){r(h.length,"Missing notes");for(const w of h)r(w&&typeof w=="string","Notes must be non-empty strings");return this._inner("notes",h)}only(h=!0){return r(typeof h=="boolean","Invalid mode:",h),this.$_setFlag("only",h)}optional(){return this.presence("optional")}prefs(h){r(h,"Missing preferences"),r(h.context===void 0,"Cannot override context"),r(h.externals===void 0,"Cannot override externals"),r(h.warnings===void 0,"Cannot override warnings"),r(h.debug===void 0,"Cannot override debug"),o.checkPreferences(h);const w=this.clone();return w._preferences=o.preferences(w._preferences,h),w}presence(h){return r(["optional","required","forbidden"].includes(h),"Unknown presence mode",h),this.$_setFlag("presence",h)}raw(h=!0){return this.$_setFlag("result",h?"raw":void 0)}result(h){return r(["raw","strip"].includes(h),"Unknown result mode",h),this.$_setFlag("result",h)}required(){return this.presence("required")}strict(h){const w=this.clone(),T=h!==void 0&&!h;return w._preferences=o.preferences(w._preferences,{convert:T}),w}strip(h=!0){return this.$_setFlag("result",h?"strip":void 0)}tag(...h){r(h.length,"Missing tags");for(const w of h)r(w&&typeof w=="string","Tags must be non-empty strings");return this._inner("tags",h)}unit(h){return r(h&&typeof h=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",h)}valid(...h){o.verifyFlat(h,"valid");const w=this.allow(...h);return w.$_setFlag("only",!!w._valids,{clone:!1}),w}when(h,w){const T=this.clone();T.$_terms.whens||(T.$_terms.whens=[]);const R=l.when(T,h,w);if(!["any","link"].includes(T.type)){const j=R.is?[R]:R.switch;for(const C of j)r(!C.then||C.then.type==="any"||C.then.type===T.type,"Cannot combine",T.type,"with",C.then&&C.then.type),r(!C.otherwise||C.otherwise.type==="any"||C.otherwise.type===T.type,"Cannot combine",T.type,"with",C.otherwise&&C.otherwise.type)}return T.$_terms.whens.push(R),T.$_mutateRebuild()}cache(h){r(!this._inRuleset(),"Cannot set caching inside a ruleset"),r(!this._cache,"Cannot override schema cache"),r(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const w=this.clone();return w._cache=h||e.provider.provision(),w.$_temp.ruleset=!1,w}clone(){const h=Object.create(Object.getPrototypeOf(this));return this._assign(h)}concat(h){r(o.isSchema(h),"Invalid schema object"),r(this.type==="any"||h.type==="any"||h.type===this.type,"Cannot merge type",this.type,"with another type:",h.type),r(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),r(!h._inRuleset(),"Cannot concatenate a schema with open ruleset");let w=this.clone();if(this.type==="any"&&h.type!=="any"){const T=h.clone();for(const R of Object.keys(w))R!=="type"&&(T[R]=w[R]);w=T}w._ids.concat(h._ids),w._refs.register(h,p.toSibling),w._preferences=w._preferences?o.preferences(w._preferences,h._preferences):h._preferences,w._valids=A.merge(w._valids,h._valids,h._invalids),w._invalids=A.merge(w._invalids,h._invalids,h._valids);for(const T of h._singleRules.keys())w._singleRules.has(T)&&(w._rules=w._rules.filter((R=>R.keep||R.name!==T)),w._singleRules.delete(T));for(const T of h._rules)h._definition.rules[T.method].multi||w._singleRules.set(T.name,T),w._rules.push(T);if(w._flags.empty&&h._flags.empty){w._flags.empty=w._flags.empty.concat(h._flags.empty);const T=Object.assign({},h._flags);delete T.empty,m(w._flags,T)}else if(h._flags.empty){w._flags.empty=h._flags.empty;const T=Object.assign({},h._flags);delete T.empty,m(w._flags,T)}else m(w._flags,h._flags);for(const T in h.$_terms){const R=h.$_terms[T];R?w.$_terms[T]?w.$_terms[T]=w.$_terms[T].concat(R):w.$_terms[T]=R.slice():w.$_terms[T]||(w.$_terms[T]=R)}return this.$_root._tracer&&this.$_root._tracer._combine(w,[this,h]),w.$_mutateRebuild()}extend(h){return r(!h.base,"Cannot extend type with another base"),s.type(this,h)}extract(h){return h=Array.isArray(h)?h:h.split("."),this._ids.reach(h)}fork(h,w){r(!this._inRuleset(),"Cannot fork inside a ruleset");let T=this;for(let R of[].concat(h))R=Array.isArray(R)?R:R.split("."),T=T._ids.fork(R,w,T);return T.$_temp.ruleset=!1,T}rule(h){const w=this._definition;o.assertOptions(h,Object.keys(w.modifiers)),r(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const T=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;r(T>=0&&T<this._rules.length,"Cannot apply rules to empty ruleset");const R=this.clone();for(let j=T;j<R._rules.length;++j){const C=R._rules[j],$=b(C);for(const M in h)w.modifiers[M]($,h[M]),r($.name===C.name,"Cannot change rule name");R._rules[j]=$,R._singleRules.get($.name)===C&&R._singleRules.set($.name,$)}return R.$_temp.ruleset=!1,R.$_mutateRebuild()}get ruleset(){r(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const h=this.clone();return h.$_temp.ruleset=h._rules.length,h}get $(){return this.ruleset}tailor(h){h=[].concat(h),r(!this._inRuleset(),"Cannot tailor inside a ruleset");let w=this;if(this.$_terms.alterations)for(const{target:T,adjuster:R}of this.$_terms.alterations)h.includes(T)&&(w=R(w),r(o.isSchema(w),"Alteration adjuster for",T,"failed to return a schema object"));return w=w.$_modify({each:T=>T.tailor(h),ref:!1}),w.$_temp.ruleset=!1,w.$_mutateRebuild()}tracer(){return x.location?x.location(this):this}validate(h,w){return k.entry(h,this,w)}validateAsync(h,w){return k.entryAsync(h,this,w)}$_addRule(h){typeof h=="string"&&(h={name:h}),r(h&&typeof h=="object","Invalid options"),r(h.name&&typeof h.name=="string","Invalid rule name");for(const C in h)r(C[0]!=="_","Cannot set private rule properties");const w=Object.assign({},h);w._resolve=[],w.method=w.method||w.name;const T=this._definition.rules[w.method],R=w.args;r(T,"Unknown rule",w.method);const j=this.clone();if(R){r(Object.keys(R).length===1||Object.keys(R).length===this._definition.rules[w.name].args.length,"Invalid rule definition for",this.type,w.name);for(const C in R){let $=R[C];if(T.argsByName){const M=T.argsByName.get(C);if(M.ref&&o.isResolvable($))w._resolve.push(C),j.$_mutateRegister($);else if(M.normalize&&($=M.normalize($),R[C]=$),M.assert){const L=o.validateArg($,C,M);r(!L,L,"or reference")}}$!==void 0?R[C]=$:delete R[C]}}return T.multi||(j._ruleRemove(w.name,{clone:!1}),j._singleRules.set(w.name,w)),j.$_temp.ruleset===!1&&(j.$_temp.ruleset=null),T.priority?j._rules.unshift(w):j._rules.push(w),j}$_compile(h,w){return l.schema(this.$_root,h,w)}$_createError(h,w,T,R,j,C={}){const $=C.flags!==!1?this._flags:{},M=C.messages?a.merge(this._definition.messages,C.messages):this._definition.messages;return new i.Report(h,w,T,$,M,R,j)}$_getFlag(h){return this._flags[h]}$_getRule(h){return this._singleRules.get(h)}$_mapLabels(h){return h=Array.isArray(h)?h:h.split("."),this._ids.labels(h)}$_match(h,w,T,R){(T=Object.assign({},T)).abortEarly=!0,T._externals=!1,w.snapshot();const j=!k.validate(h,this,w,T,R).errors;return w.restore(),j}$_modify(h){return o.assertOptions(h,["each","once","ref","schema"]),u.schema(this,h)||this}$_mutateRebuild(){return r(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(h,{source:w,name:T,path:R,key:j})=>{const C=this._definition[w][T]&&this._definition[w][T].register;C!==!1&&this.$_mutateRegister(h,{family:C,key:j})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(h,{family:w,key:T}={}){this._refs.register(h,w),this._ids.register(h,{key:T})}$_property(h){return this._definition.properties[h]}$_reach(h){return this._ids.reach(h)}$_rootReferences(){return this._refs.roots()}$_setFlag(h,w,T={}){r(h[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const R=this._definition.flags[h]||{};if(y(w,R.default)&&(w=void 0),y(w,this._flags[h]))return this;const j=T.clone!==!1?this.clone():this;return w!==void 0?(j._flags[h]=w,j.$_mutateRegister(w)):delete j._flags[h],h[0]!=="_"&&(j.$_temp.ruleset=!1),j}$_parent(h,...w){return this[h][o.symbols.parent].call(this,...w)}$_validate(h,w,T){return k.validate(h,this,w,T)}_assign(h){h.type=this.type,h.$_root=this.$_root,h.$_temp=Object.assign({},this.$_temp),h.$_temp.whens={},h._ids=this._ids.clone(),h._preferences=this._preferences,h._valids=this._valids&&this._valids.clone(),h._invalids=this._invalids&&this._invalids.clone(),h._rules=this._rules.slice(),h._singleRules=b(this._singleRules,{shallow:!0}),h._refs=this._refs.clone(),h._flags=Object.assign({},this._flags),h._cache=null,h.$_terms={};for(const w in this.$_terms)h.$_terms[w]=this.$_terms[w]?this.$_terms[w].slice():null;h.$_super={};for(const w in this.$_super)h.$_super[w]=this._super[w].bind(h);return h}_bare(){const h=this.clone();h._reset();const w=h._definition.terms;for(const T in w){const R=w[T];h.$_terms[T]=R.init}return h.$_mutateRebuild()}_default(h,w,T={}){return o.assertOptions(T,"literal"),r(w!==void 0,"Missing",h,"value"),r(typeof w=="function"||!T.literal,"Only function value supports literal option"),typeof w=="function"&&T.literal&&(w={[o.symbols.literal]:!0,literal:w}),this.$_setFlag(h,w)}_generate(h,w,T){if(!this.$_terms.whens)return{schema:this};const R=[],j=[];for(let M=0;M<this.$_terms.whens.length;++M){const L=this.$_terms.whens[M];if(L.concat){R.push(L.concat),j.push(`${M}.concat`);continue}const z=L.ref?L.ref.resolve(h,w,T):h,K=L.is?[L]:L.switch,ee=j.length;for(let H=0;H<K.length;++H){const{is:D,then:J,otherwise:P}=K[H],X=`${M}${L.switch?"."+H:""}`;if(D.$_match(z,w.nest(D,`${X}.is`),T)){if(J){const q=w.localize([...w.path,`${X}.then`],w.ancestors,w.schemas),{schema:ne,id:ce}=J._generate(h,q,T);R.push(ne),j.push(`${X}.then${ce?`(${ce})`:""}`);break}}else if(P){const q=w.localize([...w.path,`${X}.otherwise`],w.ancestors,w.schemas),{schema:ne,id:ce}=P._generate(h,q,T);R.push(ne),j.push(`${X}.otherwise${ce?`(${ce})`:""}`);break}}if(L.break&&j.length>ee)break}const C=j.join(", ");if(w.mainstay.tracer.debug(w,"rule","when",C),!C)return{schema:this};if(!w.mainstay.tracer.active&&this.$_temp.whens[C])return{schema:this.$_temp.whens[C],id:C};let $=this;this._definition.generate&&($=this._definition.generate(this,h,w,T));for(const M of R)$=$.concat(M);return this.$_root._tracer&&this.$_root._tracer._combine($,[this,...R]),this.$_temp.whens[C]=$,{schema:$,id:C}}_inner(h,w,T={}){r(!this._inRuleset(),`Cannot set ${h} inside a ruleset`);const R=this.clone();return R.$_terms[h]&&!T.override||(R.$_terms[h]=[]),T.single?R.$_terms[h].push(w):R.$_terms[h].push(...w),R.$_temp.ruleset=!1,R}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(h,w={}){if(!this._singleRules.has(h))return this;const T=w.clone!==!1?this.clone():this;T._singleRules.delete(h);const R=[];for(let j=0;j<T._rules.length;++j){const C=T._rules[j];C.name!==h||C.keep?R.push(C):T._inRuleset()&&j<T.$_temp.ruleset&&--T.$_temp.ruleset}return T._rules=R,T}_values(h,w){o.verifyFlat(h,w.slice(1,-1));const T=this.clone(),R=h[0]===o.symbols.override;if(R&&(h=h.slice(1)),!T[w]&&h.length?T[w]=new A:R&&(T[w]=h.length?new A:null,T.$_mutateRebuild()),!T[w])return T;R&&T[w].override();for(const j of h){r(j!==void 0,"Cannot call allow/valid/invalid with undefined"),r(j!==o.symbols.override,"Override must be the first value");const C=w==="_invalids"?"_valids":"_invalids";T[C]&&(T[C].remove(j),T[C].length||(r(w==="_valids"||!T._flags.only,"Setting invalid value",j,"leaves schema rejecting all values due to previous valid rule"),T[C]=null)),T[w].add(j,T._refs)}return T}}};E.Base.prototype[o.symbols.any]={version:o.version,compile:l.compile,root:"$_root"},E.Base.prototype.isImmutable=!0,E.Base.prototype.deny=E.Base.prototype.invalid,E.Base.prototype.disallow=E.Base.prototype.invalid,E.Base.prototype.equal=E.Base.prototype.valid,E.Base.prototype.exist=E.Base.prototype.required,E.Base.prototype.not=E.Base.prototype.invalid,E.Base.prototype.options=E.Base.prototype.prefs,E.Base.prototype.preferences=E.Base.prototype.prefs,_.exports=new E.Base},8652:(_,v,g)=>{const r=g(375),b=g(8571),y=g(8160),m={max:1e3,supported:new Set(["undefined","boolean","number","string"])};v.provider={provision:e=>new m.Cache(e)},m.Cache=class{constructor(e={}){y.assertOptions(e,["max"]),r(e.max===void 0||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||m.max,this._map=new Map,this._list=new m.List}get length(){return this._map.size}set(e,o){if(e!==null&&!m.supported.has(typeof e))return;let l=this._map.get(e);if(l)return l.value=o,void this._list.first(l);l=this._list.unshift({key:e,value:o}),this._map.set(e,l),this._compact()}get(e){const o=this._map.get(e);if(o)return this._list.first(o),b(o.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},m.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:o,prev:l}=e;return o.prev=l,l&&(l.next=o),e===this.tail&&(this.tail=o),e.prev=null,e.next=null,e}}},8160:(_,v,g)=>{const r=g(375),b=g(7916),y=g(5934);let m,e;const o={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};v.version=y.version,v.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},v.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},v.assertOptions=function(l,i,s="Options"){r(l&&typeof l=="object"&&!Array.isArray(l),"Options must be of type object");const f=Object.keys(l).filter((a=>!i.includes(a)));r(f.length===0,`${s} contain unknown keys: ${f}`)},v.checkPreferences=function(l){e=e||g(3378);const i=e.preferences.validate(l);if(i.error)throw new b([i.error.details[0].message])},v.compare=function(l,i,s){switch(s){case"=":return l===i;case">":return l>i;case"<":return l<i;case">=":return l>=i;case"<=":return l<=i}},v.default=function(l,i){return l===void 0?i:l},v.isIsoDate=function(l){return o.isoDate.test(l)},v.isNumber=function(l){return typeof l=="number"&&!isNaN(l)},v.isResolvable=function(l){return!!l&&(l[v.symbols.ref]||l[v.symbols.template])},v.isSchema=function(l,i={}){const s=l&&l[v.symbols.any];return!!s&&(r(i.legacy||s.version===v.version,"Cannot mix different versions of joi schemas"),!0)},v.isValues=function(l){return l[v.symbols.values]},v.limit=function(l){return Number.isSafeInteger(l)&&l>=0},v.preferences=function(l,i){m=m||g(6914),l=l||{},i=i||{};const s=Object.assign({},l,i);return i.errors&&l.errors&&(s.errors=Object.assign({},l.errors,i.errors),s.errors.wrap=Object.assign({},l.errors.wrap,i.errors.wrap)),i.messages&&(s.messages=m.compile(i.messages,l.messages)),delete s[v.symbols.prefs],s},v.tryWithPath=function(l,i,s={}){try{return l()}catch(f){throw f.path!==void 0?f.path=i+"."+f.path:f.path=i,s.append&&(f.message=`${f.message} (${f.path})`),f}},v.validateArg=function(l,i,{assert:s,message:f}){if(v.isSchema(s)){const a=s.validate(l);return a.error?a.error.message:void 0}if(!s(l))return i?`${i} ${f}`:f},v.verifyFlat=function(l,i){for(const s of l)r(!Array.isArray(s),"Method no longer accepts array arguments:",i)}},3292:(_,v,g)=>{const r=g(375),b=g(8160),y=g(6133),m={};v.schema=function(e,o,l={}){b.assertOptions(l,["appendPath","override"]);try{return m.schema(e,o,l)}catch(i){throw l.appendPath&&i.path!==void 0&&(i.message=`${i.message} (${i.path})`),i}},m.schema=function(e,o,l){r(o!==void 0,"Invalid undefined schema"),Array.isArray(o)&&(r(o.length,"Invalid empty array schema"),o.length===1&&(o=o[0]));const i=(s,...f)=>l.override!==!1?s.valid(e.override,...f):s.valid(...f);if(m.simple(o))return i(e,o);if(typeof o=="function")return e.custom(o);if(r(typeof o=="object","Invalid schema content:",typeof o),b.isResolvable(o))return i(e,o);if(b.isSchema(o))return o;if(Array.isArray(o)){for(const s of o)if(!m.simple(s))return e.alternatives().try(...o);return i(e,...o)}return o instanceof RegExp?e.string().regex(o):o instanceof Date?i(e.date(),o):(r(Object.getPrototypeOf(o)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(o))},v.ref=function(e,o){return y.isRef(e)?e:y.create(e,o)},v.compile=function(e,o,l={}){b.assertOptions(l,["legacy"]);const i=o&&o[b.symbols.any];if(i)return r(l.legacy||i.version===b.version,"Cannot mix different versions of joi schemas:",i.version,b.version),o;if(typeof o!="object"||!l.legacy)return v.schema(e,o,{appendPath:!0});const s=m.walk(o);return s?s.compile(s.root,o):v.schema(e,o,{appendPath:!0})},m.walk=function(e){if(typeof e!="object")return null;if(Array.isArray(e)){for(const l of e){const i=m.walk(l);if(i)return i}return null}const o=e[b.symbols.any];if(o)return{root:e[o.root],compile:o.compile};r(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const l in e){const i=m.walk(e[l]);if(i)return i}return null},m.simple=function(e){return e===null||["boolean","string","number"].includes(typeof e)},v.when=function(e,o,l){if(l===void 0&&(r(o&&typeof o=="object","Missing options"),l=o,o=y.create(".")),Array.isArray(l)&&(l={switch:l}),b.assertOptions(l,["is","not","then","otherwise","switch","break"]),b.isSchema(o))return r(l.is===void 0,'"is" can not be used with a schema condition'),r(l.not===void 0,'"not" can not be used with a schema condition'),r(l.switch===void 0,'"switch" can not be used with a schema condition'),m.condition(e,{is:o,then:l.then,otherwise:l.otherwise,break:l.break});if(r(y.isRef(o)||typeof o=="string","Invalid condition:",o),r(l.not===void 0||l.is===void 0,'Cannot combine "is" with "not"'),l.switch===void 0){let s=l;l.not!==void 0&&(s={is:l.not,then:l.otherwise,otherwise:l.then,break:l.break});let f=s.is!==void 0?e.$_compile(s.is):e.$_root.invalid(null,!1,0,"").required();return r(s.then!==void 0||s.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),r(s.break===void 0||s.then===void 0||s.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),l.is===void 0||y.isRef(l.is)||b.isSchema(l.is)||(f=f.required()),m.condition(e,{ref:v.ref(o),is:f,then:s.then,otherwise:s.otherwise,break:s.break})}r(Array.isArray(l.switch),'"switch" must be an array'),r(l.is===void 0,'Cannot combine "switch" with "is"'),r(l.not===void 0,'Cannot combine "switch" with "not"'),r(l.then===void 0,'Cannot combine "switch" with "then"');const i={ref:v.ref(o),switch:[],break:l.break};for(let s=0;s<l.switch.length;++s){const f=l.switch[s],a=s===l.switch.length-1;b.assertOptions(f,a?["is","then","otherwise"]:["is","then"]),r(f.is!==void 0,'Switch statement missing "is"'),r(f.then!==void 0,'Switch statement missing "then"');const u={is:e.$_compile(f.is),then:e.$_compile(f.then)};if(y.isRef(f.is)||b.isSchema(f.is)||(u.is=u.is.required()),a){r(l.otherwise===void 0||f.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const p=l.otherwise!==void 0?l.otherwise:f.otherwise;p!==void 0&&(r(i.break===void 0,"Cannot specify both otherwise and break"),u.otherwise=e.$_compile(p))}i.switch.push(u)}return i},m.condition=function(e,o){for(const l of["then","otherwise"])o[l]===void 0?delete o[l]:o[l]=e.$_compile(o[l]);return o}},6354:(_,v,g)=>{const r=g(5688),b=g(8160),y=g(3328);v.Report=class{constructor(m,e,o,l,i,s,f){if(this.code=m,this.flags=l,this.messages=i,this.path=s.path,this.prefs=f,this.state=s,this.value=e,this.message=null,this.template=null,this.local=o||{},this.local.label=v.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const a=this.path[this.path.length-1];typeof a!="object"&&(this.local.key=a)}}_setTemplate(m){if(this.template=m,!this.flags.label&&this.path.length===0){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const m=this.code;if(!this.prefs.errors.render)return this.code;const e=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return e===void 0?`Error code "${m}" is not defined, your custom type is missing the correct messages definition`:(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(m,e){return v.template(this.value,m,e||this.code,this.state,this.prefs)}},v.path=function(m){let e="";for(const o of m)typeof o!="object"&&(typeof o=="string"?(e&&(e+="."),e+=o):e+=`[${o}]`);return e},v.template=function(m,e,o,l,i){if(!e)return;if(y.isTemplate(e))return o!=="root"?e:null;let s=i.errors.language;if(b.isResolvable(s)&&(s=s.resolve(m,l,i)),s&&e[s]){if(e[s][o]!==void 0)return e[s][o];if(e[s]["*"]!==void 0)return e[s]["*"]}return e[o]?e[o]:e["*"]},v.label=function(m,e,o,l){if(!o.errors.label)return"";if(m.label)return m.label;let i=e.path;return o.errors.label==="key"&&e.path.length>1&&(i=e.path.slice(-1)),v.path(i)||v.template(null,o.messages,"root",e,o)||l&&v.template(null,l,"root",e,o)||"value"},v.process=function(m,e,o){if(!m)return null;const{override:l,message:i,details:s}=v.details(m);if(l)return l;if(o.errors.stack)return new v.ValidationError(i,s,e);const f=Error.stackTraceLimit;Error.stackTraceLimit=0;const a=new v.ValidationError(i,s,e);return Error.stackTraceLimit=f,a},v.details=function(m,e={}){let o=[];const l=[];for(const i of m){if(i instanceof Error){if(e.override!==!1)return{override:i};const f=i.toString();o.push(f),l.push({message:f,type:"override",context:{error:i}});continue}const s=i.toString();o.push(s),l.push({message:s,path:i.path.filter((f=>typeof f!="object")),type:i.code,context:i.local})}return o.length>1&&(o=[...new Set(o)]),{message:o.join(". "),details:l}},v.ValidationError=class extends Error{constructor(m,e,o){super(m),this._original=o,this.details=e}static isError(m){return m instanceof v.ValidationError}},v.ValidationError.prototype.isJoi=!0,v.ValidationError.prototype.name="ValidationError",v.ValidationError.prototype.annotate=r.error},8901:(_,v,g)=>{const r=g(375),b=g(8571),y=g(8160),m=g(6914),e={};v.type=function(o,l){const i=Object.getPrototypeOf(o),s=b(i),f=o._assign(Object.create(s)),a=Object.assign({},l);delete a.base,s._definition=a;const u=i._definition||{};a.messages=m.merge(u.messages,a.messages),a.properties=Object.assign({},u.properties,a.properties),f.type=a.type,a.flags=Object.assign({},u.flags,a.flags);const p=Object.assign({},u.terms);if(a.terms)for(const E in a.terms){const h=a.terms[E];r(f.$_terms[E]===void 0,"Invalid term override for",a.type,E),f.$_terms[E]=h.init,p[E]=h}a.terms=p,a.args||(a.args=u.args),a.prepare=e.prepare(a.prepare,u.prepare),a.coerce&&(typeof a.coerce=="function"&&(a.coerce={method:a.coerce}),a.coerce.from&&!Array.isArray(a.coerce.from)&&(a.coerce={method:a.coerce.method,from:[].concat(a.coerce.from)})),a.coerce=e.coerce(a.coerce,u.coerce),a.validate=e.validate(a.validate,u.validate);const x=Object.assign({},u.rules);if(a.rules)for(const E in a.rules){const h=a.rules[E];r(typeof h=="object","Invalid rule definition for",a.type,E);let w=h.method;if(w===void 0&&(w=function(){return this.$_addRule(E)}),w&&(r(!s[E],"Rule conflict in",a.type,E),s[E]=w),r(!x[E],"Rule conflict in",a.type,E),x[E]=h,h.alias){const T=[].concat(h.alias);for(const R of T)s[R]=h.method}h.args&&(h.argsByName=new Map,h.args=h.args.map((T=>(typeof T=="string"&&(T={name:T}),r(!h.argsByName.has(T.name),"Duplicated argument name",T.name),y.isSchema(T.assert)&&(T.assert=T.assert.strict().label(T.name)),h.argsByName.set(T.name,T),T))))}a.rules=x;const k=Object.assign({},u.modifiers);if(a.modifiers)for(const E in a.modifiers){r(!s[E],"Rule conflict in",a.type,E);const h=a.modifiers[E];r(typeof h=="function","Invalid modifier definition for",a.type,E);const w=function(T){return this.rule({[E]:T})};s[E]=w,k[E]=h}if(a.modifiers=k,a.overrides){s._super=i,f.$_super={};for(const E in a.overrides)r(i[E],"Cannot override missing",E),a.overrides[E][y.symbols.parent]=i[E],f.$_super[E]=i[E].bind(f);Object.assign(s,a.overrides)}a.cast=Object.assign({},u.cast,a.cast);const A=Object.assign({},u.manifest,a.manifest);return A.build=e.build(a.manifest&&a.manifest.build,u.manifest&&u.manifest.build),a.manifest=A,a.rebuild=e.rebuild(a.rebuild,u.rebuild),f},e.build=function(o,l){return o&&l?function(i,s){return l(o(i,s),s)}:o||l},e.coerce=function(o,l){return o&&l?{from:o.from&&l.from?[...new Set([...o.from,...l.from])]:null,method(i,s){let f;if((!l.from||l.from.includes(typeof i))&&(f=l.method(i,s),f)){if(f.errors||f.value===void 0)return f;i=f.value}if(!o.from||o.from.includes(typeof i)){const a=o.method(i,s);if(a)return a}return f}}:o||l},e.prepare=function(o,l){return o&&l?function(i,s){const f=o(i,s);if(f){if(f.errors||f.value===void 0)return f;i=f.value}return l(i,s)||f}:o||l},e.rebuild=function(o,l){return o&&l?function(i){l(i),o(i)}:o||l},e.validate=function(o,l){return o&&l?function(i,s){const f=l(i,s);if(f){if(f.errors&&(!Array.isArray(f.errors)||f.errors.length))return f;i=f.value}return o(i,s)||f}:o||l}},5107:(_,v,g)=>{const r=g(375),b=g(8571),y=g(8652),m=g(8160),e=g(3292),o=g(6354),l=g(8901),i=g(9708),s=g(6133),f=g(3328),a=g(1152);let u;const p={types:{alternatives:g(4946),any:g(8068),array:g(546),boolean:g(4937),date:g(7500),function:g(390),link:g(8785),number:g(3832),object:g(8966),string:g(7417),symbol:g(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const x={_types:new Set(Object.keys(p.types))};for(const k of x._types)x[k]=function(...A){return r(!A.length||["alternatives","link","object"].includes(k),"The",k,"type does not allow arguments"),p.generate(this,p.types[k],A)};for(const k of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])x[k]=function(...A){return this.any()[k](...A)};Object.assign(x,p.methods);for(const k in p.aliases){const A=p.aliases[k];x[k]=x[A]}return x.x=x.expression,a.setup&&a.setup(x),x}};p.methods={ValidationError:o.ValidationError,version:m.version,cache:y.provider,assert(x,k,...A){p.assert(x,k,!0,A)},attempt:(x,k,...A)=>p.assert(x,k,!1,A),build(x){return r(typeof i.build=="function","Manifest functionality disabled"),i.build(this,x)},checkPreferences(x){m.checkPreferences(x)},compile(x,k){return e.compile(this,x,k)},defaults(x){r(typeof x=="function","modifier must be a function");const k=Object.assign({},this);for(const A of k._types){const E=x(k[A]());r(m.isSchema(E),"modifier must return a valid schema object"),k[A]=function(...h){return p.generate(this,E,h)}}return k},expression:(...x)=>new f(...x),extend(...x){m.verifyFlat(x,"extend"),u=u||g(3378),r(x.length,"You need to provide at least one extension"),this.assert(x,u.extensions);const k=Object.assign({},this);k._types=new Set(k._types);for(let A of x){typeof A=="function"&&(A=A(k)),this.assert(A,u.extension);const E=p.expandExtension(A,k);for(const h of E){r(k[h.type]===void 0||k._types.has(h.type),"Cannot override name",h.type);const w=h.base||this.any(),T=l.type(w,h);k._types.add(h.type),k[h.type]=function(...R){return p.generate(this,T,R)}}}return k},isError:o.ValidationError.isError,isExpression:f.isTemplate,isRef:s.isRef,isSchema:m.isSchema,in:(...x)=>s.in(...x),override:m.symbols.override,ref:(...x)=>s.create(...x),types(){const x={};for(const k of this._types)x[k]=this[k]();for(const k in p.aliases)x[k]=this[k]();return x}},p.assert=function(x,k,A,E){const h=E[0]instanceof Error||typeof E[0]=="string"?E[0]:null,w=h!==null?E[1]:E[0],T=k.validate(x,m.preferences({errors:{stack:!0}},w||{}));let R=T.error;if(!R)return T.value;if(h instanceof Error)throw h;const j=A&&typeof R.annotate=="function"?R.annotate():R.message;throw R instanceof o.ValidationError==0&&(R=b(R)),R.message=h?`${h} ${j}`:j,R},p.generate=function(x,k,A){return r(x,"Must be invoked on a Joi instance."),k.$_root=x,k._definition.args&&A.length?k._definition.args(k,...A):k},p.expandExtension=function(x,k){if(typeof x.type=="string")return[x];const A=[];for(const E of k._types)if(x.type.test(E)){const h=Object.assign({},x);h.type=E,h.base=k[E](),A.push(h)}return A},_.exports=p.root()},6914:(_,v,g)=>{const r=g(375),b=g(8571),y=g(3328);v.compile=function(m,e){if(typeof m=="string")return r(!e,"Cannot set single message string"),new y(m);if(y.isTemplate(m))return r(!e,"Cannot set single message template"),m;r(typeof m=="object"&&!Array.isArray(m),"Invalid message options"),e=e?b(e):{};for(let o in m){const l=m[o];if(o==="root"||y.isTemplate(l)){e[o]=l;continue}if(typeof l=="string"){e[o]=new y(l);continue}r(typeof l=="object"&&!Array.isArray(l),"Invalid message for",o);const i=o;for(o in e[i]=e[i]||{},l){const s=l[o];o==="root"||y.isTemplate(s)?e[i][o]=s:(r(typeof s=="string","Invalid message for",o,"in",i),e[i][o]=new y(s))}}return e},v.decompile=function(m){const e={};for(let o in m){const l=m[o];if(o==="root"){e.root=l;continue}if(y.isTemplate(l)){e[o]=l.describe({compact:!0});continue}const i=o;for(o in e[i]={},l){const s=l[o];o!=="root"?e[i][o]=s.describe({compact:!0}):e[i].root=s}}return e},v.merge=function(m,e){if(!m)return v.compile(e);if(!e)return m;if(typeof e=="string")return new y(e);if(y.isTemplate(e))return e;const o=b(m);for(let l in e){const i=e[l];if(l==="root"||y.isTemplate(i)){o[l]=i;continue}if(typeof i=="string"){o[l]=new y(i);continue}r(typeof i=="object"&&!Array.isArray(i),"Invalid message for",l);const s=l;for(l in o[s]=o[s]||{},i){const f=i[l];l==="root"||y.isTemplate(f)?o[s][l]=f:(r(typeof f=="string","Invalid message for",l,"in",s),o[s][l]=new y(f))}}return o}},2294:(_,v,g)=>{const r=g(375),b=g(8160),y=g(6133),m={};v.Ids=m.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new m.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[o,l]of e._byId.entries())r(!this._byKey.has(o),"Schema id conflicts with existing key:",o),this._byId.set(o,l);for(const[o,l]of e._byKey.entries())r(!this._byId.has(o),"Schema key conflicts with existing id:",o),this._byKey.set(o,l)}fork(e,o,l){const i=this._collect(e);i.push({schema:l});const s=i.shift();let f={id:s.id,schema:o(s.schema)};r(b.isSchema(f.schema),"adjuster function failed to return a joi schema type");for(const a of i)f={id:a.id,schema:m.fork(a.schema,f.id,f.schema)};return f.schema}labels(e,o=[]){const l=e[0],i=this._get(l);if(!i)return[...o,...e].join(".");const s=e.slice(1);return o=[...o,i.schema._flags.label||l],s.length?i.schema._ids.labels(s,o):o.join(".")}reach(e,o=[]){const l=e[0],i=this._get(l);r(i,"Schema does not contain path",[...o,...e].join("."));const s=e.slice(1);return s.length?i.schema._ids.reach(s,[...o,l]):i.schema}register(e,{key:o}={}){if(!e||!b.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const l=e._flags.id;if(l){const i=this._byId.get(l);r(!i||i.schema===e,"Cannot add different schemas with the same id:",l),r(!this._byKey.has(l),"Schema id conflicts with existing key:",l),this._byId.set(l,{schema:e,id:l})}o&&(r(!this._byKey.has(o),"Schema already contains key:",o),r(!this._byId.has(o),"Schema key conflicts with existing id:",o),this._byKey.set(o,{schema:e,id:o}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,o=[],l=[]){const i=e[0],s=this._get(i);r(s,"Schema does not contain path",[...o,...e].join(".")),l=[s,...l];const f=e.slice(1);return f.length?s.schema._ids._collect(f,[...o,i],l):l}_get(e){return this._byId.get(e)||this._byKey.get(e)}},m.fork=function(e,o,l){const i=v.schema(e,{each:(s,{key:f})=>{if(o===(s._flags.id||f))return l},ref:!1});return i?i.$_mutateRebuild():e},v.schema=function(e,o){let l;for(const i in e._flags){if(i[0]==="_")continue;const s=m.scan(e._flags[i],{source:"flags",name:i},o);s!==void 0&&(l=l||e.clone(),l._flags[i]=s)}for(let i=0;i<e._rules.length;++i){const s=e._rules[i],f=m.scan(s.args,{source:"rules",name:s.name},o);if(f!==void 0){l=l||e.clone();const a=Object.assign({},s);a.args=f,l._rules[i]=a,l._singleRules.get(s.name)===s&&l._singleRules.set(s.name,a)}}for(const i in e.$_terms){if(i[0]==="_")continue;const s=m.scan(e.$_terms[i],{source:"terms",name:i},o);s!==void 0&&(l=l||e.clone(),l.$_terms[i]=s)}return l},m.scan=function(e,o,l,i,s){const f=i||[];if(e===null||typeof e!="object")return;let a;if(Array.isArray(e)){for(let u=0;u<e.length;++u){const p=o.source==="terms"&&o.name==="keys"&&e[u].key,x=m.scan(e[u],o,l,[u,...f],p);x!==void 0&&(a=a||e.slice(),a[u]=x)}return a}if(l.schema!==!1&&b.isSchema(e)||l.ref!==!1&&y.isRef(e)){const u=l.each(e,{...o,path:f,key:s});return u===e?void 0:u}for(const u in e){if(u[0]==="_")continue;const p=m.scan(e[u],o,l,[u,...f],s);p!==void 0&&(a=a||Object.assign({},e),a[u]=p)}return a}},6133:(_,v,g)=>{const r=g(375),b=g(8571),y=g(9621),m=g(8160);let e;const o={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};v.create=function(l,i={}){r(typeof l=="string","Invalid reference key:",l),m.assertOptions(i,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),r(!i.prefix||typeof i.prefix=="object","options.prefix must be of type object");const s=Object.assign({},o.defaults,i);delete s.prefix;const f=s.separator,a=o.context(l,f,i.prefix);if(s.type=a.type,l=a.key,s.type==="value")if(a.root&&(r(!f||l[0]!==f,"Cannot specify relative path with root prefix"),s.ancestor="root",l||(l=null)),f&&f===l)l=null,s.ancestor=0;else if(s.ancestor!==void 0)r(!f||!l||l[0]!==f,"Cannot combine prefix with ancestor option");else{const[u,p]=o.ancestor(l,f);p&&(l=l.slice(p))===""&&(l=null),s.ancestor=u}return s.path=f?l===null?[]:l.split(f):[l],new o.Ref(s)},v.in=function(l,i={}){return v.create(l,{...i,in:!0})},v.isRef=function(l){return!!l&&!!l[m.symbols.ref]},o.Ref=class{constructor(l){r(typeof l=="object","Invalid reference construction"),m.assertOptions(l,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),r([!1,void 0].includes(l.separator)||typeof l.separator=="string"&&l.separator.length===1,"Invalid separator"),r(!l.adjust||typeof l.adjust=="function","options.adjust must be a function"),r(!l.map||Array.isArray(l.map),"options.map must be an array"),r(!l.map||!l.adjust,"Cannot set both map and adjust options"),Object.assign(this,o.defaults,l),r(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(l,i,s,f,a={}){return r(!this.in||a.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(s.context,i,a):this.type==="local"?this._resolve(f,i,a):this.ancestor?this.ancestor==="root"?this._resolve(i.ancestors[i.ancestors.length-1],i,a):(r(this.ancestor<=i.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(i.ancestors[this.ancestor-1],i,a)):this._resolve(l,i,a)}_resolve(l,i,s){let f;if(this.type==="value"&&i.mainstay.shadow&&s.shadow!==!1&&(f=i.mainstay.shadow.get(this.absolute(i))),f===void 0&&(f=y(l,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(f=this.adjust(f)),this.map){const a=this.map.get(f);a!==void 0&&(f=a)}return i.mainstay&&i.mainstay.tracer.resolve(i,this,f),f}toString(){return this.display}absolute(l){return[...l.path.slice(0,-this.ancestor),...this.path]}clone(){return new o.Ref(this)}describe(){const l={path:this.path};this.type!=="value"&&(l.type=this.type),this.separator!=="."&&(l.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(l.ancestor=this.ancestor),this.map&&(l.map=[...this.map]);for(const i of["adjust","iterables","render"])this[i]!==null&&this[i]!==void 0&&(l[i]=this[i]);return this.in!==!1&&(l.in=!0),{ref:l}}updateDisplay(){const l=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${l}`);if(!this.separator)return void(this.display=`ref:${l}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${l}`);if(this.ancestor==="root")return void(this.display=`ref:root:${l}`);if(this.ancestor===1)return void(this.display=`ref:${l||".."}`);const i=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${i}${l||""}`}},o.Ref.prototype[m.symbols.ref]=!0,v.build=function(l){return(l=Object.assign({},o.defaults,l)).type==="value"&&l.ancestor===void 0&&(l.ancestor=1),new o.Ref(l)},o.context=function(l,i,s={}){if(l=l.trim(),s){const f=s.global===void 0?"$":s.global;if(f!==i&&l.startsWith(f))return{key:l.slice(f.length),type:"global"};const a=s.local===void 0?"#":s.local;if(a!==i&&l.startsWith(a))return{key:l.slice(a.length),type:"local"};const u=s.root===void 0?"/":s.root;if(u!==i&&l.startsWith(u))return{key:l.slice(u.length),type:"value",root:!0}}return{key:l,type:"value"}},o.ancestor=function(l,i){if(!i)return[1,0];if(l[0]!==i)return[1,0];if(l[1]!==i)return[0,1];let s=2;for(;l[s]===i;)++s;return[s-1,s]},v.toSibling=0,v.toParent=1,v.Manager=class{constructor(){this.refs=[]}register(l,i){if(l)if(i=i===void 0?v.toParent:i,Array.isArray(l))for(const s of l)this.register(s,i);else if(m.isSchema(l))for(const s of l._refs.refs)s.ancestor-i>=0&&this.refs.push({ancestor:s.ancestor-i,root:s.root});else v.isRef(l)&&l.type==="value"&&l.ancestor-i>=0&&this.refs.push({ancestor:l.ancestor-i,root:l.root}),e=e||g(3328),e.isTemplate(l)&&this.register(l.refs(),i)}get length(){return this.refs.length}clone(){const l=new v.Manager;return l.refs=b(this.refs),l}reset(){this.refs=[]}roots(){return this.refs.filter((l=>!l.ancestor)).map((l=>l.root))}}},3378:(_,v,g)=>{const r=g(5107),b={};b.wrap=r.string().min(1).max(2).allow(!1),v.preferences=r.object({allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),context:r.object(),convert:r.boolean(),dateFormat:r.valid("date","iso","string","time","utc"),debug:r.boolean(),errors:{escapeHtml:r.boolean(),label:r.valid("path","key",!1),language:[r.string(),r.object().ref()],render:r.boolean(),stack:r.boolean(),wrap:{label:b.wrap,array:b.wrap,string:b.wrap}},externals:r.boolean(),messages:r.object(),noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:r.valid("required","optional","forbidden"),skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()}).strict(),b.nameRx=/^[a-zA-Z0-9]\w*$/,b.rule=r.object({alias:r.array().items(r.string().pattern(b.nameRx)).single(),args:r.array().items(r.string(),r.object({name:r.string().pattern(b.nameRx).required(),ref:r.boolean(),assert:r.alternatives([r.function(),r.object().schema()]).conditional("ref",{is:!0,then:r.required()}),normalize:r.function(),message:r.string().when("assert",{is:r.function(),then:r.required()})})),convert:r.boolean(),manifest:r.boolean(),method:r.function().allow(!1),multi:r.boolean(),validate:r.function()}),v.extension=r.object({type:r.alternatives([r.string(),r.object().regex()]).required(),args:r.function(),cast:r.object().pattern(b.nameRx,r.object({from:r.function().maxArity(1).required(),to:r.function().minArity(1).maxArity(2).required()})),base:r.object().schema().when("type",{is:r.object().regex(),then:r.forbidden()}),coerce:[r.function().maxArity(3),r.object({method:r.function().maxArity(3).required(),from:r.array().items(r.string()).single()})],flags:r.object().pattern(b.nameRx,r.object({setter:r.string(),default:r.any()})),manifest:{build:r.function().arity(2)},messages:[r.object(),r.string()],modifiers:r.object().pattern(b.nameRx,r.function().minArity(1).maxArity(2)),overrides:r.object().pattern(b.nameRx,r.function()),prepare:r.function().maxArity(3),rebuild:r.function().arity(1),rules:r.object().pattern(b.nameRx,b.rule),terms:r.object().pattern(b.nameRx,r.object({init:r.array().allow(null).required(),manifest:r.object().pattern(/.+/,[r.valid("schema","single"),r.object({mapped:r.object({from:r.string().required(),to:r.string().required()}).required()})])})),validate:r.function().maxArity(3)}).strict(),v.extensions=r.array().items(r.object(),r.function().arity(1)).strict(),b.desc={buffer:r.object({buffer:r.string()}),func:r.object({function:r.function().required(),options:{literal:!0}}),override:r.object({override:!0}),ref:r.object({ref:r.object({type:r.valid("value","global","local"),path:r.array().required(),separator:r.string().length(1).allow(!1),ancestor:r.number().min(0).integer().allow("root"),map:r.array().items(r.array().length(2)).min(1),adjust:r.function(),iterables:r.boolean(),in:r.boolean(),render:r.boolean()}).required()}),regex:r.object({regex:r.string().min(3)}),special:r.object({special:r.valid("deep").required()}),template:r.object({template:r.string().required(),options:r.object()}),value:r.object({value:r.alternatives([r.object(),r.array()]).required()})},b.desc.entity=r.alternatives([r.array().items(r.link("...")),r.boolean(),r.function(),r.number(),r.string(),b.desc.buffer,b.desc.func,b.desc.ref,b.desc.regex,b.desc.special,b.desc.template,b.desc.value,r.link("/")]),b.desc.values=r.array().items(null,r.boolean(),r.function(),r.number().allow(1/0,-1/0),r.string().allow(""),r.symbol(),b.desc.buffer,b.desc.func,b.desc.override,b.desc.ref,b.desc.regex,b.desc.template,b.desc.value),b.desc.messages=r.object().pattern(/.+/,[r.string(),b.desc.template,r.object().pattern(/.+/,[r.string(),b.desc.template])]),v.description=r.object({type:r.string().required(),flags:r.object({cast:r.string(),default:r.any(),description:r.string(),empty:r.link("/"),failover:b.desc.entity,id:r.string(),label:r.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:r.boolean(),unit:r.string()}).unknown(),preferences:{allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),convert:r.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:r.boolean(),label:["path","key"],language:[r.string(),b.desc.ref],wrap:{label:b.wrap,array:b.wrap}},externals:r.boolean(),messages:b.desc.messages,noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:["required","optional","forbidden"],skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()},allow:b.desc.values,invalid:b.desc.values,rules:r.array().min(1).items({name:r.string().required(),args:r.object().min(1),keep:r.boolean(),message:[r.string(),b.desc.messages],warn:r.boolean()}),keys:r.object().pattern(/.*/,r.link("/")),link:b.desc.ref}).pattern(/^[a-z]\w*$/,r.any())},493:(_,v,g)=>{const r=g(8571),b=g(9621),y=g(8160),m={value:Symbol("value")};_.exports=m.State=class{constructor(e,o,l){this.path=e,this.ancestors=o,this.mainstay=l.mainstay,this.schemas=l.schemas,this.debug=null}localize(e,o=null,l=null){const i=new m.State(e,o,this);return l&&i.schemas&&(i.schemas=[m.schemas(l),...i.schemas]),i}nest(e,o){const l=new m.State(this.path,this.ancestors,this);return l.schemas=l.schemas&&[m.schemas(e),...l.schemas],l.debug=o,l}shadow(e,o){this.mainstay.shadow=this.mainstay.shadow||new m.Shadow,this.mainstay.shadow.set(this.path,e,o)}snapshot(){this.mainstay.shadow&&(this._snapshot=r(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},m.schemas=function(e){return y.isSchema(e)?{schema:e}:e},m.Shadow=class{constructor(){this._values=null}set(e,o,l){if(!e.length||l==="strip"&&typeof e[e.length-1]=="number")return;this._values=this._values||new Map;let i=this._values;for(let s=0;s<e.length;++s){const f=e[s];let a=i.get(f);a||(a=new Map,i.set(f,a)),i=a}i[m.value]=o}get(e){const o=this.node(e);if(o)return o[m.value]}node(e){if(this._values)return b(this._values,e,{iterables:!0})}override(e,o){if(!this._values)return;const l=e.slice(0,-1),i=e[e.length-1],s=b(this._values,l,{iterables:!0});o?s.set(i,o):s&&s.delete(i)}}},3328:(_,v,g)=>{const r=g(375),b=g(8571),y=g(5277),m=g(1447),e=g(8160),o=g(6354),l=g(6133),i={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};_.exports=i.Template=class{constructor(s,f){if(r(typeof s=="string","Template source must be a string"),r(!s.includes("\0")&&!s.includes(""),"Template source cannot contain reserved control characters"),this.source=s,this.rendered=s,this._template=null,f){const{functions:a,...u}=f;this._settings=Object.keys(u).length?b(u):void 0,this._functions=a,this._functions&&(r(Object.keys(this._functions).every((p=>typeof p=="string")),"Functions keys must be strings"),r(Object.values(this._functions).every((p=>typeof p=="function")),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const s=i.encode(this.source),f=i.split(s);let a=!1;const u=[],p=f.shift();p&&u.push(p);for(const x of f){const k=x[0]!=="{",A=k?"}":"}}",E=x.indexOf(A);if(E===-1||x[1]==="{"){u.push(`{${i.decode(x)}`);continue}let h=x.slice(k?0:1,E);const w=h[0]===":";w&&(h=h.slice(1));const T=this._ref(i.decode(h),{raw:k,wrapped:w});u.push(T),typeof T!="string"&&(a=!0);const R=x.slice(E+A.length);R&&u.push(i.decode(R))}a?this._template=u:this.rendered=u.join("")}static date(s,f){return i.dateFormat[f.dateFormat].call(s)}describe(s={}){if(!this._settings&&s.compact)return this.source;const f={template:this.source};return this._settings&&(f.options=this._settings),this._functions&&(f.functions=this._functions),f}static build(s){return new i.Template(s.template,s.options||s.functions?{...s.options,functions:s.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(s){return!!s&&!!s[e.symbols.template]}refs(){if(!this._template)return;const s=[];for(const f of this._template)typeof f!="string"&&s.push(...f.refs);return s}resolve(s,f,a,u){return this._template&&this._template.length===1?this._part(this._template[0],s,f,a,u,{}):this.render(s,f,a,u)}_part(s,...f){return s.ref?s.ref.resolve(...f):s.formula.evaluate(f)}render(s,f,a,u,p={}){if(!this.isDynamic())return this.rendered;const x=[];for(const k of this._template)if(typeof k=="string")x.push(k);else{const A=this._part(k,s,f,a,u,p),E=i.stringify(A,s,f,a,u,p);if(E!==void 0){const h=k.raw||(p.errors&&p.errors.escapeHtml)===!1?E:y(E);x.push(i.wrap(h,k.wrapped&&a.errors.wrap.label))}}return x.join("")}_ref(s,{raw:f,wrapped:a}){const u=[],p=k=>{const A=l.create(k,this._settings);return u.push(A),E=>{const h=A.resolve(...E);return h!==void 0?h:null}};try{const k=this._functions?{...i.functions,...this._functions}:i.functions;var x=new m.Parser(s,{reference:p,functions:k,constants:i.constants})}catch(k){throw k.message=`Invalid template variable "${s}" fails due to: ${k.message}`,k}if(x.single){if(x.single.type==="reference"){const k=u[0];return{ref:k,raw:f,refs:u,wrapped:a||k.type==="local"&&k.key==="label"}}return i.stringify(x.single.value)}return{formula:x,raw:f,refs:u}}toString(){return this.source}},i.Template.prototype[e.symbols.template]=!0,i.Template.prototype.isImmutable=!0,i.encode=function(s){return s.replace(/\\(\{+)/g,((f,a)=>i.opens.slice(0,a.length))).replace(/\\(\}+)/g,((f,a)=>i.closes.slice(0,a.length)))},i.decode=function(s){return s.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},i.split=function(s){const f=[];let a="";for(let u=0;u<s.length;++u){const p=s[u];if(p==="{"){let x="";for(;u+1<s.length&&s[u+1]==="{";)x+="{",++u;f.push(a),a=x}else a+=p}return f.push(a),f},i.wrap=function(s,f){return f?f.length===1?`${f}${s}${f}`:`${f[0]}${s}${f[1]}`:s},i.stringify=function(s,f,a,u,p,x={}){const k=typeof s,A=u&&u.errors&&u.errors.wrap||{};let E=!1;if(l.isRef(s)&&s.render&&(E=s.in,s=s.resolve(f,a,u,p,{in:s.in,...x})),s===null)return"null";if(k==="string")return i.wrap(s,x.arrayItems&&A.string);if(k==="number"||k==="function"||k==="symbol")return s.toString();if(k!=="object")return JSON.stringify(s);if(s instanceof Date)return i.Template.date(s,u);if(s instanceof Map){const w=[];for(const[T,R]of s.entries())w.push(`${T.toString()} -> ${R.toString()}`);s=w}if(!Array.isArray(s))return s.toString();const h=[];for(const w of s)h.push(i.stringify(w,f,a,u,p,{arrayItems:!0,...x}));return i.wrap(h.join(", "),!E&&A.array)},i.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},i.functions={if:(s,f,a)=>s?f:a,length:s=>typeof s=="string"?s.length:s&&typeof s=="object"?Array.isArray(s)?s.length:Object.keys(s).length:null,msg(s){const[f,a,u,p,x]=this,k=x.messages;if(!k)return"";const A=o.template(f,k[0],s,a,u)||o.template(f,k[1],s,a,u);return A?A.render(f,a,u,p,x):""},number:s=>typeof s=="number"?s:typeof s=="string"?parseFloat(s):typeof s=="boolean"?s?1:0:s instanceof Date?s.getTime():null}},4946:(_,v,g)=>{const r=g(375),b=g(1687),y=g(8068),m=g(8160),e=g(3292),o=g(6354),l=g(6133),i={};_.exports=y.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:l.toSibling}},args:(s,...f)=>f.length===1&&Array.isArray(f[0])?s.try(...f[0]):s.try(...f),validate(s,f){const{schema:a,error:u,state:p,prefs:x}=f;if(a._flags.match){const A=[],E=[];for(let w=0;w<a.$_terms.matches.length;++w){const T=a.$_terms.matches[w],R=p.nest(T.schema,`match.${w}`);R.snapshot();const j=T.schema.$_validate(s,R,x);j.errors?(E.push(j.errors),R.restore()):(A.push(j.value),R.commit())}if(A.length===0)return{errors:u("alternatives.any",{details:E.map((w=>o.details(w,{override:!1})))})};if(a._flags.match==="one")return A.length===1?{value:A[0]}:{errors:u("alternatives.one")};if(A.length!==a.$_terms.matches.length)return{errors:u("alternatives.all",{details:E.map((w=>o.details(w,{override:!1})))})};const h=w=>w.$_terms.matches.some((T=>T.schema.type==="object"||T.schema.type==="alternatives"&&h(T.schema)));return h(a)?{value:A.reduce(((w,T)=>b(w,T,{mergeArrays:!1})))}:{value:A[A.length-1]}}const k=[];for(let A=0;A<a.$_terms.matches.length;++A){const E=a.$_terms.matches[A];if(E.schema){const T=p.nest(E.schema,`match.${A}`);T.snapshot();const R=E.schema.$_validate(s,T,x);if(!R.errors)return T.commit(),R;T.restore(),k.push({schema:E.schema,reports:R.errors});continue}const h=E.ref?E.ref.resolve(s,p,x):s,w=E.is?[E]:E.switch;for(let T=0;T<w.length;++T){const R=w[T],{is:j,then:C,otherwise:$}=R,M=`match.${A}${E.switch?"."+T:""}`;if(j.$_match(h,p.nest(j,`${M}.is`),x)){if(C)return C.$_validate(s,p.nest(C,`${M}.then`),x)}else if($)return $.$_validate(s,p.nest($,`${M}.otherwise`),x)}}return i.errors(k,f)},rules:{conditional:{method(s,f){r(!this._flags._endedSwitch,"Unreachable condition"),r(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),r(f.break===void 0,"Cannot use break option with alternatives conditional");const a=this.clone(),u=e.when(a,s,f),p=u.is?[u]:u.switch;for(const x of p)if(x.then&&x.otherwise){a.$_setFlag("_endedSwitch",!0,{clone:!1});break}return a.$_terms.matches.push(u),a.$_mutateRebuild()}},match:{method(s){if(r(["any","one","all"].includes(s),"Invalid alternatives match mode",s),s!=="any")for(const f of this.$_terms.matches)r(f.schema,"Cannot combine match mode",s,"with conditional rules");return this.$_setFlag("match",s)}},try:{method(...s){r(s.length,"Missing alternative schemas"),m.verifyFlat(s,"try"),r(!this._flags._endedSwitch,"Unreachable condition");const f=this.clone();for(const a of s)f.$_terms.matches.push({schema:f.$_compile(a)});return f.$_mutateRebuild()}}},overrides:{label(s){return this.$_parent("label",s).$_modify({each:(f,a)=>a.path[0]!=="is"&&typeof f._flags.label!="string"?f.label(s):void 0,ref:!1})}},rebuild(s){s.$_modify({each:f=>{m.isSchema(f)&&f.type==="array"&&s.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(s,f){if(f.matches)for(const a of f.matches){const{schema:u,ref:p,is:x,not:k,then:A,otherwise:E}=a;s=u?s.try(u):p?s.conditional(p,{is:x,then:A,not:k,otherwise:E,switch:a.switch}):s.conditional(x,{then:A,otherwise:E})}return s}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),i.errors=function(s,{error:f,state:a}){if(!s.length)return{errors:f("alternatives.any")};if(s.length===1)return{errors:s[0].reports};const u=new Set,p=[];for(const{reports:x,schema:k}of s){if(x.length>1)return i.unmatched(s,f);const A=x[0];if(A instanceof o.Report==0)return i.unmatched(s,f);if(A.state.path.length!==a.path.length){p.push({type:k.type,report:A});continue}if(A.code==="any.only"){for(const w of A.local.valids)u.add(w);continue}const[E,h]=A.code.split(".");h!=="base"?p.push({type:k.type,report:A}):A.code==="object.base"?u.add(A.local.type):u.add(E)}return p.length?p.length===1?{errors:p[0].report}:i.unmatched(s,f):{errors:f("alternatives.types",{types:[...u]})}},i.unmatched=function(s,f){const a=[];for(const u of s)a.push(...u.reports);return{errors:f("alternatives.match",o.details(a,{override:!1}))}}},8068:(_,v,g)=>{const r=g(375),b=g(7629),y=g(8160),m=g(6914);_.exports=b.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,o){return r(typeof e=="function","Method must be a function"),r(o===void 0||o&&typeof o=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:o}})},validate(e,o,{method:l}){try{return l(e,o)}catch(i){return o.error("any.custom",{error:i})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){r(y.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const o=this.clone();return o.$_terms.shared=o.$_terms.shared||[],o.$_terms.shared.push(e),o.$_mutateRegister(e),o}},warning:{method(e,o){return r(e&&typeof e=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:o},warn:!0})},validate:(e,o,{code:l,local:i})=>o.error(l,i),args:["code","local"],multi:!0}},modifiers:{keep(e,o=!0){e.keep=o},message(e,o){e.message=m.compile(o)},warn(e,o=!0){e.warn=o}},manifest:{build(e,o){for(const l in o){const i=o[l];if(["examples","externals","metas","notes","tags"].includes(l))for(const s of i)e=e[l.slice(0,-1)](s);else if(l!=="alterations")if(l!=="whens"){if(l==="shared")for(const s of i)e=e.shared(s)}else for(const s of i){const{ref:f,is:a,not:u,then:p,otherwise:x,concat:k}=s;e=k?e.concat(k):f?e.when(f,{is:a,not:u,then:p,otherwise:x,switch:s.switch,break:s.break}):e.when(a,{then:p,otherwise:x,break:s.break})}else{const s={};for(const{target:f,adjuster:a}of i)s[f]=a;e=e.alter(s)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(_,v,g)=>{const r=g(375),b=g(9474),y=g(9621),m=g(8068),e=g(8160),o=g(3292),l={};_.exports=m.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(i,{schema:s,state:f,prefs:a}){if(!Array.isArray(i))return;const u=s.$_getRule("sort");return u?l.sort(s,i,u.args.options,f,a):void 0}},validate(i,{schema:s,error:f}){if(!Array.isArray(i)){if(s._flags.single){const a=[i];return a[e.symbols.arraySingle]=!0,{value:a}}return{errors:f("array.base")}}if(s.$_getRule("items")||s.$_terms.externals)return{value:i.slice()}},rules:{has:{method(i){i=this.$_compile(i,{appendPath:!0});const s=this.$_addRule({name:"has",args:{schema:i}});return s.$_mutateRegister(i),s},validate(i,{state:s,prefs:f,error:a},{schema:u}){const p=[i,...s.ancestors];for(let k=0;k<i.length;++k){const A=s.localize([...s.path,k],p,u);if(u.$_match(i[k],A,f))return i}const x=u._flags.label;return x?a("array.hasKnown",{patternLabel:x}):a("array.hasUnknown",null)},multi:!0},items:{method(...i){e.verifyFlat(i,"items");const s=this.$_addRule("items");for(let f=0;f<i.length;++f){const a=e.tryWithPath((()=>this.$_compile(i[f])),f,{append:!0});s.$_terms.items.push(a)}return s.$_mutateRebuild()},validate(i,{schema:s,error:f,state:a,prefs:u,errorsArray:p}){const x=s.$_terms._requireds.slice(),k=s.$_terms.ordered.slice(),A=[...s.$_terms._inclusions,...x],E=!i[e.symbols.arraySingle];delete i[e.symbols.arraySingle];const h=p();let w=i.length;for(let T=0;T<w;++T){const R=i[T];let j=!1,C=!1;const $=E?T:new Number(T),M=[...a.path,$];if(!s._flags.sparse&&R===void 0){if(h.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),u.abortEarly)return h;k.shift();continue}const L=[i,...a.ancestors];for(const H of s.$_terms._exclusions)if(H.$_match(R,a.localize(M,L,H),u,{presence:"ignore"})){if(h.push(f("array.excludes",{pos:T,value:R},a.localize(M))),u.abortEarly)return h;j=!0,k.shift();break}if(j)continue;if(s.$_terms.ordered.length){if(k.length){const H=k.shift(),D=H.$_validate(R,a.localize(M,L,H),u);if(D.errors){if(h.push(...D.errors),u.abortEarly)return h}else if(H._flags.result==="strip")l.fastSplice(i,T),--T,--w;else{if(!s._flags.sparse&&D.value===void 0){if(h.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),u.abortEarly)return h;continue}i[T]=D.value}continue}if(!s.$_terms.items.length){if(h.push(f("array.orderedLength",{pos:T,limit:s.$_terms.ordered.length})),u.abortEarly)return h;break}}const z=[];let K=x.length;for(let H=0;H<K;++H){const D=a.localize(M,L,x[H]);D.snapshot();const J=x[H].$_validate(R,D,u);if(z[H]=J,!J.errors){if(D.commit(),i[T]=J.value,C=!0,l.fastSplice(x,H),--H,--K,!s._flags.sparse&&J.value===void 0&&(h.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),u.abortEarly))return h;break}D.restore()}if(C)continue;const ee=u.stripUnknown&&!!u.stripUnknown.arrays||!1;K=A.length;for(const H of A){let D;const J=x.indexOf(H);if(J!==-1)D=z[J];else{const P=a.localize(M,L,H);if(P.snapshot(),D=H.$_validate(R,P,u),!D.errors){P.commit(),H._flags.result==="strip"?(l.fastSplice(i,T),--T,--w):s._flags.sparse||D.value!==void 0?i[T]=D.value:(h.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),j=!0),C=!0;break}P.restore()}if(K===1){if(ee){l.fastSplice(i,T),--T,--w,C=!0;break}if(h.push(...D.errors),u.abortEarly)return h;j=!0;break}}if(!j&&(s.$_terms._inclusions.length||s.$_terms._requireds.length)&&!C){if(ee){l.fastSplice(i,T),--T,--w;continue}if(h.push(f("array.includes",{pos:T,value:R},a.localize(M))),u.abortEarly)return h}}return x.length&&l.fillMissedErrors(s,h,x,i,a,u),k.length&&(l.fillOrderedErrors(s,h,k,i,a,u),h.length||l.fillDefault(k,i,a,u)),h.length?h:i},priority:!0,manifest:!1},length:{method(i){return this.$_addRule({name:"length",args:{limit:i},operator:"="})},validate:(i,s,{limit:f},{name:a,operator:u,args:p})=>e.compare(i.length,f,u)?i:s.error("array."+a,{limit:p.limit,value:i}),args:[{name:"limit",ref:!0,assert:e.limit,message:"must be a positive integer"}]},max:{method(i){return this.$_addRule({name:"max",method:"length",args:{limit:i},operator:"<="})}},min:{method(i){return this.$_addRule({name:"min",method:"length",args:{limit:i},operator:">="})}},ordered:{method(...i){e.verifyFlat(i,"ordered");const s=this.$_addRule("items");for(let f=0;f<i.length;++f){const a=e.tryWithPath((()=>this.$_compile(i[f])),f,{append:!0});l.validateSingle(a,s),s.$_mutateRegister(a),s.$_terms.ordered.push(a)}return s.$_mutateRebuild()}},single:{method(i){const s=i===void 0||!!i;return r(!s||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",s)}},sort:{method(i={}){e.assertOptions(i,["by","order"]);const s={order:i.order||"ascending"};return i.by&&(s.by=o.ref(i.by,{ancestor:0}),r(!s.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:s}})},validate(i,{error:s,state:f,prefs:a,schema:u},{options:p}){const{value:x,errors:k}=l.sort(u,i,p,f,a);if(k)return k;for(let A=0;A<i.length;++A)if(i[A]!==x[A])return s("array.sort",{order:p.order,by:p.by?p.by.key:"value"});return i},convert:!0},sparse:{method(i){const s=i===void 0||!!i;return this._flags.sparse===s?this:(s?this.clone():this.$_addRule("items")).$_setFlag("sparse",s,{clone:!1})}},unique:{method(i,s={}){r(!i||typeof i=="function"||typeof i=="string","comparator must be a function or a string"),e.assertOptions(s,["ignoreUndefined","separator"]);const f={name:"unique",args:{options:s,comparator:i}};if(i)if(typeof i=="string"){const a=e.default(s.separator,".");f.path=a?i.split(a):[i]}else f.comparator=i;return this.$_addRule(f)},validate(i,{state:s,error:f,schema:a},{comparator:u,options:p},{comparator:x,path:k}){const A={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},E=x||b,h=p.ignoreUndefined;for(let w=0;w<i.length;++w){const T=k?y(i[w],k):i[w],R=x?A.custom:A[typeof T];if(r(R,"Failed to find unique map container for type",typeof T),R instanceof Map){const j=R.entries();let C;for(;!(C=j.next()).done;)if(E(C.value[0],T)){const $=s.localize([...s.path,w],[i,...s.ancestors]),M={pos:w,value:i[w],dupePos:C.value[1],dupeValue:i[C.value[1]]};return k&&(M.path=u),f("array.unique",M,$)}R.set(T,w)}else{if((!h||T!==void 0)&&R[T]!==void 0){const j={pos:w,value:i[w],dupePos:R[T],dupeValue:i[R[T]]};return k&&(j.path=u),f("array.unique",j,s.localize([...s.path,w],[i,...s.ancestors]))}R[T]=w}}return i},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(i,s)=>new Set(i)}},rebuild(i){i.$_terms._inclusions=[],i.$_terms._exclusions=[],i.$_terms._requireds=[];for(const s of i.$_terms.items)l.validateSingle(s,i),s._flags.presence==="required"?i.$_terms._requireds.push(s):s._flags.presence==="forbidden"?i.$_terms._exclusions.push(s):i.$_terms._inclusions.push(s);for(const s of i.$_terms.ordered)l.validateSingle(s,i)},manifest:{build:(i,s)=>(s.items&&(i=i.items(...s.items)),s.ordered&&(i=i.ordered(...s.ordered)),i)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),l.fillMissedErrors=function(i,s,f,a,u,p){const x=[];let k=0;for(const A of f){const E=A._flags.label;E?x.push(E):++k}x.length?k?s.push(i.$_createError("array.includesRequiredBoth",a,{knownMisses:x,unknownMisses:k},u,p)):s.push(i.$_createError("array.includesRequiredKnowns",a,{knownMisses:x},u,p)):s.push(i.$_createError("array.includesRequiredUnknowns",a,{unknownMisses:k},u,p))},l.fillOrderedErrors=function(i,s,f,a,u,p){const x=[];for(const k of f)k._flags.presence==="required"&&x.push(k);x.length&&l.fillMissedErrors(i,s,x,a,u,p)},l.fillDefault=function(i,s,f,a){const u=[];let p=!0;for(let x=i.length-1;x>=0;--x){const k=i[x],A=[s,...f.ancestors],E=k.$_validate(void 0,f.localize(f.path,A,k),a).value;if(p){if(E===void 0)continue;p=!1}u.unshift(E)}u.length&&s.push(...u)},l.fastSplice=function(i,s){let f=s;for(;f<i.length;)i[f++]=i[f];--i.length},l.validateSingle=function(i,s){(i.type==="array"||i._flags._arrayItems)&&(r(!s._flags.single,"Cannot specify array item with single rule enabled"),s.$_setFlag("_arrayItems",!0,{clone:!1}))},l.sort=function(i,s,f,a,u){const p=f.order==="ascending"?1:-1,x=-1*p,k=p,A=(E,h)=>{let w=l.compare(E,h,x,k);if(w!==null||(f.by&&(E=f.by.resolve(E,a,u),h=f.by.resolve(h,a,u)),w=l.compare(E,h,x,k),w!==null))return w;const T=typeof E;if(T!==typeof h)throw i.$_createError("array.sort.mismatching",s,null,a,u);if(T!=="number"&&T!=="string")throw i.$_createError("array.sort.unsupported",s,{type:T},a,u);return T==="number"?(E-h)*p:E<h?x:k};try{return{value:s.slice().sort(A)}}catch(E){return{errors:E}}},l.compare=function(i,s,f,a){return i===s?0:i===void 0?1:s===void 0?-1:i===null?a:s===null?f:null}},4937:(_,v,g)=>{const r=g(375),b=g(8068),y=g(8160),m=g(2036),e={isBool:function(o){return typeof o=="boolean"}};_.exports=b.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(o,{schema:l}){if(typeof o!="boolean"){if(typeof o=="string"){const i=l._flags.sensitive?o:o.toLowerCase();o=i==="true"||i!=="false"&&o}return typeof o!="boolean"&&(o=l.$_terms.truthy&&l.$_terms.truthy.has(o,null,null,!l._flags.sensitive)||(!l.$_terms.falsy||!l.$_terms.falsy.has(o,null,null,!l._flags.sensitive))&&o),{value:o}}},validate(o,{error:l}){if(typeof o!="boolean")return{value:o,errors:l("boolean.base")}},rules:{truthy:{method(...o){y.verifyFlat(o,"truthy");const l=this.clone();l.$_terms.truthy=l.$_terms.truthy||new m;for(let i=0;i<o.length;++i){const s=o[i];r(s!==void 0,"Cannot call truthy with undefined"),l.$_terms.truthy.add(s)}return l}},falsy:{method(...o){y.verifyFlat(o,"falsy");const l=this.clone();l.$_terms.falsy=l.$_terms.falsy||new m;for(let i=0;i<o.length;++i){const s=o[i];r(s!==void 0,"Cannot call falsy with undefined"),l.$_terms.falsy.add(s)}return l}},sensitive:{method(o=!0){return this.$_setFlag("sensitive",o)}}},cast:{number:{from:e.isBool,to:(o,l)=>o?1:0},string:{from:e.isBool,to:(o,l)=>o?"true":"false"}},manifest:{build:(o,l)=>(l.truthy&&(o=o.truthy(...l.truthy)),l.falsy&&(o=o.falsy(...l.falsy)),o)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(_,v,g)=>{const r=g(375),b=g(8068),y=g(8160),m=g(3328),e={isDate:function(o){return o instanceof Date}};_.exports=b.extend({type:"date",coerce:{from:["number","string"],method:(o,{schema:l})=>({value:e.parse(o,l._flags.format)||o})},validate(o,{schema:l,error:i,prefs:s}){if(o instanceof Date&&!isNaN(o.getTime()))return;const f=l._flags.format;return s.convert&&f&&typeof o=="string"?{value:o,errors:i("date.format",{format:f})}:{value:o,errors:i("date.base")}},rules:{compare:{method:!1,validate(o,l,{date:i},{name:s,operator:f,args:a}){const u=i==="now"?Date.now():i.getTime();return y.compare(o.getTime(),u,f)?o:l.error("date."+s,{limit:a.date,value:o})},args:[{name:"date",ref:!0,normalize:o=>o==="now"?o:e.parse(o),assert:o=>o!==null,message:"must have a valid date format"}]},format:{method(o){return r(["iso","javascript","unix"].includes(o),"Unknown date format",o),this.$_setFlag("format",o)}},greater:{method(o){return this.$_addRule({name:"greater",method:"compare",args:{date:o},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(o){return this.$_addRule({name:"less",method:"compare",args:{date:o},operator:"<"})}},max:{method(o){return this.$_addRule({name:"max",method:"compare",args:{date:o},operator:"<="})}},min:{method(o){return this.$_addRule({name:"min",method:"compare",args:{date:o},operator:">="})}},timestamp:{method(o="javascript"){return r(["javascript","unix"].includes(o),'"type" must be one of "javascript, unix"'),this.format(o)}}},cast:{number:{from:e.isDate,to:(o,l)=>o.getTime()},string:{from:e.isDate,to:(o,{prefs:l})=>m.date(o,l)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),e.parse=function(o,l){if(o instanceof Date)return o;if(typeof o!="string"&&(isNaN(o)||!isFinite(o))||/^\s*$/.test(o))return null;if(l==="iso")return y.isIsoDate(o)?e.date(o.toString()):null;const i=o;if(typeof o=="string"&&/^[+-]?\d+(\.\d+)?$/.test(o)&&(o=parseFloat(o)),l){if(l==="javascript")return e.date(1*o);if(l==="unix")return e.date(1e3*o);if(typeof i=="string")return null}return e.date(o)},e.date=function(o){const l=new Date(o);return isNaN(l.getTime())?null:l}},390:(_,v,g)=>{const r=g(375),b=g(7824);_.exports=b.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(y){return r(Number.isSafeInteger(y)&&y>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:y}})},validate:(y,m,{n:e})=>y.length===e?y:m.error("function.arity",{n:e})},class:{method(){return this.$_addRule("class")},validate:(y,m)=>/^\s*class\s/.test(y.toString())?y:m.error("function.class",{value:y})},minArity:{method(y){return r(Number.isSafeInteger(y)&&y>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:y}})},validate:(y,m,{n:e})=>y.length>=e?y:m.error("function.minArity",{n:e})},maxArity:{method(y){return r(Number.isSafeInteger(y)&&y>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:y}})},validate:(y,m,{n:e})=>y.length<=e?y:m.error("function.maxArity",{n:e})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(_,v,g)=>{const r=g(978),b=g(375),y=g(8571),m=g(3652),e=g(8068),o=g(8160),l=g(3292),i=g(6354),s=g(6133),f=g(3328),a={renameDefaults:{alias:!1,multiple:!1,override:!1}};_.exports=e.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(u,p)=>u.keys(p),validate(u,{schema:p,error:x,state:k,prefs:A}){if(!u||typeof u!==p.$_property("typeof")||Array.isArray(u))return{value:u,errors:x("object.base",{type:p.$_property("typeof")})};if(!(p.$_terms.renames||p.$_terms.dependencies||p.$_terms.keys||p.$_terms.patterns||p.$_terms.externals))return;u=a.clone(u,A);const E=[];if(p.$_terms.renames&&!a.rename(p,u,k,A,E))return{value:u,errors:E};if(!p.$_terms.keys&&!p.$_terms.patterns&&!p.$_terms.dependencies)return{value:u,errors:E};const h=new Set(Object.keys(u));if(p.$_terms.keys){const w=[u,...k.ancestors];for(const T of p.$_terms.keys){const R=T.key,j=u[R];h.delete(R);const C=k.localize([...k.path,R],w,T),$=T.schema.$_validate(j,C,A);if($.errors){if(A.abortEarly)return{value:u,errors:$.errors};$.value!==void 0&&(u[R]=$.value),E.push(...$.errors)}else T.schema._flags.result==="strip"||$.value===void 0&&j!==void 0?delete u[R]:$.value!==void 0&&(u[R]=$.value)}}if(h.size||p._flags._hasPatternMatch){const w=a.unknown(p,u,h,E,k,A);if(w)return w}if(p.$_terms.dependencies)for(const w of p.$_terms.dependencies){if(w.key!==null&&a.isPresent(w.options)(w.key.resolve(u,k,A,null,{shadow:!1}))===!1)continue;const T=a.dependencies[w.rel](p,w,u,k,A);if(T){const R=p.$_createError(T.code,u,T.context,k,A);if(A.abortEarly)return{value:u,errors:R};E.push(R)}}return{value:u,errors:E}},rules:{and:{method(...u){return o.verifyFlat(u,"and"),a.dependency(this,"and",null,u)}},append:{method(u){return u==null||Object.keys(u).length===0?this:this.keys(u)}},assert:{method(u,p,x){f.isTemplate(u)||(u=l.ref(u)),b(x===void 0||typeof x=="string","Message must be a string"),p=this.$_compile(p,{appendPath:!0});const k=this.$_addRule({name:"assert",args:{subject:u,schema:p,message:x}});return k.$_mutateRegister(u),k.$_mutateRegister(p),k},validate(u,{error:p,prefs:x,state:k},{subject:A,schema:E,message:h}){const w=A.resolve(u,k,x),T=s.isRef(A)?A.absolute(k):[];return E.$_match(w,k.localize(T,[u,...k.ancestors],E),x)?u:p("object.assert",{subject:A,message:h})},args:["subject","schema","message"],multi:!0},instance:{method(u,p){return b(typeof u=="function","constructor must be a function"),p=p||u.name,this.$_addRule({name:"instance",args:{constructor:u,name:p}})},validate:(u,p,{constructor:x,name:k})=>u instanceof x?u:p.error("object.instance",{type:k,value:u}),args:["constructor","name"]},keys:{method(u){b(u===void 0||typeof u=="object","Object schema must be a valid object"),b(!o.isSchema(u),"Object schema cannot be a joi schema");const p=this.clone();if(u)if(Object.keys(u).length){p.$_terms.keys=p.$_terms.keys?p.$_terms.keys.filter((x=>!u.hasOwnProperty(x.key))):new a.Keys;for(const x in u)o.tryWithPath((()=>p.$_terms.keys.push({key:x,schema:this.$_compile(u[x])})),x)}else p.$_terms.keys=new a.Keys;else p.$_terms.keys=null;return p.$_mutateRebuild()}},length:{method(u){return this.$_addRule({name:"length",args:{limit:u},operator:"="})},validate:(u,p,{limit:x},{name:k,operator:A,args:E})=>o.compare(Object.keys(u).length,x,A)?u:p.error("object."+k,{limit:E.limit,value:u}),args:[{name:"limit",ref:!0,assert:o.limit,message:"must be a positive integer"}]},max:{method(u){return this.$_addRule({name:"max",method:"length",args:{limit:u},operator:"<="})}},min:{method(u){return this.$_addRule({name:"min",method:"length",args:{limit:u},operator:">="})}},nand:{method(...u){return o.verifyFlat(u,"nand"),a.dependency(this,"nand",null,u)}},or:{method(...u){return o.verifyFlat(u,"or"),a.dependency(this,"or",null,u)}},oxor:{method(...u){return a.dependency(this,"oxor",null,u)}},pattern:{method(u,p,x={}){const k=u instanceof RegExp;k||(u=this.$_compile(u,{appendPath:!0})),b(p!==void 0,"Invalid rule"),o.assertOptions(x,["fallthrough","matches"]),k&&b(!u.flags.includes("g")&&!u.flags.includes("y"),"pattern should not use global or sticky mode"),p=this.$_compile(p,{appendPath:!0});const A=this.clone();A.$_terms.patterns=A.$_terms.patterns||[];const E={[k?"regex":"schema"]:u,rule:p};return x.matches&&(E.matches=this.$_compile(x.matches),E.matches.type!=="array"&&(E.matches=E.matches.$_root.array().items(E.matches)),A.$_mutateRegister(E.matches),A.$_setFlag("_hasPatternMatch",!0,{clone:!1})),x.fallthrough&&(E.fallthrough=!0),A.$_terms.patterns.push(E),A.$_mutateRegister(p),A}},ref:{method(){return this.$_addRule("ref")},validate:(u,p)=>s.isRef(u)?u:p.error("object.refType",{value:u})},regex:{method(){return this.$_addRule("regex")},validate:(u,p)=>u instanceof RegExp?u:p.error("object.regex",{value:u})},rename:{method(u,p,x={}){b(typeof u=="string"||u instanceof RegExp,"Rename missing the from argument"),b(typeof p=="string"||p instanceof f,"Invalid rename to argument"),b(p!==u,"Cannot rename key to same name:",u),o.assertOptions(x,["alias","ignoreUndefined","override","multiple"]);const k=this.clone();k.$_terms.renames=k.$_terms.renames||[];for(const A of k.$_terms.renames)b(A.from!==u,"Cannot rename the same key multiple times");return p instanceof f&&k.$_mutateRegister(p),k.$_terms.renames.push({from:u,to:p,options:r(a.renameDefaults,x)}),k}},schema:{method(u="any"){return this.$_addRule({name:"schema",args:{type:u}})},validate:(u,p,{type:x})=>!o.isSchema(u)||x!=="any"&&u.type!==x?p.error("object.schema",{type:x}):u},unknown:{method(u){return this.$_setFlag("unknown",u!==!1)}},with:{method(u,p,x={}){return a.dependency(this,"with",u,p,x)}},without:{method(u,p,x={}){return a.dependency(this,"without",u,p,x)}},xor:{method(...u){return o.verifyFlat(u,"xor"),a.dependency(this,"xor",null,u)}}},overrides:{default(u,p){return u===void 0&&(u=o.symbols.deepDefault),this.$_parent("default",u,p)}},rebuild(u){if(u.$_terms.keys){const p=new m.Sorter;for(const x of u.$_terms.keys)o.tryWithPath((()=>p.add(x,{after:x.schema.$_rootReferences(),group:x.key})),x.key);u.$_terms.keys=new a.Keys(...p.nodes)}},manifest:{build(u,p){if(p.keys&&(u=u.keys(p.keys)),p.dependencies)for(const{rel:x,key:k=null,peers:A,options:E}of p.dependencies)u=a.dependency(u,x,k,A,E);if(p.patterns)for(const{regex:x,schema:k,rule:A,fallthrough:E,matches:h}of p.patterns)u=u.pattern(x||k,A,{fallthrough:E,matches:h});if(p.renames)for(const{from:x,to:k,options:A}of p.renames)u=u.rename(x,k,A);return u}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),a.clone=function(u,p){if(typeof u=="object"){if(p.nonEnumerables)return y(u,{shallow:!0});const k=Object.create(Object.getPrototypeOf(u));return Object.assign(k,u),k}const x=function(...k){return u.apply(this,k)};return x.prototype=y(u.prototype),Object.defineProperty(x,"name",{value:u.name,writable:!1}),Object.defineProperty(x,"length",{value:u.length,writable:!1}),Object.assign(x,u),x},a.dependency=function(u,p,x,k,A){b(x===null||typeof x=="string",p,"key must be a strings"),A||(A=k.length>1&&typeof k[k.length-1]=="object"?k.pop():{}),o.assertOptions(A,["separator","isPresent"]),k=[].concat(k);const E=o.default(A.separator,"."),h=[];for(const T of k)b(typeof T=="string",p,"peers must be strings"),h.push(l.ref(T,{separator:E,ancestor:0,prefix:!1}));x!==null&&(x=l.ref(x,{separator:E,ancestor:0,prefix:!1}));const w=u.clone();return w.$_terms.dependencies=w.$_terms.dependencies||[],w.$_terms.dependencies.push(new a.Dependency(p,x,h,k,A)),w},a.dependencies={and(u,p,x,k,A){const E=[],h=[],w=p.peers.length,T=a.isPresent(p.options);for(const R of p.peers)T(R.resolve(x,k,A,null,{shadow:!1}))===!1?E.push(R.key):h.push(R.key);if(E.length!==w&&h.length!==w)return{code:"object.and",context:{present:h,presentWithLabels:a.keysToLabels(u,h),missing:E,missingWithLabels:a.keysToLabels(u,E)}}},nand(u,p,x,k,A){const E=[],h=a.isPresent(p.options);for(const R of p.peers)h(R.resolve(x,k,A,null,{shadow:!1}))&&E.push(R.key);if(E.length!==p.peers.length)return;const w=p.paths[0],T=p.paths.slice(1);return{code:"object.nand",context:{main:w,mainWithLabel:a.keysToLabels(u,w),peers:T,peersWithLabels:a.keysToLabels(u,T)}}},or(u,p,x,k,A){const E=a.isPresent(p.options);for(const h of p.peers)if(E(h.resolve(x,k,A,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:p.paths,peersWithLabels:a.keysToLabels(u,p.paths)}}},oxor(u,p,x,k,A){const E=[],h=a.isPresent(p.options);for(const T of p.peers)h(T.resolve(x,k,A,null,{shadow:!1}))&&E.push(T.key);if(!E.length||E.length===1)return;const w={peers:p.paths,peersWithLabels:a.keysToLabels(u,p.paths)};return w.present=E,w.presentWithLabels=a.keysToLabels(u,E),{code:"object.oxor",context:w}},with(u,p,x,k,A){const E=a.isPresent(p.options);for(const h of p.peers)if(E(h.resolve(x,k,A,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:p.key.key,mainWithLabel:a.keysToLabels(u,p.key.key),peer:h.key,peerWithLabel:a.keysToLabels(u,h.key)}}},without(u,p,x,k,A){const E=a.isPresent(p.options);for(const h of p.peers)if(E(h.resolve(x,k,A,null,{shadow:!1})))return{code:"object.without",context:{main:p.key.key,mainWithLabel:a.keysToLabels(u,p.key.key),peer:h.key,peerWithLabel:a.keysToLabels(u,h.key)}}},xor(u,p,x,k,A){const E=[],h=a.isPresent(p.options);for(const T of p.peers)h(T.resolve(x,k,A,null,{shadow:!1}))&&E.push(T.key);if(E.length===1)return;const w={peers:p.paths,peersWithLabels:a.keysToLabels(u,p.paths)};return E.length===0?{code:"object.missing",context:w}:(w.present=E,w.presentWithLabels=a.keysToLabels(u,E),{code:"object.xor",context:w})}},a.keysToLabels=function(u,p){return Array.isArray(p)?p.map((x=>u.$_mapLabels(x))):u.$_mapLabels(p)},a.isPresent=function(u){return typeof u.isPresent=="function"?u.isPresent:p=>p!==void 0},a.rename=function(u,p,x,k,A){const E={};for(const h of u.$_terms.renames){const w=[],T=typeof h.from!="string";if(T)for(const R in p){if(p[R]===void 0&&h.options.ignoreUndefined||R===h.to)continue;const j=h.from.exec(R);j&&w.push({from:R,to:h.to,match:j})}else!Object.prototype.hasOwnProperty.call(p,h.from)||p[h.from]===void 0&&h.options.ignoreUndefined||w.push(h);for(const R of w){const j=R.from;let C=R.to;if(C instanceof f&&(C=C.render(p,x,k,R.match)),j!==C){if(!h.options.multiple&&E[C]&&(A.push(u.$_createError("object.rename.multiple",p,{from:j,to:C,pattern:T},x,k)),k.abortEarly)||Object.prototype.hasOwnProperty.call(p,C)&&!h.options.override&&!E[C]&&(A.push(u.$_createError("object.rename.override",p,{from:j,to:C,pattern:T},x,k)),k.abortEarly))return!1;p[j]===void 0?delete p[C]:p[C]=p[j],E[C]=!0,h.options.alias||delete p[j]}}}return!0},a.unknown=function(u,p,x,k,A,E){if(u.$_terms.patterns){let h=!1;const w=u.$_terms.patterns.map((R=>{if(R.matches)return h=!0,[]})),T=[p,...A.ancestors];for(const R of x){const j=p[R],C=[...A.path,R];for(let $=0;$<u.$_terms.patterns.length;++$){const M=u.$_terms.patterns[$];if(M.regex){const K=M.regex.test(R);if(A.mainstay.tracer.debug(A,"rule",`pattern.${$}`,K?"pass":"error"),!K)continue}else if(!M.schema.$_match(R,A.nest(M.schema,`pattern.${$}`),E))continue;x.delete(R);const L=A.localize(C,T,{schema:M.rule,key:R}),z=M.rule.$_validate(j,L,E);if(z.errors){if(E.abortEarly)return{value:p,errors:z.errors};k.push(...z.errors)}if(M.matches&&w[$].push(R),p[R]=z.value,!M.fallthrough)break}}if(h)for(let R=0;R<w.length;++R){const j=w[R];if(!j)continue;const C=u.$_terms.patterns[R].matches,$=A.localize(A.path,T,C),M=C.$_validate(j,$,E);if(M.errors){const L=i.details(M.errors,{override:!1});L.matches=j;const z=u.$_createError("object.pattern.match",p,L,A,E);if(E.abortEarly)return{value:p,errors:z};k.push(z)}}}if(x.size&&(u.$_terms.keys||u.$_terms.patterns)){if(E.stripUnknown&&u._flags.unknown===void 0||E.skipFunctions){const h=!(!E.stripUnknown||E.stripUnknown!==!0&&!E.stripUnknown.objects);for(const w of x)h?(delete p[w],x.delete(w)):typeof p[w]=="function"&&x.delete(w)}if(!o.default(u._flags.unknown,E.allowUnknown))for(const h of x){const w=A.localize([...A.path,h],[]),T=u.$_createError("object.unknown",p[h],{child:h},w,E,{flags:!1});if(E.abortEarly)return{value:p,errors:T};k.push(T)}}},a.Dependency=class{constructor(u,p,x,k,A){this.rel=u,this.key=p,this.peers=x,this.paths=k,this.options=A}describe(){const u={rel:this.rel,peers:this.paths};return this.key!==null&&(u.key=this.key.key),this.peers[0].separator!=="."&&(u.options={...u.options,separator:this.peers[0].separator}),this.options.isPresent&&(u.options={...u.options,isPresent:this.options.isPresent}),u}},a.Keys=class extends Array{concat(u){const p=this.slice(),x=new Map;for(let k=0;k<p.length;++k)x.set(p[k].key,k);for(const k of u){const A=k.key,E=x.get(A);E!==void 0?p[E]={key:A,schema:p[E].schema.concat(k.schema)}:p.push(k)}return p}}},8785:(_,v,g)=>{const r=g(375),b=g(8068),y=g(8160),m=g(3292),e=g(6354),o={};_.exports=b.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(l,i)=>l.ref(i),validate(l,{schema:i,state:s,prefs:f}){r(i.$_terms.link,"Uninitialized link schema");const a=o.generate(i,l,s,f),u=i.$_terms.link[0].ref;return a.$_validate(l,s.nest(a,`link:${u.display}:${a.type}`),f)},generate:(l,i,s,f)=>o.generate(l,i,s,f),rules:{ref:{method(l){r(!this.$_terms.link,"Cannot reinitialize schema"),l=m.ref(l),r(l.type==="value"||l.type==="local","Invalid reference type:",l.type),r(l.type==="local"||l.ancestor==="root"||l.ancestor>0,"Link cannot reference itself");const i=this.clone();return i.$_terms.link=[{ref:l}],i}},relative:{method(l=!0){return this.$_setFlag("relative",l)}}},overrides:{concat(l){r(this.$_terms.link,"Uninitialized link schema"),r(y.isSchema(l),"Invalid schema object"),r(l.type!=="link","Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:l}),i.$_mutateRebuild()}},manifest:{build:(l,i)=>(r(i.link,"Invalid link description missing link"),l.ref(i.link))}}),o.generate=function(l,i,s,f){let a=s.mainstay.links.get(l);if(a)return a._generate(i,s,f).schema;const u=l.$_terms.link[0].ref,{perspective:p,path:x}=o.perspective(u,s);o.assert(p,"which is outside of schema boundaries",u,l,s,f);try{a=x.length?p.$_reach(x):p}catch{o.assert(!1,"to non-existing schema",u,l,s,f)}return o.assert(a.type!=="link","which is another link",u,l,s,f),l._flags.relative||s.mainstay.links.set(l,a),a._generate(i,s,f).schema},o.perspective=function(l,i){if(l.type==="local"){for(const{schema:s,key:f}of i.schemas){if((s._flags.id||f)===l.path[0])return{perspective:s,path:l.path.slice(1)};if(s.$_terms.shared){for(const a of s.$_terms.shared)if(a._flags.id===l.path[0])return{perspective:a,path:l.path.slice(1)}}}return{perspective:null,path:null}}return l.ancestor==="root"?{perspective:i.schemas[i.schemas.length-1].schema,path:l.path}:{perspective:i.schemas[l.ancestor]&&i.schemas[l.ancestor].schema,path:l.path}},o.assert=function(l,i,s,f,a,u){l||r(!1,`"${e.label(f._flags,a,u)}" contains link reference "${s.display}" ${i}`)}},3832:(_,v,g)=>{const r=g(375),b=g(8068),y=g(8160),m={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const o=e.toString(),l=o.indexOf("."),i=o.indexOf("e");return(l<0?0:(i<0?o.length:i)-l-1)+(i<0?0:Math.max(0,-parseInt(o.slice(i+1))))}};_.exports=b.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:o,error:l}){if(!e.match(m.numberRx))return;e=e.trim();const i={value:parseFloat(e)};if(i.value===0&&(i.value=0),!o._flags.unsafe)if(e.match(/e/i)){if(m.extractSignificantDigits(e)!==m.extractSignificantDigits(String(i.value)))return i.errors=l("number.unsafe"),i}else{const s=i.value.toString();if(s.match(/e/i))return i;if(s!==m.normalizeDecimal(e))return i.errors=l("number.unsafe"),i}return i}},validate(e,{schema:o,error:l,prefs:i}){if(e===1/0||e===-1/0)return{value:e,errors:l("number.infinity")};if(!y.isNumber(e))return{value:e,errors:l("number.base")};const s={value:e};if(i.convert){const f=o.$_getRule("precision");if(f){const a=Math.pow(10,f.args.limit);s.value=Math.round(s.value*a)/a}}return s.value===0&&(s.value=0),!o._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=l("number.unsafe")),s},rules:{compare:{method:!1,validate:(e,o,{limit:l},{name:i,operator:s,args:f})=>y.compare(e,l,s)?e:o.error("number."+i,{limit:f.limit,value:e}),args:[{name:"limit",ref:!0,assert:y.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,o)=>Math.trunc(e)-e==0?e:o.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const o=typeof e=="number"?m.decimalPlaces(e):null,l=Math.pow(10,o);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:o,pfactor:l}})},validate:(e,o,{base:l,baseDecimalPlace:i,pfactor:s},f)=>m.decimalPlaces(e)>i?o.error("number.multiple",{multiple:f.args.base,value:e}):Math.round(s*e)%Math.round(s*l)==0?e:o.error("number.multiple",{multiple:f.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>typeof e=="number"&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,o)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:o.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return r(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,o,{limit:l}){const i=e.toString().match(m.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=l?e:o.error("number.precision",{limit:l,value:e})},convert:!0},sign:{method(e){return r(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,o,{sign:l})=>l==="negative"&&e<0||l==="positive"&&e>0?e:o.error(`number.${l}`)},unsafe:{method(e=!0){return r(typeof e=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>typeof e=="number",to:(e,o)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),m.extractSignificantDigits=function(e){return e.replace(m.exponentialPartRegex,"").replace(m.dotRegex,"").replace(m.trailingZerosRegex,"").replace(m.leadingSignAndZerosRegex,"")},m.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),e==="-0"?"0":e}},8966:(_,v,g)=>{const r=g(7824);_.exports=r.extend({type:"object",cast:{map:{from:b=>b&&typeof b=="object",to:(b,y)=>new Map(Object.entries(b))}}})},7417:(_,v,g)=>{const r=g(375),b=g(5380),y=g(1745),m=g(9959),e=g(6064),o=g(9926),l=g(5752),i=g(8068),s=g(8160),f={tlds:o instanceof Set&&{tlds:{allow:o,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:m.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};_.exports=i.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(a,{schema:u,state:p,prefs:x}){const k=u.$_getRule("normalize");k&&(a=a.normalize(k.args.form));const A=u.$_getRule("case");A&&(a=A.args.direction==="upper"?a.toLocaleUpperCase():a.toLocaleLowerCase());const E=u.$_getRule("trim");if(E&&E.args.enabled&&(a=a.trim()),u.$_terms.replacements)for(const w of u.$_terms.replacements)a=a.replace(w.pattern,w.replacement);const h=u.$_getRule("hex");if(h&&h.args.options.byteAligned&&a.length%2!=0&&(a=`0${a}`),u.$_getRule("isoDate")){const w=f.isoDate(a);w&&(a=w)}if(u._flags.truncate){const w=u.$_getRule("max");if(w){let T=w.args.limit;if(s.isResolvable(T)&&(T=T.resolve(a,p,x),!s.limit(T)))return{value:a,errors:u.$_createError("any.ref",T,{ref:w.args.limit,arg:"limit",reason:"must be a positive integer"},p,x)};a=a.slice(0,T)}}return{value:a}}},validate(a,{schema:u,error:p}){if(typeof a!="string")return{value:a,errors:p("string.base")};if(a===""){const x=u.$_getRule("min");return x&&x.args.limit===0?void 0:{value:a,errors:p("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(a,u)=>/^[a-zA-Z0-9]+$/.test(a)?a:u.error("string.alphanum")},base64:{method(a={}){return s.assertOptions(a,["paddingRequired","urlSafe"]),a={urlSafe:!1,paddingRequired:!0,...a},r(typeof a.paddingRequired=="boolean","paddingRequired must be boolean"),r(typeof a.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:a}})},validate:(a,u,{options:p})=>f.base64Regex[p.paddingRequired][p.urlSafe].test(a)?a:u.error("string.base64")},case:{method(a){return r(["lower","upper"].includes(a),"Invalid case:",a),this.$_addRule({name:"case",args:{direction:a}})},validate:(a,u,{direction:p})=>p==="lower"&&a===a.toLocaleLowerCase()||p==="upper"&&a===a.toLocaleUpperCase()?a:u.error(`string.${p}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(a,u){let p=a.length,x=0,k=1;for(;p--;){const A=a.charAt(p)*k;x+=A-9*(A>9),k^=3}return x>0&&x%10==0?a:u.error("string.creditCard")}},dataUri:{method(a={}){return s.assertOptions(a,["paddingRequired"]),a={paddingRequired:!0,...a},r(typeof a.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:a}})},validate(a,u,{options:p}){const x=a.match(f.dataUriRegex);return x&&(!x[2]||x[2]!=="base64"||f.base64Regex[p.paddingRequired].false.test(x[3]))?a:u.error("string.dataUri")}},domain:{method(a){a&&s.assertOptions(a,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const u=f.addressOptions(a);return this.$_addRule({name:"domain",args:{options:a},address:u})},validate:(a,u,p,{address:x})=>b.isValid(a,x)?a:u.error("string.domain")},email:{method(a={}){s.assertOptions(a,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),r(a.multiple===void 0||typeof a.multiple=="boolean","multiple option must be an boolean");const u=f.addressOptions(a),p=new RegExp(`\\s*[${a.separator?e(a.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:a},regex:p,address:u})},validate(a,u,{options:p},{regex:x,address:k}){const A=p.multiple?a.split(x):[a],E=[];for(const h of A)y.isValid(h,k)||E.push(h);return E.length?u.error("string.email",{value:a,invalids:E}):a}},guid:{alias:"uuid",method(a={}){s.assertOptions(a,["version","separator"]);let u="";if(a.version){const k=[].concat(a.version);r(k.length>=1,"version must have at least 1 valid version specified");const A=new Set;for(let E=0;E<k.length;++E){const h=k[E];r(typeof h=="string","version at position "+E+" must be a string");const w=f.guidVersions[h.toLowerCase()];r(w,"version at position "+E+" must be one of "+Object.keys(f.guidVersions).join(", ")),r(!A.has(w),"version at position "+E+" must not be a duplicate"),u+=w,A.add(w)}}r(f.guidSeparators.has(a.separator),'separator must be one of true, false, "-", or ":"');const p=a.separator===void 0?"[:-]?":a.separator===!0?"[:-]":a.separator===!1?"[]?":`\\${a.separator}`,x=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${p})[0-9A-F]{4}\\2?[${u||"0-9A-F"}][0-9A-F]{3}\\2?[${u?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:a},regex:x})},validate(a,u,p,{regex:x}){const k=x.exec(a);return k?f.guidBrackets[k[1]]!==k[k.length-1]?u.error("string.guid"):a:u.error("string.guid")}},hex:{method(a={}){return s.assertOptions(a,["byteAligned","prefix"]),a={byteAligned:!1,prefix:!1,...a},r(typeof a.byteAligned=="boolean","byteAligned must be boolean"),r(typeof a.prefix=="boolean"||a.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:a}})},validate:(a,u,{options:p})=>(p.prefix==="optional"?f.hexRegex.withOptionalPrefix:p.prefix===!0?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(a)?p.byteAligned&&a.length%2!=0?u.error("string.hexAlign"):a:u.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(a,u)=>b.isValid(a,{minDomainSegments:1})||f.ipRegex.test(a)?a:u.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(a={}){s.assertOptions(a,["cidr","version"]);const{cidr:u,versions:p,regex:x}=m.regex(a),k=a.version?p:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:u,version:k}},regex:x})},validate:(a,u,{options:p},{regex:x})=>x.test(a)?a:p.version?u.error("string.ipVersion",{value:a,cidr:p.cidr,version:p.version}):u.error("string.ip",{value:a,cidr:p.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(a,{error:u})=>f.isoDate(a)?a:u("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(a,u)=>f.isoDurationRegex.test(a)?a:u.error("string.isoDuration")},length:{method(a,u){return f.length(this,"length",a,"=",u)},validate(a,u,{limit:p,encoding:x},{name:k,operator:A,args:E}){const h=!x&&a.length;return s.compare(h,p,A)?a:u.error("string."+k,{limit:E.limit,value:a,encoding:x})},args:[{name:"limit",ref:!0,assert:s.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(a,u){return f.length(this,"max",a,"<=",u)},args:["limit","encoding"]},min:{method(a,u){return f.length(this,"min",a,">=",u)},args:["limit","encoding"]},normalize:{method(a="NFC"){return r(f.normalizationForms.includes(a),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:a}})},validate:(a,{error:u},{form:p})=>a===a.normalize(p)?a:u("string.normalize",{value:a,form:p}),convert:!0},pattern:{alias:"regex",method(a,u={}){r(a instanceof RegExp,"regex must be a RegExp"),r(!a.flags.includes("g")&&!a.flags.includes("y"),"regex should not use global or sticky mode"),typeof u=="string"&&(u={name:u}),s.assertOptions(u,["invert","name"]);const p=["string.pattern",u.invert?".invert":"",u.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:a,options:u},errorCode:p})},validate:(a,u,{regex:p,options:x},{errorCode:k})=>p.test(a)^x.invert?a:u.error(k,{name:x.name,regex:p,value:a}),args:["regex","options"],multi:!0},replace:{method(a,u){typeof a=="string"&&(a=new RegExp(e(a),"g")),r(a instanceof RegExp,"pattern must be a RegExp"),r(typeof u=="string","replacement must be a String");const p=this.clone();return p.$_terms.replacements||(p.$_terms.replacements=[]),p.$_terms.replacements.push({pattern:a,replacement:u}),p}},token:{method(){return this.$_addRule("token")},validate:(a,u)=>/^\w+$/.test(a)?a:u.error("string.token")},trim:{method(a=!0){return r(typeof a=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:a}})},validate:(a,u,{enabled:p})=>p&&a!==a.trim()?u.error("string.trim"):a,convert:!0},truncate:{method(a=!0){return r(typeof a=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",a)}},uppercase:{method(){return this.case("upper")}},uri:{method(a={}){s.assertOptions(a,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),a.domain&&s.assertOptions(a.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:u,scheme:p}=l.regex(a),x=a.domain?f.addressOptions(a.domain):null;return this.$_addRule({name:"uri",args:{options:a},regex:u,domain:x,scheme:p})},validate(a,u,{options:p},{regex:x,domain:k,scheme:A}){if(["http:/","https:/"].includes(a))return u.error("string.uri");let E=x.exec(a);if(!E&&u.prefs.convert&&p.encodeUri){const h=encodeURI(a);E=x.exec(h),E&&(a=h)}if(E){const h=E[1]||E[2];return!k||p.allowRelative&&!h||b.isValid(h,k)?a:u.error("string.domain",{value:h})}return p.relativeOnly?u.error("string.uriRelativeOnly"):p.scheme?u.error("string.uriCustomScheme",{scheme:A,value:a}):u.error("string.uri")}}},manifest:{build(a,u){if(u.replacements)for(const{pattern:p,replacement:x}of u.replacements)a=a.replace(p,x);return a}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(a){if(!a)return f.tlds||a;if(r(a.minDomainSegments===void 0||Number.isSafeInteger(a.minDomainSegments)&&a.minDomainSegments>0,"minDomainSegments must be a positive integer"),r(a.maxDomainSegments===void 0||Number.isSafeInteger(a.maxDomainSegments)&&a.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),a.tlds===!1)return a;if(a.tlds===!0||a.tlds===void 0)return r(f.tlds,"Built-in TLD list disabled"),Object.assign({},a,f.tlds);r(typeof a.tlds=="object","tlds must be true, false, or an object");const u=a.tlds.deny;if(u)return Array.isArray(u)&&(a=Object.assign({},a,{tlds:{deny:new Set(u)}})),r(a.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),r(!a.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(a.tlds.deny,"tlds.deny"),a;const p=a.tlds.allow;return p?p===!0?(r(f.tlds,"Built-in TLD list disabled"),Object.assign({},a,f.tlds)):(Array.isArray(p)&&(a=Object.assign({},a,{tlds:{allow:new Set(p)}})),r(a.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(a.tlds.allow,"tlds.allow"),a):a},f.validateTlds=function(a,u){for(const p of a)r(b.isValid(p,{minDomainSegments:1,maxDomainSegments:1}),`${u} must contain valid top level domain names`)},f.isoDate=function(a){if(!s.isIsoDate(a))return null;/.*T.*[+-]\d\d$/.test(a)&&(a+="00");const u=new Date(a);return isNaN(u.getTime())?null:u.toISOString()},f.length=function(a,u,p,x,k){return r(!k||!1,"Invalid encoding:",k),a.$_addRule({name:u,method:"length",args:{limit:p,encoding:k},operator:x})}},8826:(_,v,g)=>{const r=g(375),b=g(8068),y={};y.Map=class extends Map{slice(){return new y.Map(this)}},_.exports=b.extend({type:"symbol",terms:{map:{init:new y.Map}},coerce:{method(m,{schema:e,error:o}){const l=e.$_terms.map.get(m);return l&&(m=l),e._flags.only&&typeof m!="symbol"?{value:m,errors:o("symbol.map",{map:e.$_terms.map})}:{value:m}}},validate(m,{error:e}){if(typeof m!="symbol")return{value:m,errors:e("symbol.base")}},rules:{map:{method(m){m&&!m[Symbol.iterator]&&typeof m=="object"&&(m=Object.entries(m)),r(m&&m[Symbol.iterator],"Iterable must be an iterable or object");const e=this.clone(),o=[];for(const l of m){r(l&&l[Symbol.iterator],"Entry must be an iterable");const[i,s]=l;r(typeof i!="object"&&typeof i!="function"&&typeof i!="symbol","Key must not be of type object, function, or Symbol"),r(typeof s=="symbol","Value must be a Symbol"),e.$_terms.map.set(i,s),o.push(s)}return e.valid(...o)}}},manifest:{build:(m,e)=>(e.map&&(m=m.map(e.map)),m)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(_,v,g)=>{const r=g(375),b=g(8571),y=g(738),m=g(9621),e=g(8160),o=g(6354),l=g(493),i={result:Symbol("result")};v.entry=function(s,f,a){let u=e.defaults;a&&(r(a.warnings===void 0,"Cannot override warnings preference in synchronous validation"),r(a.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),u=e.preferences(e.defaults,a));const p=i.entry(s,f,u);r(!p.mainstay.externals.length,"Schema with external rules must use validateAsync()");const x={value:p.value};return p.error&&(x.error=p.error),p.mainstay.warnings.length&&(x.warning=o.details(p.mainstay.warnings)),p.mainstay.debug&&(x.debug=p.mainstay.debug),p.mainstay.artifacts&&(x.artifacts=p.mainstay.artifacts),x},v.entryAsync=async function(s,f,a){let u=e.defaults;a&&(u=e.preferences(e.defaults,a));const p=i.entry(s,f,u),x=p.mainstay;if(p.error)throw x.debug&&(p.error.debug=x.debug),p.error;if(x.externals.length){let A=p.value;const E=[];for(const h of x.externals){const w=h.state.path,T=h.schema.type==="link"?x.links.get(h.schema):null;let R,j,C=A;const $=w.length?[A]:[],M=w.length?m(s,w):s;if(w.length){R=w[w.length-1];let L=A;for(const z of w.slice(0,-1))L=L[z],$.unshift(L);j=$[0],C=j[R]}try{const L=(K,ee)=>(T||h.schema).$_createError(K,C,ee,h.state,u),z=await h.method(C,{schema:h.schema,linked:T,state:h.state,prefs:a,original:M,error:L,errorsArray:i.errorsArray,warn:(K,ee)=>x.warnings.push((T||h.schema).$_createError(K,C,ee,h.state,u)),message:(K,ee)=>(T||h.schema).$_createError("external",C,ee,h.state,u,{messages:K})});if(z===void 0||z===C)continue;if(z instanceof o.Report){if(x.tracer.log(h.schema,h.state,"rule","external","error"),E.push(z),u.abortEarly)break;continue}if(Array.isArray(z)&&z[e.symbols.errors]){if(x.tracer.log(h.schema,h.state,"rule","external","error"),E.push(...z),u.abortEarly)break;continue}j?(x.tracer.value(h.state,"rule",C,z,"external"),j[R]=z):(x.tracer.value(h.state,"rule",A,z,"external"),A=z)}catch(L){throw u.errors.label&&(L.message+=` (${h.label})`),L}}if(p.value=A,E.length)throw p.error=o.process(E,s,u),x.debug&&(p.error.debug=x.debug),p.error}if(!u.warnings&&!u.debug&&!u.artifacts)return p.value;const k={value:p.value};return x.warnings.length&&(k.warning=o.details(x.warnings)),x.debug&&(k.debug=x.debug),x.artifacts&&(k.artifacts=x.artifacts),k},i.Mainstay=class{constructor(s,f,a){this.externals=[],this.warnings=[],this.tracer=s,this.debug=f,this.links=a,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const s=this._snapshots.pop();this.externals=s.externals,this.warnings=s.warnings}commit(){this._snapshots.pop()}},i.entry=function(s,f,a){const{tracer:u,cleanup:p}=i.tracer(f,a),x=a.debug?[]:null,k=f._ids._schemaChain?new Map:null,A=new i.Mainstay(u,x,k),E=f._ids._schemaChain?[{schema:f}]:null,h=new l([],[],{mainstay:A,schemas:E}),w=v.validate(s,f,h,a);p&&f.$_root.untrace();const T=o.process(w.errors,s,a);return{value:w.value,error:T,mainstay:A}},i.tracer=function(s,f){return s.$_root._tracer?{tracer:s.$_root._tracer._register(s)}:f.debug?(r(s.$_root.trace,"Debug mode not supported"),{tracer:s.$_root.trace()._register(s),cleanup:!0}):{tracer:i.ignore}},v.validate=function(s,f,a,u,p={}){if(f.$_terms.whens&&(f=f._generate(s,a,u).schema),f._preferences&&(u=i.prefs(f,u)),f._cache&&u.cache){const T=f._cache.get(s);if(a.mainstay.tracer.debug(a,"validate","cached",!!T),T)return T}const x=(T,R,j)=>f.$_createError(T,s,R,j||a,u),k={original:s,prefs:u,schema:f,state:a,error:x,errorsArray:i.errorsArray,warn:(T,R,j)=>a.mainstay.warnings.push(x(T,R,j)),message:(T,R)=>f.$_createError("custom",s,R,a,u,{messages:T})};a.mainstay.tracer.entry(f,a);const A=f._definition;if(A.prepare&&s!==void 0&&u.convert){const T=A.prepare(s,k);if(T){if(a.mainstay.tracer.value(a,"prepare",s,T.value),T.errors)return i.finalize(T.value,[].concat(T.errors),k);s=T.value}}if(A.coerce&&s!==void 0&&u.convert&&(!A.coerce.from||A.coerce.from.includes(typeof s))){const T=A.coerce.method(s,k);if(T){if(a.mainstay.tracer.value(a,"coerced",s,T.value),T.errors)return i.finalize(T.value,[].concat(T.errors),k);s=T.value}}const E=f._flags.empty;E&&E.$_match(i.trim(s,f),a.nest(E),e.defaults)&&(a.mainstay.tracer.value(a,"empty",s,void 0),s=void 0);const h=p.presence||f._flags.presence||(f._flags._endedSwitch?null:u.presence);if(s===void 0){if(h==="forbidden")return i.finalize(s,null,k);if(h==="required")return i.finalize(s,[f.$_createError("any.required",s,null,a,u)],k);if(h==="optional"){if(f._flags.default!==e.symbols.deepDefault)return i.finalize(s,null,k);a.mainstay.tracer.value(a,"default",s,{}),s={}}}else if(h==="forbidden")return i.finalize(s,[f.$_createError("any.unknown",s,null,a,u)],k);const w=[];if(f._valids){const T=f._valids.get(s,a,u,f._flags.insensitive);if(T)return u.convert&&(a.mainstay.tracer.value(a,"valids",s,T.value),s=T.value),a.mainstay.tracer.filter(f,a,"valid",T),i.finalize(s,null,k);if(f._flags.only){const R=f.$_createError("any.only",s,{valids:f._valids.values({display:!0})},a,u);if(u.abortEarly)return i.finalize(s,[R],k);w.push(R)}}if(f._invalids){const T=f._invalids.get(s,a,u,f._flags.insensitive);if(T){a.mainstay.tracer.filter(f,a,"invalid",T);const R=f.$_createError("any.invalid",s,{invalids:f._invalids.values({display:!0})},a,u);if(u.abortEarly)return i.finalize(s,[R],k);w.push(R)}}if(A.validate){const T=A.validate(s,k);if(T&&(a.mainstay.tracer.value(a,"base",s,T.value),s=T.value,T.errors)){if(!Array.isArray(T.errors))return w.push(T.errors),i.finalize(s,w,k);if(T.errors.length)return w.push(...T.errors),i.finalize(s,w,k)}}return f._rules.length?i.rules(s,w,k):i.finalize(s,w,k)},i.rules=function(s,f,a){const{schema:u,state:p,prefs:x}=a;for(const k of u._rules){const A=u._definition.rules[k.method];if(A.convert&&x.convert){p.mainstay.tracer.log(u,p,"rule",k.name,"full");continue}let E,h=k.args;if(k._resolve.length){h=Object.assign({},h);for(const T of k._resolve){const R=A.argsByName.get(T),j=h[T].resolve(s,p,x),C=R.normalize?R.normalize(j):j,$=e.validateArg(C,null,R);if($){E=u.$_createError("any.ref",j,{arg:T,ref:h[T],reason:$},p,x);break}h[T]=C}}E=E||A.validate(s,a,h,k);const w=i.rule(E,k);if(w.errors){if(p.mainstay.tracer.log(u,p,"rule",k.name,"error"),k.warn){p.mainstay.warnings.push(...w.errors);continue}if(x.abortEarly)return i.finalize(s,w.errors,a);f.push(...w.errors)}else p.mainstay.tracer.log(u,p,"rule",k.name,"pass"),p.mainstay.tracer.value(p,"rule",s,w.value,k.name),s=w.value}return i.finalize(s,f,a)},i.rule=function(s,f){return s instanceof o.Report?(i.error(s,f),{errors:[s],value:null}):Array.isArray(s)&&s[e.symbols.errors]?(s.forEach((a=>i.error(a,f))),{errors:s,value:null}):{errors:null,value:s}},i.error=function(s,f){return f.message&&s._setTemplate(f.message),s},i.finalize=function(s,f,a){f=f||[];const{schema:u,state:p,prefs:x}=a;if(f.length){const A=i.default("failover",void 0,f,a);A!==void 0&&(p.mainstay.tracer.value(p,"failover",s,A),s=A,f=[])}if(f.length&&u._flags.error)if(typeof u._flags.error=="function"){f=u._flags.error(f),Array.isArray(f)||(f=[f]);for(const A of f)r(A instanceof Error||A instanceof o.Report,"error() must return an Error object")}else f=[u._flags.error];if(s===void 0){const A=i.default("default",s,f,a);p.mainstay.tracer.value(p,"default",s,A),s=A}if(u._flags.cast&&s!==void 0){const A=u._definition.cast[u._flags.cast];if(A.from(s)){const E=A.to(s,a);p.mainstay.tracer.value(p,"cast",s,E,u._flags.cast),s=E}}if(u.$_terms.externals&&x.externals&&x._externals!==!1)for(const{method:A}of u.$_terms.externals)p.mainstay.externals.push({method:A,schema:u,state:p,label:o.label(u._flags,p,x)});const k={value:s,errors:f.length?f:null};return u._flags.result&&(k.value=u._flags.result==="strip"?void 0:a.original,p.mainstay.tracer.value(p,u._flags.result,s,k.value),p.shadow(s,u._flags.result)),u._cache&&x.cache!==!1&&!u._refs.length&&u._cache.set(a.original,k),s===void 0||k.errors||u._flags.artifact===void 0||(p.mainstay.artifacts=p.mainstay.artifacts||new Map,p.mainstay.artifacts.has(u._flags.artifact)||p.mainstay.artifacts.set(u._flags.artifact,[]),p.mainstay.artifacts.get(u._flags.artifact).push(p.path)),k},i.prefs=function(s,f){const a=f===e.defaults;return a&&s._preferences[e.symbols.prefs]?s._preferences[e.symbols.prefs]:(f=e.preferences(f,s._preferences),a&&(s._preferences[e.symbols.prefs]=f),f)},i.default=function(s,f,a,u){const{schema:p,state:x,prefs:k}=u,A=p._flags[s];if(k.noDefaults||A===void 0)return f;if(x.mainstay.tracer.log(p,x,"rule",s,"full"),!A)return A;if(typeof A=="function"){const E=A.length?[b(x.ancestors[0]),u]:[];try{return A(...E)}catch(h){return void a.push(p.$_createError(`any.${s}`,null,{error:h},x,k))}}return typeof A!="object"?A:A[e.symbols.literal]?A.literal:e.isResolvable(A)?A.resolve(f,x,k):b(A)},i.trim=function(s,f){if(typeof s!="string")return s;const a=f.$_getRule("trim");return a&&a.args.enabled?s.trim():s},i.ignore={active:!1,debug:y,entry:y,filter:y,log:y,resolve:y,value:y},i.errorsArray=function(){const s=[];return s[e.symbols.errors]=!0,s}},2036:(_,v,g)=>{const r=g(375),b=g(9474),y=g(8160),m={};_.exports=m.Values=class{constructor(e,o){this._values=new Set(e),this._refs=new Set(o),this._lowercase=m.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,o){y.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),o&&o.register(e)):this.has(e,null,null,!1)||(this._values.add(e),typeof e=="string"&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,o,l){if(e=e||new m.Values,o){if(o._override)return o.clone();for(const i of[...o._values,...o._refs])e.add(i)}if(l)for(const i of[...l._values,...l._refs])e.remove(i);return e.length?e:null}remove(e){y.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),typeof e=="string"&&this._lowercase.delete(e.toLowerCase()))}has(e,o,l,i){return!!this.get(e,o,l,i)}get(e,o,l,i){if(!this.length)return!1;if(this._values.has(e))return{value:e};if(typeof e=="string"&&e&&i){const s=this._lowercase.get(e.toLowerCase());if(s)return{value:s}}if(!this._refs.size&&typeof e!="object")return!1;if(typeof e=="object"){for(const s of this._values)if(b(s,e))return{value:s}}if(o)for(const s of this._refs){const f=s.resolve(e,o,l,null,{in:!0});if(f===void 0)continue;const a=s.in&&typeof f=="object"?Array.isArray(f)?f:Object.keys(f):[f];for(const u of a)if(typeof u==typeof e){if(i&&e&&typeof e=="string"){if(u.toLowerCase()===e.toLowerCase())return{value:u,ref:s}}else if(b(u,e))return{value:u,ref:s}}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const o=[];for(const l of[...this._values,...this._refs])l!==void 0&&o.push(l);return o}return Array.from([...this._values,...this._refs])}clone(){const e=new m.Values(this._values,this._refs);return e._override=this._override,e}concat(e){r(!e._override,"Cannot concat override set of values");const o=new m.Values([...this._values,...e._values],[...this._refs,...e._refs]);return o._override=this._override,o}describe(){const e=[];this._override&&e.push({override:!0});for(const o of this._values.values())e.push(o&&typeof o=="object"?{value:o}:o);for(const o of this._refs.values())e.push(o.describe());return e}},m.Values.prototype[y.symbols.values]=!0,m.Values.prototype.slice=m.Values.prototype.clone,m.lowercases=function(e){const o=new Map;if(e)for(const l of e)typeof l=="string"&&o.set(l.toLowerCase(),l);return o}},978:(_,v,g)=>{const r=g(375),b=g(8571),y=g(1687),m=g(9621),e={};_.exports=function(o,l,i={}){if(r(o&&typeof o=="object","Invalid defaults value: must be an object"),r(!l||l===!0||typeof l=="object","Invalid source value: must be true, falsy or an object"),r(typeof i=="object","Invalid options: must be an object"),!l)return null;if(i.shallow)return e.applyToDefaultsWithShallow(o,l,i);const s=b(o);if(l===!0)return s;const f=i.nullOverride!==void 0&&i.nullOverride;return y(s,l,{nullOverride:f,mergeArrays:!1})},e.applyToDefaultsWithShallow=function(o,l,i){const s=i.shallow;r(Array.isArray(s),"Invalid keys");const f=new Map,a=l===!0?null:new Set;for(let x of s){x=Array.isArray(x)?x:x.split(".");const k=m(o,x);k&&typeof k=="object"?f.set(k,a&&m(l,x)||k):a&&a.add(x)}const u=b(o,{},f);if(!a)return u;for(const x of a)e.reachCopy(u,l,x);const p=i.nullOverride!==void 0&&i.nullOverride;return y(u,l,{nullOverride:p,mergeArrays:!1})},e.reachCopy=function(o,l,i){for(const a of i){if(!(a in l))return;const u=l[a];if(typeof u!="object"||u===null)return;l=u}const s=l;let f=o;for(let a=0;a<i.length-1;++a){const u=i[a];typeof f[u]!="object"&&(f[u]={}),f=f[u]}f[i[i.length-1]]=s}},375:(_,v,g)=>{const r=g(7916);_.exports=function(b,...y){if(!b)throw y.length===1&&y[0]instanceof Error?y[0]:new r(y)}},8571:(_,v,g)=>{const r=g(9621),b=g(4277),y=g(7043),m={needsProtoHack:new Set([b.set,b.map,b.weakSet,b.weakMap])};_.exports=m.clone=function(e,o={},l=null){if(typeof e!="object"||e===null)return e;let i=m.clone,s=l;if(o.shallow){if(o.shallow!==!0)return m.cloneWithShallow(e,o);i=p=>p}else if(s){const p=s.get(e);if(p)return p}else s=new Map;const f=b.getInternalProto(e);if(f===b.buffer)return!1;if(f===b.date)return new Date(e.getTime());if(f===b.regex)return new RegExp(e);const a=m.base(e,f,o);if(a===e)return e;if(s&&s.set(e,a),f===b.set)for(const p of e)a.add(i(p,o,s));else if(f===b.map)for(const[p,x]of e)a.set(p,i(x,o,s));const u=y.keys(e,o);for(const p of u){if(p==="__proto__")continue;if(f===b.array&&p==="length"){a.length=e.length;continue}const x=Object.getOwnPropertyDescriptor(e,p);x?x.get||x.set?Object.defineProperty(a,p,x):x.enumerable?a[p]=i(e[p],o,s):Object.defineProperty(a,p,{enumerable:!1,writable:!0,configurable:!0,value:i(e[p],o,s)}):Object.defineProperty(a,p,{enumerable:!0,writable:!0,configurable:!0,value:i(e[p],o,s)})}return a},m.cloneWithShallow=function(e,o){const l=o.shallow;(o=Object.assign({},o)).shallow=!1;const i=new Map;for(const s of l){const f=r(e,s);typeof f!="object"&&typeof f!="function"||i.set(f,f)}return m.clone(e,o,i)},m.base=function(e,o,l){if(l.prototype===!1)return m.needsProtoHack.has(o)?new o.constructor:o===b.array?[]:{};const i=Object.getPrototypeOf(e);if(i&&i.isImmutable)return e;if(o===b.array){const s=[];return i!==o&&Object.setPrototypeOf(s,i),s}if(m.needsProtoHack.has(o)){const s=new i.constructor;return i!==o&&Object.setPrototypeOf(s,i),s}return Object.create(i)}},9474:(_,v,g)=>{const r=g(4277),b={mismatched:null};_.exports=function(y,m,e){return e=Object.assign({prototype:!0},e),!!b.isDeepEqual(y,m,e,[])},b.isDeepEqual=function(y,m,e,o){if(y===m)return y!==0||1/y==1/m;const l=typeof y;if(l!==typeof m||y===null||m===null)return!1;if(l==="function"){if(!e.deepFunction||y.toString()!==m.toString())return!1}else if(l!=="object")return y!=y&&m!=m;const i=b.getSharedType(y,m,!!e.prototype);switch(i){case r.buffer:return!1;case r.promise:return y===m;case r.regex:return y.toString()===m.toString();case b.mismatched:return!1}for(let s=o.length-1;s>=0;--s)if(o[s].isSame(y,m))return!0;o.push(new b.SeenEntry(y,m));try{return!!b.isDeepEqualObj(i,y,m,e,o)}finally{o.pop()}},b.getSharedType=function(y,m,e){if(e)return Object.getPrototypeOf(y)!==Object.getPrototypeOf(m)?b.mismatched:r.getInternalProto(y);const o=r.getInternalProto(y);return o!==r.getInternalProto(m)?b.mismatched:o},b.valueOf=function(y){const m=y.valueOf;if(m===void 0)return y;try{return m.call(y)}catch(e){return e}},b.hasOwnEnumerableProperty=function(y,m){return Object.prototype.propertyIsEnumerable.call(y,m)},b.isSetSimpleEqual=function(y,m){for(const e of Set.prototype.values.call(y))if(!Set.prototype.has.call(m,e))return!1;return!0},b.isDeepEqualObj=function(y,m,e,o,l){const{isDeepEqual:i,valueOf:s,hasOwnEnumerableProperty:f}=b,{keys:a,getOwnPropertySymbols:u}=Object;if(y===r.array){if(!o.part){if(m.length!==e.length)return!1;for(let E=0;E<m.length;++E)if(!i(m[E],e[E],o,l))return!1;return!0}for(const E of m)for(const h of e)if(i(E,h,o,l))return!0}else if(y===r.set){if(m.size!==e.size)return!1;if(!b.isSetSimpleEqual(m,e)){const E=new Set(Set.prototype.values.call(e));for(const h of Set.prototype.values.call(m)){if(E.delete(h))continue;let w=!1;for(const T of E)if(i(h,T,o,l)){E.delete(T),w=!0;break}if(!w)return!1}}}else if(y===r.map){if(m.size!==e.size)return!1;for(const[E,h]of Map.prototype.entries.call(m))if(h===void 0&&!Map.prototype.has.call(e,E)||!i(h,Map.prototype.get.call(e,E),o,l))return!1}else if(y===r.error&&(m.name!==e.name||m.message!==e.message))return!1;const p=s(m),x=s(e);if((m!==p||e!==x)&&!i(p,x,o,l))return!1;const k=a(m);if(!o.part&&k.length!==a(e).length&&!o.skip)return!1;let A=0;for(const E of k)if(o.skip&&o.skip.includes(E))e[E]===void 0&&++A;else if(!f(e,E)||!i(m[E],e[E],o,l))return!1;if(!o.part&&k.length-A!==a(e).length)return!1;if(o.symbols!==!1){const E=u(m),h=new Set(u(e));for(const w of E){if(!o.skip||!o.skip.includes(w)){if(f(m,w)){if(!f(e,w)||!i(m[w],e[w],o,l))return!1}else if(f(e,w))return!1}h.delete(w)}for(const w of h)if(f(e,w))return!1}return!0},b.SeenEntry=class{constructor(y,m){this.obj=y,this.ref=m}isSame(y,m){return this.obj===y&&this.ref===m}}},7916:(_,v,g)=>{const r=g(8761);_.exports=class extends Error{constructor(b){super(b.filter((y=>y!=="")).map((y=>typeof y=="string"?y:y instanceof Error?y.message:r(y))).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,v.assert)}}},5277:_=>{const v={};_.exports=function(g){if(!g)return"";let r="";for(let b=0;b<g.length;++b){const y=g.charCodeAt(b);v.isSafe(y)?r+=g[b]:r+=v.escapeHtmlChar(y)}return r},v.escapeHtmlChar=function(g){return v.namedHtml.get(g)||(g>=256?"&#"+g+";":`&#x${g.toString(16).padStart(2,"0")};`)},v.isSafe=function(g){return v.safeCharCodes.has(g)},v.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),v.safeCharCodes=(function(){const g=new Set;for(let r=32;r<123;++r)(r>=97||r>=65&&r<=90||r>=48&&r<=57||r===32||r===46||r===44||r===45||r===58||r===95)&&g.add(r);return g})()},6064:_=>{_.exports=function(v){return v.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:_=>{_.exports=function(){}},1687:(_,v,g)=>{const r=g(375),b=g(8571),y=g(7043),m={};_.exports=m.merge=function(e,o,l){if(r(e&&typeof e=="object","Invalid target value: must be an object"),r(o==null||typeof o=="object","Invalid source value: must be null, undefined, or an object"),!o)return e;if(l=Object.assign({nullOverride:!0,mergeArrays:!0},l),Array.isArray(o)){r(Array.isArray(e),"Cannot merge array onto an object"),l.mergeArrays||(e.length=0);for(let s=0;s<o.length;++s)e.push(b(o[s],{symbols:l.symbols}));return e}const i=y.keys(o,l);for(let s=0;s<i.length;++s){const f=i[s];if(f==="__proto__"||!Object.prototype.propertyIsEnumerable.call(o,f))continue;const a=o[f];if(a&&typeof a=="object"){if(e[f]===a)continue;!e[f]||typeof e[f]!="object"||Array.isArray(e[f])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?e[f]=b(a,{symbols:l.symbols}):m.merge(e[f],a,l)}else(a!=null||l.nullOverride)&&(e[f]=a)}return e}},9621:(_,v,g)=>{const r=g(375),b={};_.exports=function(y,m,e){if(m===!1||m==null)return y;typeof(e=e||{})=="string"&&(e={separator:e});const o=Array.isArray(m);r(!o||!e.separator,"Separator option is not valid for array-based chain");const l=o?m:m.split(e.separator||".");let i=y;for(let s=0;s<l.length;++s){let f=l[s];const a=e.iterables&&b.iterables(i);if(Array.isArray(i)||a==="set"){const u=Number(f);Number.isInteger(u)&&(f=u<0?i.length+u:u)}if(!i||typeof i=="function"&&e.functions===!1||!a&&i[f]===void 0){r(!e.strict||s+1===l.length,"Missing segment",f,"in reach path ",m),r(typeof i=="object"||e.functions===!0||typeof i!="function","Invalid segment",f,"in reach path ",m),i=e.default;break}i=a?a==="set"?[...i][f]:i.get(f):i[f]}return i},b.iterables=function(y){return y instanceof Set?"set":y instanceof Map?"map":void 0}},8761:_=>{_.exports=function(...v){try{return JSON.stringify(...v)}catch(g){return"[Cannot display object: "+g.message+"]"}}},4277:(_,v)=>{const g={};v=_.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},g.typeMap=new Map([["[object Error]",v.error],["[object Map]",v.map],["[object Promise]",v.promise],["[object Set]",v.set],["[object WeakMap]",v.weakMap],["[object WeakSet]",v.weakSet]]),v.getInternalProto=function(r){if(Array.isArray(r))return v.array;if(r instanceof Date)return v.date;if(r instanceof RegExp)return v.regex;if(r instanceof Error)return v.error;const b=Object.prototype.toString.call(r);return g.typeMap.get(b)||v.generic}},7043:(_,v)=>{v.keys=function(g,r={}){return r.symbols!==!1?Reflect.ownKeys(g):Object.getOwnPropertyNames(g)}},3652:(_,v,g)=>{const r=g(375),b={};v.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(y,m){const e=[].concat((m=m||{}).before||[]),o=[].concat(m.after||[]),l=m.group||"?",i=m.sort||0;r(!e.includes(l),`Item cannot come before itself: ${l}`),r(!e.includes("?"),"Item cannot come before unassociated items"),r(!o.includes(l),`Item cannot come after itself: ${l}`),r(!o.includes("?"),"Item cannot come after unassociated items"),Array.isArray(y)||(y=[y]);for(const s of y){const f={seq:this._items.length,sort:i,before:e,after:o,group:l,node:s};this._items.push(f)}if(!m.manual){const s=this._sort();r(s,"item",l!=="?"?`added into group ${l}`:"","created a dependencies error")}return this.nodes}merge(y){Array.isArray(y)||(y=[y]);for(const e of y)if(e)for(const o of e._items)this._items.push(Object.assign({},o));this._items.sort(b.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const m=this._sort();return r(m,"merge created a dependencies error"),this.nodes}sort(){const y=this._sort();return r(y,"sort created a dependencies error"),this.nodes}_sort(){const y={},m=Object.create(null),e=Object.create(null);for(const f of this._items){const a=f.seq,u=f.group;e[u]=e[u]||[],e[u].push(a),y[a]=f.before;for(const p of f.after)m[p]=m[p]||[],m[p].push(a)}for(const f in y){const a=[];for(const u in y[f]){const p=y[f][u];e[p]=e[p]||[],a.push(...e[p])}y[f]=a}for(const f in m)if(e[f])for(const a of e[f])y[a].push(...m[f]);const o={};for(const f in y){const a=y[f];for(const u of a)o[u]=o[u]||[],o[u].push(f)}const l={},i=[];for(let f=0;f<this._items.length;++f){let a=f;if(o[f]){a=null;for(let u=0;u<this._items.length;++u){if(l[u]===!0)continue;o[u]||(o[u]=[]);const p=o[u].length;let x=0;for(let k=0;k<p;++k)l[o[u][k]]&&++x;if(x===p){a=u;break}}}a!==null&&(l[a]=!0,i.push(a))}if(i.length!==this._items.length)return!1;const s={};for(const f of this._items)s[f.seq]=f;this._items=[],this.nodes=[];for(const f of i){const a=s[f];this.nodes.push(a.node),this._items.push(a)}return!0}},b.mergeSort=(y,m)=>y.sort===m.sort?0:y.sort<m.sort?-1:1},5380:(_,v,g)=>{const r=g(443),b=g(2178),y={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:r.URL||URL};v.analyze=function(m,e={}){if(!m)return b.code("DOMAIN_NON_EMPTY_STRING");if(typeof m!="string")throw new Error("Invalid input: domain must be a string");if(m.length>256)return b.code("DOMAIN_TOO_LONG");if(y.nonAsciiRx.test(m)){if(e.allowUnicode===!1)return b.code("DOMAIN_INVALID_UNICODE_CHARS");m=m.normalize("NFC")}if(y.domainControlRx.test(m))return b.code("DOMAIN_INVALID_CHARS");m=y.punycode(m),e.allowFullyQualified&&m[m.length-1]==="."&&(m=m.slice(0,-1));const o=e.minDomainSegments||y.minDomainSegments,l=m.split(".");if(l.length<o)return b.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&l.length>e.maxDomainSegments)return b.code("DOMAIN_SEGMENTS_COUNT_MAX");const i=e.tlds;if(i){const s=l[l.length-1].toLowerCase();if(i.deny&&i.deny.has(s)||i.allow&&!i.allow.has(s))return b.code("DOMAIN_FORBIDDEN_TLDS")}for(let s=0;s<l.length;++s){const f=l[s];if(!f.length)return b.code("DOMAIN_EMPTY_SEGMENT");if(f.length>63)return b.code("DOMAIN_LONG_SEGMENT");if(s<l.length-1){if(!y.domainSegmentRx.test(f))return b.code("DOMAIN_INVALID_CHARS")}else if(!y.tldSegmentRx.test(f))return b.code("DOMAIN_INVALID_TLDS_CHARS")}return null},v.isValid=function(m,e){return!v.analyze(m,e)},y.punycode=function(m){m.includes("%")&&(m=m.replace(/%/g,"%25"));try{return new y.URL(`http://${m}`).host}catch{return m}}},1745:(_,v,g)=>{const r=g(9848),b=g(5380),y=g(2178),m={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(r.TextEncoder||TextEncoder)};v.analyze=function(e,o){return m.email(e,o)},v.isValid=function(e,o){return!m.email(e,o)},m.email=function(e,o={}){if(typeof e!="string")throw new Error("Invalid input: email must be a string");if(!e)return y.code("EMPTY_STRING");const l=!m.nonAsciiRx.test(e);if(!l){if(o.allowUnicode===!1)return y.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const i=e.split("@");if(i.length!==2)return i.length>2?y.code("MULTIPLE_AT_CHAR"):y.code("MISSING_AT_CHAR");const[s,f]=i;if(!s)return y.code("EMPTY_LOCAL");if(!o.ignoreLength){if(e.length>254)return y.code("ADDRESS_TOO_LONG");if(m.encoder.encode(s).length>64)return y.code("LOCAL_TOO_LONG")}return m.local(s,l)||b.analyze(f,o)},m.local=function(e,o){const l=e.split(".");for(const i of l){if(!i.length)return y.code("EMPTY_LOCAL_SEGMENT");if(o){if(!m.atextRx.test(i))return y.code("INVALID_LOCAL_CHARS")}else for(const s of i){if(m.atextRx.test(s))continue;const f=m.binary(s);if(!m.atomRx.test(f))return y.code("INVALID_LOCAL_CHARS")}}},m.binary=function(e){return Array.from(m.encoder.encode(e)).map((o=>String.fromCharCode(o))).join("")},m.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,m.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(_,v)=>{v.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},v.code=function(g){return{code:g,error:v.codes[g]}}},9959:(_,v,g)=>{const r=g(375),b=g(5752);v.regex=function(y={}){r(y.cidr===void 0||typeof y.cidr=="string","options.cidr must be a string");const m=y.cidr?y.cidr.toLowerCase():"optional";r(["required","optional","forbidden"].includes(m),"options.cidr must be one of required, optional, forbidden"),r(y.version===void 0||typeof y.version=="string"||Array.isArray(y.version),"options.version must be a string or an array of string");let e=y.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),r(e.length>=1,"options.version must have at least 1 version specified");for(let i=0;i<e.length;++i)r(typeof e[i]=="string","options.version must only contain strings"),e[i]=e[i].toLowerCase(),r(["ipv4","ipv6","ipvfuture"].includes(e[i]),"options.version contains unknown version "+e[i]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const o=`(?:${e.map((i=>{if(m==="forbidden")return b.ip[i];const s=`\\/${i==="ipv4"?b.ip.v4Cidr:b.ip.v6Cidr}`;return m==="required"?`${b.ip[i]}${s}`:`${b.ip[i]}(?:${s})?`})).join("|")})`,l=new RegExp(`^${o}$`);return{cidr:m,versions:e,regex:l,raw:o}}},5752:(_,v,g)=>{const r=g(375),b=g(6064),y={generate:function(){const m={},e="\\dA-Fa-f",o="["+e+"]",l="\\w-\\.~",i="!\\$&'\\(\\)\\*\\+,;=",s="%"+e,f=l+s+i+":@",a="["+f+"]",u="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";m.ipv4address="(?:"+u+"\\.){3}"+u;const p=o+"{1,4}",x="(?:"+p+":"+p+"|"+m.ipv4address+")",k="(?:"+p+":){6}"+x,A="::(?:"+p+":){5}"+x,E="(?:"+p+")?::(?:"+p+":){4}"+x,h="(?:(?:"+p+":){0,1}"+p+")?::(?:"+p+":){3}"+x,w="(?:(?:"+p+":){0,2}"+p+")?::(?:"+p+":){2}"+x,T="(?:(?:"+p+":){0,3}"+p+")?::"+p+":"+x,R="(?:(?:"+p+":){0,4}"+p+")?::"+x,j="(?:(?:"+p+":){0,5}"+p+")?::"+p,C="(?:(?:"+p+":){0,6}"+p+")?::";m.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",m.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",m.ipv6address="(?:"+k+"|"+A+"|"+E+"|"+h+"|"+w+"|"+T+"|"+R+"|"+j+"|"+C+")",m.ipvFuture="v"+o+"+\\.["+l+i+":]+",m.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",m.schemeRegex=new RegExp(m.scheme);const $="["+l+s+i+":]*",M="["+l+s+i+"]{1,255}",L="(?:\\[(?:"+m.ipv6address+"|"+m.ipvFuture+")\\]|"+m.ipv4address+"|"+M+")",z="(?:"+$+"@)?"+L+"(?::\\d*)?",K="(?:"+$+"@)?("+L+")(?::\\d*)?",ee=a+"*",H=a+"+",D="(?:\\/"+ee+")*",J="\\/(?:"+H+D+")?",P=H+D,X="["+l+s+i+"@]+"+D,q="(?:\\/\\/\\/"+ee+D+")";return m.hierPart="(?:(?:\\/\\/"+z+D+")|"+J+"|"+P+"|"+q+")",m.hierPartCapture="(?:(?:\\/\\/"+K+D+")|"+J+"|"+P+")",m.relativeRef="(?:(?:\\/\\/"+z+D+")|"+J+"|"+X+"|)",m.relativeRefCapture="(?:(?:\\/\\/"+K+D+")|"+J+"|"+X+"|)",m.query="["+f+"\\/\\?]*(?=#|$)",m.queryWithSquareBrackets="["+f+"\\[\\]\\/\\?]*(?=#|$)",m.fragment="["+f+"\\/\\?]*",m}};y.rfc3986=y.generate(),v.ip={v4Cidr:y.rfc3986.ipv4Cidr,v6Cidr:y.rfc3986.ipv6Cidr,ipv4:y.rfc3986.ipv4address,ipv6:y.rfc3986.ipv6address,ipvfuture:y.rfc3986.ipvFuture},y.createRegex=function(m){const e=y.rfc3986,o="(?:\\?"+(m.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",l=m.domain?e.relativeRefCapture:e.relativeRef;if(m.relativeOnly)return y.wrap(l+o);let i="";if(m.scheme){r(m.scheme instanceof RegExp||typeof m.scheme=="string"||Array.isArray(m.scheme),"scheme must be a RegExp, String, or Array");const a=[].concat(m.scheme);r(a.length>=1,"scheme must have at least 1 scheme specified");const u=[];for(let p=0;p<a.length;++p){const x=a[p];r(x instanceof RegExp||typeof x=="string","scheme at position "+p+" must be a RegExp or String"),x instanceof RegExp?u.push(x.source.toString()):(r(e.schemeRegex.test(x),"scheme at position "+p+" must be a valid scheme"),u.push(b(x)))}i=u.join("|")}const s="(?:"+(i?"(?:"+i+")":e.scheme)+":"+(m.domain?e.hierPartCapture:e.hierPart)+")",f=m.allowRelative?"(?:"+s+"|"+l+")":s;return y.wrap(f+o,i)},y.wrap=function(m,e){return{raw:m=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${m}`,regex:new RegExp(`^${m}$`),scheme:e}},y.uriRegex=y.createRegex({}),v.regex=function(m={}){return m.scheme||m.allowRelative||m.relativeOnly||m.allowQuerySquareBrackets||m.domain?y.createRegex(m):y.uriRegex}},1447:(_,v)=>{const g={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};v.Parser=class{constructor(r,b={}){if(!b[g.settings]&&b.constants)for(const y in b.constants){const m=b.constants[y];if(m!==null&&!["boolean","number","string"].includes(typeof m))throw new Error(`Formula constant ${y} contains invalid ${typeof m} value type`)}this.settings=b[g.settings]?b:Object.assign({[g.settings]:!0,constants:{},functions:{}},b),this.single=null,this._parts=null,this._parse(r)}_parse(r){let b=[],y="",m=0,e=!1;const o=i=>{if(m)throw new Error("Formula missing closing parenthesis");const s=b.length?b[b.length-1]:null;if(e||y||i){if(s&&s.type==="reference"&&i===")")return s.type="function",s.value=this._subFormula(y,s.value),void(y="");if(i===")"){const f=new v.Parser(y,this.settings);b.push({type:"segment",value:f})}else if(e){if(e==="]")return b.push({type:"reference",value:y}),void(y="");b.push({type:"literal",value:y})}else if(g.operatorCharacters.includes(y))s&&s.type==="operator"&&g.operators.includes(s.value+y)?s.value+=y:b.push({type:"operator",value:y});else if(y.match(g.numberRx))b.push({type:"constant",value:parseFloat(y)});else if(this.settings.constants[y]!==void 0)b.push({type:"constant",value:this.settings.constants[y]});else{if(!y.match(g.tokenRx))throw new Error(`Formula contains invalid token: ${y}`);b.push({type:"reference",value:y})}y=""}};for(const i of r)e?i===e?(o(),e=!1):y+=i:m?i==="("?(y+=i,++m):i===")"?(--m,m?y+=i:o(i)):y+=i:i in g.literals?e=g.literals[i]:i==="("?(o(),++m):g.operatorCharacters.includes(i)?(o(),y=i,o()):i!==" "?y+=i:o();o(),b=b.map(((i,s)=>i.type!=="operator"||i.value!=="-"||s&&b[s-1].type!=="operator"?i:{type:"operator",value:"n"}));let l=!1;for(const i of b){if(i.type==="operator"){if(g.operatorsPrefix.includes(i.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!g.operators.includes(i.value))throw new Error(`Formula contains an unknown operator ${i.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");b.length===1&&["reference","literal","constant"].includes(b[0].type)&&(this.single={type:b[0].type==="reference"?"reference":"value",value:b[0].value}),this._parts=b.map((i=>{if(i.type==="operator")return g.operatorsPrefix.includes(i.value)?i:i.value;if(i.type!=="reference")return i.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(i.value))throw new Error(`Formula contains invalid reference ${i.value}`);return this.settings.reference?this.settings.reference(i.value):g.reference(i.value)}))}_subFormula(r,b){const y=this.settings.functions[b];if(typeof y!="function")throw new Error(`Formula contains unknown function ${b}`);let m=[];if(r){let e="",o=0,l=!1;const i=()=>{if(!e)throw new Error(`Formula contains function ${b} with invalid arguments ${r}`);m.push(e),e=""};for(let s=0;s<r.length;++s){const f=r[s];l?(e+=f,f===l&&(l=!1)):f in g.literals&&!o?(e+=f,l=g.literals[f]):f!==","||o?(e+=f,f==="("?++o:f===")"&&--o):i()}i()}return m=m.map((e=>new v.Parser(e,this.settings))),function(e){const o=[];for(const l of m)o.push(l.evaluate(e));return y.call(e,...o)}}evaluate(r){const b=this._parts.slice();for(let y=b.length-2;y>=0;--y){const m=b[y];if(m&&m.type==="operator"){const e=b[y+1];b.splice(y+1,1);const o=g.evaluate(e,r);b[y]=g.single(m.value,o)}}return g.operatorsOrder.forEach((y=>{for(let m=1;m<b.length-1;)if(y.includes(b[m])){const e=b[m],o=g.evaluate(b[m-1],r),l=g.evaluate(b[m+1],r);b.splice(m,2);const i=g.calculate(e,o,l);b[m-1]=i===0?0:i}else m+=2})),g.evaluate(b[0],r)}},v.Parser.prototype[g.symbol]=!0,g.reference=function(r){return function(b){return b&&b[r]!==void 0?b[r]:null}},g.evaluate=function(r,b){return r===null?null:typeof r=="function"?r(b):r[g.symbol]?r.evaluate(b):r},g.single=function(r,b){if(r==="!")return!b;const y=-b;return y===0?0:y},g.calculate=function(r,b,y){if(r==="??")return g.exists(b)?b:y;if(typeof b=="string"||typeof y=="string"){if(r==="+")return(b=g.exists(b)?b:"")+(g.exists(y)?y:"")}else switch(r){case"^":return Math.pow(b,y);case"*":return b*y;case"/":return b/y;case"%":return b%y;case"+":return b+y;case"-":return b-y}switch(r){case"<":return b<y;case"<=":return b<=y;case">":return b>y;case">=":return b>=y;case"==":return b===y;case"!=":return b!==y;case"&&":return b&&y;case"||":return b||y}return null},g.exists=function(r){return r!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:_=>{_.exports=JSON.parse('{"version":"17.13.3"}')}},d={},(function _(v){var g=d[v];if(g!==void 0)return g.exports;var r=d[v]={exports:{}};return n[v](r,r.exports,_),r.exports})(5107);var n,d}))})(vn)),vn.exports}var Yi=Gi();const Q=Hn(Yi),qs=-1,cn=0,Mt=1,an=2,Wn=3,Gn=4,Yn=5,Kn=6,Hs=7,Vs=8,gs=typeof self=="object"?self:globalThis,Ki=(c,t)=>{const n=(_,v)=>(c.set(v,_),_),d=_=>{if(c.has(_))return c.get(_);const[v,g]=t[_];switch(v){case cn:case qs:return n(g,_);case Mt:{const r=n([],_);for(const b of g)r.push(d(b));return r}case an:{const r=n({},_);for(const[b,y]of g)r[d(b)]=d(y);return r}case Wn:return n(new Date(g),_);case Gn:{const{source:r,flags:b}=g;return n(new RegExp(r,b),_)}case Yn:{const r=n(new Map,_);for(const[b,y]of g)r.set(d(b),d(y));return r}case Kn:{const r=n(new Set,_);for(const b of g)r.add(d(b));return r}case Hs:{const{name:r,message:b}=g;return n(new gs[r](b),_)}case Vs:return n(BigInt(g),_);case"BigInt":return n(Object(BigInt(g)),_);case"ArrayBuffer":return n(new Uint8Array(g).buffer,g);case"DataView":{const{buffer:r}=new Uint8Array(g);return n(new DataView(r),g)}}return n(new gs[v](g),_)};return d},ys=c=>Ki(new Map,c)(0),bt="",{toString:Xi}={},{keys:Zi}=Object,Et=c=>{const t=typeof c;if(t!=="object"||!c)return[cn,t];const n=Xi.call(c).slice(8,-1);switch(n){case"Array":return[Mt,bt];case"Object":return[an,bt];case"Date":return[Wn,bt];case"RegExp":return[Gn,bt];case"Map":return[Yn,bt];case"Set":return[Kn,bt];case"DataView":return[Mt,n]}return n.includes("Array")?[Mt,n]:n.includes("Error")?[Hs,n]:[an,n]},Wt=([c,t])=>c===cn&&(t==="function"||t==="symbol"),Ji=(c,t,n,d)=>{const _=(g,r)=>{const b=d.push(g)-1;return n.set(r,b),b},v=g=>{if(n.has(g))return n.get(g);let[r,b]=Et(g);switch(r){case cn:{let m=g;switch(b){case"bigint":r=Vs,m=g.toString();break;case"function":case"symbol":if(c)throw new TypeError("unable to serialize "+b);m=null;break;case"undefined":return _([qs],g)}return _([r,m],g)}case Mt:{if(b){let o=g;return b==="DataView"?o=new Uint8Array(g.buffer):b==="ArrayBuffer"&&(o=new Uint8Array(g)),_([b,[...o]],g)}const m=[],e=_([r,m],g);for(const o of g)m.push(v(o));return e}case an:{if(b)switch(b){case"BigInt":return _([b,g.toString()],g);case"Boolean":case"Number":case"String":return _([b,g.valueOf()],g)}if(t&&"toJSON"in g)return v(g.toJSON());const m=[],e=_([r,m],g);for(const o of Zi(g))(c||!Wt(Et(g[o])))&&m.push([v(o),v(g[o])]);return e}case Wn:return _([r,g.toISOString()],g);case Gn:{const{source:m,flags:e}=g;return _([r,{source:m,flags:e}],g)}case Yn:{const m=[],e=_([r,m],g);for(const[o,l]of g)(c||!(Wt(Et(o))||Wt(Et(l))))&&m.push([v(o),v(l)]);return e}case Kn:{const m=[],e=_([r,m],g);for(const o of g)(c||!Wt(Et(o)))&&m.push(v(o));return e}}const{message:y}=g;return _([r,{name:b,message:y}],g)};return v},bs=(c,{json:t,lossy:n}={})=>{const d=[];return Ji(!(t||n),!!t,new Map,d)(c),d},Qi=typeof structuredClone=="function"?(c,t)=>t&&("json"in t||"lossy"in t)?ys(bs(c,t)):structuredClone(c):(c,t)=>ys(bs(c,t)),ea=Ws("end"),ta=Ws("start");function Ws(c){return t;function t(n){const d=n&&n.position&&n.position[c]||{};if(typeof d.line=="number"&&d.line>0&&typeof d.column=="number"&&d.column>0)return{line:d.line,column:d.column,offset:typeof d.offset=="number"&&d.offset>-1?d.offset:void 0}}}function na(c){const t=ta(c),n=ea(c);if(t&&n)return{start:t,end:n}}const it=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Dt={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...it,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...it],h2:[["className","sr-only"]],img:[...it,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...it,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...it],table:[...it],ul:[...it,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Qe={}.hasOwnProperty;function sa(c,t){let n={type:"root",children:[]};const d={schema:t?{...Dt,...t}:Dt,stack:[]},_=Gs(d,c);return _&&(Array.isArray(_)?_.length===1?n=_[0]:n.children=_:n=_),n}function Gs(c,t){if(t&&typeof t=="object"){const n=t;switch(typeof n.type=="string"?n.type:""){case"comment":return ra(c,n);case"doctype":return ia(c,n);case"element":return aa(c,n);case"root":return oa(c,n);case"text":return la(c,n)}}}function ra(c,t){if(c.schema.allowComments){const n=typeof t.value=="string"?t.value:"",d=n.indexOf("-->"),v={type:"comment",value:d<0?n:n.slice(0,d)};return Bt(v,t),v}}function ia(c,t){if(c.schema.allowDoctypes){const n={type:"doctype"};return Bt(n,t),n}}function aa(c,t){const n=typeof t.tagName=="string"?t.tagName:"";c.stack.push(n);const d=Ys(c,t.children),_=ca(c,t.properties);c.stack.pop();let v=!1;if(n&&n!=="*"&&(!c.schema.tagNames||c.schema.tagNames.includes(n))&&(v=!0,c.schema.ancestors&&Qe.call(c.schema.ancestors,n))){const r=c.schema.ancestors[n];let b=-1;for(v=!1;++b<r.length;)c.stack.includes(r[b])&&(v=!0)}if(!v)return c.schema.strip&&!c.schema.strip.includes(n)?d:void 0;const g={type:"element",tagName:n,properties:_,children:d};return Bt(g,t),g}function oa(c,t){const d={type:"root",children:Ys(c,t.children)};return Bt(d,t),d}function la(c,t){const d={type:"text",value:typeof t.value=="string"?t.value:""};return Bt(d,t),d}function Ys(c,t){const n=[];if(Array.isArray(t)){const d=t;let _=-1;for(;++_<d.length;){const v=Gs(c,d[_]);v&&(Array.isArray(v)?n.push(...v):n.push(v))}}return n}function ca(c,t){const n=c.stack[c.stack.length-1],d=c.schema.attributes,_=c.schema.required,v=d&&Qe.call(d,n)?d[n]:void 0,g=d&&Qe.call(d,"*")?d["*"]:void 0,r=t&&typeof t=="object"?t:{},b={};let y;for(y in r)if(Qe.call(r,y)){const m=r[y];let e=vs(c,_s(v,y),y,m);e==null&&(e=vs(c,_s(g,y),y,m)),e!=null&&(b[y]=e)}if(_&&Qe.call(_,n)){const m=_[n];for(y in m)Qe.call(m,y)&&!Qe.call(b,y)&&(b[y]=m[y])}return b}function vs(c,t,n,d){return t?Array.isArray(d)?ua(c,t,n,d):Ks(c,t,n,d):void 0}function ua(c,t,n,d){let _=-1;const v=[];for(;++_<d.length;){const g=Ks(c,t,n,d[_]);(typeof g=="number"||typeof g=="string")&&v.push(g)}return v}function Ks(c,t,n,d){if(!(typeof d!="boolean"&&typeof d!="number"&&typeof d!="string")&&da(c,n,d)){if(typeof t=="object"&&t.length>1){let _=!1,v=0;for(;++v<t.length;){const g=t[v];if(g&&typeof g=="object"&&"flags"in g){if(g.test(String(d))){_=!0;break}}else if(g===d){_=!0;break}}if(!_)return}return c.schema.clobber&&c.schema.clobberPrefix&&c.schema.clobber.includes(n)?c.schema.clobberPrefix+d:d}}function da(c,t,n){const d=c.schema.protocols&&Qe.call(c.schema.protocols,t)?c.schema.protocols[t]:void 0;if(!d||d.length===0)return!0;const _=String(n),v=_.indexOf(":"),g=_.indexOf("?"),r=_.indexOf("#"),b=_.indexOf("/");if(v<0||b>-1&&v>b||g>-1&&v>g||r>-1&&v>r)return!0;let y=-1;for(;++y<d.length;){const m=d[y];if(v===m.length&&_.slice(0,m.length)===m)return!0}return!1}function Bt(c,t){const n=na(t);t.data&&(c.data=Qi(t.data)),n&&(c.position=n)}function _s(c,t){let n,d=-1;if(c)for(;++d<c.length;){const _=c[d],v=typeof _=="string"?_:_[0];if(v===t)return _;v==="data*"&&(n=_)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return n}function fa(c){return function(t){return sa(t,c)}}const ha=Q.string().domain({tlds:{allow:["eth"]}}),pa=Q.string().pattern(/^0x[a-fA-F0-9]{40}$/),ma=(c,t)=>{if(!c)return t.error("any.required");if(c.includes(".eth")){if(ha.validate(c).error)return t.error("custom.address")}else if(pa.validate(c).error)return t.error("custom.address");return c},Xs=Q.when("useCustomRecipient",{is:!0,then:Q.string().custom(ma),otherwise:Q.string().empty("")}).messages({"custom.address":'"Address" must be a valid Ethereum name or address'}),Zs=c=>(t,n)=>{const d=n.original+"";return d.includes(".")&&d.split(".")[1].length>c?n.error("number.precision",{limit:c}):t},Js=c=>(t,n)=>{const d=Q.number().positive().unsafe(!0).label(c);try{Q.assert(t,d)}catch(_){return n.message(_.details[0].message)}return t.includes(".")&&t.split(".")[1].length>18?n.message(`"${c}" must have at most 18 decimal places after the decimal point`):t.endsWith(".")?t.splice(-1):t},ga=Q.object().keys({title:Q.string().allow("").label("Title"),description:Q.string().allow("").label("Description"),editionSize:Q.number().integer().min(1).empty("").required().label("Edition size"),royaltyPercentage:Q.number().custom(Zs(2)).min(0).max(100).empty("").required().label("Royalty percentage"),useCustomRecipient:Q.boolean().required(),customRecipient:Xs.label("Address"),textType:Q.valid("text/plain","text/markdown","text/html").required()}),ya=Q.object().keys({to:Xs.label("Address"),amount:Q.number().integer().min(1).empty("").required().label("Amount")}),ba=Q.object().keys({amount:Q.number().integer().min(1).empty("").required().label("Amount")});Q.object().keys({amount:Q.number().min(1).empty("").label("Amount"),price:Q.string().custom(Js("Price")).empty("").label("Price")});const va=Q.object().keys({amount:Q.number().min(1).empty("").required().label("Amount"),price:Q.string().custom(Js("Price")).empty("").required().label("Price")});Q.object().keys({amount:Q.number().integer().min(1).empty("").required().label("Amount")});const _a=Q.object().keys({royaltyPercentage:Q.number().custom(Zs(2)).min(0).max(100).empty("").required().label("Royalty percentage")}),xa={...Dt,protocols:{...Dt.protocols,src:[...Dt.protocols.src,"data"]}},wa={buy:ba,editRoyalty:_a,list:va,validMarkdown:xa,mint:ga,transfer:ya};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Qs,setPrototypeOf:xs,isFrozen:ka,getPrototypeOf:Ta,getOwnPropertyDescriptor:Ea}=Object;let{freeze:me,seal:Re,create:In}=Object,{apply:Mn,construct:Dn}=typeof Reflect<"u"&&Reflect;me||(me=function(t){return t});Re||(Re=function(t){return t});Mn||(Mn=function(t,n){for(var d=arguments.length,_=new Array(d>2?d-2:0),v=2;v<d;v++)_[v-2]=arguments[v];return t.apply(n,_)});Dn||(Dn=function(t){for(var n=arguments.length,d=new Array(n>1?n-1:0),_=1;_<n;_++)d[_-1]=arguments[_];return new t(...d)});const Gt=ge(Array.prototype.forEach),Sa=ge(Array.prototype.lastIndexOf),ws=ge(Array.prototype.pop),St=ge(Array.prototype.push),Aa=ge(Array.prototype.splice),Jt=ge(String.prototype.toLowerCase),_n=ge(String.prototype.toString),xn=ge(String.prototype.match),At=ge(String.prototype.replace),Ra=ge(String.prototype.indexOf),Na=ge(String.prototype.trim),je=ge(Object.prototype.hasOwnProperty),pe=ge(RegExp.prototype.test),Rt=ja(TypeError);function ge(c){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,d=new Array(n>1?n-1:0),_=1;_<n;_++)d[_-1]=arguments[_];return Mn(c,t,d)}}function ja(c){return function(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return Dn(c,n)}}function G(c,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt;xs&&xs(c,null);let d=t.length;for(;d--;){let _=t[d];if(typeof _=="string"){const v=n(_);v!==_&&(ka(t)||(t[d]=v),_=v)}c[_]=!0}return c}function Ca(c){for(let t=0;t<c.length;t++)je(c,t)||(c[t]=null);return c}function Ie(c){const t=In(null);for(const[n,d]of Qs(c))je(c,n)&&(Array.isArray(d)?t[n]=Ca(d):d&&typeof d=="object"&&d.constructor===Object?t[n]=Ie(d):t[n]=d);return t}function Nt(c,t){for(;c!==null;){const d=Ea(c,t);if(d){if(d.get)return ge(d.get);if(typeof d.value=="function")return ge(d.value)}c=Ta(c)}function n(){return null}return n}const ks=me(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wn=me(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),kn=me(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Oa=me(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tn=me(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$a=me(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ts=me(["#text"]),Es=me(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),En=me(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ss=me(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yt=me(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ia=Re(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ma=Re(/<%[\w\W]*|[\w\W]*%>/gm),Da=Re(/\$\{[\w\W]*/gm),La=Re(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pa=Re(/^aria-[\-\w]+$/),er=Re(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ba=Re(/^(?:\w+script|data):/i),Fa=Re(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tr=Re(/^html$/i),za=Re(/^[a-z][.\w]*(-[.\w]+)+$/i);var As=Object.freeze({__proto__:null,ARIA_ATTR:Pa,ATTR_WHITESPACE:Fa,CUSTOM_ELEMENT:za,DATA_ATTR:La,DOCTYPE_NAME:tr,ERB_EXPR:Ma,IS_ALLOWED_URI:er,IS_SCRIPT_OR_DATA:Ba,MUSTACHE_EXPR:Ia,TMPLIT_EXPR:Da});const jt={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ua=function(){return typeof window>"u"?null:window},qa=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let d=null;const _="data-tt-policy-suffix";n&&n.hasAttribute(_)&&(d=n.getAttribute(_));const v="dompurify"+(d?"#"+d:"");try{return t.createPolicy(v,{createHTML(g){return g},createScriptURL(g){return g}})}catch{return console.warn("TrustedTypes policy "+v+" could not be created."),null}},Rs=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function nr(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ua();const t=U=>nr(U);if(t.version="3.3.1",t.removed=[],!c||!c.document||c.document.nodeType!==jt.document||!c.Element)return t.isSupported=!1,t;let{document:n}=c;const d=n,_=d.currentScript,{DocumentFragment:v,HTMLTemplateElement:g,Node:r,Element:b,NodeFilter:y,NamedNodeMap:m=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:e,DOMParser:o,trustedTypes:l}=c,i=b.prototype,s=Nt(i,"cloneNode"),f=Nt(i,"remove"),a=Nt(i,"nextSibling"),u=Nt(i,"childNodes"),p=Nt(i,"parentNode");if(typeof g=="function"){const U=n.createElement("template");U.content&&U.content.ownerDocument&&(n=U.content.ownerDocument)}let x,k="";const{implementation:A,createNodeIterator:E,createDocumentFragment:h,getElementsByTagName:w}=n,{importNode:T}=d;let R=Rs();t.isSupported=typeof Qs=="function"&&typeof p=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:C,TMPLIT_EXPR:$,DATA_ATTR:M,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:ee}=As;let{IS_ALLOWED_URI:H}=As,D=null;const J=G({},[...ks,...wn,...kn,...Tn,...Ts]);let P=null;const X=G({},[...Es,...En,...Ss,...Yt]);let q=Object.seal(In(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ne=null,ce=null;const Z=Object.seal(In(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Le=!0,Ye=!0,tt=!1,Pe=!0,Ke=!1,Xe=!0,Be=!1,ot=!1,Fe=!1,ze=!1,ye=!1,lt=!1,Ft=!0,ue=!1;const Ze="user-content-";let kt=!0,nt=!1,Ne={},Ee=null;const ct=G({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ut=null;const Ue=G({},["audio","video","img","source","image","track"]);let dt=null;const qe=G({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ft="http://www.w3.org/1998/Math/MathML",ht="http://www.w3.org/2000/svg",Se="http://www.w3.org/1999/xhtml";let He=Se,Tt=!1,st=null;const Oe=G({},[ft,ht,Se],_n);let pt=G({},["mi","mo","mn","ms","mtext"]),mt=G({},["annotation-xml"]);const zt=G({},["title","style","font","a","script"]);let Je=null;const V=["application/xhtml+xml","text/html"],se="text/html";let Y=null,re=null;const gt=n.createElement("form"),ie=function(N){return N instanceof RegExp||N instanceof Function},de=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(re&&re===N)){if((!N||typeof N!="object")&&(N={}),N=Ie(N),Je=V.indexOf(N.PARSER_MEDIA_TYPE)===-1?se:N.PARSER_MEDIA_TYPE,Y=Je==="application/xhtml+xml"?_n:Jt,D=je(N,"ALLOWED_TAGS")?G({},N.ALLOWED_TAGS,Y):J,P=je(N,"ALLOWED_ATTR")?G({},N.ALLOWED_ATTR,Y):X,st=je(N,"ALLOWED_NAMESPACES")?G({},N.ALLOWED_NAMESPACES,_n):Oe,dt=je(N,"ADD_URI_SAFE_ATTR")?G(Ie(qe),N.ADD_URI_SAFE_ATTR,Y):qe,ut=je(N,"ADD_DATA_URI_TAGS")?G(Ie(Ue),N.ADD_DATA_URI_TAGS,Y):Ue,Ee=je(N,"FORBID_CONTENTS")?G({},N.FORBID_CONTENTS,Y):ct,ne=je(N,"FORBID_TAGS")?G({},N.FORBID_TAGS,Y):Ie({}),ce=je(N,"FORBID_ATTR")?G({},N.FORBID_ATTR,Y):Ie({}),Ne=je(N,"USE_PROFILES")?N.USE_PROFILES:!1,Le=N.ALLOW_ARIA_ATTR!==!1,Ye=N.ALLOW_DATA_ATTR!==!1,tt=N.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=N.SAFE_FOR_TEMPLATES||!1,Xe=N.SAFE_FOR_XML!==!1,Be=N.WHOLE_DOCUMENT||!1,ze=N.RETURN_DOM||!1,ye=N.RETURN_DOM_FRAGMENT||!1,lt=N.RETURN_TRUSTED_TYPE||!1,Fe=N.FORCE_BODY||!1,Ft=N.SANITIZE_DOM!==!1,ue=N.SANITIZE_NAMED_PROPS||!1,kt=N.KEEP_CONTENT!==!1,nt=N.IN_PLACE||!1,H=N.ALLOWED_URI_REGEXP||er,He=N.NAMESPACE||Se,pt=N.MATHML_TEXT_INTEGRATION_POINTS||pt,mt=N.HTML_INTEGRATION_POINTS||mt,q=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&ie(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&ie(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(Ye=!1),ye&&(ze=!0),Ne&&(D=G({},Ts),P=[],Ne.html===!0&&(G(D,ks),G(P,Es)),Ne.svg===!0&&(G(D,wn),G(P,En),G(P,Yt)),Ne.svgFilters===!0&&(G(D,kn),G(P,En),G(P,Yt)),Ne.mathMl===!0&&(G(D,Tn),G(P,Ss),G(P,Yt))),N.ADD_TAGS&&(typeof N.ADD_TAGS=="function"?Z.tagCheck=N.ADD_TAGS:(D===J&&(D=Ie(D)),G(D,N.ADD_TAGS,Y))),N.ADD_ATTR&&(typeof N.ADD_ATTR=="function"?Z.attributeCheck=N.ADD_ATTR:(P===X&&(P=Ie(P)),G(P,N.ADD_ATTR,Y))),N.ADD_URI_SAFE_ATTR&&G(dt,N.ADD_URI_SAFE_ATTR,Y),N.FORBID_CONTENTS&&(Ee===ct&&(Ee=Ie(Ee)),G(Ee,N.FORBID_CONTENTS,Y)),N.ADD_FORBID_CONTENTS&&(Ee===ct&&(Ee=Ie(Ee)),G(Ee,N.ADD_FORBID_CONTENTS,Y)),kt&&(D["#text"]=!0),Be&&G(D,["html","head","body"]),D.table&&(G(D,["tbody"]),delete ne.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw Rt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Rt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=N.TRUSTED_TYPES_POLICY,k=x.createHTML("")}else x===void 0&&(x=qa(l,_)),x!==null&&typeof k=="string"&&(k=x.createHTML(""));me&&me(N),re=N}},rt=G({},[...wn,...kn,...Oa]),be=G({},[...Tn,...$a]),we=function(N){let O=p(N);(!O||!O.tagName)&&(O={namespaceURI:He,tagName:"template"});const F=Jt(N.tagName),te=Jt(O.tagName);return st[N.namespaceURI]?N.namespaceURI===ht?O.namespaceURI===Se?F==="svg":O.namespaceURI===ft?F==="svg"&&(te==="annotation-xml"||pt[te]):!!rt[F]:N.namespaceURI===ft?O.namespaceURI===Se?F==="math":O.namespaceURI===ht?F==="math"&&mt[te]:!!be[F]:N.namespaceURI===Se?O.namespaceURI===ht&&!mt[te]||O.namespaceURI===ft&&!pt[te]?!1:!be[F]&&(zt[F]||!rt[F]):!!(Je==="application/xhtml+xml"&&st[N.namespaceURI]):!1},ke=function(N){St(t.removed,{element:N});try{p(N).removeChild(N)}catch{f(N)}},he=function(N,O){try{St(t.removed,{attribute:O.getAttributeNode(N),from:O})}catch{St(t.removed,{attribute:null,from:O})}if(O.removeAttribute(N),N==="is")if(ze||ye)try{ke(O)}catch{}else try{O.setAttribute(N,"")}catch{}},hn=function(N){let O=null,F=null;if(Fe)N="<remove></remove>"+N;else{const ae=xn(N,/^[\r\n\t ]+/);F=ae&&ae[0]}Je==="application/xhtml+xml"&&He===Se&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");const te=x?x.createHTML(N):N;if(He===Se)try{O=new o().parseFromString(te,Je)}catch{}if(!O||!O.documentElement){O=A.createDocument(He,"template",null);try{O.documentElement.innerHTML=Tt?k:te}catch{}}const fe=O.body||O.documentElement;return N&&F&&fe.insertBefore(n.createTextNode(F),fe.childNodes[0]||null),He===Se?w.call(O,Be?"html":"body")[0]:Be?O.documentElement:fe},ns=function(N){return E.call(N.ownerDocument||N,N,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},pn=function(N){return N instanceof e&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof m)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},ss=function(N){return typeof r=="function"&&N instanceof r};function Ve(U,N,O){Gt(U,F=>{F.call(t,N,O,re)})}const rs=function(N){let O=null;if(Ve(R.beforeSanitizeElements,N,null),pn(N))return ke(N),!0;const F=Y(N.nodeName);if(Ve(R.uponSanitizeElement,N,{tagName:F,allowedTags:D}),Xe&&N.hasChildNodes()&&!ss(N.firstElementChild)&&pe(/<[/\w!]/g,N.innerHTML)&&pe(/<[/\w!]/g,N.textContent)||N.nodeType===jt.progressingInstruction||Xe&&N.nodeType===jt.comment&&pe(/<[/\w]/g,N.data))return ke(N),!0;if(!(Z.tagCheck instanceof Function&&Z.tagCheck(F))&&(!D[F]||ne[F])){if(!ne[F]&&as(F)&&(q.tagNameCheck instanceof RegExp&&pe(q.tagNameCheck,F)||q.tagNameCheck instanceof Function&&q.tagNameCheck(F)))return!1;if(kt&&!Ee[F]){const te=p(N)||N.parentNode,fe=u(N)||N.childNodes;if(fe&&te){const ae=fe.length;for(let ve=ae-1;ve>=0;--ve){const We=s(fe[ve],!0);We.__removalCount=(N.__removalCount||0)+1,te.insertBefore(We,a(N))}}}return ke(N),!0}return N instanceof b&&!we(N)||(F==="noscript"||F==="noembed"||F==="noframes")&&pe(/<\/no(script|embed|frames)/i,N.innerHTML)?(ke(N),!0):(Ke&&N.nodeType===jt.text&&(O=N.textContent,Gt([j,C,$],te=>{O=At(O,te," ")}),N.textContent!==O&&(St(t.removed,{element:N.cloneNode()}),N.textContent=O)),Ve(R.afterSanitizeElements,N,null),!1)},is=function(N,O,F){if(Ft&&(O==="id"||O==="name")&&(F in n||F in gt))return!1;if(!(Ye&&!ce[O]&&pe(M,O))){if(!(Le&&pe(L,O))){if(!(Z.attributeCheck instanceof Function&&Z.attributeCheck(O,N))){if(!P[O]||ce[O]){if(!(as(N)&&(q.tagNameCheck instanceof RegExp&&pe(q.tagNameCheck,N)||q.tagNameCheck instanceof Function&&q.tagNameCheck(N))&&(q.attributeNameCheck instanceof RegExp&&pe(q.attributeNameCheck,O)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(O,N))||O==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&pe(q.tagNameCheck,F)||q.tagNameCheck instanceof Function&&q.tagNameCheck(F))))return!1}else if(!dt[O]){if(!pe(H,At(F,K,""))){if(!((O==="src"||O==="xlink:href"||O==="href")&&N!=="script"&&Ra(F,"data:")===0&&ut[N])){if(!(tt&&!pe(z,At(F,K,"")))){if(F)return!1}}}}}}}return!0},as=function(N){return N!=="annotation-xml"&&xn(N,ee)},os=function(N){Ve(R.beforeSanitizeAttributes,N,null);const{attributes:O}=N;if(!O||pn(N))return;const F={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P,forceKeepAttr:void 0};let te=O.length;for(;te--;){const fe=O[te],{name:ae,namespaceURI:ve,value:We}=fe,yt=Y(ae),mn=We;let le=ae==="value"?mn:Na(mn);if(F.attrName=yt,F.attrValue=le,F.keepAttr=!0,F.forceKeepAttr=void 0,Ve(R.uponSanitizeAttribute,N,F),le=F.attrValue,ue&&(yt==="id"||yt==="name")&&(he(ae,N),le=Ze+le),Xe&&pe(/((--!?|])>)|<\/(style|title|textarea)/i,le)){he(ae,N);continue}if(yt==="attributename"&&xn(le,"href")){he(ae,N);continue}if(F.forceKeepAttr)continue;if(!F.keepAttr){he(ae,N);continue}if(!Pe&&pe(/\/>/i,le)){he(ae,N);continue}Ke&&Gt([j,C,$],cs=>{le=At(le,cs," ")});const ls=Y(N.nodeName);if(!is(ls,yt,le)){he(ae,N);continue}if(x&&typeof l=="object"&&typeof l.getAttributeType=="function"&&!ve)switch(l.getAttributeType(ls,yt)){case"TrustedHTML":{le=x.createHTML(le);break}case"TrustedScriptURL":{le=x.createScriptURL(le);break}}if(le!==mn)try{ve?N.setAttributeNS(ve,ae,le):N.setAttribute(ae,le),pn(N)?ke(N):ws(t.removed)}catch{he(ae,N)}}Ve(R.afterSanitizeAttributes,N,null)},yr=function U(N){let O=null;const F=ns(N);for(Ve(R.beforeSanitizeShadowDOM,N,null);O=F.nextNode();)Ve(R.uponSanitizeShadowNode,O,null),rs(O),os(O),O.content instanceof v&&U(O.content);Ve(R.afterSanitizeShadowDOM,N,null)};return t.sanitize=function(U){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=null,F=null,te=null,fe=null;if(Tt=!U,Tt&&(U="<!-->"),typeof U!="string"&&!ss(U))if(typeof U.toString=="function"){if(U=U.toString(),typeof U!="string")throw Rt("dirty is not a string, aborting")}else throw Rt("toString is not a function");if(!t.isSupported)return U;if(ot||de(N),t.removed=[],typeof U=="string"&&(nt=!1),nt){if(U.nodeName){const We=Y(U.nodeName);if(!D[We]||ne[We])throw Rt("root node is forbidden and cannot be sanitized in-place")}}else if(U instanceof r)O=hn("<!---->"),F=O.ownerDocument.importNode(U,!0),F.nodeType===jt.element&&F.nodeName==="BODY"||F.nodeName==="HTML"?O=F:O.appendChild(F);else{if(!ze&&!Ke&&!Be&&U.indexOf("<")===-1)return x&&lt?x.createHTML(U):U;if(O=hn(U),!O)return ze?null:lt?k:""}O&&Fe&&ke(O.firstChild);const ae=ns(nt?U:O);for(;te=ae.nextNode();)rs(te),os(te),te.content instanceof v&&yr(te.content);if(nt)return U;if(ze){if(ye)for(fe=h.call(O.ownerDocument);O.firstChild;)fe.appendChild(O.firstChild);else fe=O;return(P.shadowroot||P.shadowrootmode)&&(fe=T.call(d,fe,!0)),fe}let ve=Be?O.outerHTML:O.innerHTML;return Be&&D["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&pe(tr,O.ownerDocument.doctype.name)&&(ve="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+ve),Ke&&Gt([j,C,$],We=>{ve=At(ve,We," ")}),x&&lt?x.createHTML(ve):ve},t.setConfig=function(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};de(U),ot=!0},t.clearConfig=function(){re=null,ot=!1},t.isValidAttribute=function(U,N,O){re||de({});const F=Y(U),te=Y(N);return is(F,te,O)},t.addHook=function(U,N){typeof N=="function"&&St(R[U],N)},t.removeHook=function(U,N){if(N!==void 0){const O=Sa(R[U],N);return O===-1?void 0:Aa(R[U],O,1)[0]}return ws(R[U])},t.removeHooks=function(U){R[U]=[]},t.removeAllHooks=function(){R=Rs()},t}var Ha=nr();const Va=["html","head","body","div","span","p","br","hr","h1","h2","h3","h4","h5","h6","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","th","td","caption","article","section","nav","aside","header","footer","main","figure","figcaption","details","summary","a","strong","b","em","i","u","s","mark","small","sub","sup","blockquote","q","cite","code","pre","kbd","var","samp","img","audio","video","source","track","picture","style","svg","g","path","rect","circle","ellipse","line","polyline","polygon","text","tspan","textPath","defs","use","symbol","clipPath","mask","pattern","linearGradient","radialGradient","stop","filter","feGaussianBlur","feOffset","feBlend","feColorMatrix","feComposite","feMerge","feMergeNode","feFlood","image","title","desc"],Wa={ALLOWED_TAGS:Va,ADD_ATTR:["class","style","target","viewBox","xmlns","fill","stroke","stroke-width","d","x","y","width","height","cx","cy","r","rx","ry","x1","y1","x2","y2","points","transform","opacity","id","href","xlink:href","offset","stop-color","stop-opacity","gradientUnits","gradientTransform","spreadMethod","preserveAspectRatio","clip-path","filter","mask","font-size","font-family","text-anchor","dominant-baseline"],FORCE_BODY:!0};function Xn({source:c}){const[t,n]=B.useState(300),d=B.useRef(null),_=()=>{var g,r,b;if(d.current)try{const y=(b=(r=(g=d.current.contentWindow)==null?void 0:g.document)==null?void 0:r.body)==null?void 0:b.scrollHeight;y&&y>50&&n(Math.max(y+32,200))}catch{}};B.useEffect(()=>{const g=setTimeout(_,100);return()=>clearTimeout(g)},[c]);const v=g=>`<!DOCTYPE html>
<html>
<head>
    <style>
        * { box-sizing: border-box; }
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100%;
            background: #18181b;
            color: #e4e4e7;
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body>${Ha.sanitize(g,Wa)}</body>
</html>`;return S.jsx("iframe",{ref:d,onLoad:_,style:{width:"100%",height:`${t}px`,border:"none",borderRadius:"8px",display:"block"},srcDoc:v(c),sandbox:"allow-same-origin allow-scripts",title:"NFT HTML Content"})}const Ga=B.lazy(()=>xe(()=>import("./index-DFc3JcDT.js").then(c=>c.i),__vite__mapDeps([0,1,2,3,4,5])).then(async c=>(await xe(()=>import("./mode-html-dl0JeqJC.js").then(n=>n.m),__vite__mapDeps([6,1])),await xe(()=>import("./theme-monokai-Cz4eVLlC.js").then(n=>n.t),__vite__mapDeps([7,1])),await xe(()=>import("./ext-language_tools-C41EfQXa.js").then(n=>n.e),__vite__mapDeps([8,1])),(await xe(()=>import("./ace-RY8oei4F.js").then(n=>n.a),__vite__mapDeps([9,1,2]))).config.set("useWorker",!1),{default:c.default}))),Ya=B.lazy(()=>xe(()=>import("./index-BYbqrZW7.js").then(c=>c.i),__vite__mapDeps([10,1])).then(c=>({default:c.Split})));function Ka({value:c,setValue:t,setPreviewOpen:n}){return S.jsx("div",{className:"rounded-lg border border-ink-700 relative",style:{zIndex:0},children:S.jsx("div",{style:{height:"500px"},children:S.jsxs(Ya,{horizontal:!1,onSplitChanged:()=>window.dispatchEvent(new Event("resize")),children:[S.jsx("div",{className:"h-full",children:S.jsx(Ga,{mode:"html",theme:"monokai",onChange:t,value:c,name:"html-editor",editorProps:{$blockScrolling:!1},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showPrintMargin:!1},width:"100%",height:"100%",fontSize:14})}),S.jsxs("div",{className:"h-full overflow-auto bg-ink-950 relative",children:[S.jsx("button",{type:"button",onClick:()=>n(!0),className:"absolute top-2 right-2 z-10 p-1.5 bg-ink-800/80 hover:bg-ink-700 rounded text-ink-400 hover:text-white transition-colors",title:"Expand preview",children:S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),S.jsx(Xn,{source:c})]})]})})})}function Nl({value:c,setValue:t}){const[n,d]=B.useState(!1);return S.jsxs(B.Fragment,{children:[S.jsx(B.Suspense,{fallback:S.jsx("div",{className:"rounded-lg border border-ink-700 bg-ink-900 flex items-center justify-center",style:{height:"500px"},children:S.jsx("div",{className:"text-ink-400",children:"Loading editor..."})}),children:S.jsx(Ka,{value:c,setValue:t,setPreviewOpen:d})}),n&&S.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>d(!1)}),S.jsxs("div",{className:"relative w-full max-w-4xl h-[80vh] bg-ink-950 rounded-xl border border-ink-700 overflow-hidden",children:[S.jsx("div",{className:"absolute top-3 right-3 z-10",children:S.jsx("button",{type:"button",onClick:()=>d(!1),className:"p-2 bg-ink-800 hover:bg-ink-700 rounded-lg text-ink-400 hover:text-white transition-colors",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),S.jsx("div",{className:"h-full",children:S.jsx(Xn,{source:c})})]})]})]})}function Xa({type:c}){if(!c)return null;const t={"text/plain":{label:"TXT",bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:""},"text/markdown":{label:"MD",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400",icon:"#"},"text/html":{label:"HTML",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",icon:"<>"}},n=t[c]||t["text/plain"];return S.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-mono ${n.bg} ${n.border} ${n.text} border`,children:[S.jsx("span",{className:"opacity-60 w-4 text-center",children:n.icon}),n.label]})}function Za({id:c,prefetchedData:t}){const n=ln(),[d,_]=B.useState(t?{name:t.name,description:t.description,text_uri:t.text_uri}:null),[v,g]=B.useState((t==null?void 0:t.author)||null),[r,b]=B.useState((t==null?void 0:t.content_type)||null),[y,m]=B.useState((t==null?void 0:t.content)??null),[e,o]=B.useState(!0),l=t==null?void 0:t._stats,[i,s]=B.useState((l==null?void 0:l.totalSupply)??null),[f,a]=B.useState(l!=null&&l.floorPrice?parseFloat(l.floorPrice)/1e18:null),[u,p]=B.useState((l==null?void 0:l.listedCount)??null),[x,k]=B.useState(l!=null&&l.totalVolume?parseFloat(l.totalVolume)/1e18:null),A=Te.contractAddresses.v1.zang,E=Te.contractAddresses.v1.marketplace;if(B.useEffect(()=>{if(!c||l!==void 0)return;(async()=>{try{const R=t?Promise.resolve(t):fetch(`/api/nft/${c}`).then(z=>z.ok?z.json():null),[j,C]=await Promise.all([R,at.readContract({address:A,abi:vt.zang,functionName:"totalSupply",args:[BigInt(c)]})]);!t&&j&&(g(j.author),_({name:j.name,description:j.description,text_uri:j.text_uri}),b(j.content_type),m(j.content)),s(Number(C));const $=await at.readContract({address:E,abi:vt.marketplace,functionName:"listingCount",args:[BigInt(c)]}),M=Number($);if(M>0){const z=[];for(let D=0;D<M;D++)z.push(at.readContract({address:E,abi:vt.marketplace,functionName:"listings",args:[BigInt(c),BigInt(D)]}));const H=(await Promise.all(z)).map(([D,J,P])=>({price:D,seller:J,amount:P})).filter(D=>D.seller!==_r);if(p(H.reduce((D,J)=>D+Number(J.amount),0)),H.length>0){const D=H.map(J=>parseFloat(jn(J.price)));a(Math.min(...D))}}else p(0);const L=await at.getContractEvents({address:E,abi:vt.marketplace,eventName:"TokenPurchased",args:{_tokenId:BigInt(c)},fromBlock:BigInt(Te.firstBlocks.v1.base.marketplace)});if(L.length>0){const z=L.reduce((K,ee)=>{const H=parseFloat(jn(ee.args._price)),D=Number(ee.args._amount);return K+H*D},0);k(z)}else k(0)}catch(R){Yr(R)&&o(!1)}})()},[c,l,t,A,E]),!e)return null;const h=()=>n("/nft?id="+c),w=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),h())};return S.jsx("div",{className:"group relative cursor-pointer",onClick:h,onKeyDown:w,role:"button",tabIndex:0,children:S.jsxs("div",{className:"relative bg-ink-900/40 border border-ink-800 rounded-xl overflow-hidden transition-all duration-300 hover:border-ink-600 hover:bg-ink-900/60 hover:-translate-y-1 hover:shadow-xl hover:shadow-ink-950/50",children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-ink-800/50 bg-ink-900/30",children:[S.jsxs("span",{className:"text-ink-600 text-xs font-mono",children:["#",c]}),S.jsx(Xa,{type:r})]}),S.jsxs("div",{className:"relative h-52 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 p-4 overflow-hidden",children:r&&y!==null?r==="text/html"?S.jsx("div",{className:"absolute inset-0 [&>iframe]:!h-full [&>iframe]:!min-h-full",children:S.jsx(Xn,{source:y})}):r==="text/markdown"?S.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-ink-300","data-color-mode":"dark",children:S.jsx(zr.Markdown,{source:y,rehypePlugins:[()=>fa(wa.validMarkdown)]})}):S.jsx("pre",{className:"font-mono text-sm text-ink-300 leading-relaxed whitespace-pre overflow-x-auto",children:y}):S.jsx("div",{className:"space-y-2",children:S.jsx(gn,{count:5,baseColor:"#1c1c1e",highlightColor:"#2a2a2e"})})}),S.jsx("div",{className:"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-ink-900/90 to-transparent pointer-events-none"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-ink-950/40",children:S.jsx("span",{className:"px-4 py-2 bg-white/10 backdrop-blur-sm rounded-lg text-white text-sm font-medium border border-white/20",children:"Read more "})})]}),S.jsxs("div",{className:"px-3 py-2.5 bg-gradient-to-b from-ink-900 to-ink-900/80",children:[S.jsxs("div",{className:"flex items-center justify-between gap-2",children:[S.jsx("h3",{className:"text-ink-100 font-medium text-sm leading-tight line-clamp-1 group-hover:text-white transition-colors flex-1 min-w-0",children:(d==null?void 0:d.name)||S.jsx(gn,{baseColor:"#1c1c1e",highlightColor:"#2a2a2e",width:"70%"})}),v&&S.jsx("span",{className:"text-ink-500 text-xs font-mono shrink-0",children:S.jsx($n,{address:v,shorten:!0,nChar:4,disableLink:!0})})]}),S.jsxs("div",{className:"flex items-center flex-wrap gap-x-1.5 gap-y-0.5 mt-1.5 text-xs",children:[i!==null?S.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[i," ed."]}):S.jsx(gn,{width:30,baseColor:"#1c1c1e",highlightColor:"#2a2a2e"}),u!==null&&u>0&&S.jsxs(B.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[u," listed"]})]}),f!==null&&S.jsxs(B.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-green-400 whitespace-nowrap font-mono",children:[f<1e-4?"<0.0001":f.toFixed(4).replace(/\.?0+$/,"")," "]})]}),x!==null&&x>0&&S.jsxs(B.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-ink-400 whitespace-nowrap font-mono",children:[x.toFixed(4).replace(/\.?0+$/,""),"  vol"]})]})]})]})]})})}function Sn({href:c,children:t,...n}){const d=ln(),_=v=>{v.preventDefault(),d(c)};return S.jsx("a",{href:c,onClick:_,...n,children:t})}function Ns(){const c=ln(),{address:t}=qn(),{data:n}=xr({address:t,chainId:Te.networks.main.chainId}),d=n?`${parseFloat(jn(n.value)).toFixed(4)} ETH`:null;return S.jsx(Or.Custom,{children:({account:_,chain:v,openAccountModal:g,openChainModal:r,openConnectModal:b,mounted:y})=>{const m=y,e=m&&_&&v;return S.jsx("div",{...!m&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}},children:e?v.unsupported?S.jsx("button",{onClick:r,className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-red-400 bg-red-900/20 rounded-lg border border-red-700/50 hover:bg-red-900/30 transition-colors",children:"Wrong network"}):S.jsxs("div",{className:"flex items-center bg-ink-800/50 rounded-lg border border-ink-700/50 overflow-hidden",children:[d&&v.id===Te.networks.main.chainId&&S.jsx("div",{className:"px-3 py-2 flex items-center gap-2 text-ink-300 text-sm border-r border-ink-700/50",children:S.jsx("span",{className:"font-mono",children:d})}),S.jsxs("button",{onClick:()=>c(`/profile?address=${t}`),className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-ink-100 hover:bg-ink-700/50 transition-colors",children:[_.ensAvatar&&S.jsx("img",{className:"w-5 h-5 rounded-full object-cover",src:_.ensAvatar,alt:""}),S.jsx("span",{className:"font-mono text-xs",children:_.ensName||_.displayName})]})]}):S.jsxs("button",{onClick:b,className:"px-4 py-2 flex items-center gap-2 text-sm font-medium text-ink-100 bg-ink-800/50 rounded-lg border border-ink-700/50 hover:bg-ink-700/50 transition-colors",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),S.jsx("span",{children:"Connect"})]})})}})}function Ja(){const[c,t]=_t(Bs);return c?S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:S.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3",children:[S.jsx("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("div",{className:"flex-1",children:S.jsxs("p",{className:"text-red-400 text-sm",children:[S.jsx("span",{className:"font-semibold",children:"Error:"})," ",c]})}),S.jsx("button",{onClick:()=>t(null),className:"text-red-400 hover:text-red-300 transition-colors","aria-label":"Dismiss error",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}const De=Object.create(null);De.open="0";De.close="1";De.ping="2";De.pong="3";De.message="4";De.upgrade="5";De.noop="6";const Qt=Object.create(null);Object.keys(De).forEach(c=>{Qt[De[c]]=c});const Ln={type:"error",data:"parser error"},sr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rr=typeof ArrayBuffer=="function",ir=c=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer,Zn=({type:c,data:t},n,d)=>sr&&t instanceof Blob?n?d(t):js(t,d):rr&&(t instanceof ArrayBuffer||ir(t))?n?d(t):js(new Blob([t]),d):d(De[c]+(t||"")),js=(c,t)=>{const n=new FileReader;return n.onload=function(){const d=n.result.split(",")[1];t("b"+(d||""))},n.readAsDataURL(c)};function Cs(c){return c instanceof Uint8Array?c:c instanceof ArrayBuffer?new Uint8Array(c):new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}let An;function Qa(c,t){if(sr&&c.data instanceof Blob)return c.data.arrayBuffer().then(Cs).then(t);if(rr&&(c.data instanceof ArrayBuffer||ir(c.data)))return t(Cs(c.data));Zn(c,!1,n=>{An||(An=new TextEncoder),t(An.encode(n))})}const Os="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let c=0;c<Os.length;c++)$t[Os.charCodeAt(c)]=c;const eo=c=>{let t=c.length*.75,n=c.length,d,_=0,v,g,r,b;c[c.length-1]==="="&&(t--,c[c.length-2]==="="&&t--);const y=new ArrayBuffer(t),m=new Uint8Array(y);for(d=0;d<n;d+=4)v=$t[c.charCodeAt(d)],g=$t[c.charCodeAt(d+1)],r=$t[c.charCodeAt(d+2)],b=$t[c.charCodeAt(d+3)],m[_++]=v<<2|g>>4,m[_++]=(g&15)<<4|r>>2,m[_++]=(r&3)<<6|b&63;return y},to=typeof ArrayBuffer=="function",Jn=(c,t)=>{if(typeof c!="string")return{type:"message",data:ar(c,t)};const n=c.charAt(0);return n==="b"?{type:"message",data:no(c.substring(1),t)}:Qt[n]?c.length>1?{type:Qt[n],data:c.substring(1)}:{type:Qt[n]}:Ln},no=(c,t)=>{if(to){const n=eo(c);return ar(n,t)}else return{base64:!0,data:c}},ar=(c,t)=>{switch(t){case"blob":return c instanceof Blob?c:new Blob([c]);case"arraybuffer":default:return c instanceof ArrayBuffer?c:c.buffer}},or="",so=(c,t)=>{const n=c.length,d=new Array(n);let _=0;c.forEach((v,g)=>{Zn(v,!1,r=>{d[g]=r,++_===n&&t(d.join(or))})})},ro=(c,t)=>{const n=c.split(or),d=[];for(let _=0;_<n.length;_++){const v=Jn(n[_],t);if(d.push(v),v.type==="error")break}return d};function io(){return new TransformStream({transform(c,t){Qa(c,n=>{const d=n.length;let _;if(d<126)_=new Uint8Array(1),new DataView(_.buffer).setUint8(0,d);else if(d<65536){_=new Uint8Array(3);const v=new DataView(_.buffer);v.setUint8(0,126),v.setUint16(1,d)}else{_=new Uint8Array(9);const v=new DataView(_.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(d))}c.data&&typeof c.data!="string"&&(_[0]|=128),t.enqueue(_),t.enqueue(n)})}})}let Rn;function Kt(c){return c.reduce((t,n)=>t+n.length,0)}function Xt(c,t){if(c[0].length===t)return c.shift();const n=new Uint8Array(t);let d=0;for(let _=0;_<t;_++)n[_]=c[0][d++],d===c[0].length&&(c.shift(),d=0);return c.length&&d<c[0].length&&(c[0]=c[0].slice(d)),n}function ao(c,t){Rn||(Rn=new TextDecoder);const n=[];let d=0,_=-1,v=!1;return new TransformStream({transform(g,r){for(n.push(g);;){if(d===0){if(Kt(n)<1)break;const b=Xt(n,1);v=(b[0]&128)===128,_=b[0]&127,_<126?d=3:_===126?d=1:d=2}else if(d===1){if(Kt(n)<2)break;const b=Xt(n,2);_=new DataView(b.buffer,b.byteOffset,b.length).getUint16(0),d=3}else if(d===2){if(Kt(n)<8)break;const b=Xt(n,8),y=new DataView(b.buffer,b.byteOffset,b.length),m=y.getUint32(0);if(m>Math.pow(2,21)-1){r.enqueue(Ln);break}_=m*Math.pow(2,32)+y.getUint32(4),d=3}else{if(Kt(n)<_)break;const b=Xt(n,_);r.enqueue(Jn(v?b:Rn.decode(b),t)),d=0}if(_===0||_>c){r.enqueue(Ln);break}}}})}const lr=4;function oe(c){if(c)return oo(c)}function oo(c){for(var t in oe.prototype)c[t]=oe.prototype[t];return c}oe.prototype.on=oe.prototype.addEventListener=function(c,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+c]=this._callbacks["$"+c]||[]).push(t),this};oe.prototype.once=function(c,t){function n(){this.off(c,n),t.apply(this,arguments)}return n.fn=t,this.on(c,n),this};oe.prototype.off=oe.prototype.removeListener=oe.prototype.removeAllListeners=oe.prototype.removeEventListener=function(c,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+c];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+c],this;for(var d,_=0;_<n.length;_++)if(d=n[_],d===t||d.fn===t){n.splice(_,1);break}return n.length===0&&delete this._callbacks["$"+c],this};oe.prototype.emit=function(c){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+c],d=1;d<arguments.length;d++)t[d-1]=arguments[d];if(n){n=n.slice(0);for(var d=0,_=n.length;d<_;++d)n[d].apply(this,t)}return this};oe.prototype.emitReserved=oe.prototype.emit;oe.prototype.listeners=function(c){return this._callbacks=this._callbacks||{},this._callbacks["$"+c]||[]};oe.prototype.hasListeners=function(c){return!!this.listeners(c).length};const un=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Ae=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lo="arraybuffer";function cr(c,...t){return t.reduce((n,d)=>(c.hasOwnProperty(d)&&(n[d]=c[d]),n),{})}const co=Ae.setTimeout,uo=Ae.clearTimeout;function dn(c,t){t.useNativeTimers?(c.setTimeoutFn=co.bind(Ae),c.clearTimeoutFn=uo.bind(Ae)):(c.setTimeoutFn=Ae.setTimeout.bind(Ae),c.clearTimeoutFn=Ae.clearTimeout.bind(Ae))}const fo=1.33;function ho(c){return typeof c=="string"?po(c):Math.ceil((c.byteLength||c.size)*fo)}function po(c){let t=0,n=0;for(let d=0,_=c.length;d<_;d++)t=c.charCodeAt(d),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(d++,n+=4);return n}function ur(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mo(c){let t="";for(let n in c)c.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(c[n]));return t}function go(c){let t={},n=c.split("&");for(let d=0,_=n.length;d<_;d++){let v=n[d].split("=");t[decodeURIComponent(v[0])]=decodeURIComponent(v[1])}return t}class yo extends Error{constructor(t,n,d){super(t),this.description=n,this.context=d,this.type="TransportError"}}class Qn extends oe{constructor(t){super(),this.writable=!1,dn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,d){return super.emitReserved("error",new yo(t,n,d)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Jn(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=mo(t);return n.length?"?"+n:""}}class bo extends Qn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let d=0;this._polling&&(d++,this.once("pollComplete",function(){--d||n()})),this.writable||(d++,this.once("drain",function(){--d||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=d=>{if(this.readyState==="opening"&&d.type==="open"&&this.onOpen(),d.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(d)};ro(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,so(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=ur()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let dr=!1;try{dr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const vo=dr;function _o(){}class xo extends bo{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let d=location.port;d||(d=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||d!==t.port}}doWrite(t,n){const d=this.request({method:"POST",data:t});d.on("success",n),d.on("error",(_,v)=>{this.onError("xhr post error",_,v)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,d)=>{this.onError("xhr poll error",n,d)}),this.pollXhr=t}}class Me extends oe{constructor(t,n,d){super(),this.createRequest=t,dn(this,d),this._opts=d,this._method=d.method||"GET",this._uri=n,this._data=d.data!==void 0?d.data:null,this._create()}_create(){var t;const n=cr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const d=this._xhr=this.createRequest(n);try{d.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(let _ in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(_)&&d.setRequestHeader(_,this._opts.extraHeaders[_])}}catch{}if(this._method==="POST")try{d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{d.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(d),"withCredentials"in d&&(d.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(d.timeout=this._opts.requestTimeout),d.onreadystatechange=()=>{var _;d.readyState===3&&((_=this._opts.cookieJar)===null||_===void 0||_.parseCookies(d.getResponseHeader("set-cookie"))),d.readyState===4&&(d.status===200||d.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof d.status=="number"?d.status:0)},0))},d.send(this._data)}catch(_){this.setTimeoutFn(()=>{this._onError(_)},0);return}typeof document<"u"&&(this._index=Me.requestsCount++,Me.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=_o,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Me.requestsCount=0;Me.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$s);else if(typeof addEventListener=="function"){const c="onpagehide"in Ae?"pagehide":"unload";addEventListener(c,$s,!1)}}function $s(){for(let c in Me.requests)Me.requests.hasOwnProperty(c)&&Me.requests[c].abort()}const wo=(function(){const c=fr({xdomain:!1});return c&&c.responseType!==null})();class ko extends xo{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=wo&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Me(fr,this.uri(),t)}}function fr(c){const t=c.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||vo))return new XMLHttpRequest}catch{}if(!t)try{return new Ae[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const hr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class To extends Qn{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,d=hr?{}:cr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(d.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,d)}catch(_){return this.emitReserved("error",_)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const d=t[n],_=n===t.length-1;Zn(d,this.supportsBinary,v=>{try{this.doWrite(d,v)}catch{}_&&un(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=ur()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Nn=Ae.WebSocket||Ae.MozWebSocket;class Eo extends To{createSocket(t,n,d){return hr?new Nn(t,n,d):n?new Nn(t,n):new Nn(t)}doWrite(t,n){this.ws.send(n)}}class So extends Qn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=ao(Number.MAX_SAFE_INTEGER,this.socket.binaryType),d=t.readable.pipeThrough(n).getReader(),_=io();_.readable.pipeTo(t.writable),this._writer=_.writable.getWriter();const v=()=>{d.read().then(({done:r,value:b})=>{r||(this.onPacket(b),v())}).catch(r=>{})};v();const g={type:"open"};this.query.sid&&(g.data=`{"sid":"${this.query.sid}"}`),this._writer.write(g).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const d=t[n],_=n===t.length-1;this._writer.write(d).then(()=>{_&&un(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Ao={websocket:Eo,webtransport:So,polling:ko},Ro=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,No=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Pn(c){if(c.length>8e3)throw"URI too long";const t=c,n=c.indexOf("["),d=c.indexOf("]");n!=-1&&d!=-1&&(c=c.substring(0,n)+c.substring(n,d).replace(/:/g,";")+c.substring(d,c.length));let _=Ro.exec(c||""),v={},g=14;for(;g--;)v[No[g]]=_[g]||"";return n!=-1&&d!=-1&&(v.source=t,v.host=v.host.substring(1,v.host.length-1).replace(/;/g,":"),v.authority=v.authority.replace("[","").replace("]","").replace(/;/g,":"),v.ipv6uri=!0),v.pathNames=jo(v,v.path),v.queryKey=Co(v,v.query),v}function jo(c,t){const n=/\/{2,9}/g,d=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&d.splice(0,1),t.slice(-1)=="/"&&d.splice(d.length-1,1),d}function Co(c,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,_,v){_&&(n[_]=v)}),n}const Bn=typeof addEventListener=="function"&&typeof removeEventListener=="function",en=[];Bn&&addEventListener("offline",()=>{en.forEach(c=>c())},!1);class et extends oe{constructor(t,n){if(super(),this.binaryType=lo,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const d=Pn(t);n.hostname=d.host,n.secure=d.protocol==="https"||d.protocol==="wss",n.port=d.port,d.query&&(n.query=d.query)}else n.host&&(n.hostname=Pn(n.host).host);dn(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(d=>{const _=d.prototype.name;this.transports.push(_),this._transportsByName[_]=d}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=go(this.opts.query)),Bn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},en.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=lr,n.transport=t,this.id&&(n.sid=this.id);const d=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](d)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&et.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",et.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let d=0;d<this.writeBuffer.length;d++){const _=this.writeBuffer[d].data;if(_&&(n+=ho(_)),d>0&&n>this._maxPayload)return this.writeBuffer.slice(0,d);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,un(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,d){return this._sendPacket("message",t,n,d),this}send(t,n,d){return this._sendPacket("message",t,n,d),this}_sendPacket(t,n,d,_){if(typeof n=="function"&&(_=n,n=void 0),typeof d=="function"&&(_=d,d=null),this.readyState==="closing"||this.readyState==="closed")return;d=d||{},d.compress=d.compress!==!1;const v={type:t,data:n,options:d};this.emitReserved("packetCreate",v),this.writeBuffer.push(v),_&&this.once("flush",_),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},d=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?d():t()}):this.upgrading?d():t()),this}_onError(t){if(et.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Bn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const d=en.indexOf(this._offlineEventListener);d!==-1&&en.splice(d,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}et.protocol=lr;class Oo extends et{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),d=!1;et.priorWebsocketSuccess=!1;const _=()=>{d||(n.send([{type:"ping",data:"probe"}]),n.once("packet",e=>{if(!d)if(e.type==="pong"&&e.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;et.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{d||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const o=new Error("probe error");o.transport=n.name,this.emitReserved("upgradeError",o)}}))};function v(){d||(d=!0,m(),n.close(),n=null)}const g=e=>{const o=new Error("probe error: "+e);o.transport=n.name,v(),this.emitReserved("upgradeError",o)};function r(){g("transport closed")}function b(){g("socket closed")}function y(e){n&&e.name!==n.name&&v()}const m=()=>{n.removeListener("open",_),n.removeListener("error",g),n.removeListener("close",r),this.off("close",b),this.off("upgrading",y)};n.once("open",_),n.once("error",g),n.once("close",r),this.once("close",b),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{d||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let d=0;d<t.length;d++)~this.transports.indexOf(t[d])&&n.push(t[d]);return n}}let $o=class extends Oo{constructor(t,n={}){const d=typeof t=="object"?t:n;(!d.transports||d.transports&&typeof d.transports[0]=="string")&&(d.transports=(d.transports||["polling","websocket","webtransport"]).map(_=>Ao[_]).filter(_=>!!_)),super(t,d)}};function Io(c,t="",n){let d=c;n=n||typeof location<"u"&&location,c==null&&(c=n.protocol+"//"+n.host),typeof c=="string"&&(c.charAt(0)==="/"&&(c.charAt(1)==="/"?c=n.protocol+c:c=n.host+c),/^(https?|wss?):\/\//.test(c)||(typeof n<"u"?c=n.protocol+"//"+c:c="https://"+c),d=Pn(c)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";const v=d.host.indexOf(":")!==-1?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+v+":"+d.port+t,d.href=d.protocol+"://"+v+(n&&n.port===d.port?"":":"+d.port),d}const Mo=typeof ArrayBuffer=="function",Do=c=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(c):c.buffer instanceof ArrayBuffer,pr=Object.prototype.toString,Lo=typeof Blob=="function"||typeof Blob<"u"&&pr.call(Blob)==="[object BlobConstructor]",Po=typeof File=="function"||typeof File<"u"&&pr.call(File)==="[object FileConstructor]";function es(c){return Mo&&(c instanceof ArrayBuffer||Do(c))||Lo&&c instanceof Blob||Po&&c instanceof File}function tn(c,t){if(!c||typeof c!="object")return!1;if(Array.isArray(c)){for(let n=0,d=c.length;n<d;n++)if(tn(c[n]))return!0;return!1}if(es(c))return!0;if(c.toJSON&&typeof c.toJSON=="function"&&arguments.length===1)return tn(c.toJSON(),!0);for(const n in c)if(Object.prototype.hasOwnProperty.call(c,n)&&tn(c[n]))return!0;return!1}function Bo(c){const t=[],n=c.data,d=c;return d.data=Fn(n,t),d.attachments=t.length,{packet:d,buffers:t}}function Fn(c,t){if(!c)return c;if(es(c)){const n={_placeholder:!0,num:t.length};return t.push(c),n}else if(Array.isArray(c)){const n=new Array(c.length);for(let d=0;d<c.length;d++)n[d]=Fn(c[d],t);return n}else if(typeof c=="object"&&!(c instanceof Date)){const n={};for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&(n[d]=Fn(c[d],t));return n}return c}function Fo(c,t){return c.data=zn(c.data,t),delete c.attachments,c}function zn(c,t){if(!c)return c;if(c&&c._placeholder===!0){if(typeof c.num=="number"&&c.num>=0&&c.num<t.length)return t[c.num];throw new Error("illegal attachments")}else if(Array.isArray(c))for(let n=0;n<c.length;n++)c[n]=zn(c[n],t);else if(typeof c=="object")for(const n in c)Object.prototype.hasOwnProperty.call(c,n)&&(c[n]=zn(c[n],t));return c}const mr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zo=5;var W;(function(c){c[c.CONNECT=0]="CONNECT",c[c.DISCONNECT=1]="DISCONNECT",c[c.EVENT=2]="EVENT",c[c.ACK=3]="ACK",c[c.CONNECT_ERROR=4]="CONNECT_ERROR",c[c.BINARY_EVENT=5]="BINARY_EVENT",c[c.BINARY_ACK=6]="BINARY_ACK"})(W||(W={}));class Uo{constructor(t){this.replacer=t}encode(t){return(t.type===W.EVENT||t.type===W.ACK)&&tn(t)?this.encodeAsBinary({type:t.type===W.EVENT?W.BINARY_EVENT:W.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===W.BINARY_EVENT||t.type===W.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Bo(t),d=this.encodeAsString(n.packet),_=n.buffers;return _.unshift(d),_}}class ts extends oe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const d=n.type===W.BINARY_EVENT;d||n.type===W.BINARY_ACK?(n.type=d?W.EVENT:W.ACK,this.reconstructor=new qo(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(es(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const d={type:Number(t.charAt(0))};if(W[d.type]===void 0)throw new Error("unknown packet type "+d.type);if(d.type===W.BINARY_EVENT||d.type===W.BINARY_ACK){const v=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const g=t.substring(v,n);if(g!=Number(g)||t.charAt(n)!=="-")throw new Error("Illegal attachments");d.attachments=Number(g)}if(t.charAt(n+1)==="/"){const v=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););d.nsp=t.substring(v,n)}else d.nsp="/";const _=t.charAt(n+1);if(_!==""&&Number(_)==_){const v=n+1;for(;++n;){const g=t.charAt(n);if(g==null||Number(g)!=g){--n;break}if(n===t.length)break}d.id=Number(t.substring(v,n+1))}if(t.charAt(++n)){const v=this.tryParse(t.substr(n));if(ts.isPayloadValid(d.type,v))d.data=v;else throw new Error("invalid payload")}return d}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case W.CONNECT:return on(n);case W.DISCONNECT:return n===void 0;case W.CONNECT_ERROR:return typeof n=="string"||on(n);case W.EVENT:case W.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&mr.indexOf(n[0])===-1);case W.ACK:case W.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qo{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Fo(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ho(c){return typeof c=="string"}const Vo=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c};function Wo(c){return c===void 0||Vo(c)}function on(c){return Object.prototype.toString.call(c)==="[object Object]"}function Go(c,t){switch(c){case W.CONNECT:return t===void 0||on(t);case W.DISCONNECT:return t===void 0;case W.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&mr.indexOf(t[0])===-1);case W.ACK:return Array.isArray(t);case W.CONNECT_ERROR:return typeof t=="string"||on(t);default:return!1}}function Yo(c){return Ho(c.nsp)&&Wo(c.id)&&Go(c.type,c.data)}const Ko=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ts,Encoder:Uo,get PacketType(){return W},isPacketValid:Yo,protocol:zo},Symbol.toStringTag,{value:"Module"}));function Ce(c,t,n){return c.on(t,n),function(){c.off(t,n)}}const Xo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gr extends oe{constructor(t,n,d){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,d&&d.auth&&(this.auth=d.auth),this._opts=Object.assign({},d),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ce(t,"open",this.onopen.bind(this)),Ce(t,"packet",this.onpacket.bind(this)),Ce(t,"error",this.onerror.bind(this)),Ce(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var d,_,v;if(Xo.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const g={type:W.EVENT,data:n};if(g.options={},g.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,e=n.pop();this._registerAckCallback(m,e),g.id=m}const r=(_=(d=this.io.engine)===null||d===void 0?void 0:d.transport)===null||_===void 0?void 0:_.writable,b=this.connected&&!(!((v=this.io.engine)===null||v===void 0)&&v._hasPingExpired());return this.flags.volatile&&!r||(b?(this.notifyOutgoingListeners(g),this.packet(g)):this.sendBuffer.push(g)),this.flags={},this}_registerAckCallback(t,n){var d;const _=(d=this.flags.timeout)!==null&&d!==void 0?d:this._opts.ackTimeout;if(_===void 0){this.acks[t]=n;return}const v=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let r=0;r<this.sendBuffer.length;r++)this.sendBuffer[r].id===t&&this.sendBuffer.splice(r,1);n.call(this,new Error("operation has timed out"))},_),g=(...r)=>{this.io.clearTimeoutFn(v),n.apply(this,r)};g.withError=!0,this.acks[t]=g}emitWithAck(t,...n){return new Promise((d,_)=>{const v=(g,r)=>g?_(g):d(r);v.withError=!0,n.push(v),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const d={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((_,...v)=>(this._queue[0],_!==null?d.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(_)):(this._queue.shift(),n&&n(null,...v)),d.pending=!1,this._drainQueue())),this._queue.push(d),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:W.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(d=>String(d.id)===t)){const d=this.acks[t];delete this.acks[t],d.withError&&d.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case W.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case W.EVENT:case W.BINARY_EVENT:this.onevent(t);break;case W.ACK:case W.BINARY_ACK:this.onack(t);break;case W.DISCONNECT:this.ondisconnect();break;case W.CONNECT_ERROR:this.destroy();const d=new Error(t.data.message);d.data=t.data.data,this.emitReserved("connect_error",d);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const d of n)d.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let d=!1;return function(..._){d||(d=!0,n.packet({type:W.ACK,id:t,data:_}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:W.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let d=0;d<n.length;d++)if(t===n[d])return n.splice(d,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let d=0;d<n.length;d++)if(t===n[d])return n.splice(d,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const d of n)d.apply(this,t.data)}}}function wt(c){c=c||{},this.ms=c.min||100,this.max=c.max||1e4,this.factor=c.factor||2,this.jitter=c.jitter>0&&c.jitter<=1?c.jitter:0,this.attempts=0}wt.prototype.duration=function(){var c=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*c);c=(Math.floor(t*10)&1)==0?c-n:c+n}return Math.min(c,this.max)|0};wt.prototype.reset=function(){this.attempts=0};wt.prototype.setMin=function(c){this.ms=c};wt.prototype.setMax=function(c){this.max=c};wt.prototype.setJitter=function(c){this.jitter=c};class Un extends oe{constructor(t,n){var d;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,dn(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((d=n.randomizationFactor)!==null&&d!==void 0?d:.5),this.backoff=new wt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const _=n.parser||Ko;this.encoder=new _.Encoder,this.decoder=new _.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new $o(this.uri,this.opts);const n=this.engine,d=this;this._readyState="opening",this.skipReconnect=!1;const _=Ce(n,"open",function(){d.onopen(),t&&t()}),v=r=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",r),t?t(r):this.maybeReconnectOnOpen()},g=Ce(n,"error",v);if(this._timeout!==!1){const r=this._timeout,b=this.setTimeoutFn(()=>{_(),v(new Error("timeout")),n.close()},r);this.opts.autoUnref&&b.unref(),this.subs.push(()=>{this.clearTimeoutFn(b)})}return this.subs.push(_),this.subs.push(g),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ce(t,"ping",this.onping.bind(this)),Ce(t,"data",this.ondata.bind(this)),Ce(t,"error",this.onerror.bind(this)),Ce(t,"close",this.onclose.bind(this)),Ce(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){un(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let d=this.nsps[t];return d?this._autoConnect&&!d.active&&d.connect():(d=new gr(this,t,n),this.nsps[t]=d),d}_destroy(t){const n=Object.keys(this.nsps);for(const d of n)if(this.nsps[d].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let d=0;d<n.length;d++)this.engine.write(n[d],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var d;this.cleanup(),(d=this.engine)===null||d===void 0||d.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const d=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(_=>{_?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",_)):t.onreconnect()}))},n);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ct={};function nn(c,t){typeof c=="object"&&(t=c,c=void 0),t=t||{};const n=Io(c,t.path||"/socket.io"),d=n.source,_=n.id,v=n.path,g=Ct[_]&&v in Ct[_].nsps,r=t.forceNew||t["force new connection"]||t.multiplex===!1||g;let b;return r?b=new Un(d,t):(Ct[_]||(Ct[_]=new Un(d,t)),b=Ct[_]),n.query&&!t.query&&(t.query=n.queryKey),b.socket(n.path,t)}Object.assign(nn,{Manager:Un,Socket:gr,io:nn,connect:nn});let Ot=null;function fn(){return Ot||(Ot=nn(void 0,{transports:["websocket","polling"],autoConnect:!0}),Ot.on("connect",()=>{console.log("WebSocket connected")}),Ot.on("disconnect",()=>{console.log("WebSocket disconnected")})),Ot}function Zo(c){B.useEffect(()=>{const t=fn(),n=d=>{c&&c(d)};return t.on("newEvents",n),()=>{t.off("newEvents",n)}},[c])}function Cl(c,t){B.useEffect(()=>{if(!c)return;const n=fn();n.emit("subscribe",c);const d=_=>{const v=_.filter(g=>g.tokenId===c);v.length>0&&t&&t(v)};return n.on("newEvents",d),()=>{n.emit("unsubscribe",c),n.off("newEvents",d)}},[c,t])}function Jo(){const[c,t]=B.useState(!1);return B.useEffect(()=>{const n=fn();t(n.connected);const d=()=>t(!0),_=()=>t(!1);return n.on("connect",d),n.on("disconnect",_),()=>{n.off("connect",d),n.off("disconnect",_)}},[]),c}function Qo(c){B.useEffect(()=>{const t=fn(),n=d=>{c&&c(d)};return t.on("syncStatus",n),()=>{t.off("syncStatus",n)}},[c])}function el(c){if(!c)return"unknown";const n=new Date-new Date(c),d=Math.floor(n/1e3),_=Math.floor(d/60),v=Math.floor(_/60);return d<10?"just now":d<60?`${d}s ago`:_<60?`${_}m ago`:v<24?`${v}h ago`:new Date(c).toLocaleDateString()}function tl(c,t=30){if(!c)return"unknown";const n=new Date,d=new Date(c),_=(n-d)/1e3;return _<t*2?"fresh":_<t*5?"stale":"very-stale"}function nl({meta:c,onRefresh:t,compact:n=!1}){const[d,_]=B.useState(""),[v,g]=B.useState(!1);B.useEffect(()=>{const l=()=>_(el(c==null?void 0:c.lastSyncTime));l();const i=setInterval(l,1e3);return()=>clearInterval(i)},[c==null?void 0:c.lastSyncTime]);const r=B.useCallback(async()=>{if(!(!t||v)){g(!0);try{await t()}finally{g(!1)}}},[t,v]);if(!c)return null;const b=tl(c.lastSyncTime,c.syncIntervalSeconds),y=c.isSyncing||v,m={fresh:"text-green-500",stale:"text-yellow-500","very-stale":"text-red-500",unknown:"text-ink-500"},e={fresh:"bg-green-500",stale:"bg-yellow-500","very-stale":"bg-red-500",unknown:"bg-ink-500"},o=c.isCatchingUp||c.syncProgress!==void 0&&c.syncProgress<99;return n?S.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-ink-500",children:[S.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${y||o?"bg-blue-500 animate-pulse":e[b]}`}),S.jsx("span",{children:y?"Syncing...":o?`Syncing ${c.syncProgress}%`:d})]}):S.jsxs("div",{className:"flex items-center justify-between gap-4 px-3 py-2 bg-ink-900/30 rounded-lg border border-ink-800/50",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`w-2 h-2 rounded-full ${y||o?"bg-blue-500 animate-pulse":e[b]}`}),S.jsx("span",{className:"text-xs text-ink-400",children:y?"Syncing blockchain data...":o?S.jsxs(S.Fragment,{children:["Catching up... ",S.jsxs("span",{className:"text-blue-400",children:[c.syncProgress,"%"]}),c.blocksRemaining&&S.jsxs("span",{className:"text-ink-600 ml-1",children:["(",Math.round(c.blocksRemaining/1e3),"k blocks remaining)"]})]}):S.jsxs(S.Fragment,{children:["Updated ",S.jsx("span",{className:m[b],children:d}),c.lastSyncBlock&&S.jsxs("span",{className:"text-ink-600 ml-1",children:["(block ",c.lastSyncBlock.toLocaleString(),")"]})]})})]}),t&&!y&&!o&&b!=="fresh"&&S.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-xs text-ink-400 hover:text-ink-200 transition-colors",children:[S.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}function sl(){const[c,t]=B.useState(null),n=B.useCallback(d=>{d&&t(d)},[]);return[c,n]}var sn={exports:{}},rl=sn.exports,Is;function il(){return Is||(Is=1,(function(c,t){(function(d,_){c.exports=_()})(rl,function(){return(function(n){var d={};function _(v){if(d[v])return d[v].exports;var g=d[v]={exports:{},id:v,loaded:!1};return n[v].call(g.exports,g,g.exports,_),g.loaded=!0,g.exports}return _.m=n,_.c=d,_.p="",_(0)})([function(n,d,_){const v=_(1),g=_(2),r=new Array(4);function b(s){for(let f=0;f<r.length;f++)r[f]=0;for(let f=0;f<s.length;f++)r[f%4]=(r[f%4]<<5)-r[f%4]+s.charCodeAt(f)}function y(){const s=r[0]^r[0]<<11;return r[0]=r[1],r[1]=r[2],r[2]=r[3],r[3]=r[3]^r[3]>>19^s^s>>8,(r[3]>>>0)/(1<<31>>>0)}function m(){const s=Math.floor(y()*360),f=y()*60+40,a=(y()+y()+y()+y())*25;return[s/360,f/100,a/100]}function e(s){const f=s,a=s,u=Math.ceil(f/2),p=f-u,x=[];for(let k=0;k<a;k++){let A=[];for(let h=0;h<u;h++)A[h]=Math.floor(y()*2.3);const E=A.slice(0,p).reverse();A=A.concat(E);for(let h=0;h<A.length;h++)x.push(A[h])}return x}function o(s,f,a,u,p,x){for(let k=0;k<u;k++)for(let A=0;A<p;A++)s.buffer[s.index(f+k,a+A)]=x}function l(s){if(!s.seed)throw new Error("No seed provided");return b(s.seed),Object.assign({size:8,scale:16,color:m(),bgcolor:m(),spotcolor:m()},s)}function i(s){const f=l({seed:s.toLowerCase()}),a=e(f.size),u=Math.sqrt(a.length),p=new v(f.size*f.scale,f.size*f.scale,3);p.color(...g(...f.bgcolor));const x=p.color(...g(...f.color)),k=p.color(...g(...f.spotcolor));for(let A=0;A<a.length;A++){const E=Math.floor(A/u),h=A%u;if(a[A]){const w=a[A]==1?x:k;o(p,h*f.scale,E*f.scale,f.scale,f.scale,w)}}return`data:image/png;base64,${p.getBase64()}`}n.exports=i},function(n,d){/**
 * A handy class to calculate color values.
 *
 * @version 1.0
 * @author Robert Eisele <robert@xarg.org>
 * @copyright Copyright (c) 2010, Robert Eisele
 * @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
 * @license http://www.opensource.org/licenses/bsd-license.php BSD License
 *
 */n.exports=function(_,v,g){function r(u,p){for(var x=2;x<arguments.length;x++)for(var k=0;k<arguments[x].length;k++)u[p++]=arguments[x].charAt(k)}function b(u){return String.fromCharCode(u>>8&255,u&255)}function y(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function m(u){return String.fromCharCode(u&255,u>>8&255)}this.width=_,this.height=v,this.depth=g,this.pix_size=v*(_+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*g+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+g+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var e=new Array,o=0;o<this.buffer_size;o++)this.buffer[o]="\0";r(this.buffer,this.ihdr_offs,y(this.ihdr_size-12),"IHDR",y(_),y(v),"\b"),r(this.buffer,this.plte_offs,y(this.plte_size-12),"PLTE"),r(this.buffer,this.trns_offs,y(this.trns_size-12),"tRNS"),r(this.buffer,this.idat_offs,y(this.idat_size-12),"IDAT"),r(this.buffer,this.iend_offs,y(this.iend_size-12),"IEND");var l=30912;l+=31-l%31,r(this.buffer,this.idat_offs+8,b(l));for(var o=0;(o<<16)-1<this.pix_size;o++){var i,s;o+65535<this.pix_size?(i=65535,s="\0"):(i=this.pix_size-(o<<16)-o,s=""),r(this.buffer,this.idat_offs+8+2+(o<<16)+(o<<2),s,m(i),m(~i))}for(var o=0;o<256;o++){for(var f=o,a=0;a<8;a++)f&1?f=-306674912^f>>1&2147483647:f=f>>1&2147483647;e[o]=f}this.index=function(u,p){var x=p*(this.width+1)+u+1,k=this.idat_offs+8+2+5*Math.floor(x/65535+1)+x;return k},this.color=function(u,p,x,k){k=k>=0?k:255;var A=((k<<8|u)<<8|p)<<8|x;if(typeof this.palette[A]>"u"){if(this.pindex==this.depth)return"\0";var E=this.plte_offs+8+3*this.pindex;this.buffer[E+0]=String.fromCharCode(u),this.buffer[E+1]=String.fromCharCode(p),this.buffer[E+2]=String.fromCharCode(x),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(k),this.palette[A]=String.fromCharCode(this.pindex++)}return this.palette[A]},this.getBase64=function(){var u=this.getDump(),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x,k,A,E,h,w,T,R=u.length,j=0,C="";do x=u.charCodeAt(j),E=x>>2,k=u.charCodeAt(j+1),h=(x&3)<<4|k>>4,A=u.charCodeAt(j+2),R<j+2?w=64:w=(k&15)<<2|A>>6,R<j+3?T=64:T=A&63,C+=p.charAt(E)+p.charAt(h)+p.charAt(w)+p.charAt(T);while((j+=3)<R);return C},this.getDump=function(){for(var u=65521,p=5552,x=1,k=0,A=p,E=0;E<this.height;E++)for(var h=-1;h<this.width;h++)x+=this.buffer[this.index(h,E)].charCodeAt(0),k+=x,(A-=1)==0&&(x%=u,k%=u,A=p);x%=u,k%=u,r(this.buffer,this.idat_offs+this.idat_size-8,y(k<<16|x));function w(T,R,j){for(var C=-1,$=4;$<j-4;$+=1)C=e[(C^T[R+$].charCodeAt(0))&255]^C>>8&16777215;r(T,R+j-4,y(C^-1))}return w(this.buffer,this.ihdr_offs,this.ihdr_size),w(this.buffer,this.plte_offs,this.plte_size),w(this.buffer,this.trns_offs,this.trns_size),w(this.buffer,this.idat_offs,this.idat_size),w(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}}},function(n,d){function _(g,r,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?g+(r-g)*6*b:b<1/2?r:b<2/3?g+(r-g)*(2/3-b)*6:g}function v(g,r,b){let y,m,e;if(r==0)y=m=e=b;else{const o=b<.5?b*(1+r):b+r-b*r,l=2*b-o;y=_(l,o,g+1/3),m=_(l,o,g),e=_(l,o,g-1/3)}return[Math.round(y*255),Math.round(m*255),Math.round(e*255),255]}n.exports=v}])})})(sn)),sn.exports}var al=il();const Ms=Hn(al);function ol({phrases:c}){const[t,n]=B.useState(0),[d,_]=B.useState(""),[v,g]=B.useState(!1),r=Math.max(...c.map(b=>b.length));return B.useEffect(()=>{const b=c[t],y=setTimeout(()=>{v?d.length>0?_(d.slice(0,-1)):(g(!1),n(m=>(m+1)%c.length)):d.length<b.length?_(b.slice(0,d.length+1)):setTimeout(()=>g(!0),2e3)},v?50:100);return()=>clearTimeout(y)},[d,v,t,c]),S.jsxs("span",{className:"inline-block text-center",style:{width:`${r+1}ch`},children:[S.jsx("span",{className:"text-white",children:d}),S.jsx("span",{className:"animate-pulse text-accent-cyan",children:"|"})]})}function Ds({value:c,suffix:t=""}){const[n,d]=B.useState(0);return B.useEffect(()=>{if(c==null)return;const _=1500,v=30,g=c/v;let r=0,b=0;const y=setInterval(()=>{b++,r=Math.min(Math.round(g*b),c),d(r),b>=v&&clearInterval(y)},_/v);return()=>clearInterval(y)},[c]),S.jsxs("span",{children:[n.toLocaleString(),t]})}function ll({events:c}){const[t,n]=B.useState(0);if(B.useEffect(()=>{if(!c||c.length===0)return;const g=setInterval(()=>{n(r=>(r+1)%c.length)},3e3);return()=>clearInterval(g)},[c]),!c||c.length===0)return null;const d=c[t],_=g=>{switch(g.type){case"mint":return`New ${g.contentType} minted`;case"purchase":return`Sold for ${g.price} ETH`;case"list":return`Listed for ${g.price} ETH`;default:return"New activity"}},v=g=>{switch(g.type){case"mint":return"";case"purchase":return"";case"list":return"";default:return""}};return S.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-ink-400",children:[S.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),S.jsxs(It,{to:`/nft?id=${d.id}`,className:"transition-opacity duration-300 hover:text-ink-200",children:[v(d)," ",S.jsxs("span",{className:"text-ink-500",children:["#",d.id]})," ",S.jsx("span",{className:"text-ink-200 font-medium",children:d.title})," "," ",_(d)]})]})}function cl(){const c=ln(),[t,n]=B.useState(null),[d,_]=B.useState([]),[v,g]=B.useState({}),[,r]=_t(Bs),[b,y]=B.useState([]),[m,e]=B.useState(null),[o,l]=B.useState(null),[i,s]=sl(),[f,a]=B.useState([]),[u,p]=B.useState([]),x=Te.contractAddresses.v1.zang;B.useEffect(()=>{(async()=>{try{const h=await fetch("/api/home");if(!h.ok)throw new Error("Failed to fetch home data");const w=await h.json();if(n(w.lastNftId),w.stats&&(l(w.stats.uniqueArtists),e(w.stats.totalVolumeEth)),a(w.topArtists||[]),p(w.topCollectors||[]),w._meta&&s(w._meta),w.nfts&&w.nfts.length>0){const T=w.nfts.map(j=>parseInt(j.id,10));_(T);const R={};for(const j of w.nfts)R[j.id]={token_id:j.id,name:j.name,description:j.description,author:j.author,content_type:j.contentType,content:j.content,_stats:{totalSupply:j.totalSupply,floorPrice:j.floorPrice,listedCount:j.listedCount,totalVolume:j.totalVolume}};g(R)}if(w.recentEvents&&w.recentEvents.length>0){const T=w.recentEvents.filter(R=>R.type!=="TransferSingle"||R.type==="TransferSingle").map(R=>{let j="transfer";R.type==="TransferSingle"?j="mint":R.type==="TokenPurchased"?j="purchase":R.type==="TokenListed"&&(j="list");let C="text";return R.contentType==="text/html"?C="HTML":R.contentType==="text/markdown"?C="markdown":R.contentType==="text/plain"&&(C="text"),{type:j,id:R.tokenId.toString(),title:R.title||`#${R.tokenId}`,blockNumber:R.blockNumber,price:R.price,contentType:C}}).filter(R=>R.type!=="transfer").slice(0,10);y(T)}}catch(h){console.error("Error fetching home data:",h);try{const w=await at.readContract({address:x,abi:vt.zang,functionName:"lastTokenId"});n(Number(w))}catch(w){r(Fs(w))}}})()},[r,x,s]),Jo();const k=B.useCallback(async E=>{const h=E.filter(j=>j.type==="TransferSingle"||j.type==="TokenListed"||j.type==="TokenPurchased");if(h.length===0)return;const w=[...new Set(h.map(j=>j.tokenId.toString()))],T={};try{const j=await fetch("/api/nfts/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:w})});if(j.ok){const{nfts:C}=await j.json();for(const $ of C)if($.data){let M="text";$.data.content_type==="text/html"?M="HTML":$.data.content_type==="text/markdown"&&(M="Markdown"),T[$.id]={title:$.data.name||`#${$.id}`,contentType:M}}}}catch{}const R=h.map(j=>{var $,M;let C="transfer";return j.type==="TransferSingle"?C="mint":j.type==="TokenPurchased"?C="purchase":j.type==="TokenListed"&&(C="list"),{type:C,id:j.tokenId.toString(),blockNumber:j.blockNumber,title:(($=T[j.tokenId])==null?void 0:$.title)||`#${j.tokenId}`,contentType:((M=T[j.tokenId])==null?void 0:M.contentType)||"text"}}).filter(j=>j.type!=="transfer");if(y(j=>[...R,...j].slice(0,15)),h.some(j=>j.type==="TransferSingle"))try{const j=await at.readContract({address:x,abi:vt.zang,functionName:"lastTokenId"});n(Number(j))}catch{}},[x]);Zo(k);const A=B.useCallback(E=>{s({lastSyncBlock:E.lastSyncBlock,lastSyncTime:E.lastSyncTime,isSyncing:E.isSyncing,syncProgress:E.syncProgress,blocksRemaining:E.blocksRemaining,isCatchingUp:E.isCatchingUp})},[s]);return Qo(A),S.jsxs("div",{className:"min-h-screen bg-ink-950",children:[S.jsx(zi,{}),S.jsx(Ja,{}),S.jsxs("section",{className:"relative overflow-hidden",children:[S.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:S.jsxs("div",{className:"text-center space-y-8",children:[S.jsx("p",{className:"text-ink-500 font-mono text-xs sm:text-sm tracking-widest uppercase",children:"A canvas for writers & creators"}),S.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-mono leading-tight",children:[S.jsx("span",{className:"text-ink-400 hidden sm:inline",children:">"})," ",S.jsx(ol,{phrases:["Write beautifully.","Words, forever.","Code is poetry.","Text is art.","Create freely."]})]}),S.jsxs("p",{className:"text-ink-400 text-lg sm:text-xl max-w-2xl mx-auto leading-relaxed",children:["Mint your"," ",S.jsx("span",{className:"text-ink-200",children:"poetry"}),","," ",S.jsx("span",{className:"text-ink-200",children:"stories"}),","," ",S.jsx("span",{className:"text-ink-200",children:"code"}),", and"," ",S.jsx("span",{className:"text-ink-200",children:"HTML art"})," as NFTs. No images required. Pure text, onchain forever."]}),S.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[S.jsx("button",{onClick:()=>c("/mint"),className:"group relative px-8 py-4 bg-white text-ink-950 font-medium rounded-lg hover:bg-ink-100 transition-all duration-200 text-lg",children:S.jsxs("span",{className:"flex items-center justify-center gap-3",children:[S.jsx("span",{className:"font-mono text-ink-500",children:"$"}),"Start Writing"]})}),S.jsx("button",{onClick:()=>{document.getElementById("gallery").scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 border border-ink-700 text-ink-300 font-medium rounded-lg hover:border-ink-500 hover:text-white transition-all duration-200 text-lg",children:"Browse Gallery"})]}),S.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 pt-6",children:[t&&S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-3xl font-mono text-white",children:S.jsx(Ds,{value:t})}),S.jsx("div",{className:"text-ink-500 text-sm",children:"texts minted"})]}),o&&o>0&&S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-3xl font-mono text-white",children:S.jsx(Ds,{value:o})}),S.jsx("div",{className:"text-ink-500 text-sm",children:"artists"})]}),m!==null&&m>0&&S.jsxs("div",{className:"text-center",children:[S.jsxs("div",{className:"text-3xl font-mono text-white",children:[m.toFixed(4)," ",S.jsx("span",{className:"text-ink-400",children:""})]}),S.jsx("div",{className:"text-ink-500 text-sm",children:"total volume"})]})]}),S.jsx("div",{className:"pt-8",children:S.jsx(ll,{events:b})})]})}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ink-800 to-transparent"})]}),S.jsxs("section",{id:"gallery",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[S.jsxs("div",{className:"flex items-center justify-between mb-10",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Latest Works"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"Fresh from the creative minds"})]}),i&&S.jsx("div",{className:"hidden sm:block",children:S.jsx(nl,{meta:i,compact:!0})})]}),t===null?S.jsx("div",{className:"flex justify-center py-8",children:S.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Loading..."})]})}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.slice(0,12).map(E=>S.jsx(Za,{id:E,prefetchedData:v[E]},E))}),t>12&&S.jsx("div",{className:"text-center mt-10",children:S.jsxs(It,{to:"/gallery",className:"inline-flex items-center gap-2 px-6 py-3 bg-ink-800 text-ink-200 font-medium rounded-lg hover:bg-ink-700 hover:text-white transition-colors",children:["See All Works",S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]}),f.length>0&&S.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[S.jsxs("div",{className:"space-y-1 mb-10",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Artists"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"By sales volume"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.slice(0,6).map((E,h)=>S.jsxs(It,{to:`/profile?address=${E.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[S.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:h+1}),S.jsx("img",{src:Ms(E.address),alt:"",className:"w-12 h-12 rounded-lg"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-ink-200 font-mono text-sm",children:S.jsx($n,{address:E.address,shorten:!0,nChar:6,disableLink:!0})}),S.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[E.totalCreated," works  ",E.volumeEth.toFixed(4)," ETH"]})]})]},E.address))})]}),u.length>0&&S.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[S.jsxs("div",{className:"space-y-1 mb-10",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Collectors"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"By purchase volume"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.slice(0,6).map((E,h)=>S.jsxs(It,{to:`/profile?address=${E.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[S.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:h+1}),S.jsx("img",{src:Ms(E.address),alt:"",className:"w-12 h-12 rounded-lg"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-ink-200 font-mono text-sm",children:S.jsx($n,{address:E.address,shorten:!0,nChar:6,disableLink:!0})}),S.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[E.totalCollected," collected  ",E.volumeEth.toFixed(4)," ETH"]})]})]},E.address))})]})]})}function ul(){const{pathname:c}=Nr();return B.useEffect(()=>{window.scrollTo(0,0)},[c]),null}function dl(){return S.jsx("div",{className:"min-h-screen bg-ink-950 flex items-center justify-center",children:S.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Loading..."})]})})}const fl=B.lazy(()=>xe(()=>import("./nft-DnDOoivp.js"),__vite__mapDeps([11,4,1,12,3,5,13,14,15,16]))),hl=B.lazy(()=>xe(()=>import("./mint-rlXUdo2M.js"),__vite__mapDeps([17,4,1,13,12,3,5,14,18]))),pl=B.lazy(()=>xe(()=>import("./gallery-D1K8z08t.js"),__vite__mapDeps([19,4,1,12,3,5,20,14]))),ml=B.lazy(()=>xe(()=>import("./collection-DL0YtRao.js"),__vite__mapDeps([21,4,1,12,3,5,20,14]))),gl=B.lazy(()=>xe(()=>import("./activity-B0i_vLNZ.js"),__vite__mapDeps([22,4,1,12,3,5,15,14]))),yl=B.lazy(()=>xe(()=>import("./profile-dbM165ba.js"),__vite__mapDeps([23,4,1,12,3,5,14]))),bl=B.lazy(()=>xe(()=>import("./bridge-Co0xAqaZ.js"),__vite__mapDeps([24,4,1,12,3,5,14]))),vl=B.lazy(()=>xe(()=>import("./404-DeB9ysh7.js"),__vite__mapDeps([25,4,1,12,3,5,14]))),_l=new wr;function xl(){return S.jsx(kr,{config:Gr,children:S.jsx(Tr,{client:_l,children:S.jsx($r,{theme:Ir({accentColor:"#22d3ee",accentColorForeground:"#0a0a0a",borderRadius:"medium"}),children:S.jsxs(jr,{children:[S.jsx(ul,{}),S.jsx(Ni,{children:S.jsx(B.Suspense,{fallback:S.jsx(dl,{}),children:S.jsxs(Rr,{children:[S.jsx(Ge,{path:"/",element:S.jsx(cl,{})}),S.jsx(Ge,{path:"/nft",element:S.jsx(fl,{})}),S.jsx(Ge,{path:"/mint",element:S.jsx(hl,{})}),S.jsx(Ge,{path:"/gallery",element:S.jsx(pl,{})}),S.jsx(Ge,{path:"/collection",element:S.jsx(ml,{})}),S.jsx(Ge,{path:"/activity",element:S.jsx(gl,{})}),S.jsx(Ge,{path:"/profile",element:S.jsx(yl,{})}),S.jsx(Ge,{path:"/bridge",element:S.jsx(bl,{})}),S.jsx(Ge,{path:"*",element:S.jsx(vl,{})})]})})})]})})})})}Hr.createRoot(document.getElementById("root")).render(S.jsx(I.StrictMode,{children:S.jsx(Ar,{children:S.jsx(xl,{})})}));const Ol=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"}));export{$n as A,zi as H,Za as N,Sn as R,Ja as S,Si as V,Nl as a,wa as b,Te as c,xt as d,Rl as e,Fs as f,Al as g,sl as h,Qo as i,Cl as j,Xn as k,nn as l,Ms as m,nl as n,Yr as o,at as p,Ol as q,fa as r,Bs as s,Bi as u,vt as v};
