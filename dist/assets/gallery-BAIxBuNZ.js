import{j as t}from"./web3-core-DUkMGIH9.js";import{a as n}from"./react-vendor-z79Uuty_.js";import{H as k,S as C,N as v}from"./index-D1S1TGIa.js";import"./ui-vendor-51-FR4Jz.js";import"./md-editor-ChPQj20R.js";import{I as w}from"./index.es-A6KY3FT1.js";import"./rainbowkit-D_dEjGNW.js";function T(){const[l,y]=n.useState(null),[r,i]=n.useState([]),[j,d]=n.useState({}),[g,m]=n.useState(!0),[c,f]=n.useState(!0),[p,x]=n.useState(0),h=12,u=(a,o)=>{const s={...o};for(const e of a)s[e.id]={token_id:e.id,name:e.name,description:e.description,author:e.author,content_type:e.contentType,content:e.content,_stats:{totalSupply:e.totalSupply,floorPrice:e.floorPrice,listedCount:e.listedCount,totalVolume:e.totalVolume}};return s};n.useEffect(()=>{(async()=>{try{const s=await(await fetch(`/api/gallery?limit=${h}&offset=0`)).json();y(s.lastNftId),d(u(s.nfts,{})),i(s.nfts.map(e=>e.id)),f(s.hasMore),x(s.nfts.length),m(!1)}catch(o){console.error("Failed to fetch gallery data:",o),m(!1)}})()},[]);const N=n.useCallback(async()=>{if(c)try{const o=await(await fetch(`/api/gallery?limit=${h}&offset=${p}`)).json();d(s=>u(o.nfts,s)),i(s=>[...s,...o.nfts.map(e=>e.id)]),f(o.hasMore),x(s=>s+o.nfts.length)}catch(a){console.error("Failed to load more:",a)}},[p,c]);return t.jsxs("div",{className:"min-h-screen bg-ink-950",children:[t.jsx(k,{}),t.jsx(C,{}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[t.jsxs("div",{className:"space-y-1 mb-10",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-mono text-ink-100",children:"Gallery"}),t.jsx("p",{className:"text-ink-500",children:l!==null?`${l} works`:"Loading..."})]}),g?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[t.jsxs("svg",{className:"animate-spin h-8 w-8 text-accent-cyan",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{className:"text-ink-400",children:"Loading gallery..."})]}):t.jsx(w,{dataLength:r.length,next:N,hasMore:c,loader:t.jsx("div",{className:"flex justify-center py-8",children:t.jsxs("svg",{className:"animate-spin h-6 w-6 text-accent-cyan",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),endMessage:t.jsxs("p",{className:"text-center text-ink-500 py-8",children:["You've seen all ",l," works"]}),children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(a=>t.jsx(v,{id:a,prefetchedData:j[a]},a))})})]})]})}export{T as default};
