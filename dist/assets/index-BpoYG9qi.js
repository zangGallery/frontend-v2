const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CANHyuH1.js","assets/react-vendor-z79Uuty_.js","assets/ace-Crcp_Mm0.js","assets/md-editor-2-khWZ_d.js","assets/web3-core-DPDfnnte.js","assets/md-editor-Bsl8KSMX.css","assets/mode-html-dl0JeqJC.js","assets/theme-monokai-Cz4eVLlC.js","assets/ext-language_tools-C41EfQXa.js","assets/ace-RY8oei4F.js","assets/index-BYbqrZW7.js","assets/nft-BmHxCgdA.js","assets/ui-vendor-51-FR4Jz.js","assets/rainbowkit-C4lJ2qk5.js","assets/decimal-BsKyFVDe.js","assets/NFTHistory-BCOEXR-d.js","assets/nft-BEHUn5zE.css","assets/mint-CA9kOa1A.js","assets/mint-YFOrqmb2.css","assets/gallery-CJ1FIn2U.js","assets/activity-BuH5kT33.js","assets/profile-DRzoU8Tr.js","assets/bridge-BAy8qj1j.js","assets/404-Bdx3F4hO.js"])))=>i.map(i=>d[i]);
import{u as Bt,aY as Cr,_ as le,aZ as Or,X as an,aJ as Hs,r as S,a1 as Hn,a_ as Vs,ab as $r,al as hs,aS as ms,a$ as Ir,J as Mr,ad as gs,b0 as Dr,b1 as Lr,b2 as Pr}from"./web3-core-DPDfnnte.js";import{i as Br,g as Vn,R as I,c as Fr,a as L,L as Mt,f as un,B as zr,j as Ur,k as Je,u as qr}from"./react-vendor-z79Uuty_.js";import{a as wt,R as at,S as Jt,b as Wr}from"./ui-vendor-51-FR4Jz.js";import{w as Hr,h as Vr,m as Gr,i as Yr,j as Kr,l as $n,o as Pt,C as Xr,R as Zr,q as Jr,t as Qr}from"./rainbowkit-C4lJ2qk5.js";import{b as ei,i as ti,s as ni,g as si,a as ri,E as ii}from"./md-editor-2-khWZ_d.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))u(_);new MutationObserver(_=>{for(const v of _)if(v.type==="childList")for(const h of v.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function n(_){const v={};return _.integrity&&(v.integrity=_.integrity),_.referrerPolicy&&(v.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?v.credentials="include":_.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function u(_){if(_.ep)return;_.ep=!0;const v=n(_);fetch(_.href,v)}})();var qt={},ys;function oi(){if(ys)return qt;ys=1;var s=Br();return qt.createRoot=s.createRoot,qt.hydrateRoot=s.hydrateRoot,qt}var ai=oi();const li=Vn(ai);function Gs(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function ci(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function ui(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function Gn(){return ci()||ui()}function bs(){return Gs()||Gn()}var vs=new Map,di=({projectId:s,walletConnectParameters:e,rkDetailsShowQrModal:n,rkDetailsIsWalletConnectModalConnector:u})=>{let _={telemetryEnabled:!1,...e||{},projectId:s,showQrModal:!1};n&&(_={..._,showQrModal:!0}),"customStoragePrefix"in _||(_={..._,customStoragePrefix:u?"clientOne":"clientTwo"});const v=JSON.stringify(_),h=vs.get(v);if(h)return h;const i=Hr(_);return vs.set(v,i),i};function fi({projectId:s,walletDetails:e,walletConnectParameters:n}){return Bt(u=>({...di({projectId:s,walletConnectParameters:n,rkDetailsShowQrModal:e.rkDetails.showQrModal,rkDetailsIsWalletConnectModalConnector:e.rkDetails.isWalletConnectModalConnector})(u),...e}))}function Yn({projectId:s,walletConnectParameters:e}){const n="21fef48091f12692cad574a6f7753643";if(!s||s==="")throw new Error("No projectId found. Every dApp must now provide a WalletConnect Cloud projectId to enable WalletConnect v2 https://www.rainbowkit.com/docs/installation#configure");return s==="YOUR_PROJECT_ID"&&(s=n),u=>fi({projectId:s,walletDetails:u,walletConnectParameters:e})}function Ys(s){const e=typeof window<"u"?window:void 0;if(typeof e>"u"||typeof e.ethereum>"u")return;const n=e.ethereum.providers;return n?n.find(u=>u[s]):e.ethereum[s]?e.ethereum:void 0}function Ks(s){const e=(n,u)=>{const[_,...v]=u.split("."),h=n[_];if(h)return v.length===0?h:e(h,v.join("."))};if(typeof window<"u")return e(window,s)}function pi({flag:s,namespace:e}){return!!(e&&typeof Ks(e)<"u"||typeof Ys(s)<"u")}function hi({flag:s,namespace:e}){var _;const n=typeof window<"u"?window:void 0;if(typeof n>"u")return;if(e){const v=Ks(e);if(v)return v}const u=(_=n.ethereum)==null?void 0:_.providers;{const v=Ys(s);if(v)return v}return typeof u<"u"&&u.length>0?u[0]:n.ethereum}function mi(s){return e=>{const n=s?{target:()=>({id:e.rkDetails.id,name:e.rkDetails.name,provider:s})}:{};return Bt(u=>({...Cr(n)(u),...e}))}}function gi({flag:s,namespace:e,target:n}){const u=n||hi({flag:s,namespace:e});return mi(u)}var yi=({projectId:s,options:e})=>({id:"walletConnect",name:"WalletConnect",installed:void 0,iconUrl:async()=>(await le(async()=>{const{default:u}=await import("./walletConnectWallet-YHWKVTDY-D3lyiczV.js");return{default:u}},[])).default,iconBackground:"#3b99fc",qrCode:{getUri:u=>u},createConnector:Yn({projectId:s,walletConnectParameters:e})}),bi=s=>({id:"porto",name:"Porto",shortName:"Porto",rdns:"xyz.ithaca.porto",iconUrl:async()=>(await le(async()=>{const{default:e}=await import("./portoWallet-4WTJNKDS-D7V4fUAb.js");return{default:e}},[])).default,iconAccent:"#2E7CF6",iconBackground:"#2E7CF6",installed:!0,createConnector:e=>Bt(n=>({...Vr(s)(n),...e}))}),vi=({projectId:s,walletConnectParameters:e})=>{const n=pi({flag:"isRainbow"}),u=!n,_=v=>Gs()?v:Gn()?`rainbow://wc?uri=${encodeURIComponent(v)}&connector=rainbowkit`:`https://rnbwapp.com/wc?uri=${encodeURIComponent(v)}&connector=rainbowkit`;return{id:"rainbow",name:"Rainbow",rdns:"me.rainbow",iconUrl:async()=>(await le(async()=>{const{default:v}=await import("./rainbowWallet-O26YNBMX-DUhYus-9.js");return{default:v}},[])).default,iconBackground:"#0c2f78",installed:u?void 0:n,downloadUrls:{android:"https://play.google.com/store/apps/details?id=me.rainbow&referrer=utm_source%3Drainbowkit&utm_source=rainbowkit",ios:"https://apps.apple.com/app/apple-store/id1457119021?pt=119997837&ct=rainbowkit&mt=8",mobile:"https://rainbow.download?utm_source=rainbowkit",qrCode:"https://rainbow.download?utm_source=rainbowkit&utm_medium=qrcode",browserExtension:"https://rainbow.me/extension?utm_source=rainbowkit"},mobile:{getUri:u?_:void 0},qrCode:u?{getUri:_,instructions:{learnMoreUrl:"https://learn.rainbow.me/connect-to-a-website-or-app?utm_source=rainbowkit&utm_medium=connector&utm_campaign=learnmore",steps:[{description:"wallet_connectors.rainbow.qr_code.step1.description",step:"install",title:"wallet_connectors.rainbow.qr_code.step1.title"},{description:"wallet_connectors.rainbow.qr_code.step2.description",step:"create",title:"wallet_connectors.rainbow.qr_code.step2.title"},{description:"wallet_connectors.rainbow.qr_code.step3.description",step:"scan",title:"wallet_connectors.rainbow.qr_code.step3.title"}]}}:void 0,createConnector:u?Yn({projectId:s,walletConnectParameters:e}):gi({flag:"isRainbow"})}};function _i(s){return!(!(s!=null&&s.isMetaMask)||s.isBraveWallet&&!s._events&&!s._state||s.isApexWallet||s.isAvalanche||s.isBackpack||s.isBifrost||s.isBitKeep||s.isBitski||s.isBinance||s.isBlockWallet||s.isCoinbaseWallet||s.isDawn||s.isEnkrypt||s.isExodus||s.isFrame||s.isFrontier||s.isGamestop||s.isHyperPay||s.isImToken||s.isKuCoinWallet||s.isMathWallet||s.isNestWallet||s.isOkxWallet||s.isOKExWallet||s.isOneInchIOSWallet||s.isOneInchAndroidWallet||s.isOpera||s.isPhantom||s.isZilPay||s.isPortal||s.isxPortal||s.isRabby||s.isRainbow||s.isStatus||s.isTalisman||s.isTally||s.isTokenPocket||s.isTokenary||s.isTrust||s.isTrustWallet||s.isCTRL||s.isZeal||s.isCoin98||s.isMEWwallet||s.isSafeheron||s.isSafePal||s.isWigwam||s.isZerion||s.__seif)}var Xs=({projectId:s,walletConnectParameters:e})=>{const{...n}=Xs,u=typeof window<"u"?_i(window.ethereum):!1,_=!u&&!bs(),v=u||bs();return{id:"metaMask",name:"MetaMask",rdns:"io.metamask",iconUrl:async()=>(await le(async()=>{const{default:h}=await import("./metaMaskWallet-SITXT2FV-BlemcphV.js");return{default:h}},[])).default,iconAccent:"#f6851a",iconBackground:"#fff",installed:u||void 0,downloadUrls:{android:"https://play.google.com/store/apps/details?id=io.metamask",ios:"https://apps.apple.com/us/app/metamask/id1438144202",mobile:"https://metamask.io/download",qrCode:"https://metamask.io/download",chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm",firefox:"https://addons.mozilla.org/firefox/addon/ether-metamask",opera:"https://addons.opera.com/extensions/details/metamask-10",browserExtension:"https://metamask.io/download"},mobile:{getUri:v?h=>h:void 0},qrCode:_?{getUri:h=>`https://metamask.app.link/wc?uri=${encodeURIComponent(h)}`,instructions:{learnMoreUrl:"https://metamask.io/faqs/",steps:[{description:"wallet_connectors.metamask.qr_code.step1.description",step:"install",title:"wallet_connectors.metamask.qr_code.step1.title"},{description:"wallet_connectors.metamask.qr_code.step2.description",step:"create",title:"wallet_connectors.metamask.qr_code.step2.title"},{description:"wallet_connectors.metamask.qr_code.step3.description",step:"refresh",title:"wallet_connectors.metamask.qr_code.step3.title"}]}}:void 0,extension:{instructions:{learnMoreUrl:"https://metamask.io/faqs/",steps:[{description:"wallet_connectors.metamask.extension.step1.description",step:"install",title:"wallet_connectors.metamask.extension.step1.title"},{description:"wallet_connectors.metamask.extension.step2.description",step:"create",title:"wallet_connectors.metamask.extension.step2.title"},{description:"wallet_connectors.metamask.extension.step3.description",step:"refresh",title:"wallet_connectors.metamask.extension.step3.title"}]}},createConnector:_?Yn({projectId:s,walletConnectParameters:e}):(h=>Bt(i=>{var b,g,t;const y=Gr({dappMetadata:{connector:"rainbowkit",name:(b=e==null?void 0:e.metadata)==null?void 0:b.name,iconUrl:(g=e==null?void 0:e.metadata)==null?void 0:g.icons[0],url:(t=e==null?void 0:e.metadata)==null?void 0:t.url},headless:!0,checkInstallationImmediately:!1,enableAnalytics:!1,...n})(i);return{...y,...h,getChainId:async()=>{var l;try{return await y.getChainId()}catch{return((l=i.chains[0])==null?void 0:l.id)??1}}}}))}},Zs=({appName:s,appIcon:e})=>{const{preference:n,...u}=Zs,_=h=>h,v=Gn();return{id:"coinbase",name:"Coinbase Wallet",shortName:"Coinbase",rdns:"com.coinbase.wallet",iconUrl:async()=>(await le(async()=>{const{default:h}=await import("./coinbaseWallet-OKXU3TRC-DnGdeF1T.js");return{default:h}},[])).default,iconAccent:"#2c5ff6",iconBackground:"#2c5ff6",installed:!0,downloadUrls:{android:"https://play.google.com/store/apps/details?id=org.toshi",ios:"https://apps.apple.com/us/app/coinbase-wallet-store-crypto/id1278383455",mobile:"https://coinbase.com/wallet/downloads",qrCode:"https://coinbase-wallet.onelink.me/q5Sx/fdb9b250",chrome:"https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad",browserExtension:"https://coinbase.com/wallet"},...v?{}:{qrCode:{getUri:_,instructions:{learnMoreUrl:"https://coinbase.com/wallet/articles/getting-started-mobile",steps:[{description:"wallet_connectors.coinbase.qr_code.step1.description",step:"install",title:"wallet_connectors.coinbase.qr_code.step1.title"},{description:"wallet_connectors.coinbase.qr_code.step2.description",step:"create",title:"wallet_connectors.coinbase.qr_code.step2.title"},{description:"wallet_connectors.coinbase.qr_code.step3.description",step:"scan",title:"wallet_connectors.coinbase.qr_code.step3.title"}]}},extension:{instructions:{learnMoreUrl:"https://coinbase.com/wallet/articles/getting-started-extension",steps:[{description:"wallet_connectors.coinbase.extension.step1.description",step:"install",title:"wallet_connectors.coinbase.extension.step1.title"},{description:"wallet_connectors.coinbase.extension.step2.description",step:"create",title:"wallet_connectors.coinbase.extension.step2.title"},{description:"wallet_connectors.coinbase.extension.step3.description",step:"refresh",title:"wallet_connectors.coinbase.extension.step3.title"}]}}},createConnector:h=>{const i=typeof n=="string"?{options:n,telemetry:!1}:{options:"all",...n,telemetry:!1},y=Yr({appName:s,appLogoUrl:e,...u,preference:i});return Bt(b=>({...y(b),...h}))}}};const xi="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",wi="3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",ki="3a8170812b534d0ff9d794f19a901d64",Ti=Kr([{groupName:"Recommended",wallets:[bi,vi,Zs,Xs,yi]}],{appName:"zang.gallery",projectId:ki}),Ei=Or({connectors:Ti,chains:[Pt,$n],transports:{[Pt.id]:an(`https://base-mainnet.g.alchemy.com/v2/${xi}`),[$n.id]:an(`https://eth-mainnet.g.alchemy.com/v2/${wi}`)},ssr:!1}),Js=wt({key:"standardError",default:null}),Si=s=>{const e=JSON.stringify(s);return e.includes("ZangNFT")&&e.includes("query for nonexistent token")},Qs=s=>{var e;return s.message?s.message==="Internal JSON-RPC error."&&((e=s.data)!=null&&e.message)?"Internal JSON-RPC error: "+s.data.message+".":s.message:"Unknown error."},Ce={contractAddresses:{v1:{zang:"0x5541ff300e9b01176b953EA3153006e36D4BA273",marketplace:"0xbD5C4612084eA90847DeB475529aC74B3521498d"}},firstBlocks:{v1:{base:{zang:5300011,marketplace:5300368}}},networks:{main:{name:"Base",chainId:8453,rpcUrl:"https://base-mainnet.g.alchemy.com/v2/3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{name:"ENS",chainId:1}},api_keys:{alchemy_base:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J",alchemy_mainnet:"3ZdCeXQPljcAdtTaEpDGSoSvWAZ8FM-J"},ens:{cacheExpiration:1e3*60*2},blockExplorer:{name:"BaseScan",url:"https://basescan.org"}},Qt={calls:[],enabled:typeof window<"u"&&window.__RPC_TRACKING_ENABLED__===!0,enable(){this.enabled=!0,this.calls=[],console.log("[RPC] Tracking enabled. Refresh page to capture all calls.")},disable(){this.enabled=!1,console.log("[RPC] Tracking disabled")},reset(){this.calls=[],console.log("[RPC] Counter reset")},log(s,e){if(!this.enabled)return;const n=JSON.stringify(e,(_,v)=>typeof v=="bigint"?v.toString():v),u={id:this.calls.length+1,method:s,args:n,time:new Date().toISOString()};this.calls.push(u),console.log(`[RPC #${u.id}] ${s}`,e)},summary(){const s={};for(const e of this.calls){const n=`${e.method}(${e.args})`;s[n]=(s[n]||0)+1}return console.log("[RPC Summary] Total calls:",this.calls.length),console.table(s),{total:this.calls.length,byMethod:s}}};typeof window<"u"&&(window.rpcTracker=Qt);const er=Hs({chain:Pt,transport:an(`https://base-mainnet.g.alchemy.com/v2/${Ce.api_keys.alchemy_base}`)}),ot=new Proxy(er,{get(s,e){const n=s[e];return typeof n=="function"?async(...u)=>{var _,v;return e==="readContract"?Qt.log(u[0].functionName,{address:(_=u[0].address)==null?void 0:_.slice(0,10),args:u[0].args}):e==="getContractEvents"?Qt.log("getContractEvents",{address:(v=u[0].address)==null?void 0:v.slice(0,10),eventName:u[0].eventName}):e==="getBlockNumber"&&Qt.log("getBlockNumber",{}),n.apply(s,u)}:n}}),ac=Hs({chain:$n,transport:an(`https://eth-mainnet.g.alchemy.com/v2/${Ce.api_keys.alchemy_mainnet}`)}),Ai=er,Ri=wt({key:"transactionCount",default:0}),ji=wt({key:"transactionStatus",default:{}}),Ni=wt({key:"transactionListeners",default:[]}),tr=()=>{const[s,e]=at(ji),[n,u]=at(Ni);return{getTransactionStatus:i=>s[i],transactions:s,updateTransactionStatus:async(i,y)=>{e(b=>({...b,[i]:y}));for(const b of n)b(i,y)},register:i=>{u(y=>y.includes(i)?y:[...y,i])}}},lc=()=>{const{updateTransactionStatus:s}=tr(),[e,n]=at(Ri),u=()=>(n(v=>v+1),e);return async(v,h,i,y)=>{const b=u();let g;try{s(b,{status:"pending",name:h,content:i?await i("pending"):null}),g=await v(),s(b,{status:"approved",name:h,hash:g,content:i?await i("approved",{hash:g}):null});const t=await ot.waitForTransactionReceipt({hash:g,confirmations:1});return s(b,{status:"success",name:h,hash:g,content:i?await i("success",{hash:g},!0,t):null}),{hash:g,receipt:t,success:!0}}catch(t){if(s(b,{status:"error",name:h,hash:g,errorMessage:Qs(t),content:i?await i("success",{hash:g},!1):null}),y)throw t;return{error:t,success:!1}}}};function Ci(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}const Oi=s=>{switch(s){case"success":return Mi;case"info":return Li;case"warning":return Di;case"error":return Pi;default:return null}},$i=Array(12).fill(0),Ii=({visible:s,className:e})=>I.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},I.createElement("div",{className:"sonner-spinner"},$i.map((n,u)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${u}`})))),Mi=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Di=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Li=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Pi=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Bi=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Fi=()=>{const[s,e]=I.useState(document.hidden);return I.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),s};let In=1;class zi{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:u,..._}=e,v=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:In++,h=this.toasts.find(y=>y.id===v),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(v)&&this.dismissedToasts.delete(v),h?this.toasts=this.toasts.map(y=>y.id===v?(this.publish({...y,...e,id:v,title:u}),{...y,...e,id:v,dismissible:i,title:u}):y):this.addToast({title:u,..._,dismissible:i,id:v}),v},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(u=>u({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let u;n.loading!==void 0&&(u=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const _=Promise.resolve(e instanceof Function?e():e);let v=u!==void 0,h;const i=_.then(async b=>{if(h=["resolve",b],I.isValidElement(b))v=!1,this.create({id:u,type:"default",message:b});else if(qi(b)&&!b.ok){v=!1;const t=typeof n.error=="function"?await n.error(`HTTP error! status: ${b.status}`):n.error,l=typeof n.description=="function"?await n.description(`HTTP error! status: ${b.status}`):n.description,o=typeof t=="object"&&!I.isValidElement(t)?t:{message:t};this.create({id:u,type:"error",description:l,...o})}else if(b instanceof Error){v=!1;const t=typeof n.error=="function"?await n.error(b):n.error,l=typeof n.description=="function"?await n.description(b):n.description,o=typeof t=="object"&&!I.isValidElement(t)?t:{message:t};this.create({id:u,type:"error",description:l,...o})}else if(n.success!==void 0){v=!1;const t=typeof n.success=="function"?await n.success(b):n.success,l=typeof n.description=="function"?await n.description(b):n.description,o=typeof t=="object"&&!I.isValidElement(t)?t:{message:t};this.create({id:u,type:"success",description:l,...o})}}).catch(async b=>{if(h=["reject",b],n.error!==void 0){v=!1;const g=typeof n.error=="function"?await n.error(b):n.error,t=typeof n.description=="function"?await n.description(b):n.description,c=typeof g=="object"&&!I.isValidElement(g)?g:{message:g};this.create({id:u,type:"error",description:t,...c})}}).finally(()=>{v&&(this.dismiss(u),u=void 0),n.finally==null||n.finally.call(n)}),y=()=>new Promise((b,g)=>i.then(()=>h[0]==="reject"?g(h[1]):b(h[1])).catch(g));return typeof u!="string"&&typeof u!="number"?{unwrap:y}:Object.assign(u,{unwrap:y})},this.custom=(e,n)=>{const u=(n==null?void 0:n.id)||In++;return this.create({jsx:e(u),id:u,...n}),u},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xe=new zi,Ui=(s,e)=>{const n=(e==null?void 0:e.id)||In++;return xe.addToast({title:s,...e,id:n}),n},qi=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Wi=Ui,Hi=()=>xe.toasts,Vi=()=>xe.getActiveToasts(),Wt=Object.assign(Wi,{success:xe.success,info:xe.info,warning:xe.warning,error:xe.error,custom:xe.custom,message:xe.message,promise:xe.promise,dismiss:xe.dismiss,loading:xe.loading},{getHistory:Hi,getToasts:Vi});Ci("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ht(s){return s.label!==void 0}const Gi=3,Yi="24px",Ki="16px",_s=4e3,Xi=356,Zi=14,Ji=45,Qi=200;function $e(...s){return s.filter(Boolean).join(" ")}function eo(s){const[e,n]=s.split("-"),u=[];return e&&u.push(e),n&&u.push(n),u}const to=s=>{var e,n,u,_,v,h,i,y,b;const{invert:g,toast:t,unstyled:l,interacting:c,setHeights:o,visibleToasts:r,heights:f,index:a,toasts:d,expanded:m,removeToast:x,defaultRichColors:k,closeButton:A,style:E,cancelButtonStyle:p,actionButtonStyle:w,className:T="",descriptionClassName:R="",duration:N,position:C,gap:$,expandByDefault:M,classNames:P,icons:z,closeButtonAriaLabel:K="Close toast"}=s,[ee,W]=I.useState(null),[D,J]=I.useState(null),[B,X]=I.useState(!1),[q,ne]=I.useState(!1),[ue,Z]=I.useState(!1),[Le,Ge]=I.useState(!1),[tt,Pe]=I.useState(!1),[Ye,Ke]=I.useState(0),[Be,lt]=I.useState(0),Fe=I.useRef(t.duration||N||_s),ze=I.useRef(null),be=I.useRef(null),ct=a===0,zt=a+1<=r,de=t.type,Xe=t.dismissible!==!1,Tt=t.className||"",nt=t.descriptionClassName||"",Re=I.useMemo(()=>f.findIndex(H=>H.toastId===t.id)||0,[f,t.id]),Te=I.useMemo(()=>{var H;return(H=t.closeButton)!=null?H:A},[t.closeButton,A]),ut=I.useMemo(()=>t.duration||N||_s,[t.duration,N]),dt=I.useRef(0),Ue=I.useRef(0),ft=I.useRef(0),qe=I.useRef(null),[pt,ht]=C.split("-"),Ee=I.useMemo(()=>f.reduce((H,se,Y)=>Y>=Re?H:H+se.height,0),[f,Re]),We=Fi(),Et=t.invert||g,st=de==="loading";Ue.current=I.useMemo(()=>Re*$+Ee,[Re,Ee]),I.useEffect(()=>{Fe.current=ut},[ut]),I.useEffect(()=>{X(!0)},[]),I.useEffect(()=>{const H=be.current;if(H){const se=H.getBoundingClientRect().height;return lt(se),o(Y=>[{toastId:t.id,height:se,position:t.position},...Y]),()=>o(Y=>Y.filter(re=>re.toastId!==t.id))}},[o,t.id]),I.useLayoutEffect(()=>{if(!B)return;const H=be.current,se=H.style.height;H.style.height="auto";const Y=H.getBoundingClientRect().height;H.style.height=se,lt(Y),o(re=>re.find(ie=>ie.toastId===t.id)?re.map(ie=>ie.toastId===t.id?{...ie,height:Y}:ie):[{toastId:t.id,height:Y,position:t.position},...re])},[B,t.title,t.description,o,t.id,t.jsx,t.action,t.cancel]);const Oe=I.useCallback(()=>{ne(!0),Ke(Ue.current),o(H=>H.filter(se=>se.toastId!==t.id)),setTimeout(()=>{x(t)},Qi)},[t,x,o,Ue]);I.useEffect(()=>{if(t.promise&&de==="loading"||t.duration===1/0||t.type==="loading")return;let H;return m||c||We?(()=>{if(ft.current<dt.current){const re=new Date().getTime()-dt.current;Fe.current=Fe.current-re}ft.current=new Date().getTime()})():(()=>{Fe.current!==1/0&&(dt.current=new Date().getTime(),H=setTimeout(()=>{t.onAutoClose==null||t.onAutoClose.call(t,t),Oe()},Fe.current))})(),()=>clearTimeout(H)},[m,c,t,de,We,Oe]),I.useEffect(()=>{t.delete&&(Oe(),t.onDismiss==null||t.onDismiss.call(t,t))},[Oe,t.delete]);function mt(){var H;if(z!=null&&z.loading){var se;return I.createElement("div",{className:$e(P==null?void 0:P.loader,t==null||(se=t.classNames)==null?void 0:se.loader,"sonner-loader"),"data-visible":de==="loading"},z.loading)}return I.createElement(Ii,{className:$e(P==null?void 0:P.loader,t==null||(H=t.classNames)==null?void 0:H.loader),visible:de==="loading"})}const gt=t.icon||(z==null?void 0:z[de])||Oi(de);var Ut,Ze;return I.createElement("li",{tabIndex:0,ref:be,className:$e(T,Tt,P==null?void 0:P.toast,t==null||(e=t.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[de],t==null||(n=t.classNames)==null?void 0:n[de]),"data-sonner-toast":"","data-rich-colors":(Ut=t.richColors)!=null?Ut:k,"data-styled":!(t.jsx||t.unstyled||l),"data-mounted":B,"data-promise":!!t.promise,"data-swiped":tt,"data-removed":q,"data-visible":zt,"data-y-position":pt,"data-x-position":ht,"data-index":a,"data-front":ct,"data-swiping":ue,"data-dismissible":Xe,"data-type":de,"data-invert":Et,"data-swipe-out":Le,"data-swipe-direction":D,"data-expanded":!!(m||M&&B),"data-testid":t.testId,style:{"--index":a,"--toasts-before":a,"--z-index":d.length-a,"--offset":`${q?Ye:Ue.current}px`,"--initial-height":M?"auto":`${Be}px`,...E,...t.style},onDragEnd:()=>{Z(!1),W(null),qe.current=null},onPointerDown:H=>{H.button!==2&&(st||!Xe||(ze.current=new Date,Ke(Ue.current),H.target.setPointerCapture(H.pointerId),H.target.tagName!=="BUTTON"&&(Z(!0),qe.current={x:H.clientX,y:H.clientY})))},onPointerUp:()=>{var H,se,Y;if(Le||!Xe)return;qe.current=null;const re=Number(((H=be.current)==null?void 0:H.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number(((se=be.current)==null?void 0:se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ie=new Date().getTime()-((Y=ze.current)==null?void 0:Y.getTime()),fe=ee==="x"?re:yt,rt=Math.abs(fe)/ie;if(Math.abs(fe)>=Ji||rt>.11){Ke(Ue.current),t.onDismiss==null||t.onDismiss.call(t,t),J(ee==="x"?re>0?"right":"left":yt>0?"down":"up"),Oe(),Ge(!0);return}else{var ve,we;(ve=be.current)==null||ve.style.setProperty("--swipe-amount-x","0px"),(we=be.current)==null||we.style.setProperty("--swipe-amount-y","0px")}Pe(!1),Z(!1),W(null)},onPointerMove:H=>{var se,Y,re;if(!qe.current||!Xe||((se=window.getSelection())==null?void 0:se.toString().length)>0)return;const ie=H.clientY-qe.current.y,fe=H.clientX-qe.current.x;var rt;const ve=(rt=s.swipeDirections)!=null?rt:eo(C);!ee&&(Math.abs(fe)>1||Math.abs(ie)>1)&&W(Math.abs(fe)>Math.abs(ie)?"x":"y");let we={x:0,y:0};const ke=he=>1/(1.5+Math.abs(he)/20);if(ee==="y"){if(ve.includes("top")||ve.includes("bottom"))if(ve.includes("top")&&ie<0||ve.includes("bottom")&&ie>0)we.y=ie;else{const he=ie*ke(ie);we.y=Math.abs(he)<Math.abs(ie)?he:ie}}else if(ee==="x"&&(ve.includes("left")||ve.includes("right")))if(ve.includes("left")&&fe<0||ve.includes("right")&&fe>0)we.x=fe;else{const he=fe*ke(fe);we.x=Math.abs(he)<Math.abs(fe)?he:fe}(Math.abs(we.x)>0||Math.abs(we.y)>0)&&Pe(!0),(Y=be.current)==null||Y.style.setProperty("--swipe-amount-x",`${we.x}px`),(re=be.current)==null||re.style.setProperty("--swipe-amount-y",`${we.y}px`)}},Te&&!t.jsx&&de!=="loading"?I.createElement("button",{"aria-label":K,"data-disabled":st,"data-close-button":!0,onClick:st||!Xe?()=>{}:()=>{Oe(),t.onDismiss==null||t.onDismiss.call(t,t)},className:$e(P==null?void 0:P.closeButton,t==null||(u=t.classNames)==null?void 0:u.closeButton)},(Ze=z==null?void 0:z.close)!=null?Ze:Bi):null,(de||t.icon||t.promise)&&t.icon!==null&&((z==null?void 0:z[de])!==null||t.icon)?I.createElement("div",{"data-icon":"",className:$e(P==null?void 0:P.icon,t==null||(_=t.classNames)==null?void 0:_.icon)},t.promise||t.type==="loading"&&!t.icon?t.icon||mt():null,t.type!=="loading"?gt:null):null,I.createElement("div",{"data-content":"",className:$e(P==null?void 0:P.content,t==null||(v=t.classNames)==null?void 0:v.content)},I.createElement("div",{"data-title":"",className:$e(P==null?void 0:P.title,t==null||(h=t.classNames)==null?void 0:h.title)},t.jsx?t.jsx:typeof t.title=="function"?t.title():t.title),t.description?I.createElement("div",{"data-description":"",className:$e(R,nt,P==null?void 0:P.description,t==null||(i=t.classNames)==null?void 0:i.description)},typeof t.description=="function"?t.description():t.description):null),I.isValidElement(t.cancel)?t.cancel:t.cancel&&Ht(t.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:t.cancelButtonStyle||p,onClick:H=>{Ht(t.cancel)&&Xe&&(t.cancel.onClick==null||t.cancel.onClick.call(t.cancel,H),Oe())},className:$e(P==null?void 0:P.cancelButton,t==null||(y=t.classNames)==null?void 0:y.cancelButton)},t.cancel.label):null,I.isValidElement(t.action)?t.action:t.action&&Ht(t.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:t.actionButtonStyle||w,onClick:H=>{Ht(t.action)&&(t.action.onClick==null||t.action.onClick.call(t.action,H),!H.defaultPrevented&&Oe())},className:$e(P==null?void 0:P.actionButton,t==null||(b=t.classNames)==null?void 0:b.actionButton)},t.action.label):null)};function xs(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function no(s,e){const n={};return[s,e].forEach((u,_)=>{const v=_===1,h=v?"--mobile-offset":"--offset",i=v?Ki:Yi;function y(b){["top","right","bottom","left"].forEach(g=>{n[`${h}-${g}`]=typeof b=="number"?`${b}px`:b})}typeof u=="number"||typeof u=="string"?y(u):typeof u=="object"?["top","right","bottom","left"].forEach(b=>{u[b]===void 0?n[`${h}-${b}`]=i:n[`${h}-${b}`]=typeof u[b]=="number"?`${u[b]}px`:u[b]}):y(i)}),n}const so=I.forwardRef(function(e,n){const{id:u,invert:_,position:v="bottom-right",hotkey:h=["altKey","KeyT"],expand:i,closeButton:y,className:b,offset:g,mobileOffset:t,theme:l="light",richColors:c,duration:o,style:r,visibleToasts:f=Gi,toastOptions:a,dir:d=xs(),gap:m=Zi,icons:x,containerAriaLabel:k="Notifications"}=e,[A,E]=I.useState([]),p=I.useMemo(()=>u?A.filter(B=>B.toasterId===u):A.filter(B=>!B.toasterId),[A,u]),w=I.useMemo(()=>Array.from(new Set([v].concat(p.filter(B=>B.position).map(B=>B.position)))),[p,v]),[T,R]=I.useState([]),[N,C]=I.useState(!1),[$,M]=I.useState(!1),[P,z]=I.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=I.useRef(null),ee=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=I.useRef(null),D=I.useRef(!1),J=I.useCallback(B=>{E(X=>{var q;return(q=X.find(ne=>ne.id===B.id))!=null&&q.delete||xe.dismiss(B.id),X.filter(({id:ne})=>ne!==B.id)})},[]);return I.useEffect(()=>xe.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{E(X=>X.map(q=>q.id===B.id?{...q,delete:!0}:q))});return}setTimeout(()=>{Fr.flushSync(()=>{E(X=>{const q=X.findIndex(ne=>ne.id===B.id);return q!==-1?[...X.slice(0,q),{...X[q],...B},...X.slice(q+1)]:[B,...X]})})})}),[A]),I.useEffect(()=>{if(l!=="system"){z(l);return}if(l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:X})=>{z(X?"dark":"light")})}catch{B.addListener(({matches:q})=>{try{z(q?"dark":"light")}catch(ne){console.error(ne)}})}},[l]),I.useEffect(()=>{A.length<=1&&C(!1)},[A]),I.useEffect(()=>{const B=X=>{var q;if(h.every(Z=>X[Z]||X.code===Z)){var ue;C(!0),(ue=K.current)==null||ue.focus()}X.code==="Escape"&&(document.activeElement===K.current||(q=K.current)!=null&&q.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[h]),I.useEffect(()=>{if(K.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,D.current=!1)}},[K.current]),I.createElement("section",{ref:n,"aria-label":`${k} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((B,X)=>{var q;const[ne,ue]=B.split("-");return p.length?I.createElement("ol",{key:B,dir:d==="auto"?xs():d,tabIndex:-1,ref:K,className:b,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":ne,"data-x-position":ue,style:{"--front-toast-height":`${((q=T[0])==null?void 0:q.height)||0}px`,"--width":`${Xi}px`,"--gap":`${m}px`,...r,...no(g,t)},onBlur:Z=>{D.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(D.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||D.current||(D.current=!0,W.current=Z.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{$||C(!1)},onDragEnd:()=>C(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},p.filter(Z=>!Z.position&&X===0||Z.position===B).map((Z,Le)=>{var Ge,tt;return I.createElement(to,{key:Z.id,icons:x,index:Le,toast:Z,defaultRichColors:c,duration:(Ge=a==null?void 0:a.duration)!=null?Ge:o,className:a==null?void 0:a.className,descriptionClassName:a==null?void 0:a.descriptionClassName,invert:_,visibleToasts:f,closeButton:(tt=a==null?void 0:a.closeButton)!=null?tt:y,interacting:$,position:B,style:a==null?void 0:a.style,unstyled:a==null?void 0:a.unstyled,classNames:a==null?void 0:a.classNames,cancelButtonStyle:a==null?void 0:a.cancelButtonStyle,actionButtonStyle:a==null?void 0:a.actionButtonStyle,closeButtonAriaLabel:a==null?void 0:a.closeButtonAriaLabel,removeToast:J,toasts:p.filter(Pe=>Pe.position==Z.position),heights:T.filter(Pe=>Pe.position==Z.position),setHeights:R,expandByDefault:i,gap:m,expanded:N,swipeDirections:e.swipeDirections})})):null}))});function ro({hash:s}){return S.jsxs("a",{className:"inline-flex items-center gap-1.5 text-accent-cyan hover:text-accent-cyan/80 transition-colors text-sm",href:Ce.blockExplorer.url+"/tx/"+s,target:"_blank",rel:"noopener noreferrer",children:["View on ",Ce.blockExplorer.name,S.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}function io(){const{register:s}=tr(),e=(n,u)=>{const _=u.hash?S.jsx(ro,{hash:u.hash}):null;u.status==="pending"?Wt.loading(u.content||"Waiting for approval...",{id:n,description:u.name}):u.status==="approved"?Wt.loading(u.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction approved, confirming..."}),_]}),{id:n,description:u.name}):u.status==="success"?Wt.success(u.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction confirmed!"}),_]}),{id:n,description:u.name,duration:8e3}):u.status==="error"&&Wt.error(u.content||S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{children:"Transaction failed"}),u.errorMessage&&S.jsx("p",{className:"text-xs text-ink-400 break-words",children:u.errorMessage}),_]}),{id:n,description:u.name,duration:1e4})};return L.useEffect(()=>{s(e)},[]),S.jsx(so,{position:"bottom-right",theme:"dark",toastOptions:{style:{background:"#18181b",border:"1px solid #27272a",color:"#fafafa"},className:"sonner-toast"},richColors:!0,closeButton:!0})}function oo(){const{isConnected:s}=Hn(),e=Vs(),{switchChain:n}=$r();return L.useEffect(()=>{s&&e!==Pt.id&&(n==null||n({chainId:Pt.id}))},[s,e,n]),null}function ao({children:s,props:e}){return S.jsxs("div",{className:"min-h-screen flex flex-col bg-ink-950",children:[S.jsx(oo,{}),S.jsx("main",{className:"flex-1",children:s}),S.jsx(io,{}),S.jsx("footer",{className:"bg-ink-900/50 border-t border-ink-800/50 mt-auto",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("span",{className:"font-mono text-xl font-bold text-ink-100",children:[".zang","{"]}),S.jsxs("p",{className:"text-ink-400 text-sm",children:["Text-based NFTs on Base.",S.jsx("br",{}),"By artists, for artists."]}),S.jsx("p",{className:"text-ink-500 text-xs",children:"Platform fee: 5%"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Contact"}),S.jsx("a",{href:"mailto:team@zang.gallery",className:"block text-ink-400 hover:text-accent-cyan transition-colors text-sm",children:"team@zang.gallery"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h4",{className:"text-ink-300 font-medium text-sm uppercase tracking-wide",children:"Community"}),S.jsxs("div",{className:"flex flex-col space-y-2",children:[S.jsxs("a",{href:"https://twitter.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Twitter"]}),S.jsxs("a",{href:"https://github.com/zanggallery",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})}),"GitHub"]}),S.jsxs("a",{href:"https://discord.gg/jnpCz9R3gf",target:"_blank",rel:"noopener noreferrer",className:"text-ink-400 hover:text-accent-cyan transition-colors text-sm inline-flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189z"})}),"Discord"]})]})]})]}),S.jsx("div",{className:"mt-8 pt-8 border-t border-ink-800/50",children:S.jsx("p",{className:"text-ink-500 text-xs text-center",children:"Built on Base"})})]})})]})}const lo="0xC6d566A56A1aFf6508b41f6c90ff131615583BCD",co=[{inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],stateMutability:"view",type:"function"}];function uo(s){const e=s.toLowerCase().replace("0x",""),n=hs(ms(["string"],[e])),u=Ir("80002105.reverse");return hs(ms(["bytes32","bytes32"],[u,n]))}const fo=2,po=100;let bn=0;const vn=[],Vt=new Map;async function ho(s){return new Promise((e,n)=>{const u=async()=>{bn++;try{const _=await s();e(_)}catch(_){n(_)}finally{bn--,vn.length>0&&setTimeout(()=>{const _=vn.shift();_&&_()},po)}};bn<fo?u():vn.push(u)})}function mo(){try{const s=localStorage.getItem("ensCache");if(s){const e=JSON.parse(s),n=new Date,u={};for(const[_,v]of Object.entries(e))v&&new Date(v.expiration)>n&&(u[_]=v);return u}}catch{}return{}}function go(s){try{localStorage.setItem("ensCache",JSON.stringify(s))}catch{}}const yo=wt({key:"ensInfo",default:mo()}),bo=()=>{const[s,e]=at(yo),n=async i=>{let y=null;try{y=await ho(async()=>{const g=uo(i);return await Ai.readContract({abi:co,address:lo,functionName:"name",args:[g]})||null})}catch{}const b={value:y,expiration:new Date(new Date().getTime()+Ce.ens.cacheExpiration)};return e(g=>{const t={...g,[i]:b};return go(t),t}),y},u=i=>(!s[i]||new Date(s[i].expiration)<new Date)&&!Vt.has(i),_=i=>{e(y=>({...y,[i]:null}))};return{lookupEns:i=>{var b,g;if(!i)return i;if(s[i]&&new Date(s[i].expiration)>new Date)return s[i].value;if(Vt.has(i))return(b=s[i])==null?void 0:b.value;const y=new Promise(t=>{setTimeout(async()=>{try{const l=await n(i);t(l)}catch{t(null)}finally{Vt.delete(i)}},0)});return Vt.set(i,y),(g=s[i])==null?void 0:g.value},lookupEnsAsync:async(i,y)=>{var t;if(!i)return i;y&&_(i);const b=u(i)||y;let g;return b?g=await n(i):g=(t=s[i])==null?void 0:t.value,g},invalidateEns:_}},_n=new Map;function vo(){try{const s=localStorage.getItem("profilesCache");if(s){const e=JSON.parse(s),n=Date.now(),u={};for(const[_,v]of Object.entries(e))v&&v.fetchedAt>n-300*1e3&&(u[_]=v);return u}}catch{}return{}}function ws(s){try{localStorage.setItem("profilesCache",JSON.stringify(s))}catch{}}const _o=wt({key:"profiles",default:vo()}),xo=()=>{const[s,e]=at(_o),n=async h=>{try{const i=await fetch(`/api/profile/${h.toLowerCase()}`);if(i.ok)return(await i.json()).name}catch{}return null},u=async h=>{const i=await n(h),y={name:i,fetchedAt:Date.now()};return e(b=>{const g={...b,[h.toLowerCase()]:y};return ws(g),g}),i};return{lookupProfile:h=>{if(!h)return null;const i=h.toLowerCase(),y=s[i];if(y&&y.fetchedAt>Date.now()-300*1e3)return y.name;if(_n.has(i))return y==null?void 0:y.name;const b=new Promise(g=>{setTimeout(async()=>{try{const t=await u(h);g(t)}catch{g(null)}finally{_n.delete(i)}},0)});return _n.set(i,b),y==null?void 0:y.name},invalidateProfile:h=>{const i=h.toLowerCase();e(y=>{const b={...y};return delete b[i],ws(b),b})}}},wo=(s,e)=>s.substring(0,e+2)+"..."+s.substring(s.length-e);function Mn({address:s,shorten:e,nChar:n,disableLink:u}){const{lookupEns:_}=bo(),{lookupProfile:v}=xo(),h=v(s),i=_(s),y=h||i||(e?wo(s,n):s),b=h||i?"font-sans":"font-mono";return S.jsx("span",{className:`${b} text-ink-300`,children:u?y:S.jsx(Mt,{to:`/profile?address=${s}`,className:"hover:text-accent-cyan transition-colors underline decoration-ink-600 hover:decoration-accent-cyan",children:y})})}function ko(){const[s,e]=L.useState(!1),{isConnected:n}=Hn(),u=Vs(),_=[{href:"/",label:"Home"},{href:"/gallery",label:"Gallery"},{href:"/mint",label:"Mint"},{href:"/activity",label:"Activity"}];return S.jsxs("header",{className:"sticky top-0 z-50 bg-ink-950/80 backdrop-blur-md border-b border-ink-800/50",children:[S.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"flex items-center h-16",children:[S.jsx("div",{className:"flex-shrink-0 w-64",children:S.jsx(jn,{href:"/",className:"group flex items-center",children:S.jsxs("span",{className:"font-mono text-2xl font-bold text-ink-100 group-hover:text-white transition-colors duration-200",children:[".zang","{"]})})}),S.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center space-x-8",children:_.map(v=>S.jsx(jn,{href:v.href,className:"nav-link text-sm font-medium uppercase tracking-wide",children:v.label},v.href))}),S.jsx("div",{className:"hidden md:flex flex-shrink-0 justify-end w-64",children:S.jsx(Ls,{})}),S.jsx("button",{className:"md:hidden ml-auto p-2 rounded-lg text-ink-400 hover:text-white hover:bg-ink-800/50 transition-colors",onClick:()=>e(!s),"aria-label":"Toggle menu","aria-expanded":s,children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s?S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),s&&S.jsx("div",{className:"md:hidden py-4 border-t border-ink-800/50 animate-fade-in",children:S.jsxs("div",{className:"flex flex-col space-y-4",children:[_.map(v=>S.jsx(jn,{href:v.href,className:"text-ink-300 hover:text-white text-sm font-medium uppercase tracking-wide py-2 transition-colors",onClick:()=>e(!1),children:v.label},v.href)),S.jsx("div",{className:"pt-4 border-t border-ink-800/50",children:S.jsx(Ls,{})})]})})]}),n&&u!==Ce.networks.main.chainId&&S.jsx("div",{className:"bg-red-500/10 border-b border-red-500/20 px-4 py-3",children:S.jsxs("p",{className:"text-center text-red-400 text-sm",children:["Please switch to"," ",S.jsx("span",{className:"font-semibold",children:Ce.networks.main.name})]})})]})}const To=[{type:"constructor",inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"string",name:"_imageURI",type:"string"},{internalType:"string",name:"_externalLink",type:"string"},{internalType:"address",name:"_zangCommissionAccount",type:"address"}]},{type:"function",name:"PLATFORM_FEE_TIMELOCK",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"applyPlatformFeePercentageIncrease",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"authorOf",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"balanceOf",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOfBatch",inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"contractURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"decreasePlatformFeePercentage",inputs:[{internalType:"uint16",name:"_lowerFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decreaseRoyaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint96",name:"_lowerValue",type:"uint96"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"description",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"descriptionOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"exists",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"externalLink",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"imageURI",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"lastTokenId",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"lock",inputs:[],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{internalType:"string",name:"textURI_",type:"string"},{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"description_",type:"string"},{internalType:"uint256",name:"amount_",type:"uint256"},{internalType:"uint96",name:"royaltyNumerator_",type:"uint96"},{internalType:"address",name:"royaltyRecipient_",type:"address"},{internalType:"bytes",name:"data_",type:"bytes"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"name",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"nameOf",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"newPlatformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"platformFeePercentage",inputs:[],outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"requestPlatformFeePercentageIncrease",inputs:[{internalType:"uint16",name:"_higherFeePercentage",type:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"royaltyDenominator",inputs:[],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"pure"},{type:"function",name:"royaltyInfo",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"royaltyNumerator",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view"},{type:"function",name:"safeBatchTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setZangCommissionAccount",inputs:[{internalType:"address",name:"_zangCommissionAccount",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"textURI",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[{internalType:"uint256",name:"id",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"uri",inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view"},{type:"function",name:"zangCommissionAccount",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"ApprovalForAll",inputs:[{name:"account",type:"address",indexed:!0},{name:"operator",type:"address",indexed:!0},{name:"approved",type:"bool",indexed:!1}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"TransferBatch",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"ids",type:"uint256[]",indexed:!1},{name:"values",type:"uint256[]",indexed:!1}],anonymous:!1},{type:"event",name:"TransferSingle",inputs:[{name:"operator",type:"address",indexed:!0},{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"id",type:"uint256",indexed:!1},{name:"value",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"URI",inputs:[{name:"value",type:"string",indexed:!1},{name:"id",type:"uint256",indexed:!0}],anonymous:!1}],Eo=[{type:"constructor",inputs:[{internalType:"contract IZangNFT",name:"_zangNFTAddress",type:"address"}]},{type:"function",name:"buyToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"delistToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListing",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingAmount",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_expectedAmount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"editListingPrice",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listToken",inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"listingCount",inputs:[{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view"},{type:"function",name:"listings",inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],outputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{internalType:"address",name:"newOwner",type:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"zangNFTAddress",inputs:[],outputs:[{internalType:"contract IZangNFT",name:"",type:"address"}],stateMutability:"view"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0},{name:"newOwner",type:"address",indexed:!0}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1},{type:"event",name:"TokenDelisted",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenListed",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"TokenPurchased",inputs:[{name:"_tokenId",type:"uint256",indexed:!0},{name:"_buyer",type:"address",indexed:!0},{name:"_seller",type:"address",indexed:!0},{name:"_listingId",type:"uint256",indexed:!1},{name:"_amount",type:"uint256",indexed:!1},{name:"_price",type:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1}],anonymous:!1}],_t={zang:To,marketplace:Eo},Kn=(s,e,n)=>({...s,execute:(u,_)=>{if(!u.text||!u.selection){_.replaceSelection(`${e}${n}`);return}try{const v=ri({text:u.text,selection:u.selection}),h=_.setSelectionRange(v),i=h.selectedText||"",y=i.search(/\S|$/),b=i.substring(0,y),g=i.search(/\s+$/),t=g===-1?"":i.substring(g,i.length),l=_.replaceSelection(b.concat(e,h.selectedText.trim(),n,t));_.setSelectionRange({start:l.selection.end-e.length-h.selectedText.length+b.length,end:l.selection.end-n.length-t.length})}catch{_.replaceSelection(`${e}${u.selectedText||""}${n}`)}}}),So=Kn(ei,"**","**"),Ao=Kn(ti,"*","*"),Ro=Kn(ni,"~~","~~"),xt=si();xt[xt.findIndex(s=>s.name==="bold")]=So;xt[xt.findIndex(s=>s.name==="italic")]=Ao;xt[xt.findIndex(s=>s.name==="strikethrough")]=Ro;var xn={exports:{}},ks;function jo(){return ks||(ks=1,(function(s,e){(function(n,u){s.exports=u()})(self,(()=>{return n={7629:(_,v,h)=>{const i=h(375),y=h(8571),b=h(9474),g=h(1687),t=h(8652),l=h(8160),c=h(3292),o=h(6354),r=h(8901),f=h(9708),a=h(6914),d=h(2294),m=h(6133),x=h(1152),k=h(8863),A=h(2036),E={Base:class{constructor(p){this.type=p,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new d.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return i(typeof f.describe=="function","Manifest functionality disabled"),f.describe(this)}allow(...p){return l.verifyFlat(p,"allow"),this._values(p,"_valids")}alter(p){i(p&&typeof p=="object"&&!Array.isArray(p),"Invalid targets argument"),i(!this._inRuleset(),"Cannot set alterations inside a ruleset");const w=this.clone();w.$_terms.alterations=w.$_terms.alterations||[];for(const T in p){const R=p[T];i(typeof R=="function","Alteration adjuster for",T,"must be a function"),w.$_terms.alterations.push({target:T,adjuster:R})}return w.$_temp.ruleset=!1,w}artifact(p){return i(p!==void 0,"Artifact cannot be undefined"),i(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",p)}cast(p){return i(p===!1||typeof p=="string","Invalid to value"),i(p===!1||this._definition.cast[p],"Type",this.type,"does not support casting to",p),this.$_setFlag("cast",p===!1?void 0:p)}default(p,w){return this._default("default",p,w)}description(p){return i(p&&typeof p=="string","Description must be a non-empty string"),this.$_setFlag("description",p)}empty(p){const w=this.clone();return p!==void 0&&(p=w.$_compile(p,{override:!1})),w.$_setFlag("empty",p,{clone:!1})}error(p){return i(p,"Missing error"),i(p instanceof Error||typeof p=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",p)}example(p,w={}){return i(p!==void 0,"Missing example"),l.assertOptions(w,["override"]),this._inner("examples",p,{single:!0,override:w.override})}external(p,w){return typeof p=="object"&&(i(!w,"Cannot combine options with description"),w=p.description,p=p.method),i(typeof p=="function","Method must be a function"),i(w===void 0||w&&typeof w=="string","Description must be a non-empty string"),this._inner("externals",{method:p,description:w},{single:!0})}failover(p,w){return this._default("failover",p,w)}forbidden(){return this.presence("forbidden")}id(p){return p?(i(typeof p=="string","id must be a non-empty string"),i(/^[^\.]+$/.test(p),"id cannot contain period character"),this.$_setFlag("id",p)):this.$_setFlag("id",void 0)}invalid(...p){return this._values(p,"_invalids")}label(p){return i(p&&typeof p=="string","Label name must be a non-empty string"),this.$_setFlag("label",p)}meta(p){return i(p!==void 0,"Meta cannot be undefined"),this._inner("metas",p,{single:!0})}note(...p){i(p.length,"Missing notes");for(const w of p)i(w&&typeof w=="string","Notes must be non-empty strings");return this._inner("notes",p)}only(p=!0){return i(typeof p=="boolean","Invalid mode:",p),this.$_setFlag("only",p)}optional(){return this.presence("optional")}prefs(p){i(p,"Missing preferences"),i(p.context===void 0,"Cannot override context"),i(p.externals===void 0,"Cannot override externals"),i(p.warnings===void 0,"Cannot override warnings"),i(p.debug===void 0,"Cannot override debug"),l.checkPreferences(p);const w=this.clone();return w._preferences=l.preferences(w._preferences,p),w}presence(p){return i(["optional","required","forbidden"].includes(p),"Unknown presence mode",p),this.$_setFlag("presence",p)}raw(p=!0){return this.$_setFlag("result",p?"raw":void 0)}result(p){return i(["raw","strip"].includes(p),"Unknown result mode",p),this.$_setFlag("result",p)}required(){return this.presence("required")}strict(p){const w=this.clone(),T=p!==void 0&&!p;return w._preferences=l.preferences(w._preferences,{convert:T}),w}strip(p=!0){return this.$_setFlag("result",p?"strip":void 0)}tag(...p){i(p.length,"Missing tags");for(const w of p)i(w&&typeof w=="string","Tags must be non-empty strings");return this._inner("tags",p)}unit(p){return i(p&&typeof p=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",p)}valid(...p){l.verifyFlat(p,"valid");const w=this.allow(...p);return w.$_setFlag("only",!!w._valids,{clone:!1}),w}when(p,w){const T=this.clone();T.$_terms.whens||(T.$_terms.whens=[]);const R=c.when(T,p,w);if(!["any","link"].includes(T.type)){const N=R.is?[R]:R.switch;for(const C of N)i(!C.then||C.then.type==="any"||C.then.type===T.type,"Cannot combine",T.type,"with",C.then&&C.then.type),i(!C.otherwise||C.otherwise.type==="any"||C.otherwise.type===T.type,"Cannot combine",T.type,"with",C.otherwise&&C.otherwise.type)}return T.$_terms.whens.push(R),T.$_mutateRebuild()}cache(p){i(!this._inRuleset(),"Cannot set caching inside a ruleset"),i(!this._cache,"Cannot override schema cache"),i(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const w=this.clone();return w._cache=p||t.provider.provision(),w.$_temp.ruleset=!1,w}clone(){const p=Object.create(Object.getPrototypeOf(this));return this._assign(p)}concat(p){i(l.isSchema(p),"Invalid schema object"),i(this.type==="any"||p.type==="any"||p.type===this.type,"Cannot merge type",this.type,"with another type:",p.type),i(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),i(!p._inRuleset(),"Cannot concatenate a schema with open ruleset");let w=this.clone();if(this.type==="any"&&p.type!=="any"){const T=p.clone();for(const R of Object.keys(w))R!=="type"&&(T[R]=w[R]);w=T}w._ids.concat(p._ids),w._refs.register(p,m.toSibling),w._preferences=w._preferences?l.preferences(w._preferences,p._preferences):p._preferences,w._valids=A.merge(w._valids,p._valids,p._invalids),w._invalids=A.merge(w._invalids,p._invalids,p._valids);for(const T of p._singleRules.keys())w._singleRules.has(T)&&(w._rules=w._rules.filter((R=>R.keep||R.name!==T)),w._singleRules.delete(T));for(const T of p._rules)p._definition.rules[T.method].multi||w._singleRules.set(T.name,T),w._rules.push(T);if(w._flags.empty&&p._flags.empty){w._flags.empty=w._flags.empty.concat(p._flags.empty);const T=Object.assign({},p._flags);delete T.empty,g(w._flags,T)}else if(p._flags.empty){w._flags.empty=p._flags.empty;const T=Object.assign({},p._flags);delete T.empty,g(w._flags,T)}else g(w._flags,p._flags);for(const T in p.$_terms){const R=p.$_terms[T];R?w.$_terms[T]?w.$_terms[T]=w.$_terms[T].concat(R):w.$_terms[T]=R.slice():w.$_terms[T]||(w.$_terms[T]=R)}return this.$_root._tracer&&this.$_root._tracer._combine(w,[this,p]),w.$_mutateRebuild()}extend(p){return i(!p.base,"Cannot extend type with another base"),r.type(this,p)}extract(p){return p=Array.isArray(p)?p:p.split("."),this._ids.reach(p)}fork(p,w){i(!this._inRuleset(),"Cannot fork inside a ruleset");let T=this;for(let R of[].concat(p))R=Array.isArray(R)?R:R.split("."),T=T._ids.fork(R,w,T);return T.$_temp.ruleset=!1,T}rule(p){const w=this._definition;l.assertOptions(p,Object.keys(w.modifiers)),i(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const T=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;i(T>=0&&T<this._rules.length,"Cannot apply rules to empty ruleset");const R=this.clone();for(let N=T;N<R._rules.length;++N){const C=R._rules[N],$=y(C);for(const M in p)w.modifiers[M]($,p[M]),i($.name===C.name,"Cannot change rule name");R._rules[N]=$,R._singleRules.get($.name)===C&&R._singleRules.set($.name,$)}return R.$_temp.ruleset=!1,R.$_mutateRebuild()}get ruleset(){i(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const p=this.clone();return p.$_temp.ruleset=p._rules.length,p}get $(){return this.ruleset}tailor(p){p=[].concat(p),i(!this._inRuleset(),"Cannot tailor inside a ruleset");let w=this;if(this.$_terms.alterations)for(const{target:T,adjuster:R}of this.$_terms.alterations)p.includes(T)&&(w=R(w),i(l.isSchema(w),"Alteration adjuster for",T,"failed to return a schema object"));return w=w.$_modify({each:T=>T.tailor(p),ref:!1}),w.$_temp.ruleset=!1,w.$_mutateRebuild()}tracer(){return x.location?x.location(this):this}validate(p,w){return k.entry(p,this,w)}validateAsync(p,w){return k.entryAsync(p,this,w)}$_addRule(p){typeof p=="string"&&(p={name:p}),i(p&&typeof p=="object","Invalid options"),i(p.name&&typeof p.name=="string","Invalid rule name");for(const C in p)i(C[0]!=="_","Cannot set private rule properties");const w=Object.assign({},p);w._resolve=[],w.method=w.method||w.name;const T=this._definition.rules[w.method],R=w.args;i(T,"Unknown rule",w.method);const N=this.clone();if(R){i(Object.keys(R).length===1||Object.keys(R).length===this._definition.rules[w.name].args.length,"Invalid rule definition for",this.type,w.name);for(const C in R){let $=R[C];if(T.argsByName){const M=T.argsByName.get(C);if(M.ref&&l.isResolvable($))w._resolve.push(C),N.$_mutateRegister($);else if(M.normalize&&($=M.normalize($),R[C]=$),M.assert){const P=l.validateArg($,C,M);i(!P,P,"or reference")}}$!==void 0?R[C]=$:delete R[C]}}return T.multi||(N._ruleRemove(w.name,{clone:!1}),N._singleRules.set(w.name,w)),N.$_temp.ruleset===!1&&(N.$_temp.ruleset=null),T.priority?N._rules.unshift(w):N._rules.push(w),N}$_compile(p,w){return c.schema(this.$_root,p,w)}$_createError(p,w,T,R,N,C={}){const $=C.flags!==!1?this._flags:{},M=C.messages?a.merge(this._definition.messages,C.messages):this._definition.messages;return new o.Report(p,w,T,$,M,R,N)}$_getFlag(p){return this._flags[p]}$_getRule(p){return this._singleRules.get(p)}$_mapLabels(p){return p=Array.isArray(p)?p:p.split("."),this._ids.labels(p)}$_match(p,w,T,R){(T=Object.assign({},T)).abortEarly=!0,T._externals=!1,w.snapshot();const N=!k.validate(p,this,w,T,R).errors;return w.restore(),N}$_modify(p){return l.assertOptions(p,["each","once","ref","schema"]),d.schema(this,p)||this}$_mutateRebuild(){return i(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(p,{source:w,name:T,path:R,key:N})=>{const C=this._definition[w][T]&&this._definition[w][T].register;C!==!1&&this.$_mutateRegister(p,{family:C,key:N})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(p,{family:w,key:T}={}){this._refs.register(p,w),this._ids.register(p,{key:T})}$_property(p){return this._definition.properties[p]}$_reach(p){return this._ids.reach(p)}$_rootReferences(){return this._refs.roots()}$_setFlag(p,w,T={}){i(p[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const R=this._definition.flags[p]||{};if(b(w,R.default)&&(w=void 0),b(w,this._flags[p]))return this;const N=T.clone!==!1?this.clone():this;return w!==void 0?(N._flags[p]=w,N.$_mutateRegister(w)):delete N._flags[p],p[0]!=="_"&&(N.$_temp.ruleset=!1),N}$_parent(p,...w){return this[p][l.symbols.parent].call(this,...w)}$_validate(p,w,T){return k.validate(p,this,w,T)}_assign(p){p.type=this.type,p.$_root=this.$_root,p.$_temp=Object.assign({},this.$_temp),p.$_temp.whens={},p._ids=this._ids.clone(),p._preferences=this._preferences,p._valids=this._valids&&this._valids.clone(),p._invalids=this._invalids&&this._invalids.clone(),p._rules=this._rules.slice(),p._singleRules=y(this._singleRules,{shallow:!0}),p._refs=this._refs.clone(),p._flags=Object.assign({},this._flags),p._cache=null,p.$_terms={};for(const w in this.$_terms)p.$_terms[w]=this.$_terms[w]?this.$_terms[w].slice():null;p.$_super={};for(const w in this.$_super)p.$_super[w]=this._super[w].bind(p);return p}_bare(){const p=this.clone();p._reset();const w=p._definition.terms;for(const T in w){const R=w[T];p.$_terms[T]=R.init}return p.$_mutateRebuild()}_default(p,w,T={}){return l.assertOptions(T,"literal"),i(w!==void 0,"Missing",p,"value"),i(typeof w=="function"||!T.literal,"Only function value supports literal option"),typeof w=="function"&&T.literal&&(w={[l.symbols.literal]:!0,literal:w}),this.$_setFlag(p,w)}_generate(p,w,T){if(!this.$_terms.whens)return{schema:this};const R=[],N=[];for(let M=0;M<this.$_terms.whens.length;++M){const P=this.$_terms.whens[M];if(P.concat){R.push(P.concat),N.push(`${M}.concat`);continue}const z=P.ref?P.ref.resolve(p,w,T):p,K=P.is?[P]:P.switch,ee=N.length;for(let W=0;W<K.length;++W){const{is:D,then:J,otherwise:B}=K[W],X=`${M}${P.switch?"."+W:""}`;if(D.$_match(z,w.nest(D,`${X}.is`),T)){if(J){const q=w.localize([...w.path,`${X}.then`],w.ancestors,w.schemas),{schema:ne,id:ue}=J._generate(p,q,T);R.push(ne),N.push(`${X}.then${ue?`(${ue})`:""}`);break}}else if(B){const q=w.localize([...w.path,`${X}.otherwise`],w.ancestors,w.schemas),{schema:ne,id:ue}=B._generate(p,q,T);R.push(ne),N.push(`${X}.otherwise${ue?`(${ue})`:""}`);break}}if(P.break&&N.length>ee)break}const C=N.join(", ");if(w.mainstay.tracer.debug(w,"rule","when",C),!C)return{schema:this};if(!w.mainstay.tracer.active&&this.$_temp.whens[C])return{schema:this.$_temp.whens[C],id:C};let $=this;this._definition.generate&&($=this._definition.generate(this,p,w,T));for(const M of R)$=$.concat(M);return this.$_root._tracer&&this.$_root._tracer._combine($,[this,...R]),this.$_temp.whens[C]=$,{schema:$,id:C}}_inner(p,w,T={}){i(!this._inRuleset(),`Cannot set ${p} inside a ruleset`);const R=this.clone();return R.$_terms[p]&&!T.override||(R.$_terms[p]=[]),T.single?R.$_terms[p].push(w):R.$_terms[p].push(...w),R.$_temp.ruleset=!1,R}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(p,w={}){if(!this._singleRules.has(p))return this;const T=w.clone!==!1?this.clone():this;T._singleRules.delete(p);const R=[];for(let N=0;N<T._rules.length;++N){const C=T._rules[N];C.name!==p||C.keep?R.push(C):T._inRuleset()&&N<T.$_temp.ruleset&&--T.$_temp.ruleset}return T._rules=R,T}_values(p,w){l.verifyFlat(p,w.slice(1,-1));const T=this.clone(),R=p[0]===l.symbols.override;if(R&&(p=p.slice(1)),!T[w]&&p.length?T[w]=new A:R&&(T[w]=p.length?new A:null,T.$_mutateRebuild()),!T[w])return T;R&&T[w].override();for(const N of p){i(N!==void 0,"Cannot call allow/valid/invalid with undefined"),i(N!==l.symbols.override,"Override must be the first value");const C=w==="_invalids"?"_valids":"_invalids";T[C]&&(T[C].remove(N),T[C].length||(i(w==="_valids"||!T._flags.only,"Setting invalid value",N,"leaves schema rejecting all values due to previous valid rule"),T[C]=null)),T[w].add(N,T._refs)}return T}}};E.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},E.Base.prototype.isImmutable=!0,E.Base.prototype.deny=E.Base.prototype.invalid,E.Base.prototype.disallow=E.Base.prototype.invalid,E.Base.prototype.equal=E.Base.prototype.valid,E.Base.prototype.exist=E.Base.prototype.required,E.Base.prototype.not=E.Base.prototype.invalid,E.Base.prototype.options=E.Base.prototype.prefs,E.Base.prototype.preferences=E.Base.prototype.prefs,_.exports=new E.Base},8652:(_,v,h)=>{const i=h(375),y=h(8571),b=h(8160),g={max:1e3,supported:new Set(["undefined","boolean","number","string"])};v.provider={provision:t=>new g.Cache(t)},g.Cache=class{constructor(t={}){b.assertOptions(t,["max"]),i(t.max===void 0||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||g.max,this._map=new Map,this._list=new g.List}get length(){return this._map.size}set(t,l){if(t!==null&&!g.supported.has(typeof t))return;let c=this._map.get(t);if(c)return c.value=l,void this._list.first(c);c=this._list.unshift({key:t,value:l}),this._map.set(t,c),this._compact()}get(t){const l=this._map.get(t);if(l)return this._list.first(l),y(l.value)}_compact(){if(this._map.size>this._max){const t=this._list.pop();this._map.delete(t.key)}}},g.List=class{constructor(){this.tail=null,this.head=null}unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this._remove(t),this.unshift(t))}pop(){return this._remove(this.tail)}_remove(t){const{next:l,prev:c}=t;return l.prev=c,c&&(c.next=l),t===this.tail&&(this.tail=l),t.prev=null,t.next=null,t}}},8160:(_,v,h)=>{const i=h(375),y=h(7916),b=h(5934);let g,t;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};v.version=b.version,v.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},v.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},v.assertOptions=function(c,o,r="Options"){i(c&&typeof c=="object"&&!Array.isArray(c),"Options must be of type object");const f=Object.keys(c).filter((a=>!o.includes(a)));i(f.length===0,`${r} contain unknown keys: ${f}`)},v.checkPreferences=function(c){t=t||h(3378);const o=t.preferences.validate(c);if(o.error)throw new y([o.error.details[0].message])},v.compare=function(c,o,r){switch(r){case"=":return c===o;case">":return c>o;case"<":return c<o;case">=":return c>=o;case"<=":return c<=o}},v.default=function(c,o){return c===void 0?o:c},v.isIsoDate=function(c){return l.isoDate.test(c)},v.isNumber=function(c){return typeof c=="number"&&!isNaN(c)},v.isResolvable=function(c){return!!c&&(c[v.symbols.ref]||c[v.symbols.template])},v.isSchema=function(c,o={}){const r=c&&c[v.symbols.any];return!!r&&(i(o.legacy||r.version===v.version,"Cannot mix different versions of joi schemas"),!0)},v.isValues=function(c){return c[v.symbols.values]},v.limit=function(c){return Number.isSafeInteger(c)&&c>=0},v.preferences=function(c,o){g=g||h(6914),c=c||{},o=o||{};const r=Object.assign({},c,o);return o.errors&&c.errors&&(r.errors=Object.assign({},c.errors,o.errors),r.errors.wrap=Object.assign({},c.errors.wrap,o.errors.wrap)),o.messages&&(r.messages=g.compile(o.messages,c.messages)),delete r[v.symbols.prefs],r},v.tryWithPath=function(c,o,r={}){try{return c()}catch(f){throw f.path!==void 0?f.path=o+"."+f.path:f.path=o,r.append&&(f.message=`${f.message} (${f.path})`),f}},v.validateArg=function(c,o,{assert:r,message:f}){if(v.isSchema(r)){const a=r.validate(c);return a.error?a.error.message:void 0}if(!r(c))return o?`${o} ${f}`:f},v.verifyFlat=function(c,o){for(const r of c)i(!Array.isArray(r),"Method no longer accepts array arguments:",o)}},3292:(_,v,h)=>{const i=h(375),y=h(8160),b=h(6133),g={};v.schema=function(t,l,c={}){y.assertOptions(c,["appendPath","override"]);try{return g.schema(t,l,c)}catch(o){throw c.appendPath&&o.path!==void 0&&(o.message=`${o.message} (${o.path})`),o}},g.schema=function(t,l,c){i(l!==void 0,"Invalid undefined schema"),Array.isArray(l)&&(i(l.length,"Invalid empty array schema"),l.length===1&&(l=l[0]));const o=(r,...f)=>c.override!==!1?r.valid(t.override,...f):r.valid(...f);if(g.simple(l))return o(t,l);if(typeof l=="function")return t.custom(l);if(i(typeof l=="object","Invalid schema content:",typeof l),y.isResolvable(l))return o(t,l);if(y.isSchema(l))return l;if(Array.isArray(l)){for(const r of l)if(!g.simple(r))return t.alternatives().try(...l);return o(t,...l)}return l instanceof RegExp?t.string().regex(l):l instanceof Date?o(t.date(),l):(i(Object.getPrototypeOf(l)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(l))},v.ref=function(t,l){return b.isRef(t)?t:b.create(t,l)},v.compile=function(t,l,c={}){y.assertOptions(c,["legacy"]);const o=l&&l[y.symbols.any];if(o)return i(c.legacy||o.version===y.version,"Cannot mix different versions of joi schemas:",o.version,y.version),l;if(typeof l!="object"||!c.legacy)return v.schema(t,l,{appendPath:!0});const r=g.walk(l);return r?r.compile(r.root,l):v.schema(t,l,{appendPath:!0})},g.walk=function(t){if(typeof t!="object")return null;if(Array.isArray(t)){for(const c of t){const o=g.walk(c);if(o)return o}return null}const l=t[y.symbols.any];if(l)return{root:t[l.root],compile:l.compile};i(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const c in t){const o=g.walk(t[c]);if(o)return o}return null},g.simple=function(t){return t===null||["boolean","string","number"].includes(typeof t)},v.when=function(t,l,c){if(c===void 0&&(i(l&&typeof l=="object","Missing options"),c=l,l=b.create(".")),Array.isArray(c)&&(c={switch:c}),y.assertOptions(c,["is","not","then","otherwise","switch","break"]),y.isSchema(l))return i(c.is===void 0,'"is" can not be used with a schema condition'),i(c.not===void 0,'"not" can not be used with a schema condition'),i(c.switch===void 0,'"switch" can not be used with a schema condition'),g.condition(t,{is:l,then:c.then,otherwise:c.otherwise,break:c.break});if(i(b.isRef(l)||typeof l=="string","Invalid condition:",l),i(c.not===void 0||c.is===void 0,'Cannot combine "is" with "not"'),c.switch===void 0){let r=c;c.not!==void 0&&(r={is:c.not,then:c.otherwise,otherwise:c.then,break:c.break});let f=r.is!==void 0?t.$_compile(r.is):t.$_root.invalid(null,!1,0,"").required();return i(r.then!==void 0||r.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),i(r.break===void 0||r.then===void 0||r.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),c.is===void 0||b.isRef(c.is)||y.isSchema(c.is)||(f=f.required()),g.condition(t,{ref:v.ref(l),is:f,then:r.then,otherwise:r.otherwise,break:r.break})}i(Array.isArray(c.switch),'"switch" must be an array'),i(c.is===void 0,'Cannot combine "switch" with "is"'),i(c.not===void 0,'Cannot combine "switch" with "not"'),i(c.then===void 0,'Cannot combine "switch" with "then"');const o={ref:v.ref(l),switch:[],break:c.break};for(let r=0;r<c.switch.length;++r){const f=c.switch[r],a=r===c.switch.length-1;y.assertOptions(f,a?["is","then","otherwise"]:["is","then"]),i(f.is!==void 0,'Switch statement missing "is"'),i(f.then!==void 0,'Switch statement missing "then"');const d={is:t.$_compile(f.is),then:t.$_compile(f.then)};if(b.isRef(f.is)||y.isSchema(f.is)||(d.is=d.is.required()),a){i(c.otherwise===void 0||f.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const m=c.otherwise!==void 0?c.otherwise:f.otherwise;m!==void 0&&(i(o.break===void 0,"Cannot specify both otherwise and break"),d.otherwise=t.$_compile(m))}o.switch.push(d)}return o},g.condition=function(t,l){for(const c of["then","otherwise"])l[c]===void 0?delete l[c]:l[c]=t.$_compile(l[c]);return l}},6354:(_,v,h)=>{const i=h(5688),y=h(8160),b=h(3328);v.Report=class{constructor(g,t,l,c,o,r,f){if(this.code=g,this.flags=c,this.messages=o,this.path=r.path,this.prefs=f,this.state=r,this.value=t,this.message=null,this.template=null,this.local=l||{},this.local.label=v.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const a=this.path[this.path.length-1];typeof a!="object"&&(this.local.key=a)}}_setTemplate(g){if(this.template=g,!this.flags.label&&this.path.length===0){const t=this._template(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const g=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return t===void 0?`Error code "${g}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(g,t){return v.template(this.value,g,t||this.code,this.state,this.prefs)}},v.path=function(g){let t="";for(const l of g)typeof l!="object"&&(typeof l=="string"?(t&&(t+="."),t+=l):t+=`[${l}]`);return t},v.template=function(g,t,l,c,o){if(!t)return;if(b.isTemplate(t))return l!=="root"?t:null;let r=o.errors.language;if(y.isResolvable(r)&&(r=r.resolve(g,c,o)),r&&t[r]){if(t[r][l]!==void 0)return t[r][l];if(t[r]["*"]!==void 0)return t[r]["*"]}return t[l]?t[l]:t["*"]},v.label=function(g,t,l,c){if(!l.errors.label)return"";if(g.label)return g.label;let o=t.path;return l.errors.label==="key"&&t.path.length>1&&(o=t.path.slice(-1)),v.path(o)||v.template(null,l.messages,"root",t,l)||c&&v.template(null,c,"root",t,l)||"value"},v.process=function(g,t,l){if(!g)return null;const{override:c,message:o,details:r}=v.details(g);if(c)return c;if(l.errors.stack)return new v.ValidationError(o,r,t);const f=Error.stackTraceLimit;Error.stackTraceLimit=0;const a=new v.ValidationError(o,r,t);return Error.stackTraceLimit=f,a},v.details=function(g,t={}){let l=[];const c=[];for(const o of g){if(o instanceof Error){if(t.override!==!1)return{override:o};const f=o.toString();l.push(f),c.push({message:f,type:"override",context:{error:o}});continue}const r=o.toString();l.push(r),c.push({message:r,path:o.path.filter((f=>typeof f!="object")),type:o.code,context:o.local})}return l.length>1&&(l=[...new Set(l)]),{message:l.join(". "),details:c}},v.ValidationError=class extends Error{constructor(g,t,l){super(g),this._original=l,this.details=t}static isError(g){return g instanceof v.ValidationError}},v.ValidationError.prototype.isJoi=!0,v.ValidationError.prototype.name="ValidationError",v.ValidationError.prototype.annotate=i.error},8901:(_,v,h)=>{const i=h(375),y=h(8571),b=h(8160),g=h(6914),t={};v.type=function(l,c){const o=Object.getPrototypeOf(l),r=y(o),f=l._assign(Object.create(r)),a=Object.assign({},c);delete a.base,r._definition=a;const d=o._definition||{};a.messages=g.merge(d.messages,a.messages),a.properties=Object.assign({},d.properties,a.properties),f.type=a.type,a.flags=Object.assign({},d.flags,a.flags);const m=Object.assign({},d.terms);if(a.terms)for(const E in a.terms){const p=a.terms[E];i(f.$_terms[E]===void 0,"Invalid term override for",a.type,E),f.$_terms[E]=p.init,m[E]=p}a.terms=m,a.args||(a.args=d.args),a.prepare=t.prepare(a.prepare,d.prepare),a.coerce&&(typeof a.coerce=="function"&&(a.coerce={method:a.coerce}),a.coerce.from&&!Array.isArray(a.coerce.from)&&(a.coerce={method:a.coerce.method,from:[].concat(a.coerce.from)})),a.coerce=t.coerce(a.coerce,d.coerce),a.validate=t.validate(a.validate,d.validate);const x=Object.assign({},d.rules);if(a.rules)for(const E in a.rules){const p=a.rules[E];i(typeof p=="object","Invalid rule definition for",a.type,E);let w=p.method;if(w===void 0&&(w=function(){return this.$_addRule(E)}),w&&(i(!r[E],"Rule conflict in",a.type,E),r[E]=w),i(!x[E],"Rule conflict in",a.type,E),x[E]=p,p.alias){const T=[].concat(p.alias);for(const R of T)r[R]=p.method}p.args&&(p.argsByName=new Map,p.args=p.args.map((T=>(typeof T=="string"&&(T={name:T}),i(!p.argsByName.has(T.name),"Duplicated argument name",T.name),b.isSchema(T.assert)&&(T.assert=T.assert.strict().label(T.name)),p.argsByName.set(T.name,T),T))))}a.rules=x;const k=Object.assign({},d.modifiers);if(a.modifiers)for(const E in a.modifiers){i(!r[E],"Rule conflict in",a.type,E);const p=a.modifiers[E];i(typeof p=="function","Invalid modifier definition for",a.type,E);const w=function(T){return this.rule({[E]:T})};r[E]=w,k[E]=p}if(a.modifiers=k,a.overrides){r._super=o,f.$_super={};for(const E in a.overrides)i(o[E],"Cannot override missing",E),a.overrides[E][b.symbols.parent]=o[E],f.$_super[E]=o[E].bind(f);Object.assign(r,a.overrides)}a.cast=Object.assign({},d.cast,a.cast);const A=Object.assign({},d.manifest,a.manifest);return A.build=t.build(a.manifest&&a.manifest.build,d.manifest&&d.manifest.build),a.manifest=A,a.rebuild=t.rebuild(a.rebuild,d.rebuild),f},t.build=function(l,c){return l&&c?function(o,r){return c(l(o,r),r)}:l||c},t.coerce=function(l,c){return l&&c?{from:l.from&&c.from?[...new Set([...l.from,...c.from])]:null,method(o,r){let f;if((!c.from||c.from.includes(typeof o))&&(f=c.method(o,r),f)){if(f.errors||f.value===void 0)return f;o=f.value}if(!l.from||l.from.includes(typeof o)){const a=l.method(o,r);if(a)return a}return f}}:l||c},t.prepare=function(l,c){return l&&c?function(o,r){const f=l(o,r);if(f){if(f.errors||f.value===void 0)return f;o=f.value}return c(o,r)||f}:l||c},t.rebuild=function(l,c){return l&&c?function(o){c(o),l(o)}:l||c},t.validate=function(l,c){return l&&c?function(o,r){const f=c(o,r);if(f){if(f.errors&&(!Array.isArray(f.errors)||f.errors.length))return f;o=f.value}return l(o,r)||f}:l||c}},5107:(_,v,h)=>{const i=h(375),y=h(8571),b=h(8652),g=h(8160),t=h(3292),l=h(6354),c=h(8901),o=h(9708),r=h(6133),f=h(3328),a=h(1152);let d;const m={types:{alternatives:h(4946),any:h(8068),array:h(546),boolean:h(4937),date:h(7500),function:h(390),link:h(8785),number:h(3832),object:h(8966),string:h(7417),symbol:h(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const x={_types:new Set(Object.keys(m.types))};for(const k of x._types)x[k]=function(...A){return i(!A.length||["alternatives","link","object"].includes(k),"The",k,"type does not allow arguments"),m.generate(this,m.types[k],A)};for(const k of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])x[k]=function(...A){return this.any()[k](...A)};Object.assign(x,m.methods);for(const k in m.aliases){const A=m.aliases[k];x[k]=x[A]}return x.x=x.expression,a.setup&&a.setup(x),x}};m.methods={ValidationError:l.ValidationError,version:g.version,cache:b.provider,assert(x,k,...A){m.assert(x,k,!0,A)},attempt:(x,k,...A)=>m.assert(x,k,!1,A),build(x){return i(typeof o.build=="function","Manifest functionality disabled"),o.build(this,x)},checkPreferences(x){g.checkPreferences(x)},compile(x,k){return t.compile(this,x,k)},defaults(x){i(typeof x=="function","modifier must be a function");const k=Object.assign({},this);for(const A of k._types){const E=x(k[A]());i(g.isSchema(E),"modifier must return a valid schema object"),k[A]=function(...p){return m.generate(this,E,p)}}return k},expression:(...x)=>new f(...x),extend(...x){g.verifyFlat(x,"extend"),d=d||h(3378),i(x.length,"You need to provide at least one extension"),this.assert(x,d.extensions);const k=Object.assign({},this);k._types=new Set(k._types);for(let A of x){typeof A=="function"&&(A=A(k)),this.assert(A,d.extension);const E=m.expandExtension(A,k);for(const p of E){i(k[p.type]===void 0||k._types.has(p.type),"Cannot override name",p.type);const w=p.base||this.any(),T=c.type(w,p);k._types.add(p.type),k[p.type]=function(...R){return m.generate(this,T,R)}}}return k},isError:l.ValidationError.isError,isExpression:f.isTemplate,isRef:r.isRef,isSchema:g.isSchema,in:(...x)=>r.in(...x),override:g.symbols.override,ref:(...x)=>r.create(...x),types(){const x={};for(const k of this._types)x[k]=this[k]();for(const k in m.aliases)x[k]=this[k]();return x}},m.assert=function(x,k,A,E){const p=E[0]instanceof Error||typeof E[0]=="string"?E[0]:null,w=p!==null?E[1]:E[0],T=k.validate(x,g.preferences({errors:{stack:!0}},w||{}));let R=T.error;if(!R)return T.value;if(p instanceof Error)throw p;const N=A&&typeof R.annotate=="function"?R.annotate():R.message;throw R instanceof l.ValidationError==0&&(R=y(R)),R.message=p?`${p} ${N}`:N,R},m.generate=function(x,k,A){return i(x,"Must be invoked on a Joi instance."),k.$_root=x,k._definition.args&&A.length?k._definition.args(k,...A):k},m.expandExtension=function(x,k){if(typeof x.type=="string")return[x];const A=[];for(const E of k._types)if(x.type.test(E)){const p=Object.assign({},x);p.type=E,p.base=k[E](),A.push(p)}return A},_.exports=m.root()},6914:(_,v,h)=>{const i=h(375),y=h(8571),b=h(3328);v.compile=function(g,t){if(typeof g=="string")return i(!t,"Cannot set single message string"),new b(g);if(b.isTemplate(g))return i(!t,"Cannot set single message template"),g;i(typeof g=="object"&&!Array.isArray(g),"Invalid message options"),t=t?y(t):{};for(let l in g){const c=g[l];if(l==="root"||b.isTemplate(c)){t[l]=c;continue}if(typeof c=="string"){t[l]=new b(c);continue}i(typeof c=="object"&&!Array.isArray(c),"Invalid message for",l);const o=l;for(l in t[o]=t[o]||{},c){const r=c[l];l==="root"||b.isTemplate(r)?t[o][l]=r:(i(typeof r=="string","Invalid message for",l,"in",o),t[o][l]=new b(r))}}return t},v.decompile=function(g){const t={};for(let l in g){const c=g[l];if(l==="root"){t.root=c;continue}if(b.isTemplate(c)){t[l]=c.describe({compact:!0});continue}const o=l;for(l in t[o]={},c){const r=c[l];l!=="root"?t[o][l]=r.describe({compact:!0}):t[o].root=r}}return t},v.merge=function(g,t){if(!g)return v.compile(t);if(!t)return g;if(typeof t=="string")return new b(t);if(b.isTemplate(t))return t;const l=y(g);for(let c in t){const o=t[c];if(c==="root"||b.isTemplate(o)){l[c]=o;continue}if(typeof o=="string"){l[c]=new b(o);continue}i(typeof o=="object"&&!Array.isArray(o),"Invalid message for",c);const r=c;for(c in l[r]=l[r]||{},o){const f=o[c];c==="root"||b.isTemplate(f)?l[r][c]=f:(i(typeof f=="string","Invalid message for",c,"in",r),l[r][c]=new b(f))}}return l}},2294:(_,v,h)=>{const i=h(375),y=h(8160),b=h(6133),g={};v.Ids=g.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const t=new g.Ids;return t._byId=new Map(this._byId),t._byKey=new Map(this._byKey),t._schemaChain=this._schemaChain,t}concat(t){t._schemaChain&&(this._schemaChain=!0);for(const[l,c]of t._byId.entries())i(!this._byKey.has(l),"Schema id conflicts with existing key:",l),this._byId.set(l,c);for(const[l,c]of t._byKey.entries())i(!this._byId.has(l),"Schema key conflicts with existing id:",l),this._byKey.set(l,c)}fork(t,l,c){const o=this._collect(t);o.push({schema:c});const r=o.shift();let f={id:r.id,schema:l(r.schema)};i(y.isSchema(f.schema),"adjuster function failed to return a joi schema type");for(const a of o)f={id:a.id,schema:g.fork(a.schema,f.id,f.schema)};return f.schema}labels(t,l=[]){const c=t[0],o=this._get(c);if(!o)return[...l,...t].join(".");const r=t.slice(1);return l=[...l,o.schema._flags.label||c],r.length?o.schema._ids.labels(r,l):l.join(".")}reach(t,l=[]){const c=t[0],o=this._get(c);i(o,"Schema does not contain path",[...l,...t].join("."));const r=t.slice(1);return r.length?o.schema._ids.reach(r,[...l,c]):o.schema}register(t,{key:l}={}){if(!t||!y.isSchema(t))return;(t.$_property("schemaChain")||t._ids._schemaChain)&&(this._schemaChain=!0);const c=t._flags.id;if(c){const o=this._byId.get(c);i(!o||o.schema===t,"Cannot add different schemas with the same id:",c),i(!this._byKey.has(c),"Schema id conflicts with existing key:",c),this._byId.set(c,{schema:t,id:c})}l&&(i(!this._byKey.has(l),"Schema already contains key:",l),i(!this._byId.has(l),"Schema key conflicts with existing id:",l),this._byKey.set(l,{schema:t,id:l}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(t,l=[],c=[]){const o=t[0],r=this._get(o);i(r,"Schema does not contain path",[...l,...t].join(".")),c=[r,...c];const f=t.slice(1);return f.length?r.schema._ids._collect(f,[...l,o],c):c}_get(t){return this._byId.get(t)||this._byKey.get(t)}},g.fork=function(t,l,c){const o=v.schema(t,{each:(r,{key:f})=>{if(l===(r._flags.id||f))return c},ref:!1});return o?o.$_mutateRebuild():t},v.schema=function(t,l){let c;for(const o in t._flags){if(o[0]==="_")continue;const r=g.scan(t._flags[o],{source:"flags",name:o},l);r!==void 0&&(c=c||t.clone(),c._flags[o]=r)}for(let o=0;o<t._rules.length;++o){const r=t._rules[o],f=g.scan(r.args,{source:"rules",name:r.name},l);if(f!==void 0){c=c||t.clone();const a=Object.assign({},r);a.args=f,c._rules[o]=a,c._singleRules.get(r.name)===r&&c._singleRules.set(r.name,a)}}for(const o in t.$_terms){if(o[0]==="_")continue;const r=g.scan(t.$_terms[o],{source:"terms",name:o},l);r!==void 0&&(c=c||t.clone(),c.$_terms[o]=r)}return c},g.scan=function(t,l,c,o,r){const f=o||[];if(t===null||typeof t!="object")return;let a;if(Array.isArray(t)){for(let d=0;d<t.length;++d){const m=l.source==="terms"&&l.name==="keys"&&t[d].key,x=g.scan(t[d],l,c,[d,...f],m);x!==void 0&&(a=a||t.slice(),a[d]=x)}return a}if(c.schema!==!1&&y.isSchema(t)||c.ref!==!1&&b.isRef(t)){const d=c.each(t,{...l,path:f,key:r});return d===t?void 0:d}for(const d in t){if(d[0]==="_")continue;const m=g.scan(t[d],l,c,[d,...f],r);m!==void 0&&(a=a||Object.assign({},t),a[d]=m)}return a}},6133:(_,v,h)=>{const i=h(375),y=h(8571),b=h(9621),g=h(8160);let t;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};v.create=function(c,o={}){i(typeof c=="string","Invalid reference key:",c),g.assertOptions(o,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),i(!o.prefix||typeof o.prefix=="object","options.prefix must be of type object");const r=Object.assign({},l.defaults,o);delete r.prefix;const f=r.separator,a=l.context(c,f,o.prefix);if(r.type=a.type,c=a.key,r.type==="value")if(a.root&&(i(!f||c[0]!==f,"Cannot specify relative path with root prefix"),r.ancestor="root",c||(c=null)),f&&f===c)c=null,r.ancestor=0;else if(r.ancestor!==void 0)i(!f||!c||c[0]!==f,"Cannot combine prefix with ancestor option");else{const[d,m]=l.ancestor(c,f);m&&(c=c.slice(m))===""&&(c=null),r.ancestor=d}return r.path=f?c===null?[]:c.split(f):[c],new l.Ref(r)},v.in=function(c,o={}){return v.create(c,{...o,in:!0})},v.isRef=function(c){return!!c&&!!c[g.symbols.ref]},l.Ref=class{constructor(c){i(typeof c=="object","Invalid reference construction"),g.assertOptions(c,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),i([!1,void 0].includes(c.separator)||typeof c.separator=="string"&&c.separator.length===1,"Invalid separator"),i(!c.adjust||typeof c.adjust=="function","options.adjust must be a function"),i(!c.map||Array.isArray(c.map),"options.map must be an array"),i(!c.map||!c.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,c),i(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(c,o,r,f,a={}){return i(!this.in||a.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(r.context,o,a):this.type==="local"?this._resolve(f,o,a):this.ancestor?this.ancestor==="root"?this._resolve(o.ancestors[o.ancestors.length-1],o,a):(i(this.ancestor<=o.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(o.ancestors[this.ancestor-1],o,a)):this._resolve(c,o,a)}_resolve(c,o,r){let f;if(this.type==="value"&&o.mainstay.shadow&&r.shadow!==!1&&(f=o.mainstay.shadow.get(this.absolute(o))),f===void 0&&(f=b(c,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(f=this.adjust(f)),this.map){const a=this.map.get(f);a!==void 0&&(f=a)}return o.mainstay&&o.mainstay.tracer.resolve(o,this,f),f}toString(){return this.display}absolute(c){return[...c.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const c={path:this.path};this.type!=="value"&&(c.type=this.type),this.separator!=="."&&(c.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(c.ancestor=this.ancestor),this.map&&(c.map=[...this.map]);for(const o of["adjust","iterables","render"])this[o]!==null&&this[o]!==void 0&&(c[o]=this[o]);return this.in!==!1&&(c.in=!0),{ref:c}}updateDisplay(){const c=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${c}`);if(!this.separator)return void(this.display=`ref:${c}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${c}`);if(this.ancestor==="root")return void(this.display=`ref:root:${c}`);if(this.ancestor===1)return void(this.display=`ref:${c||".."}`);const o=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${o}${c||""}`}},l.Ref.prototype[g.symbols.ref]=!0,v.build=function(c){return(c=Object.assign({},l.defaults,c)).type==="value"&&c.ancestor===void 0&&(c.ancestor=1),new l.Ref(c)},l.context=function(c,o,r={}){if(c=c.trim(),r){const f=r.global===void 0?"$":r.global;if(f!==o&&c.startsWith(f))return{key:c.slice(f.length),type:"global"};const a=r.local===void 0?"#":r.local;if(a!==o&&c.startsWith(a))return{key:c.slice(a.length),type:"local"};const d=r.root===void 0?"/":r.root;if(d!==o&&c.startsWith(d))return{key:c.slice(d.length),type:"value",root:!0}}return{key:c,type:"value"}},l.ancestor=function(c,o){if(!o)return[1,0];if(c[0]!==o)return[1,0];if(c[1]!==o)return[0,1];let r=2;for(;c[r]===o;)++r;return[r-1,r]},v.toSibling=0,v.toParent=1,v.Manager=class{constructor(){this.refs=[]}register(c,o){if(c)if(o=o===void 0?v.toParent:o,Array.isArray(c))for(const r of c)this.register(r,o);else if(g.isSchema(c))for(const r of c._refs.refs)r.ancestor-o>=0&&this.refs.push({ancestor:r.ancestor-o,root:r.root});else v.isRef(c)&&c.type==="value"&&c.ancestor-o>=0&&this.refs.push({ancestor:c.ancestor-o,root:c.root}),t=t||h(3328),t.isTemplate(c)&&this.register(c.refs(),o)}get length(){return this.refs.length}clone(){const c=new v.Manager;return c.refs=y(this.refs),c}reset(){this.refs=[]}roots(){return this.refs.filter((c=>!c.ancestor)).map((c=>c.root))}}},3378:(_,v,h)=>{const i=h(5107),y={};y.wrap=i.string().min(1).max(2).allow(!1),v.preferences=i.object({allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),context:i.object(),convert:i.boolean(),dateFormat:i.valid("date","iso","string","time","utc"),debug:i.boolean(),errors:{escapeHtml:i.boolean(),label:i.valid("path","key",!1),language:[i.string(),i.object().ref()],render:i.boolean(),stack:i.boolean(),wrap:{label:y.wrap,array:y.wrap,string:y.wrap}},externals:i.boolean(),messages:i.object(),noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:i.valid("required","optional","forbidden"),skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()}).strict(),y.nameRx=/^[a-zA-Z0-9]\w*$/,y.rule=i.object({alias:i.array().items(i.string().pattern(y.nameRx)).single(),args:i.array().items(i.string(),i.object({name:i.string().pattern(y.nameRx).required(),ref:i.boolean(),assert:i.alternatives([i.function(),i.object().schema()]).conditional("ref",{is:!0,then:i.required()}),normalize:i.function(),message:i.string().when("assert",{is:i.function(),then:i.required()})})),convert:i.boolean(),manifest:i.boolean(),method:i.function().allow(!1),multi:i.boolean(),validate:i.function()}),v.extension=i.object({type:i.alternatives([i.string(),i.object().regex()]).required(),args:i.function(),cast:i.object().pattern(y.nameRx,i.object({from:i.function().maxArity(1).required(),to:i.function().minArity(1).maxArity(2).required()})),base:i.object().schema().when("type",{is:i.object().regex(),then:i.forbidden()}),coerce:[i.function().maxArity(3),i.object({method:i.function().maxArity(3).required(),from:i.array().items(i.string()).single()})],flags:i.object().pattern(y.nameRx,i.object({setter:i.string(),default:i.any()})),manifest:{build:i.function().arity(2)},messages:[i.object(),i.string()],modifiers:i.object().pattern(y.nameRx,i.function().minArity(1).maxArity(2)),overrides:i.object().pattern(y.nameRx,i.function()),prepare:i.function().maxArity(3),rebuild:i.function().arity(1),rules:i.object().pattern(y.nameRx,y.rule),terms:i.object().pattern(y.nameRx,i.object({init:i.array().allow(null).required(),manifest:i.object().pattern(/.+/,[i.valid("schema","single"),i.object({mapped:i.object({from:i.string().required(),to:i.string().required()}).required()})])})),validate:i.function().maxArity(3)}).strict(),v.extensions=i.array().items(i.object(),i.function().arity(1)).strict(),y.desc={buffer:i.object({buffer:i.string()}),func:i.object({function:i.function().required(),options:{literal:!0}}),override:i.object({override:!0}),ref:i.object({ref:i.object({type:i.valid("value","global","local"),path:i.array().required(),separator:i.string().length(1).allow(!1),ancestor:i.number().min(0).integer().allow("root"),map:i.array().items(i.array().length(2)).min(1),adjust:i.function(),iterables:i.boolean(),in:i.boolean(),render:i.boolean()}).required()}),regex:i.object({regex:i.string().min(3)}),special:i.object({special:i.valid("deep").required()}),template:i.object({template:i.string().required(),options:i.object()}),value:i.object({value:i.alternatives([i.object(),i.array()]).required()})},y.desc.entity=i.alternatives([i.array().items(i.link("...")),i.boolean(),i.function(),i.number(),i.string(),y.desc.buffer,y.desc.func,y.desc.ref,y.desc.regex,y.desc.special,y.desc.template,y.desc.value,i.link("/")]),y.desc.values=i.array().items(null,i.boolean(),i.function(),i.number().allow(1/0,-1/0),i.string().allow(""),i.symbol(),y.desc.buffer,y.desc.func,y.desc.override,y.desc.ref,y.desc.regex,y.desc.template,y.desc.value),y.desc.messages=i.object().pattern(/.+/,[i.string(),y.desc.template,i.object().pattern(/.+/,[i.string(),y.desc.template])]),v.description=i.object({type:i.string().required(),flags:i.object({cast:i.string(),default:i.any(),description:i.string(),empty:i.link("/"),failover:y.desc.entity,id:i.string(),label:i.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:i.boolean(),unit:i.string()}).unknown(),preferences:{allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),convert:i.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:i.boolean(),label:["path","key"],language:[i.string(),y.desc.ref],wrap:{label:y.wrap,array:y.wrap}},externals:i.boolean(),messages:y.desc.messages,noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:["required","optional","forbidden"],skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()},allow:y.desc.values,invalid:y.desc.values,rules:i.array().min(1).items({name:i.string().required(),args:i.object().min(1),keep:i.boolean(),message:[i.string(),y.desc.messages],warn:i.boolean()}),keys:i.object().pattern(/.*/,i.link("/")),link:y.desc.ref}).pattern(/^[a-z]\w*$/,i.any())},493:(_,v,h)=>{const i=h(8571),y=h(9621),b=h(8160),g={value:Symbol("value")};_.exports=g.State=class{constructor(t,l,c){this.path=t,this.ancestors=l,this.mainstay=c.mainstay,this.schemas=c.schemas,this.debug=null}localize(t,l=null,c=null){const o=new g.State(t,l,this);return c&&o.schemas&&(o.schemas=[g.schemas(c),...o.schemas]),o}nest(t,l){const c=new g.State(this.path,this.ancestors,this);return c.schemas=c.schemas&&[g.schemas(t),...c.schemas],c.debug=l,c}shadow(t,l){this.mainstay.shadow=this.mainstay.shadow||new g.Shadow,this.mainstay.shadow.set(this.path,t,l)}snapshot(){this.mainstay.shadow&&(this._snapshot=i(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},g.schemas=function(t){return b.isSchema(t)?{schema:t}:t},g.Shadow=class{constructor(){this._values=null}set(t,l,c){if(!t.length||c==="strip"&&typeof t[t.length-1]=="number")return;this._values=this._values||new Map;let o=this._values;for(let r=0;r<t.length;++r){const f=t[r];let a=o.get(f);a||(a=new Map,o.set(f,a)),o=a}o[g.value]=l}get(t){const l=this.node(t);if(l)return l[g.value]}node(t){if(this._values)return y(this._values,t,{iterables:!0})}override(t,l){if(!this._values)return;const c=t.slice(0,-1),o=t[t.length-1],r=y(this._values,c,{iterables:!0});l?r.set(o,l):r&&r.delete(o)}}},3328:(_,v,h)=>{const i=h(375),y=h(8571),b=h(5277),g=h(1447),t=h(8160),l=h(6354),c=h(6133),o={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};_.exports=o.Template=class{constructor(r,f){if(i(typeof r=="string","Template source must be a string"),i(!r.includes("\0")&&!r.includes(""),"Template source cannot contain reserved control characters"),this.source=r,this.rendered=r,this._template=null,f){const{functions:a,...d}=f;this._settings=Object.keys(d).length?y(d):void 0,this._functions=a,this._functions&&(i(Object.keys(this._functions).every((m=>typeof m=="string")),"Functions keys must be strings"),i(Object.values(this._functions).every((m=>typeof m=="function")),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const r=o.encode(this.source),f=o.split(r);let a=!1;const d=[],m=f.shift();m&&d.push(m);for(const x of f){const k=x[0]!=="{",A=k?"}":"}}",E=x.indexOf(A);if(E===-1||x[1]==="{"){d.push(`{${o.decode(x)}`);continue}let p=x.slice(k?0:1,E);const w=p[0]===":";w&&(p=p.slice(1));const T=this._ref(o.decode(p),{raw:k,wrapped:w});d.push(T),typeof T!="string"&&(a=!0);const R=x.slice(E+A.length);R&&d.push(o.decode(R))}a?this._template=d:this.rendered=d.join("")}static date(r,f){return o.dateFormat[f.dateFormat].call(r)}describe(r={}){if(!this._settings&&r.compact)return this.source;const f={template:this.source};return this._settings&&(f.options=this._settings),this._functions&&(f.functions=this._functions),f}static build(r){return new o.Template(r.template,r.options||r.functions?{...r.options,functions:r.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(r){return!!r&&!!r[t.symbols.template]}refs(){if(!this._template)return;const r=[];for(const f of this._template)typeof f!="string"&&r.push(...f.refs);return r}resolve(r,f,a,d){return this._template&&this._template.length===1?this._part(this._template[0],r,f,a,d,{}):this.render(r,f,a,d)}_part(r,...f){return r.ref?r.ref.resolve(...f):r.formula.evaluate(f)}render(r,f,a,d,m={}){if(!this.isDynamic())return this.rendered;const x=[];for(const k of this._template)if(typeof k=="string")x.push(k);else{const A=this._part(k,r,f,a,d,m),E=o.stringify(A,r,f,a,d,m);if(E!==void 0){const p=k.raw||(m.errors&&m.errors.escapeHtml)===!1?E:b(E);x.push(o.wrap(p,k.wrapped&&a.errors.wrap.label))}}return x.join("")}_ref(r,{raw:f,wrapped:a}){const d=[],m=k=>{const A=c.create(k,this._settings);return d.push(A),E=>{const p=A.resolve(...E);return p!==void 0?p:null}};try{const k=this._functions?{...o.functions,...this._functions}:o.functions;var x=new g.Parser(r,{reference:m,functions:k,constants:o.constants})}catch(k){throw k.message=`Invalid template variable "${r}" fails due to: ${k.message}`,k}if(x.single){if(x.single.type==="reference"){const k=d[0];return{ref:k,raw:f,refs:d,wrapped:a||k.type==="local"&&k.key==="label"}}return o.stringify(x.single.value)}return{formula:x,raw:f,refs:d}}toString(){return this.source}},o.Template.prototype[t.symbols.template]=!0,o.Template.prototype.isImmutable=!0,o.encode=function(r){return r.replace(/\\(\{+)/g,((f,a)=>o.opens.slice(0,a.length))).replace(/\\(\}+)/g,((f,a)=>o.closes.slice(0,a.length)))},o.decode=function(r){return r.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},o.split=function(r){const f=[];let a="";for(let d=0;d<r.length;++d){const m=r[d];if(m==="{"){let x="";for(;d+1<r.length&&r[d+1]==="{";)x+="{",++d;f.push(a),a=x}else a+=m}return f.push(a),f},o.wrap=function(r,f){return f?f.length===1?`${f}${r}${f}`:`${f[0]}${r}${f[1]}`:r},o.stringify=function(r,f,a,d,m,x={}){const k=typeof r,A=d&&d.errors&&d.errors.wrap||{};let E=!1;if(c.isRef(r)&&r.render&&(E=r.in,r=r.resolve(f,a,d,m,{in:r.in,...x})),r===null)return"null";if(k==="string")return o.wrap(r,x.arrayItems&&A.string);if(k==="number"||k==="function"||k==="symbol")return r.toString();if(k!=="object")return JSON.stringify(r);if(r instanceof Date)return o.Template.date(r,d);if(r instanceof Map){const w=[];for(const[T,R]of r.entries())w.push(`${T.toString()} -> ${R.toString()}`);r=w}if(!Array.isArray(r))return r.toString();const p=[];for(const w of r)p.push(o.stringify(w,f,a,d,m,{arrayItems:!0,...x}));return o.wrap(p.join(", "),!E&&A.array)},o.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},o.functions={if:(r,f,a)=>r?f:a,length:r=>typeof r=="string"?r.length:r&&typeof r=="object"?Array.isArray(r)?r.length:Object.keys(r).length:null,msg(r){const[f,a,d,m,x]=this,k=x.messages;if(!k)return"";const A=l.template(f,k[0],r,a,d)||l.template(f,k[1],r,a,d);return A?A.render(f,a,d,m,x):""},number:r=>typeof r=="number"?r:typeof r=="string"?parseFloat(r):typeof r=="boolean"?r?1:0:r instanceof Date?r.getTime():null}},4946:(_,v,h)=>{const i=h(375),y=h(1687),b=h(8068),g=h(8160),t=h(3292),l=h(6354),c=h(6133),o={};_.exports=b.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args:(r,...f)=>f.length===1&&Array.isArray(f[0])?r.try(...f[0]):r.try(...f),validate(r,f){const{schema:a,error:d,state:m,prefs:x}=f;if(a._flags.match){const A=[],E=[];for(let w=0;w<a.$_terms.matches.length;++w){const T=a.$_terms.matches[w],R=m.nest(T.schema,`match.${w}`);R.snapshot();const N=T.schema.$_validate(r,R,x);N.errors?(E.push(N.errors),R.restore()):(A.push(N.value),R.commit())}if(A.length===0)return{errors:d("alternatives.any",{details:E.map((w=>l.details(w,{override:!1})))})};if(a._flags.match==="one")return A.length===1?{value:A[0]}:{errors:d("alternatives.one")};if(A.length!==a.$_terms.matches.length)return{errors:d("alternatives.all",{details:E.map((w=>l.details(w,{override:!1})))})};const p=w=>w.$_terms.matches.some((T=>T.schema.type==="object"||T.schema.type==="alternatives"&&p(T.schema)));return p(a)?{value:A.reduce(((w,T)=>y(w,T,{mergeArrays:!1})))}:{value:A[A.length-1]}}const k=[];for(let A=0;A<a.$_terms.matches.length;++A){const E=a.$_terms.matches[A];if(E.schema){const T=m.nest(E.schema,`match.${A}`);T.snapshot();const R=E.schema.$_validate(r,T,x);if(!R.errors)return T.commit(),R;T.restore(),k.push({schema:E.schema,reports:R.errors});continue}const p=E.ref?E.ref.resolve(r,m,x):r,w=E.is?[E]:E.switch;for(let T=0;T<w.length;++T){const R=w[T],{is:N,then:C,otherwise:$}=R,M=`match.${A}${E.switch?"."+T:""}`;if(N.$_match(p,m.nest(N,`${M}.is`),x)){if(C)return C.$_validate(r,m.nest(C,`${M}.then`),x)}else if($)return $.$_validate(r,m.nest($,`${M}.otherwise`),x)}}return o.errors(k,f)},rules:{conditional:{method(r,f){i(!this._flags._endedSwitch,"Unreachable condition"),i(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),i(f.break===void 0,"Cannot use break option with alternatives conditional");const a=this.clone(),d=t.when(a,r,f),m=d.is?[d]:d.switch;for(const x of m)if(x.then&&x.otherwise){a.$_setFlag("_endedSwitch",!0,{clone:!1});break}return a.$_terms.matches.push(d),a.$_mutateRebuild()}},match:{method(r){if(i(["any","one","all"].includes(r),"Invalid alternatives match mode",r),r!=="any")for(const f of this.$_terms.matches)i(f.schema,"Cannot combine match mode",r,"with conditional rules");return this.$_setFlag("match",r)}},try:{method(...r){i(r.length,"Missing alternative schemas"),g.verifyFlat(r,"try"),i(!this._flags._endedSwitch,"Unreachable condition");const f=this.clone();for(const a of r)f.$_terms.matches.push({schema:f.$_compile(a)});return f.$_mutateRebuild()}}},overrides:{label(r){return this.$_parent("label",r).$_modify({each:(f,a)=>a.path[0]!=="is"&&typeof f._flags.label!="string"?f.label(r):void 0,ref:!1})}},rebuild(r){r.$_modify({each:f=>{g.isSchema(f)&&f.type==="array"&&r.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(r,f){if(f.matches)for(const a of f.matches){const{schema:d,ref:m,is:x,not:k,then:A,otherwise:E}=a;r=d?r.try(d):m?r.conditional(m,{is:x,then:A,not:k,otherwise:E,switch:a.switch}):r.conditional(x,{then:A,otherwise:E})}return r}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),o.errors=function(r,{error:f,state:a}){if(!r.length)return{errors:f("alternatives.any")};if(r.length===1)return{errors:r[0].reports};const d=new Set,m=[];for(const{reports:x,schema:k}of r){if(x.length>1)return o.unmatched(r,f);const A=x[0];if(A instanceof l.Report==0)return o.unmatched(r,f);if(A.state.path.length!==a.path.length){m.push({type:k.type,report:A});continue}if(A.code==="any.only"){for(const w of A.local.valids)d.add(w);continue}const[E,p]=A.code.split(".");p!=="base"?m.push({type:k.type,report:A}):A.code==="object.base"?d.add(A.local.type):d.add(E)}return m.length?m.length===1?{errors:m[0].report}:o.unmatched(r,f):{errors:f("alternatives.types",{types:[...d]})}},o.unmatched=function(r,f){const a=[];for(const d of r)a.push(...d.reports);return{errors:f("alternatives.match",l.details(a,{override:!1}))}}},8068:(_,v,h)=>{const i=h(375),y=h(7629),b=h(8160),g=h(6914);_.exports=y.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,l){return i(typeof t=="function","Method must be a function"),i(l===void 0||l&&typeof l=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:l}})},validate(t,l,{method:c}){try{return c(t,l)}catch(o){return l.error("any.custom",{error:o})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){i(b.isSchema(t)&&t._flags.id,"Schema must be a schema with an id");const l=this.clone();return l.$_terms.shared=l.$_terms.shared||[],l.$_terms.shared.push(t),l.$_mutateRegister(t),l}},warning:{method(t,l){return i(t&&typeof t=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:l},warn:!0})},validate:(t,l,{code:c,local:o})=>l.error(c,o),args:["code","local"],multi:!0}},modifiers:{keep(t,l=!0){t.keep=l},message(t,l){t.message=g.compile(l)},warn(t,l=!0){t.warn=l}},manifest:{build(t,l){for(const c in l){const o=l[c];if(["examples","externals","metas","notes","tags"].includes(c))for(const r of o)t=t[c.slice(0,-1)](r);else if(c!=="alterations")if(c!=="whens"){if(c==="shared")for(const r of o)t=t.shared(r)}else for(const r of o){const{ref:f,is:a,not:d,then:m,otherwise:x,concat:k}=r;t=k?t.concat(k):f?t.when(f,{is:a,not:d,then:m,otherwise:x,switch:r.switch,break:r.break}):t.when(a,{then:m,otherwise:x,break:r.break})}else{const r={};for(const{target:f,adjuster:a}of o)r[f]=a;t=t.alter(r)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(_,v,h)=>{const i=h(375),y=h(9474),b=h(9621),g=h(8068),t=h(8160),l=h(3292),c={};_.exports=g.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(o,{schema:r,state:f,prefs:a}){if(!Array.isArray(o))return;const d=r.$_getRule("sort");return d?c.sort(r,o,d.args.options,f,a):void 0}},validate(o,{schema:r,error:f}){if(!Array.isArray(o)){if(r._flags.single){const a=[o];return a[t.symbols.arraySingle]=!0,{value:a}}return{errors:f("array.base")}}if(r.$_getRule("items")||r.$_terms.externals)return{value:o.slice()}},rules:{has:{method(o){o=this.$_compile(o,{appendPath:!0});const r=this.$_addRule({name:"has",args:{schema:o}});return r.$_mutateRegister(o),r},validate(o,{state:r,prefs:f,error:a},{schema:d}){const m=[o,...r.ancestors];for(let k=0;k<o.length;++k){const A=r.localize([...r.path,k],m,d);if(d.$_match(o[k],A,f))return o}const x=d._flags.label;return x?a("array.hasKnown",{patternLabel:x}):a("array.hasUnknown",null)},multi:!0},items:{method(...o){t.verifyFlat(o,"items");const r=this.$_addRule("items");for(let f=0;f<o.length;++f){const a=t.tryWithPath((()=>this.$_compile(o[f])),f,{append:!0});r.$_terms.items.push(a)}return r.$_mutateRebuild()},validate(o,{schema:r,error:f,state:a,prefs:d,errorsArray:m}){const x=r.$_terms._requireds.slice(),k=r.$_terms.ordered.slice(),A=[...r.$_terms._inclusions,...x],E=!o[t.symbols.arraySingle];delete o[t.symbols.arraySingle];const p=m();let w=o.length;for(let T=0;T<w;++T){const R=o[T];let N=!1,C=!1;const $=E?T:new Number(T),M=[...a.path,$];if(!r._flags.sparse&&R===void 0){if(p.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),d.abortEarly)return p;k.shift();continue}const P=[o,...a.ancestors];for(const W of r.$_terms._exclusions)if(W.$_match(R,a.localize(M,P,W),d,{presence:"ignore"})){if(p.push(f("array.excludes",{pos:T,value:R},a.localize(M))),d.abortEarly)return p;N=!0,k.shift();break}if(N)continue;if(r.$_terms.ordered.length){if(k.length){const W=k.shift(),D=W.$_validate(R,a.localize(M,P,W),d);if(D.errors){if(p.push(...D.errors),d.abortEarly)return p}else if(W._flags.result==="strip")c.fastSplice(o,T),--T,--w;else{if(!r._flags.sparse&&D.value===void 0){if(p.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),d.abortEarly)return p;continue}o[T]=D.value}continue}if(!r.$_terms.items.length){if(p.push(f("array.orderedLength",{pos:T,limit:r.$_terms.ordered.length})),d.abortEarly)return p;break}}const z=[];let K=x.length;for(let W=0;W<K;++W){const D=a.localize(M,P,x[W]);D.snapshot();const J=x[W].$_validate(R,D,d);if(z[W]=J,!J.errors){if(D.commit(),o[T]=J.value,C=!0,c.fastSplice(x,W),--W,--K,!r._flags.sparse&&J.value===void 0&&(p.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),d.abortEarly))return p;break}D.restore()}if(C)continue;const ee=d.stripUnknown&&!!d.stripUnknown.arrays||!1;K=A.length;for(const W of A){let D;const J=x.indexOf(W);if(J!==-1)D=z[J];else{const B=a.localize(M,P,W);if(B.snapshot(),D=W.$_validate(R,B,d),!D.errors){B.commit(),W._flags.result==="strip"?(c.fastSplice(o,T),--T,--w):r._flags.sparse||D.value!==void 0?o[T]=D.value:(p.push(f("array.sparse",{key:$,path:M,pos:T,value:void 0},a.localize(M))),N=!0),C=!0;break}B.restore()}if(K===1){if(ee){c.fastSplice(o,T),--T,--w,C=!0;break}if(p.push(...D.errors),d.abortEarly)return p;N=!0;break}}if(!N&&(r.$_terms._inclusions.length||r.$_terms._requireds.length)&&!C){if(ee){c.fastSplice(o,T),--T,--w;continue}if(p.push(f("array.includes",{pos:T,value:R},a.localize(M))),d.abortEarly)return p}}return x.length&&c.fillMissedErrors(r,p,x,o,a,d),k.length&&(c.fillOrderedErrors(r,p,k,o,a,d),p.length||c.fillDefault(k,o,a,d)),p.length?p:o},priority:!0,manifest:!1},length:{method(o){return this.$_addRule({name:"length",args:{limit:o},operator:"="})},validate:(o,r,{limit:f},{name:a,operator:d,args:m})=>t.compare(o.length,f,d)?o:r.error("array."+a,{limit:m.limit,value:o}),args:[{name:"limit",ref:!0,assert:t.limit,message:"must be a positive integer"}]},max:{method(o){return this.$_addRule({name:"max",method:"length",args:{limit:o},operator:"<="})}},min:{method(o){return this.$_addRule({name:"min",method:"length",args:{limit:o},operator:">="})}},ordered:{method(...o){t.verifyFlat(o,"ordered");const r=this.$_addRule("items");for(let f=0;f<o.length;++f){const a=t.tryWithPath((()=>this.$_compile(o[f])),f,{append:!0});c.validateSingle(a,r),r.$_mutateRegister(a),r.$_terms.ordered.push(a)}return r.$_mutateRebuild()}},single:{method(o){const r=o===void 0||!!o;return i(!r||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",r)}},sort:{method(o={}){t.assertOptions(o,["by","order"]);const r={order:o.order||"ascending"};return o.by&&(r.by=l.ref(o.by,{ancestor:0}),i(!r.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:r}})},validate(o,{error:r,state:f,prefs:a,schema:d},{options:m}){const{value:x,errors:k}=c.sort(d,o,m,f,a);if(k)return k;for(let A=0;A<o.length;++A)if(o[A]!==x[A])return r("array.sort",{order:m.order,by:m.by?m.by.key:"value"});return o},convert:!0},sparse:{method(o){const r=o===void 0||!!o;return this._flags.sparse===r?this:(r?this.clone():this.$_addRule("items")).$_setFlag("sparse",r,{clone:!1})}},unique:{method(o,r={}){i(!o||typeof o=="function"||typeof o=="string","comparator must be a function or a string"),t.assertOptions(r,["ignoreUndefined","separator"]);const f={name:"unique",args:{options:r,comparator:o}};if(o)if(typeof o=="string"){const a=t.default(r.separator,".");f.path=a?o.split(a):[o]}else f.comparator=o;return this.$_addRule(f)},validate(o,{state:r,error:f,schema:a},{comparator:d,options:m},{comparator:x,path:k}){const A={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},E=x||y,p=m.ignoreUndefined;for(let w=0;w<o.length;++w){const T=k?b(o[w],k):o[w],R=x?A.custom:A[typeof T];if(i(R,"Failed to find unique map container for type",typeof T),R instanceof Map){const N=R.entries();let C;for(;!(C=N.next()).done;)if(E(C.value[0],T)){const $=r.localize([...r.path,w],[o,...r.ancestors]),M={pos:w,value:o[w],dupePos:C.value[1],dupeValue:o[C.value[1]]};return k&&(M.path=d),f("array.unique",M,$)}R.set(T,w)}else{if((!p||T!==void 0)&&R[T]!==void 0){const N={pos:w,value:o[w],dupePos:R[T],dupeValue:o[R[T]]};return k&&(N.path=d),f("array.unique",N,r.localize([...r.path,w],[o,...r.ancestors]))}R[T]=w}}return o},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(o,r)=>new Set(o)}},rebuild(o){o.$_terms._inclusions=[],o.$_terms._exclusions=[],o.$_terms._requireds=[];for(const r of o.$_terms.items)c.validateSingle(r,o),r._flags.presence==="required"?o.$_terms._requireds.push(r):r._flags.presence==="forbidden"?o.$_terms._exclusions.push(r):o.$_terms._inclusions.push(r);for(const r of o.$_terms.ordered)c.validateSingle(r,o)},manifest:{build:(o,r)=>(r.items&&(o=o.items(...r.items)),r.ordered&&(o=o.ordered(...r.ordered)),o)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(o,r,f,a,d,m){const x=[];let k=0;for(const A of f){const E=A._flags.label;E?x.push(E):++k}x.length?k?r.push(o.$_createError("array.includesRequiredBoth",a,{knownMisses:x,unknownMisses:k},d,m)):r.push(o.$_createError("array.includesRequiredKnowns",a,{knownMisses:x},d,m)):r.push(o.$_createError("array.includesRequiredUnknowns",a,{unknownMisses:k},d,m))},c.fillOrderedErrors=function(o,r,f,a,d,m){const x=[];for(const k of f)k._flags.presence==="required"&&x.push(k);x.length&&c.fillMissedErrors(o,r,x,a,d,m)},c.fillDefault=function(o,r,f,a){const d=[];let m=!0;for(let x=o.length-1;x>=0;--x){const k=o[x],A=[r,...f.ancestors],E=k.$_validate(void 0,f.localize(f.path,A,k),a).value;if(m){if(E===void 0)continue;m=!1}d.unshift(E)}d.length&&r.push(...d)},c.fastSplice=function(o,r){let f=r;for(;f<o.length;)o[f++]=o[f];--o.length},c.validateSingle=function(o,r){(o.type==="array"||o._flags._arrayItems)&&(i(!r._flags.single,"Cannot specify array item with single rule enabled"),r.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(o,r,f,a,d){const m=f.order==="ascending"?1:-1,x=-1*m,k=m,A=(E,p)=>{let w=c.compare(E,p,x,k);if(w!==null||(f.by&&(E=f.by.resolve(E,a,d),p=f.by.resolve(p,a,d)),w=c.compare(E,p,x,k),w!==null))return w;const T=typeof E;if(T!==typeof p)throw o.$_createError("array.sort.mismatching",r,null,a,d);if(T!=="number"&&T!=="string")throw o.$_createError("array.sort.unsupported",r,{type:T},a,d);return T==="number"?(E-p)*m:E<p?x:k};try{return{value:r.slice().sort(A)}}catch(E){return{errors:E}}},c.compare=function(o,r,f,a){return o===r?0:o===void 0?1:r===void 0?-1:o===null?a:r===null?f:null}},4937:(_,v,h)=>{const i=h(375),y=h(8068),b=h(8160),g=h(2036),t={isBool:function(l){return typeof l=="boolean"}};_.exports=y.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(l,{schema:c}){if(typeof l!="boolean"){if(typeof l=="string"){const o=c._flags.sensitive?l:l.toLowerCase();l=o==="true"||o!=="false"&&l}return typeof l!="boolean"&&(l=c.$_terms.truthy&&c.$_terms.truthy.has(l,null,null,!c._flags.sensitive)||(!c.$_terms.falsy||!c.$_terms.falsy.has(l,null,null,!c._flags.sensitive))&&l),{value:l}}},validate(l,{error:c}){if(typeof l!="boolean")return{value:l,errors:c("boolean.base")}},rules:{truthy:{method(...l){b.verifyFlat(l,"truthy");const c=this.clone();c.$_terms.truthy=c.$_terms.truthy||new g;for(let o=0;o<l.length;++o){const r=l[o];i(r!==void 0,"Cannot call truthy with undefined"),c.$_terms.truthy.add(r)}return c}},falsy:{method(...l){b.verifyFlat(l,"falsy");const c=this.clone();c.$_terms.falsy=c.$_terms.falsy||new g;for(let o=0;o<l.length;++o){const r=l[o];i(r!==void 0,"Cannot call falsy with undefined"),c.$_terms.falsy.add(r)}return c}},sensitive:{method(l=!0){return this.$_setFlag("sensitive",l)}}},cast:{number:{from:t.isBool,to:(l,c)=>l?1:0},string:{from:t.isBool,to:(l,c)=>l?"true":"false"}},manifest:{build:(l,c)=>(c.truthy&&(l=l.truthy(...c.truthy)),c.falsy&&(l=l.falsy(...c.falsy)),l)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(_,v,h)=>{const i=h(375),y=h(8068),b=h(8160),g=h(3328),t={isDate:function(l){return l instanceof Date}};_.exports=y.extend({type:"date",coerce:{from:["number","string"],method:(l,{schema:c})=>({value:t.parse(l,c._flags.format)||l})},validate(l,{schema:c,error:o,prefs:r}){if(l instanceof Date&&!isNaN(l.getTime()))return;const f=c._flags.format;return r.convert&&f&&typeof l=="string"?{value:l,errors:o("date.format",{format:f})}:{value:l,errors:o("date.base")}},rules:{compare:{method:!1,validate(l,c,{date:o},{name:r,operator:f,args:a}){const d=o==="now"?Date.now():o.getTime();return b.compare(l.getTime(),d,f)?l:c.error("date."+r,{limit:a.date,value:l})},args:[{name:"date",ref:!0,normalize:l=>l==="now"?l:t.parse(l),assert:l=>l!==null,message:"must have a valid date format"}]},format:{method(l){return i(["iso","javascript","unix"].includes(l),"Unknown date format",l),this.$_setFlag("format",l)}},greater:{method(l){return this.$_addRule({name:"greater",method:"compare",args:{date:l},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(l){return this.$_addRule({name:"less",method:"compare",args:{date:l},operator:"<"})}},max:{method(l){return this.$_addRule({name:"max",method:"compare",args:{date:l},operator:"<="})}},min:{method(l){return this.$_addRule({name:"min",method:"compare",args:{date:l},operator:">="})}},timestamp:{method(l="javascript"){return i(["javascript","unix"].includes(l),'"type" must be one of "javascript, unix"'),this.format(l)}}},cast:{number:{from:t.isDate,to:(l,c)=>l.getTime()},string:{from:t.isDate,to:(l,{prefs:c})=>g.date(l,c)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),t.parse=function(l,c){if(l instanceof Date)return l;if(typeof l!="string"&&(isNaN(l)||!isFinite(l))||/^\s*$/.test(l))return null;if(c==="iso")return b.isIsoDate(l)?t.date(l.toString()):null;const o=l;if(typeof l=="string"&&/^[+-]?\d+(\.\d+)?$/.test(l)&&(l=parseFloat(l)),c){if(c==="javascript")return t.date(1*l);if(c==="unix")return t.date(1e3*l);if(typeof o=="string")return null}return t.date(l)},t.date=function(l){const c=new Date(l);return isNaN(c.getTime())?null:c}},390:(_,v,h)=>{const i=h(375),y=h(7824);_.exports=y.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(b){return i(Number.isSafeInteger(b)&&b>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:b}})},validate:(b,g,{n:t})=>b.length===t?b:g.error("function.arity",{n:t})},class:{method(){return this.$_addRule("class")},validate:(b,g)=>/^\s*class\s/.test(b.toString())?b:g.error("function.class",{value:b})},minArity:{method(b){return i(Number.isSafeInteger(b)&&b>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:b}})},validate:(b,g,{n:t})=>b.length>=t?b:g.error("function.minArity",{n:t})},maxArity:{method(b){return i(Number.isSafeInteger(b)&&b>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:b}})},validate:(b,g,{n:t})=>b.length<=t?b:g.error("function.maxArity",{n:t})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(_,v,h)=>{const i=h(978),y=h(375),b=h(8571),g=h(3652),t=h(8068),l=h(8160),c=h(3292),o=h(6354),r=h(6133),f=h(3328),a={renameDefaults:{alias:!1,multiple:!1,override:!1}};_.exports=t.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(d,m)=>d.keys(m),validate(d,{schema:m,error:x,state:k,prefs:A}){if(!d||typeof d!==m.$_property("typeof")||Array.isArray(d))return{value:d,errors:x("object.base",{type:m.$_property("typeof")})};if(!(m.$_terms.renames||m.$_terms.dependencies||m.$_terms.keys||m.$_terms.patterns||m.$_terms.externals))return;d=a.clone(d,A);const E=[];if(m.$_terms.renames&&!a.rename(m,d,k,A,E))return{value:d,errors:E};if(!m.$_terms.keys&&!m.$_terms.patterns&&!m.$_terms.dependencies)return{value:d,errors:E};const p=new Set(Object.keys(d));if(m.$_terms.keys){const w=[d,...k.ancestors];for(const T of m.$_terms.keys){const R=T.key,N=d[R];p.delete(R);const C=k.localize([...k.path,R],w,T),$=T.schema.$_validate(N,C,A);if($.errors){if(A.abortEarly)return{value:d,errors:$.errors};$.value!==void 0&&(d[R]=$.value),E.push(...$.errors)}else T.schema._flags.result==="strip"||$.value===void 0&&N!==void 0?delete d[R]:$.value!==void 0&&(d[R]=$.value)}}if(p.size||m._flags._hasPatternMatch){const w=a.unknown(m,d,p,E,k,A);if(w)return w}if(m.$_terms.dependencies)for(const w of m.$_terms.dependencies){if(w.key!==null&&a.isPresent(w.options)(w.key.resolve(d,k,A,null,{shadow:!1}))===!1)continue;const T=a.dependencies[w.rel](m,w,d,k,A);if(T){const R=m.$_createError(T.code,d,T.context,k,A);if(A.abortEarly)return{value:d,errors:R};E.push(R)}}return{value:d,errors:E}},rules:{and:{method(...d){return l.verifyFlat(d,"and"),a.dependency(this,"and",null,d)}},append:{method(d){return d==null||Object.keys(d).length===0?this:this.keys(d)}},assert:{method(d,m,x){f.isTemplate(d)||(d=c.ref(d)),y(x===void 0||typeof x=="string","Message must be a string"),m=this.$_compile(m,{appendPath:!0});const k=this.$_addRule({name:"assert",args:{subject:d,schema:m,message:x}});return k.$_mutateRegister(d),k.$_mutateRegister(m),k},validate(d,{error:m,prefs:x,state:k},{subject:A,schema:E,message:p}){const w=A.resolve(d,k,x),T=r.isRef(A)?A.absolute(k):[];return E.$_match(w,k.localize(T,[d,...k.ancestors],E),x)?d:m("object.assert",{subject:A,message:p})},args:["subject","schema","message"],multi:!0},instance:{method(d,m){return y(typeof d=="function","constructor must be a function"),m=m||d.name,this.$_addRule({name:"instance",args:{constructor:d,name:m}})},validate:(d,m,{constructor:x,name:k})=>d instanceof x?d:m.error("object.instance",{type:k,value:d}),args:["constructor","name"]},keys:{method(d){y(d===void 0||typeof d=="object","Object schema must be a valid object"),y(!l.isSchema(d),"Object schema cannot be a joi schema");const m=this.clone();if(d)if(Object.keys(d).length){m.$_terms.keys=m.$_terms.keys?m.$_terms.keys.filter((x=>!d.hasOwnProperty(x.key))):new a.Keys;for(const x in d)l.tryWithPath((()=>m.$_terms.keys.push({key:x,schema:this.$_compile(d[x])})),x)}else m.$_terms.keys=new a.Keys;else m.$_terms.keys=null;return m.$_mutateRebuild()}},length:{method(d){return this.$_addRule({name:"length",args:{limit:d},operator:"="})},validate:(d,m,{limit:x},{name:k,operator:A,args:E})=>l.compare(Object.keys(d).length,x,A)?d:m.error("object."+k,{limit:E.limit,value:d}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(d){return this.$_addRule({name:"max",method:"length",args:{limit:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"length",args:{limit:d},operator:">="})}},nand:{method(...d){return l.verifyFlat(d,"nand"),a.dependency(this,"nand",null,d)}},or:{method(...d){return l.verifyFlat(d,"or"),a.dependency(this,"or",null,d)}},oxor:{method(...d){return a.dependency(this,"oxor",null,d)}},pattern:{method(d,m,x={}){const k=d instanceof RegExp;k||(d=this.$_compile(d,{appendPath:!0})),y(m!==void 0,"Invalid rule"),l.assertOptions(x,["fallthrough","matches"]),k&&y(!d.flags.includes("g")&&!d.flags.includes("y"),"pattern should not use global or sticky mode"),m=this.$_compile(m,{appendPath:!0});const A=this.clone();A.$_terms.patterns=A.$_terms.patterns||[];const E={[k?"regex":"schema"]:d,rule:m};return x.matches&&(E.matches=this.$_compile(x.matches),E.matches.type!=="array"&&(E.matches=E.matches.$_root.array().items(E.matches)),A.$_mutateRegister(E.matches),A.$_setFlag("_hasPatternMatch",!0,{clone:!1})),x.fallthrough&&(E.fallthrough=!0),A.$_terms.patterns.push(E),A.$_mutateRegister(m),A}},ref:{method(){return this.$_addRule("ref")},validate:(d,m)=>r.isRef(d)?d:m.error("object.refType",{value:d})},regex:{method(){return this.$_addRule("regex")},validate:(d,m)=>d instanceof RegExp?d:m.error("object.regex",{value:d})},rename:{method(d,m,x={}){y(typeof d=="string"||d instanceof RegExp,"Rename missing the from argument"),y(typeof m=="string"||m instanceof f,"Invalid rename to argument"),y(m!==d,"Cannot rename key to same name:",d),l.assertOptions(x,["alias","ignoreUndefined","override","multiple"]);const k=this.clone();k.$_terms.renames=k.$_terms.renames||[];for(const A of k.$_terms.renames)y(A.from!==d,"Cannot rename the same key multiple times");return m instanceof f&&k.$_mutateRegister(m),k.$_terms.renames.push({from:d,to:m,options:i(a.renameDefaults,x)}),k}},schema:{method(d="any"){return this.$_addRule({name:"schema",args:{type:d}})},validate:(d,m,{type:x})=>!l.isSchema(d)||x!=="any"&&d.type!==x?m.error("object.schema",{type:x}):d},unknown:{method(d){return this.$_setFlag("unknown",d!==!1)}},with:{method(d,m,x={}){return a.dependency(this,"with",d,m,x)}},without:{method(d,m,x={}){return a.dependency(this,"without",d,m,x)}},xor:{method(...d){return l.verifyFlat(d,"xor"),a.dependency(this,"xor",null,d)}}},overrides:{default(d,m){return d===void 0&&(d=l.symbols.deepDefault),this.$_parent("default",d,m)}},rebuild(d){if(d.$_terms.keys){const m=new g.Sorter;for(const x of d.$_terms.keys)l.tryWithPath((()=>m.add(x,{after:x.schema.$_rootReferences(),group:x.key})),x.key);d.$_terms.keys=new a.Keys(...m.nodes)}},manifest:{build(d,m){if(m.keys&&(d=d.keys(m.keys)),m.dependencies)for(const{rel:x,key:k=null,peers:A,options:E}of m.dependencies)d=a.dependency(d,x,k,A,E);if(m.patterns)for(const{regex:x,schema:k,rule:A,fallthrough:E,matches:p}of m.patterns)d=d.pattern(x||k,A,{fallthrough:E,matches:p});if(m.renames)for(const{from:x,to:k,options:A}of m.renames)d=d.rename(x,k,A);return d}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),a.clone=function(d,m){if(typeof d=="object"){if(m.nonEnumerables)return b(d,{shallow:!0});const k=Object.create(Object.getPrototypeOf(d));return Object.assign(k,d),k}const x=function(...k){return d.apply(this,k)};return x.prototype=b(d.prototype),Object.defineProperty(x,"name",{value:d.name,writable:!1}),Object.defineProperty(x,"length",{value:d.length,writable:!1}),Object.assign(x,d),x},a.dependency=function(d,m,x,k,A){y(x===null||typeof x=="string",m,"key must be a strings"),A||(A=k.length>1&&typeof k[k.length-1]=="object"?k.pop():{}),l.assertOptions(A,["separator","isPresent"]),k=[].concat(k);const E=l.default(A.separator,"."),p=[];for(const T of k)y(typeof T=="string",m,"peers must be strings"),p.push(c.ref(T,{separator:E,ancestor:0,prefix:!1}));x!==null&&(x=c.ref(x,{separator:E,ancestor:0,prefix:!1}));const w=d.clone();return w.$_terms.dependencies=w.$_terms.dependencies||[],w.$_terms.dependencies.push(new a.Dependency(m,x,p,k,A)),w},a.dependencies={and(d,m,x,k,A){const E=[],p=[],w=m.peers.length,T=a.isPresent(m.options);for(const R of m.peers)T(R.resolve(x,k,A,null,{shadow:!1}))===!1?E.push(R.key):p.push(R.key);if(E.length!==w&&p.length!==w)return{code:"object.and",context:{present:p,presentWithLabels:a.keysToLabels(d,p),missing:E,missingWithLabels:a.keysToLabels(d,E)}}},nand(d,m,x,k,A){const E=[],p=a.isPresent(m.options);for(const R of m.peers)p(R.resolve(x,k,A,null,{shadow:!1}))&&E.push(R.key);if(E.length!==m.peers.length)return;const w=m.paths[0],T=m.paths.slice(1);return{code:"object.nand",context:{main:w,mainWithLabel:a.keysToLabels(d,w),peers:T,peersWithLabels:a.keysToLabels(d,T)}}},or(d,m,x,k,A){const E=a.isPresent(m.options);for(const p of m.peers)if(E(p.resolve(x,k,A,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:m.paths,peersWithLabels:a.keysToLabels(d,m.paths)}}},oxor(d,m,x,k,A){const E=[],p=a.isPresent(m.options);for(const T of m.peers)p(T.resolve(x,k,A,null,{shadow:!1}))&&E.push(T.key);if(!E.length||E.length===1)return;const w={peers:m.paths,peersWithLabels:a.keysToLabels(d,m.paths)};return w.present=E,w.presentWithLabels=a.keysToLabels(d,E),{code:"object.oxor",context:w}},with(d,m,x,k,A){const E=a.isPresent(m.options);for(const p of m.peers)if(E(p.resolve(x,k,A,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:m.key.key,mainWithLabel:a.keysToLabels(d,m.key.key),peer:p.key,peerWithLabel:a.keysToLabels(d,p.key)}}},without(d,m,x,k,A){const E=a.isPresent(m.options);for(const p of m.peers)if(E(p.resolve(x,k,A,null,{shadow:!1})))return{code:"object.without",context:{main:m.key.key,mainWithLabel:a.keysToLabels(d,m.key.key),peer:p.key,peerWithLabel:a.keysToLabels(d,p.key)}}},xor(d,m,x,k,A){const E=[],p=a.isPresent(m.options);for(const T of m.peers)p(T.resolve(x,k,A,null,{shadow:!1}))&&E.push(T.key);if(E.length===1)return;const w={peers:m.paths,peersWithLabels:a.keysToLabels(d,m.paths)};return E.length===0?{code:"object.missing",context:w}:(w.present=E,w.presentWithLabels=a.keysToLabels(d,E),{code:"object.xor",context:w})}},a.keysToLabels=function(d,m){return Array.isArray(m)?m.map((x=>d.$_mapLabels(x))):d.$_mapLabels(m)},a.isPresent=function(d){return typeof d.isPresent=="function"?d.isPresent:m=>m!==void 0},a.rename=function(d,m,x,k,A){const E={};for(const p of d.$_terms.renames){const w=[],T=typeof p.from!="string";if(T)for(const R in m){if(m[R]===void 0&&p.options.ignoreUndefined||R===p.to)continue;const N=p.from.exec(R);N&&w.push({from:R,to:p.to,match:N})}else!Object.prototype.hasOwnProperty.call(m,p.from)||m[p.from]===void 0&&p.options.ignoreUndefined||w.push(p);for(const R of w){const N=R.from;let C=R.to;if(C instanceof f&&(C=C.render(m,x,k,R.match)),N!==C){if(!p.options.multiple&&E[C]&&(A.push(d.$_createError("object.rename.multiple",m,{from:N,to:C,pattern:T},x,k)),k.abortEarly)||Object.prototype.hasOwnProperty.call(m,C)&&!p.options.override&&!E[C]&&(A.push(d.$_createError("object.rename.override",m,{from:N,to:C,pattern:T},x,k)),k.abortEarly))return!1;m[N]===void 0?delete m[C]:m[C]=m[N],E[C]=!0,p.options.alias||delete m[N]}}}return!0},a.unknown=function(d,m,x,k,A,E){if(d.$_terms.patterns){let p=!1;const w=d.$_terms.patterns.map((R=>{if(R.matches)return p=!0,[]})),T=[m,...A.ancestors];for(const R of x){const N=m[R],C=[...A.path,R];for(let $=0;$<d.$_terms.patterns.length;++$){const M=d.$_terms.patterns[$];if(M.regex){const K=M.regex.test(R);if(A.mainstay.tracer.debug(A,"rule",`pattern.${$}`,K?"pass":"error"),!K)continue}else if(!M.schema.$_match(R,A.nest(M.schema,`pattern.${$}`),E))continue;x.delete(R);const P=A.localize(C,T,{schema:M.rule,key:R}),z=M.rule.$_validate(N,P,E);if(z.errors){if(E.abortEarly)return{value:m,errors:z.errors};k.push(...z.errors)}if(M.matches&&w[$].push(R),m[R]=z.value,!M.fallthrough)break}}if(p)for(let R=0;R<w.length;++R){const N=w[R];if(!N)continue;const C=d.$_terms.patterns[R].matches,$=A.localize(A.path,T,C),M=C.$_validate(N,$,E);if(M.errors){const P=o.details(M.errors,{override:!1});P.matches=N;const z=d.$_createError("object.pattern.match",m,P,A,E);if(E.abortEarly)return{value:m,errors:z};k.push(z)}}}if(x.size&&(d.$_terms.keys||d.$_terms.patterns)){if(E.stripUnknown&&d._flags.unknown===void 0||E.skipFunctions){const p=!(!E.stripUnknown||E.stripUnknown!==!0&&!E.stripUnknown.objects);for(const w of x)p?(delete m[w],x.delete(w)):typeof m[w]=="function"&&x.delete(w)}if(!l.default(d._flags.unknown,E.allowUnknown))for(const p of x){const w=A.localize([...A.path,p],[]),T=d.$_createError("object.unknown",m[p],{child:p},w,E,{flags:!1});if(E.abortEarly)return{value:m,errors:T};k.push(T)}}},a.Dependency=class{constructor(d,m,x,k,A){this.rel=d,this.key=m,this.peers=x,this.paths=k,this.options=A}describe(){const d={rel:this.rel,peers:this.paths};return this.key!==null&&(d.key=this.key.key),this.peers[0].separator!=="."&&(d.options={...d.options,separator:this.peers[0].separator}),this.options.isPresent&&(d.options={...d.options,isPresent:this.options.isPresent}),d}},a.Keys=class extends Array{concat(d){const m=this.slice(),x=new Map;for(let k=0;k<m.length;++k)x.set(m[k].key,k);for(const k of d){const A=k.key,E=x.get(A);E!==void 0?m[E]={key:A,schema:m[E].schema.concat(k.schema)}:m.push(k)}return m}}},8785:(_,v,h)=>{const i=h(375),y=h(8068),b=h(8160),g=h(3292),t=h(6354),l={};_.exports=y.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(c,o)=>c.ref(o),validate(c,{schema:o,state:r,prefs:f}){i(o.$_terms.link,"Uninitialized link schema");const a=l.generate(o,c,r,f),d=o.$_terms.link[0].ref;return a.$_validate(c,r.nest(a,`link:${d.display}:${a.type}`),f)},generate:(c,o,r,f)=>l.generate(c,o,r,f),rules:{ref:{method(c){i(!this.$_terms.link,"Cannot reinitialize schema"),c=g.ref(c),i(c.type==="value"||c.type==="local","Invalid reference type:",c.type),i(c.type==="local"||c.ancestor==="root"||c.ancestor>0,"Link cannot reference itself");const o=this.clone();return o.$_terms.link=[{ref:c}],o}},relative:{method(c=!0){return this.$_setFlag("relative",c)}}},overrides:{concat(c){i(this.$_terms.link,"Uninitialized link schema"),i(b.isSchema(c),"Invalid schema object"),i(c.type!=="link","Cannot merge type link with another link");const o=this.clone();return o.$_terms.whens||(o.$_terms.whens=[]),o.$_terms.whens.push({concat:c}),o.$_mutateRebuild()}},manifest:{build:(c,o)=>(i(o.link,"Invalid link description missing link"),c.ref(o.link))}}),l.generate=function(c,o,r,f){let a=r.mainstay.links.get(c);if(a)return a._generate(o,r,f).schema;const d=c.$_terms.link[0].ref,{perspective:m,path:x}=l.perspective(d,r);l.assert(m,"which is outside of schema boundaries",d,c,r,f);try{a=x.length?m.$_reach(x):m}catch{l.assert(!1,"to non-existing schema",d,c,r,f)}return l.assert(a.type!=="link","which is another link",d,c,r,f),c._flags.relative||r.mainstay.links.set(c,a),a._generate(o,r,f).schema},l.perspective=function(c,o){if(c.type==="local"){for(const{schema:r,key:f}of o.schemas){if((r._flags.id||f)===c.path[0])return{perspective:r,path:c.path.slice(1)};if(r.$_terms.shared){for(const a of r.$_terms.shared)if(a._flags.id===c.path[0])return{perspective:a,path:c.path.slice(1)}}}return{perspective:null,path:null}}return c.ancestor==="root"?{perspective:o.schemas[o.schemas.length-1].schema,path:c.path}:{perspective:o.schemas[c.ancestor]&&o.schemas[c.ancestor].schema,path:c.path}},l.assert=function(c,o,r,f,a,d){c||i(!1,`"${t.label(f._flags,a,d)}" contains link reference "${r.display}" ${o}`)}},3832:(_,v,h)=>{const i=h(375),y=h(8068),b=h(8160),g={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const l=t.toString(),c=l.indexOf("."),o=l.indexOf("e");return(c<0?0:(o<0?l.length:o)-c-1)+(o<0?0:Math.max(0,-parseInt(l.slice(o+1))))}};_.exports=y.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,{schema:l,error:c}){if(!t.match(g.numberRx))return;t=t.trim();const o={value:parseFloat(t)};if(o.value===0&&(o.value=0),!l._flags.unsafe)if(t.match(/e/i)){if(g.extractSignificantDigits(t)!==g.extractSignificantDigits(String(o.value)))return o.errors=c("number.unsafe"),o}else{const r=o.value.toString();if(r.match(/e/i))return o;if(r!==g.normalizeDecimal(t))return o.errors=c("number.unsafe"),o}return o}},validate(t,{schema:l,error:c,prefs:o}){if(t===1/0||t===-1/0)return{value:t,errors:c("number.infinity")};if(!b.isNumber(t))return{value:t,errors:c("number.base")};const r={value:t};if(o.convert){const f=l.$_getRule("precision");if(f){const a=Math.pow(10,f.args.limit);r.value=Math.round(r.value*a)/a}}return r.value===0&&(r.value=0),!l._flags.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(r.errors=c("number.unsafe")),r},rules:{compare:{method:!1,validate:(t,l,{limit:c},{name:o,operator:r,args:f})=>b.compare(t,c,r)?t:l.error("number."+o,{limit:f.limit,value:t}),args:[{name:"limit",ref:!0,assert:b.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,l)=>Math.trunc(t)-t==0?t:l.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const l=typeof t=="number"?g.decimalPlaces(t):null,c=Math.pow(10,l);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:l,pfactor:c}})},validate:(t,l,{base:c,baseDecimalPlace:o,pfactor:r},f)=>g.decimalPlaces(t)>o?l.error("number.multiple",{multiple:f.args.base,value:t}):Math.round(r*t)%Math.round(r*c)==0?t:l.error("number.multiple",{multiple:f.args.base,value:t}),args:[{name:"base",ref:!0,assert:t=>typeof t=="number"&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,l)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:l.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return i(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,l,{limit:c}){const o=t.toString().match(g.precisionRx);return Math.max((o[1]?o[1].length:0)-(o[2]?parseInt(o[2],10):0),0)<=c?t:l.error("number.precision",{limit:c,value:t})},convert:!0},sign:{method(t){return i(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,l,{sign:c})=>c==="negative"&&t<0||c==="positive"&&t>0?t:l.error(`number.${c}`)},unsafe:{method(t=!0){return i(typeof t=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>typeof t=="number",to:(t,l)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),g.extractSignificantDigits=function(t){return t.replace(g.exponentialPartRegex,"").replace(g.dotRegex,"").replace(g.trailingZerosRegex,"").replace(g.leadingSignAndZerosRegex,"")},g.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),t==="-0"?"0":t}},8966:(_,v,h)=>{const i=h(7824);_.exports=i.extend({type:"object",cast:{map:{from:y=>y&&typeof y=="object",to:(y,b)=>new Map(Object.entries(y))}}})},7417:(_,v,h)=>{const i=h(375),y=h(5380),b=h(1745),g=h(9959),t=h(6064),l=h(9926),c=h(5752),o=h(8068),r=h(8160),f={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:g.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};_.exports=o.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(a,{schema:d,state:m,prefs:x}){const k=d.$_getRule("normalize");k&&(a=a.normalize(k.args.form));const A=d.$_getRule("case");A&&(a=A.args.direction==="upper"?a.toLocaleUpperCase():a.toLocaleLowerCase());const E=d.$_getRule("trim");if(E&&E.args.enabled&&(a=a.trim()),d.$_terms.replacements)for(const w of d.$_terms.replacements)a=a.replace(w.pattern,w.replacement);const p=d.$_getRule("hex");if(p&&p.args.options.byteAligned&&a.length%2!=0&&(a=`0${a}`),d.$_getRule("isoDate")){const w=f.isoDate(a);w&&(a=w)}if(d._flags.truncate){const w=d.$_getRule("max");if(w){let T=w.args.limit;if(r.isResolvable(T)&&(T=T.resolve(a,m,x),!r.limit(T)))return{value:a,errors:d.$_createError("any.ref",T,{ref:w.args.limit,arg:"limit",reason:"must be a positive integer"},m,x)};a=a.slice(0,T)}}return{value:a}}},validate(a,{schema:d,error:m}){if(typeof a!="string")return{value:a,errors:m("string.base")};if(a===""){const x=d.$_getRule("min");return x&&x.args.limit===0?void 0:{value:a,errors:m("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(a,d)=>/^[a-zA-Z0-9]+$/.test(a)?a:d.error("string.alphanum")},base64:{method(a={}){return r.assertOptions(a,["paddingRequired","urlSafe"]),a={urlSafe:!1,paddingRequired:!0,...a},i(typeof a.paddingRequired=="boolean","paddingRequired must be boolean"),i(typeof a.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:a}})},validate:(a,d,{options:m})=>f.base64Regex[m.paddingRequired][m.urlSafe].test(a)?a:d.error("string.base64")},case:{method(a){return i(["lower","upper"].includes(a),"Invalid case:",a),this.$_addRule({name:"case",args:{direction:a}})},validate:(a,d,{direction:m})=>m==="lower"&&a===a.toLocaleLowerCase()||m==="upper"&&a===a.toLocaleUpperCase()?a:d.error(`string.${m}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(a,d){let m=a.length,x=0,k=1;for(;m--;){const A=a.charAt(m)*k;x+=A-9*(A>9),k^=3}return x>0&&x%10==0?a:d.error("string.creditCard")}},dataUri:{method(a={}){return r.assertOptions(a,["paddingRequired"]),a={paddingRequired:!0,...a},i(typeof a.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:a}})},validate(a,d,{options:m}){const x=a.match(f.dataUriRegex);return x&&(!x[2]||x[2]!=="base64"||f.base64Regex[m.paddingRequired].false.test(x[3]))?a:d.error("string.dataUri")}},domain:{method(a){a&&r.assertOptions(a,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const d=f.addressOptions(a);return this.$_addRule({name:"domain",args:{options:a},address:d})},validate:(a,d,m,{address:x})=>y.isValid(a,x)?a:d.error("string.domain")},email:{method(a={}){r.assertOptions(a,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),i(a.multiple===void 0||typeof a.multiple=="boolean","multiple option must be an boolean");const d=f.addressOptions(a),m=new RegExp(`\\s*[${a.separator?t(a.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:a},regex:m,address:d})},validate(a,d,{options:m},{regex:x,address:k}){const A=m.multiple?a.split(x):[a],E=[];for(const p of A)b.isValid(p,k)||E.push(p);return E.length?d.error("string.email",{value:a,invalids:E}):a}},guid:{alias:"uuid",method(a={}){r.assertOptions(a,["version","separator"]);let d="";if(a.version){const k=[].concat(a.version);i(k.length>=1,"version must have at least 1 valid version specified");const A=new Set;for(let E=0;E<k.length;++E){const p=k[E];i(typeof p=="string","version at position "+E+" must be a string");const w=f.guidVersions[p.toLowerCase()];i(w,"version at position "+E+" must be one of "+Object.keys(f.guidVersions).join(", ")),i(!A.has(w),"version at position "+E+" must not be a duplicate"),d+=w,A.add(w)}}i(f.guidSeparators.has(a.separator),'separator must be one of true, false, "-", or ":"');const m=a.separator===void 0?"[:-]?":a.separator===!0?"[:-]":a.separator===!1?"[]?":`\\${a.separator}`,x=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${m})[0-9A-F]{4}\\2?[${d||"0-9A-F"}][0-9A-F]{3}\\2?[${d?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:a},regex:x})},validate(a,d,m,{regex:x}){const k=x.exec(a);return k?f.guidBrackets[k[1]]!==k[k.length-1]?d.error("string.guid"):a:d.error("string.guid")}},hex:{method(a={}){return r.assertOptions(a,["byteAligned","prefix"]),a={byteAligned:!1,prefix:!1,...a},i(typeof a.byteAligned=="boolean","byteAligned must be boolean"),i(typeof a.prefix=="boolean"||a.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:a}})},validate:(a,d,{options:m})=>(m.prefix==="optional"?f.hexRegex.withOptionalPrefix:m.prefix===!0?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(a)?m.byteAligned&&a.length%2!=0?d.error("string.hexAlign"):a:d.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(a,d)=>y.isValid(a,{minDomainSegments:1})||f.ipRegex.test(a)?a:d.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(a={}){r.assertOptions(a,["cidr","version"]);const{cidr:d,versions:m,regex:x}=g.regex(a),k=a.version?m:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:d,version:k}},regex:x})},validate:(a,d,{options:m},{regex:x})=>x.test(a)?a:m.version?d.error("string.ipVersion",{value:a,cidr:m.cidr,version:m.version}):d.error("string.ip",{value:a,cidr:m.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(a,{error:d})=>f.isoDate(a)?a:d("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(a,d)=>f.isoDurationRegex.test(a)?a:d.error("string.isoDuration")},length:{method(a,d){return f.length(this,"length",a,"=",d)},validate(a,d,{limit:m,encoding:x},{name:k,operator:A,args:E}){const p=!x&&a.length;return r.compare(p,m,A)?a:d.error("string."+k,{limit:E.limit,value:a,encoding:x})},args:[{name:"limit",ref:!0,assert:r.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(a,d){return f.length(this,"max",a,"<=",d)},args:["limit","encoding"]},min:{method(a,d){return f.length(this,"min",a,">=",d)},args:["limit","encoding"]},normalize:{method(a="NFC"){return i(f.normalizationForms.includes(a),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:a}})},validate:(a,{error:d},{form:m})=>a===a.normalize(m)?a:d("string.normalize",{value:a,form:m}),convert:!0},pattern:{alias:"regex",method(a,d={}){i(a instanceof RegExp,"regex must be a RegExp"),i(!a.flags.includes("g")&&!a.flags.includes("y"),"regex should not use global or sticky mode"),typeof d=="string"&&(d={name:d}),r.assertOptions(d,["invert","name"]);const m=["string.pattern",d.invert?".invert":"",d.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:a,options:d},errorCode:m})},validate:(a,d,{regex:m,options:x},{errorCode:k})=>m.test(a)^x.invert?a:d.error(k,{name:x.name,regex:m,value:a}),args:["regex","options"],multi:!0},replace:{method(a,d){typeof a=="string"&&(a=new RegExp(t(a),"g")),i(a instanceof RegExp,"pattern must be a RegExp"),i(typeof d=="string","replacement must be a String");const m=this.clone();return m.$_terms.replacements||(m.$_terms.replacements=[]),m.$_terms.replacements.push({pattern:a,replacement:d}),m}},token:{method(){return this.$_addRule("token")},validate:(a,d)=>/^\w+$/.test(a)?a:d.error("string.token")},trim:{method(a=!0){return i(typeof a=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:a}})},validate:(a,d,{enabled:m})=>m&&a!==a.trim()?d.error("string.trim"):a,convert:!0},truncate:{method(a=!0){return i(typeof a=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",a)}},uppercase:{method(){return this.case("upper")}},uri:{method(a={}){r.assertOptions(a,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),a.domain&&r.assertOptions(a.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:d,scheme:m}=c.regex(a),x=a.domain?f.addressOptions(a.domain):null;return this.$_addRule({name:"uri",args:{options:a},regex:d,domain:x,scheme:m})},validate(a,d,{options:m},{regex:x,domain:k,scheme:A}){if(["http:/","https:/"].includes(a))return d.error("string.uri");let E=x.exec(a);if(!E&&d.prefs.convert&&m.encodeUri){const p=encodeURI(a);E=x.exec(p),E&&(a=p)}if(E){const p=E[1]||E[2];return!k||m.allowRelative&&!p||y.isValid(p,k)?a:d.error("string.domain",{value:p})}return m.relativeOnly?d.error("string.uriRelativeOnly"):m.scheme?d.error("string.uriCustomScheme",{scheme:A,value:a}):d.error("string.uri")}}},manifest:{build(a,d){if(d.replacements)for(const{pattern:m,replacement:x}of d.replacements)a=a.replace(m,x);return a}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(a){if(!a)return f.tlds||a;if(i(a.minDomainSegments===void 0||Number.isSafeInteger(a.minDomainSegments)&&a.minDomainSegments>0,"minDomainSegments must be a positive integer"),i(a.maxDomainSegments===void 0||Number.isSafeInteger(a.maxDomainSegments)&&a.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),a.tlds===!1)return a;if(a.tlds===!0||a.tlds===void 0)return i(f.tlds,"Built-in TLD list disabled"),Object.assign({},a,f.tlds);i(typeof a.tlds=="object","tlds must be true, false, or an object");const d=a.tlds.deny;if(d)return Array.isArray(d)&&(a=Object.assign({},a,{tlds:{deny:new Set(d)}})),i(a.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),i(!a.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(a.tlds.deny,"tlds.deny"),a;const m=a.tlds.allow;return m?m===!0?(i(f.tlds,"Built-in TLD list disabled"),Object.assign({},a,f.tlds)):(Array.isArray(m)&&(a=Object.assign({},a,{tlds:{allow:new Set(m)}})),i(a.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(a.tlds.allow,"tlds.allow"),a):a},f.validateTlds=function(a,d){for(const m of a)i(y.isValid(m,{minDomainSegments:1,maxDomainSegments:1}),`${d} must contain valid top level domain names`)},f.isoDate=function(a){if(!r.isIsoDate(a))return null;/.*T.*[+-]\d\d$/.test(a)&&(a+="00");const d=new Date(a);return isNaN(d.getTime())?null:d.toISOString()},f.length=function(a,d,m,x,k){return i(!k||!1,"Invalid encoding:",k),a.$_addRule({name:d,method:"length",args:{limit:m,encoding:k},operator:x})}},8826:(_,v,h)=>{const i=h(375),y=h(8068),b={};b.Map=class extends Map{slice(){return new b.Map(this)}},_.exports=y.extend({type:"symbol",terms:{map:{init:new b.Map}},coerce:{method(g,{schema:t,error:l}){const c=t.$_terms.map.get(g);return c&&(g=c),t._flags.only&&typeof g!="symbol"?{value:g,errors:l("symbol.map",{map:t.$_terms.map})}:{value:g}}},validate(g,{error:t}){if(typeof g!="symbol")return{value:g,errors:t("symbol.base")}},rules:{map:{method(g){g&&!g[Symbol.iterator]&&typeof g=="object"&&(g=Object.entries(g)),i(g&&g[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),l=[];for(const c of g){i(c&&c[Symbol.iterator],"Entry must be an iterable");const[o,r]=c;i(typeof o!="object"&&typeof o!="function"&&typeof o!="symbol","Key must not be of type object, function, or Symbol"),i(typeof r=="symbol","Value must be a Symbol"),t.$_terms.map.set(o,r),l.push(r)}return t.valid(...l)}}},manifest:{build:(g,t)=>(t.map&&(g=g.map(t.map)),g)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(_,v,h)=>{const i=h(375),y=h(8571),b=h(738),g=h(9621),t=h(8160),l=h(6354),c=h(493),o={result:Symbol("result")};v.entry=function(r,f,a){let d=t.defaults;a&&(i(a.warnings===void 0,"Cannot override warnings preference in synchronous validation"),i(a.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),d=t.preferences(t.defaults,a));const m=o.entry(r,f,d);i(!m.mainstay.externals.length,"Schema with external rules must use validateAsync()");const x={value:m.value};return m.error&&(x.error=m.error),m.mainstay.warnings.length&&(x.warning=l.details(m.mainstay.warnings)),m.mainstay.debug&&(x.debug=m.mainstay.debug),m.mainstay.artifacts&&(x.artifacts=m.mainstay.artifacts),x},v.entryAsync=async function(r,f,a){let d=t.defaults;a&&(d=t.preferences(t.defaults,a));const m=o.entry(r,f,d),x=m.mainstay;if(m.error)throw x.debug&&(m.error.debug=x.debug),m.error;if(x.externals.length){let A=m.value;const E=[];for(const p of x.externals){const w=p.state.path,T=p.schema.type==="link"?x.links.get(p.schema):null;let R,N,C=A;const $=w.length?[A]:[],M=w.length?g(r,w):r;if(w.length){R=w[w.length-1];let P=A;for(const z of w.slice(0,-1))P=P[z],$.unshift(P);N=$[0],C=N[R]}try{const P=(K,ee)=>(T||p.schema).$_createError(K,C,ee,p.state,d),z=await p.method(C,{schema:p.schema,linked:T,state:p.state,prefs:a,original:M,error:P,errorsArray:o.errorsArray,warn:(K,ee)=>x.warnings.push((T||p.schema).$_createError(K,C,ee,p.state,d)),message:(K,ee)=>(T||p.schema).$_createError("external",C,ee,p.state,d,{messages:K})});if(z===void 0||z===C)continue;if(z instanceof l.Report){if(x.tracer.log(p.schema,p.state,"rule","external","error"),E.push(z),d.abortEarly)break;continue}if(Array.isArray(z)&&z[t.symbols.errors]){if(x.tracer.log(p.schema,p.state,"rule","external","error"),E.push(...z),d.abortEarly)break;continue}N?(x.tracer.value(p.state,"rule",C,z,"external"),N[R]=z):(x.tracer.value(p.state,"rule",A,z,"external"),A=z)}catch(P){throw d.errors.label&&(P.message+=` (${p.label})`),P}}if(m.value=A,E.length)throw m.error=l.process(E,r,d),x.debug&&(m.error.debug=x.debug),m.error}if(!d.warnings&&!d.debug&&!d.artifacts)return m.value;const k={value:m.value};return x.warnings.length&&(k.warning=l.details(x.warnings)),x.debug&&(k.debug=x.debug),x.artifacts&&(k.artifacts=x.artifacts),k},o.Mainstay=class{constructor(r,f,a){this.externals=[],this.warnings=[],this.tracer=r,this.debug=f,this.links=a,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const r=this._snapshots.pop();this.externals=r.externals,this.warnings=r.warnings}commit(){this._snapshots.pop()}},o.entry=function(r,f,a){const{tracer:d,cleanup:m}=o.tracer(f,a),x=a.debug?[]:null,k=f._ids._schemaChain?new Map:null,A=new o.Mainstay(d,x,k),E=f._ids._schemaChain?[{schema:f}]:null,p=new c([],[],{mainstay:A,schemas:E}),w=v.validate(r,f,p,a);m&&f.$_root.untrace();const T=l.process(w.errors,r,a);return{value:w.value,error:T,mainstay:A}},o.tracer=function(r,f){return r.$_root._tracer?{tracer:r.$_root._tracer._register(r)}:f.debug?(i(r.$_root.trace,"Debug mode not supported"),{tracer:r.$_root.trace()._register(r),cleanup:!0}):{tracer:o.ignore}},v.validate=function(r,f,a,d,m={}){if(f.$_terms.whens&&(f=f._generate(r,a,d).schema),f._preferences&&(d=o.prefs(f,d)),f._cache&&d.cache){const T=f._cache.get(r);if(a.mainstay.tracer.debug(a,"validate","cached",!!T),T)return T}const x=(T,R,N)=>f.$_createError(T,r,R,N||a,d),k={original:r,prefs:d,schema:f,state:a,error:x,errorsArray:o.errorsArray,warn:(T,R,N)=>a.mainstay.warnings.push(x(T,R,N)),message:(T,R)=>f.$_createError("custom",r,R,a,d,{messages:T})};a.mainstay.tracer.entry(f,a);const A=f._definition;if(A.prepare&&r!==void 0&&d.convert){const T=A.prepare(r,k);if(T){if(a.mainstay.tracer.value(a,"prepare",r,T.value),T.errors)return o.finalize(T.value,[].concat(T.errors),k);r=T.value}}if(A.coerce&&r!==void 0&&d.convert&&(!A.coerce.from||A.coerce.from.includes(typeof r))){const T=A.coerce.method(r,k);if(T){if(a.mainstay.tracer.value(a,"coerced",r,T.value),T.errors)return o.finalize(T.value,[].concat(T.errors),k);r=T.value}}const E=f._flags.empty;E&&E.$_match(o.trim(r,f),a.nest(E),t.defaults)&&(a.mainstay.tracer.value(a,"empty",r,void 0),r=void 0);const p=m.presence||f._flags.presence||(f._flags._endedSwitch?null:d.presence);if(r===void 0){if(p==="forbidden")return o.finalize(r,null,k);if(p==="required")return o.finalize(r,[f.$_createError("any.required",r,null,a,d)],k);if(p==="optional"){if(f._flags.default!==t.symbols.deepDefault)return o.finalize(r,null,k);a.mainstay.tracer.value(a,"default",r,{}),r={}}}else if(p==="forbidden")return o.finalize(r,[f.$_createError("any.unknown",r,null,a,d)],k);const w=[];if(f._valids){const T=f._valids.get(r,a,d,f._flags.insensitive);if(T)return d.convert&&(a.mainstay.tracer.value(a,"valids",r,T.value),r=T.value),a.mainstay.tracer.filter(f,a,"valid",T),o.finalize(r,null,k);if(f._flags.only){const R=f.$_createError("any.only",r,{valids:f._valids.values({display:!0})},a,d);if(d.abortEarly)return o.finalize(r,[R],k);w.push(R)}}if(f._invalids){const T=f._invalids.get(r,a,d,f._flags.insensitive);if(T){a.mainstay.tracer.filter(f,a,"invalid",T);const R=f.$_createError("any.invalid",r,{invalids:f._invalids.values({display:!0})},a,d);if(d.abortEarly)return o.finalize(r,[R],k);w.push(R)}}if(A.validate){const T=A.validate(r,k);if(T&&(a.mainstay.tracer.value(a,"base",r,T.value),r=T.value,T.errors)){if(!Array.isArray(T.errors))return w.push(T.errors),o.finalize(r,w,k);if(T.errors.length)return w.push(...T.errors),o.finalize(r,w,k)}}return f._rules.length?o.rules(r,w,k):o.finalize(r,w,k)},o.rules=function(r,f,a){const{schema:d,state:m,prefs:x}=a;for(const k of d._rules){const A=d._definition.rules[k.method];if(A.convert&&x.convert){m.mainstay.tracer.log(d,m,"rule",k.name,"full");continue}let E,p=k.args;if(k._resolve.length){p=Object.assign({},p);for(const T of k._resolve){const R=A.argsByName.get(T),N=p[T].resolve(r,m,x),C=R.normalize?R.normalize(N):N,$=t.validateArg(C,null,R);if($){E=d.$_createError("any.ref",N,{arg:T,ref:p[T],reason:$},m,x);break}p[T]=C}}E=E||A.validate(r,a,p,k);const w=o.rule(E,k);if(w.errors){if(m.mainstay.tracer.log(d,m,"rule",k.name,"error"),k.warn){m.mainstay.warnings.push(...w.errors);continue}if(x.abortEarly)return o.finalize(r,w.errors,a);f.push(...w.errors)}else m.mainstay.tracer.log(d,m,"rule",k.name,"pass"),m.mainstay.tracer.value(m,"rule",r,w.value,k.name),r=w.value}return o.finalize(r,f,a)},o.rule=function(r,f){return r instanceof l.Report?(o.error(r,f),{errors:[r],value:null}):Array.isArray(r)&&r[t.symbols.errors]?(r.forEach((a=>o.error(a,f))),{errors:r,value:null}):{errors:null,value:r}},o.error=function(r,f){return f.message&&r._setTemplate(f.message),r},o.finalize=function(r,f,a){f=f||[];const{schema:d,state:m,prefs:x}=a;if(f.length){const A=o.default("failover",void 0,f,a);A!==void 0&&(m.mainstay.tracer.value(m,"failover",r,A),r=A,f=[])}if(f.length&&d._flags.error)if(typeof d._flags.error=="function"){f=d._flags.error(f),Array.isArray(f)||(f=[f]);for(const A of f)i(A instanceof Error||A instanceof l.Report,"error() must return an Error object")}else f=[d._flags.error];if(r===void 0){const A=o.default("default",r,f,a);m.mainstay.tracer.value(m,"default",r,A),r=A}if(d._flags.cast&&r!==void 0){const A=d._definition.cast[d._flags.cast];if(A.from(r)){const E=A.to(r,a);m.mainstay.tracer.value(m,"cast",r,E,d._flags.cast),r=E}}if(d.$_terms.externals&&x.externals&&x._externals!==!1)for(const{method:A}of d.$_terms.externals)m.mainstay.externals.push({method:A,schema:d,state:m,label:l.label(d._flags,m,x)});const k={value:r,errors:f.length?f:null};return d._flags.result&&(k.value=d._flags.result==="strip"?void 0:a.original,m.mainstay.tracer.value(m,d._flags.result,r,k.value),m.shadow(r,d._flags.result)),d._cache&&x.cache!==!1&&!d._refs.length&&d._cache.set(a.original,k),r===void 0||k.errors||d._flags.artifact===void 0||(m.mainstay.artifacts=m.mainstay.artifacts||new Map,m.mainstay.artifacts.has(d._flags.artifact)||m.mainstay.artifacts.set(d._flags.artifact,[]),m.mainstay.artifacts.get(d._flags.artifact).push(m.path)),k},o.prefs=function(r,f){const a=f===t.defaults;return a&&r._preferences[t.symbols.prefs]?r._preferences[t.symbols.prefs]:(f=t.preferences(f,r._preferences),a&&(r._preferences[t.symbols.prefs]=f),f)},o.default=function(r,f,a,d){const{schema:m,state:x,prefs:k}=d,A=m._flags[r];if(k.noDefaults||A===void 0)return f;if(x.mainstay.tracer.log(m,x,"rule",r,"full"),!A)return A;if(typeof A=="function"){const E=A.length?[y(x.ancestors[0]),d]:[];try{return A(...E)}catch(p){return void a.push(m.$_createError(`any.${r}`,null,{error:p},x,k))}}return typeof A!="object"?A:A[t.symbols.literal]?A.literal:t.isResolvable(A)?A.resolve(f,x,k):y(A)},o.trim=function(r,f){if(typeof r!="string")return r;const a=f.$_getRule("trim");return a&&a.args.enabled?r.trim():r},o.ignore={active:!1,debug:b,entry:b,filter:b,log:b,resolve:b,value:b},o.errorsArray=function(){const r=[];return r[t.symbols.errors]=!0,r}},2036:(_,v,h)=>{const i=h(375),y=h(9474),b=h(8160),g={};_.exports=g.Values=class{constructor(t,l){this._values=new Set(t),this._refs=new Set(l),this._lowercase=g.lowercases(t),this._override=!1}get length(){return this._values.size+this._refs.size}add(t,l){b.isResolvable(t)?this._refs.has(t)||(this._refs.add(t),l&&l.register(t)):this.has(t,null,null,!1)||(this._values.add(t),typeof t=="string"&&this._lowercase.set(t.toLowerCase(),t))}static merge(t,l,c){if(t=t||new g.Values,l){if(l._override)return l.clone();for(const o of[...l._values,...l._refs])t.add(o)}if(c)for(const o of[...c._values,...c._refs])t.remove(o);return t.length?t:null}remove(t){b.isResolvable(t)?this._refs.delete(t):(this._values.delete(t),typeof t=="string"&&this._lowercase.delete(t.toLowerCase()))}has(t,l,c,o){return!!this.get(t,l,c,o)}get(t,l,c,o){if(!this.length)return!1;if(this._values.has(t))return{value:t};if(typeof t=="string"&&t&&o){const r=this._lowercase.get(t.toLowerCase());if(r)return{value:r}}if(!this._refs.size&&typeof t!="object")return!1;if(typeof t=="object"){for(const r of this._values)if(y(r,t))return{value:r}}if(l)for(const r of this._refs){const f=r.resolve(t,l,c,null,{in:!0});if(f===void 0)continue;const a=r.in&&typeof f=="object"?Array.isArray(f)?f:Object.keys(f):[f];for(const d of a)if(typeof d==typeof t){if(o&&t&&typeof t=="string"){if(d.toLowerCase()===t.toLowerCase())return{value:d,ref:r}}else if(y(d,t))return{value:d,ref:r}}}return!1}override(){this._override=!0}values(t){if(t&&t.display){const l=[];for(const c of[...this._values,...this._refs])c!==void 0&&l.push(c);return l}return Array.from([...this._values,...this._refs])}clone(){const t=new g.Values(this._values,this._refs);return t._override=this._override,t}concat(t){i(!t._override,"Cannot concat override set of values");const l=new g.Values([...this._values,...t._values],[...this._refs,...t._refs]);return l._override=this._override,l}describe(){const t=[];this._override&&t.push({override:!0});for(const l of this._values.values())t.push(l&&typeof l=="object"?{value:l}:l);for(const l of this._refs.values())t.push(l.describe());return t}},g.Values.prototype[b.symbols.values]=!0,g.Values.prototype.slice=g.Values.prototype.clone,g.lowercases=function(t){const l=new Map;if(t)for(const c of t)typeof c=="string"&&l.set(c.toLowerCase(),c);return l}},978:(_,v,h)=>{const i=h(375),y=h(8571),b=h(1687),g=h(9621),t={};_.exports=function(l,c,o={}){if(i(l&&typeof l=="object","Invalid defaults value: must be an object"),i(!c||c===!0||typeof c=="object","Invalid source value: must be true, falsy or an object"),i(typeof o=="object","Invalid options: must be an object"),!c)return null;if(o.shallow)return t.applyToDefaultsWithShallow(l,c,o);const r=y(l);if(c===!0)return r;const f=o.nullOverride!==void 0&&o.nullOverride;return b(r,c,{nullOverride:f,mergeArrays:!1})},t.applyToDefaultsWithShallow=function(l,c,o){const r=o.shallow;i(Array.isArray(r),"Invalid keys");const f=new Map,a=c===!0?null:new Set;for(let x of r){x=Array.isArray(x)?x:x.split(".");const k=g(l,x);k&&typeof k=="object"?f.set(k,a&&g(c,x)||k):a&&a.add(x)}const d=y(l,{},f);if(!a)return d;for(const x of a)t.reachCopy(d,c,x);const m=o.nullOverride!==void 0&&o.nullOverride;return b(d,c,{nullOverride:m,mergeArrays:!1})},t.reachCopy=function(l,c,o){for(const a of o){if(!(a in c))return;const d=c[a];if(typeof d!="object"||d===null)return;c=d}const r=c;let f=l;for(let a=0;a<o.length-1;++a){const d=o[a];typeof f[d]!="object"&&(f[d]={}),f=f[d]}f[o[o.length-1]]=r}},375:(_,v,h)=>{const i=h(7916);_.exports=function(y,...b){if(!y)throw b.length===1&&b[0]instanceof Error?b[0]:new i(b)}},8571:(_,v,h)=>{const i=h(9621),y=h(4277),b=h(7043),g={needsProtoHack:new Set([y.set,y.map,y.weakSet,y.weakMap])};_.exports=g.clone=function(t,l={},c=null){if(typeof t!="object"||t===null)return t;let o=g.clone,r=c;if(l.shallow){if(l.shallow!==!0)return g.cloneWithShallow(t,l);o=m=>m}else if(r){const m=r.get(t);if(m)return m}else r=new Map;const f=y.getInternalProto(t);if(f===y.buffer)return!1;if(f===y.date)return new Date(t.getTime());if(f===y.regex)return new RegExp(t);const a=g.base(t,f,l);if(a===t)return t;if(r&&r.set(t,a),f===y.set)for(const m of t)a.add(o(m,l,r));else if(f===y.map)for(const[m,x]of t)a.set(m,o(x,l,r));const d=b.keys(t,l);for(const m of d){if(m==="__proto__")continue;if(f===y.array&&m==="length"){a.length=t.length;continue}const x=Object.getOwnPropertyDescriptor(t,m);x?x.get||x.set?Object.defineProperty(a,m,x):x.enumerable?a[m]=o(t[m],l,r):Object.defineProperty(a,m,{enumerable:!1,writable:!0,configurable:!0,value:o(t[m],l,r)}):Object.defineProperty(a,m,{enumerable:!0,writable:!0,configurable:!0,value:o(t[m],l,r)})}return a},g.cloneWithShallow=function(t,l){const c=l.shallow;(l=Object.assign({},l)).shallow=!1;const o=new Map;for(const r of c){const f=i(t,r);typeof f!="object"&&typeof f!="function"||o.set(f,f)}return g.clone(t,l,o)},g.base=function(t,l,c){if(c.prototype===!1)return g.needsProtoHack.has(l)?new l.constructor:l===y.array?[]:{};const o=Object.getPrototypeOf(t);if(o&&o.isImmutable)return t;if(l===y.array){const r=[];return o!==l&&Object.setPrototypeOf(r,o),r}if(g.needsProtoHack.has(l)){const r=new o.constructor;return o!==l&&Object.setPrototypeOf(r,o),r}return Object.create(o)}},9474:(_,v,h)=>{const i=h(4277),y={mismatched:null};_.exports=function(b,g,t){return t=Object.assign({prototype:!0},t),!!y.isDeepEqual(b,g,t,[])},y.isDeepEqual=function(b,g,t,l){if(b===g)return b!==0||1/b==1/g;const c=typeof b;if(c!==typeof g||b===null||g===null)return!1;if(c==="function"){if(!t.deepFunction||b.toString()!==g.toString())return!1}else if(c!=="object")return b!=b&&g!=g;const o=y.getSharedType(b,g,!!t.prototype);switch(o){case i.buffer:return!1;case i.promise:return b===g;case i.regex:return b.toString()===g.toString();case y.mismatched:return!1}for(let r=l.length-1;r>=0;--r)if(l[r].isSame(b,g))return!0;l.push(new y.SeenEntry(b,g));try{return!!y.isDeepEqualObj(o,b,g,t,l)}finally{l.pop()}},y.getSharedType=function(b,g,t){if(t)return Object.getPrototypeOf(b)!==Object.getPrototypeOf(g)?y.mismatched:i.getInternalProto(b);const l=i.getInternalProto(b);return l!==i.getInternalProto(g)?y.mismatched:l},y.valueOf=function(b){const g=b.valueOf;if(g===void 0)return b;try{return g.call(b)}catch(t){return t}},y.hasOwnEnumerableProperty=function(b,g){return Object.prototype.propertyIsEnumerable.call(b,g)},y.isSetSimpleEqual=function(b,g){for(const t of Set.prototype.values.call(b))if(!Set.prototype.has.call(g,t))return!1;return!0},y.isDeepEqualObj=function(b,g,t,l,c){const{isDeepEqual:o,valueOf:r,hasOwnEnumerableProperty:f}=y,{keys:a,getOwnPropertySymbols:d}=Object;if(b===i.array){if(!l.part){if(g.length!==t.length)return!1;for(let E=0;E<g.length;++E)if(!o(g[E],t[E],l,c))return!1;return!0}for(const E of g)for(const p of t)if(o(E,p,l,c))return!0}else if(b===i.set){if(g.size!==t.size)return!1;if(!y.isSetSimpleEqual(g,t)){const E=new Set(Set.prototype.values.call(t));for(const p of Set.prototype.values.call(g)){if(E.delete(p))continue;let w=!1;for(const T of E)if(o(p,T,l,c)){E.delete(T),w=!0;break}if(!w)return!1}}}else if(b===i.map){if(g.size!==t.size)return!1;for(const[E,p]of Map.prototype.entries.call(g))if(p===void 0&&!Map.prototype.has.call(t,E)||!o(p,Map.prototype.get.call(t,E),l,c))return!1}else if(b===i.error&&(g.name!==t.name||g.message!==t.message))return!1;const m=r(g),x=r(t);if((g!==m||t!==x)&&!o(m,x,l,c))return!1;const k=a(g);if(!l.part&&k.length!==a(t).length&&!l.skip)return!1;let A=0;for(const E of k)if(l.skip&&l.skip.includes(E))t[E]===void 0&&++A;else if(!f(t,E)||!o(g[E],t[E],l,c))return!1;if(!l.part&&k.length-A!==a(t).length)return!1;if(l.symbols!==!1){const E=d(g),p=new Set(d(t));for(const w of E){if(!l.skip||!l.skip.includes(w)){if(f(g,w)){if(!f(t,w)||!o(g[w],t[w],l,c))return!1}else if(f(t,w))return!1}p.delete(w)}for(const w of p)if(f(t,w))return!1}return!0},y.SeenEntry=class{constructor(b,g){this.obj=b,this.ref=g}isSame(b,g){return this.obj===b&&this.ref===g}}},7916:(_,v,h)=>{const i=h(8761);_.exports=class extends Error{constructor(y){super(y.filter((b=>b!=="")).map((b=>typeof b=="string"?b:b instanceof Error?b.message:i(b))).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,v.assert)}}},5277:_=>{const v={};_.exports=function(h){if(!h)return"";let i="";for(let y=0;y<h.length;++y){const b=h.charCodeAt(y);v.isSafe(b)?i+=h[y]:i+=v.escapeHtmlChar(b)}return i},v.escapeHtmlChar=function(h){return v.namedHtml.get(h)||(h>=256?"&#"+h+";":`&#x${h.toString(16).padStart(2,"0")};`)},v.isSafe=function(h){return v.safeCharCodes.has(h)},v.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),v.safeCharCodes=(function(){const h=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||i===32||i===46||i===44||i===45||i===58||i===95)&&h.add(i);return h})()},6064:_=>{_.exports=function(v){return v.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:_=>{_.exports=function(){}},1687:(_,v,h)=>{const i=h(375),y=h(8571),b=h(7043),g={};_.exports=g.merge=function(t,l,c){if(i(t&&typeof t=="object","Invalid target value: must be an object"),i(l==null||typeof l=="object","Invalid source value: must be null, undefined, or an object"),!l)return t;if(c=Object.assign({nullOverride:!0,mergeArrays:!0},c),Array.isArray(l)){i(Array.isArray(t),"Cannot merge array onto an object"),c.mergeArrays||(t.length=0);for(let r=0;r<l.length;++r)t.push(y(l[r],{symbols:c.symbols}));return t}const o=b.keys(l,c);for(let r=0;r<o.length;++r){const f=o[r];if(f==="__proto__"||!Object.prototype.propertyIsEnumerable.call(l,f))continue;const a=l[f];if(a&&typeof a=="object"){if(t[f]===a)continue;!t[f]||typeof t[f]!="object"||Array.isArray(t[f])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[f]=y(a,{symbols:c.symbols}):g.merge(t[f],a,c)}else(a!=null||c.nullOverride)&&(t[f]=a)}return t}},9621:(_,v,h)=>{const i=h(375),y={};_.exports=function(b,g,t){if(g===!1||g==null)return b;typeof(t=t||{})=="string"&&(t={separator:t});const l=Array.isArray(g);i(!l||!t.separator,"Separator option is not valid for array-based chain");const c=l?g:g.split(t.separator||".");let o=b;for(let r=0;r<c.length;++r){let f=c[r];const a=t.iterables&&y.iterables(o);if(Array.isArray(o)||a==="set"){const d=Number(f);Number.isInteger(d)&&(f=d<0?o.length+d:d)}if(!o||typeof o=="function"&&t.functions===!1||!a&&o[f]===void 0){i(!t.strict||r+1===c.length,"Missing segment",f,"in reach path ",g),i(typeof o=="object"||t.functions===!0||typeof o!="function","Invalid segment",f,"in reach path ",g),o=t.default;break}o=a?a==="set"?[...o][f]:o.get(f):o[f]}return o},y.iterables=function(b){return b instanceof Set?"set":b instanceof Map?"map":void 0}},8761:_=>{_.exports=function(...v){try{return JSON.stringify(...v)}catch(h){return"[Cannot display object: "+h.message+"]"}}},4277:(_,v)=>{const h={};v=_.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},h.typeMap=new Map([["[object Error]",v.error],["[object Map]",v.map],["[object Promise]",v.promise],["[object Set]",v.set],["[object WeakMap]",v.weakMap],["[object WeakSet]",v.weakSet]]),v.getInternalProto=function(i){if(Array.isArray(i))return v.array;if(i instanceof Date)return v.date;if(i instanceof RegExp)return v.regex;if(i instanceof Error)return v.error;const y=Object.prototype.toString.call(i);return h.typeMap.get(y)||v.generic}},7043:(_,v)=>{v.keys=function(h,i={}){return i.symbols!==!1?Reflect.ownKeys(h):Object.getOwnPropertyNames(h)}},3652:(_,v,h)=>{const i=h(375),y={};v.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(b,g){const t=[].concat((g=g||{}).before||[]),l=[].concat(g.after||[]),c=g.group||"?",o=g.sort||0;i(!t.includes(c),`Item cannot come before itself: ${c}`),i(!t.includes("?"),"Item cannot come before unassociated items"),i(!l.includes(c),`Item cannot come after itself: ${c}`),i(!l.includes("?"),"Item cannot come after unassociated items"),Array.isArray(b)||(b=[b]);for(const r of b){const f={seq:this._items.length,sort:o,before:t,after:l,group:c,node:r};this._items.push(f)}if(!g.manual){const r=this._sort();i(r,"item",c!=="?"?`added into group ${c}`:"","created a dependencies error")}return this.nodes}merge(b){Array.isArray(b)||(b=[b]);for(const t of b)if(t)for(const l of t._items)this._items.push(Object.assign({},l));this._items.sort(y.mergeSort);for(let t=0;t<this._items.length;++t)this._items[t].seq=t;const g=this._sort();return i(g,"merge created a dependencies error"),this.nodes}sort(){const b=this._sort();return i(b,"sort created a dependencies error"),this.nodes}_sort(){const b={},g=Object.create(null),t=Object.create(null);for(const f of this._items){const a=f.seq,d=f.group;t[d]=t[d]||[],t[d].push(a),b[a]=f.before;for(const m of f.after)g[m]=g[m]||[],g[m].push(a)}for(const f in b){const a=[];for(const d in b[f]){const m=b[f][d];t[m]=t[m]||[],a.push(...t[m])}b[f]=a}for(const f in g)if(t[f])for(const a of t[f])b[a].push(...g[f]);const l={};for(const f in b){const a=b[f];for(const d of a)l[d]=l[d]||[],l[d].push(f)}const c={},o=[];for(let f=0;f<this._items.length;++f){let a=f;if(l[f]){a=null;for(let d=0;d<this._items.length;++d){if(c[d]===!0)continue;l[d]||(l[d]=[]);const m=l[d].length;let x=0;for(let k=0;k<m;++k)c[l[d][k]]&&++x;if(x===m){a=d;break}}}a!==null&&(c[a]=!0,o.push(a))}if(o.length!==this._items.length)return!1;const r={};for(const f of this._items)r[f.seq]=f;this._items=[],this.nodes=[];for(const f of o){const a=r[f];this.nodes.push(a.node),this._items.push(a)}return!0}},y.mergeSort=(b,g)=>b.sort===g.sort?0:b.sort<g.sort?-1:1},5380:(_,v,h)=>{const i=h(443),y=h(2178),b={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:i.URL||URL};v.analyze=function(g,t={}){if(!g)return y.code("DOMAIN_NON_EMPTY_STRING");if(typeof g!="string")throw new Error("Invalid input: domain must be a string");if(g.length>256)return y.code("DOMAIN_TOO_LONG");if(b.nonAsciiRx.test(g)){if(t.allowUnicode===!1)return y.code("DOMAIN_INVALID_UNICODE_CHARS");g=g.normalize("NFC")}if(b.domainControlRx.test(g))return y.code("DOMAIN_INVALID_CHARS");g=b.punycode(g),t.allowFullyQualified&&g[g.length-1]==="."&&(g=g.slice(0,-1));const l=t.minDomainSegments||b.minDomainSegments,c=g.split(".");if(c.length<l)return y.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&c.length>t.maxDomainSegments)return y.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=t.tlds;if(o){const r=c[c.length-1].toLowerCase();if(o.deny&&o.deny.has(r)||o.allow&&!o.allow.has(r))return y.code("DOMAIN_FORBIDDEN_TLDS")}for(let r=0;r<c.length;++r){const f=c[r];if(!f.length)return y.code("DOMAIN_EMPTY_SEGMENT");if(f.length>63)return y.code("DOMAIN_LONG_SEGMENT");if(r<c.length-1){if(!b.domainSegmentRx.test(f))return y.code("DOMAIN_INVALID_CHARS")}else if(!b.tldSegmentRx.test(f))return y.code("DOMAIN_INVALID_TLDS_CHARS")}return null},v.isValid=function(g,t){return!v.analyze(g,t)},b.punycode=function(g){g.includes("%")&&(g=g.replace(/%/g,"%25"));try{return new b.URL(`http://${g}`).host}catch{return g}}},1745:(_,v,h)=>{const i=h(9848),y=h(5380),b=h(2178),g={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(i.TextEncoder||TextEncoder)};v.analyze=function(t,l){return g.email(t,l)},v.isValid=function(t,l){return!g.email(t,l)},g.email=function(t,l={}){if(typeof t!="string")throw new Error("Invalid input: email must be a string");if(!t)return b.code("EMPTY_STRING");const c=!g.nonAsciiRx.test(t);if(!c){if(l.allowUnicode===!1)return b.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const o=t.split("@");if(o.length!==2)return o.length>2?b.code("MULTIPLE_AT_CHAR"):b.code("MISSING_AT_CHAR");const[r,f]=o;if(!r)return b.code("EMPTY_LOCAL");if(!l.ignoreLength){if(t.length>254)return b.code("ADDRESS_TOO_LONG");if(g.encoder.encode(r).length>64)return b.code("LOCAL_TOO_LONG")}return g.local(r,c)||y.analyze(f,l)},g.local=function(t,l){const c=t.split(".");for(const o of c){if(!o.length)return b.code("EMPTY_LOCAL_SEGMENT");if(l){if(!g.atextRx.test(o))return b.code("INVALID_LOCAL_CHARS")}else for(const r of o){if(g.atextRx.test(r))continue;const f=g.binary(r);if(!g.atomRx.test(f))return b.code("INVALID_LOCAL_CHARS")}}},g.binary=function(t){return Array.from(g.encoder.encode(t)).map((l=>String.fromCharCode(l))).join("")},g.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,g.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(_,v)=>{v.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},v.code=function(h){return{code:h,error:v.codes[h]}}},9959:(_,v,h)=>{const i=h(375),y=h(5752);v.regex=function(b={}){i(b.cidr===void 0||typeof b.cidr=="string","options.cidr must be a string");const g=b.cidr?b.cidr.toLowerCase():"optional";i(["required","optional","forbidden"].includes(g),"options.cidr must be one of required, optional, forbidden"),i(b.version===void 0||typeof b.version=="string"||Array.isArray(b.version),"options.version must be a string or an array of string");let t=b.version||["ipv4","ipv6","ipvfuture"];Array.isArray(t)||(t=[t]),i(t.length>=1,"options.version must have at least 1 version specified");for(let o=0;o<t.length;++o)i(typeof t[o]=="string","options.version must only contain strings"),t[o]=t[o].toLowerCase(),i(["ipv4","ipv6","ipvfuture"].includes(t[o]),"options.version contains unknown version "+t[o]+" - must be one of ipv4, ipv6, ipvfuture");t=Array.from(new Set(t));const l=`(?:${t.map((o=>{if(g==="forbidden")return y.ip[o];const r=`\\/${o==="ipv4"?y.ip.v4Cidr:y.ip.v6Cidr}`;return g==="required"?`${y.ip[o]}${r}`:`${y.ip[o]}(?:${r})?`})).join("|")})`,c=new RegExp(`^${l}$`);return{cidr:g,versions:t,regex:c,raw:l}}},5752:(_,v,h)=>{const i=h(375),y=h(6064),b={generate:function(){const g={},t="\\dA-Fa-f",l="["+t+"]",c="\\w-\\.~",o="!\\$&'\\(\\)\\*\\+,;=",r="%"+t,f=c+r+o+":@",a="["+f+"]",d="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";g.ipv4address="(?:"+d+"\\.){3}"+d;const m=l+"{1,4}",x="(?:"+m+":"+m+"|"+g.ipv4address+")",k="(?:"+m+":){6}"+x,A="::(?:"+m+":){5}"+x,E="(?:"+m+")?::(?:"+m+":){4}"+x,p="(?:(?:"+m+":){0,1}"+m+")?::(?:"+m+":){3}"+x,w="(?:(?:"+m+":){0,2}"+m+")?::(?:"+m+":){2}"+x,T="(?:(?:"+m+":){0,3}"+m+")?::"+m+":"+x,R="(?:(?:"+m+":){0,4}"+m+")?::"+x,N="(?:(?:"+m+":){0,5}"+m+")?::"+m,C="(?:(?:"+m+":){0,6}"+m+")?::";g.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",g.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",g.ipv6address="(?:"+k+"|"+A+"|"+E+"|"+p+"|"+w+"|"+T+"|"+R+"|"+N+"|"+C+")",g.ipvFuture="v"+l+"+\\.["+c+o+":]+",g.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",g.schemeRegex=new RegExp(g.scheme);const $="["+c+r+o+":]*",M="["+c+r+o+"]{1,255}",P="(?:\\[(?:"+g.ipv6address+"|"+g.ipvFuture+")\\]|"+g.ipv4address+"|"+M+")",z="(?:"+$+"@)?"+P+"(?::\\d*)?",K="(?:"+$+"@)?("+P+")(?::\\d*)?",ee=a+"*",W=a+"+",D="(?:\\/"+ee+")*",J="\\/(?:"+W+D+")?",B=W+D,X="["+c+r+o+"@]+"+D,q="(?:\\/\\/\\/"+ee+D+")";return g.hierPart="(?:(?:\\/\\/"+z+D+")|"+J+"|"+B+"|"+q+")",g.hierPartCapture="(?:(?:\\/\\/"+K+D+")|"+J+"|"+B+")",g.relativeRef="(?:(?:\\/\\/"+z+D+")|"+J+"|"+X+"|)",g.relativeRefCapture="(?:(?:\\/\\/"+K+D+")|"+J+"|"+X+"|)",g.query="["+f+"\\/\\?]*(?=#|$)",g.queryWithSquareBrackets="["+f+"\\[\\]\\/\\?]*(?=#|$)",g.fragment="["+f+"\\/\\?]*",g}};b.rfc3986=b.generate(),v.ip={v4Cidr:b.rfc3986.ipv4Cidr,v6Cidr:b.rfc3986.ipv6Cidr,ipv4:b.rfc3986.ipv4address,ipv6:b.rfc3986.ipv6address,ipvfuture:b.rfc3986.ipvFuture},b.createRegex=function(g){const t=b.rfc3986,l="(?:\\?"+(g.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",c=g.domain?t.relativeRefCapture:t.relativeRef;if(g.relativeOnly)return b.wrap(c+l);let o="";if(g.scheme){i(g.scheme instanceof RegExp||typeof g.scheme=="string"||Array.isArray(g.scheme),"scheme must be a RegExp, String, or Array");const a=[].concat(g.scheme);i(a.length>=1,"scheme must have at least 1 scheme specified");const d=[];for(let m=0;m<a.length;++m){const x=a[m];i(x instanceof RegExp||typeof x=="string","scheme at position "+m+" must be a RegExp or String"),x instanceof RegExp?d.push(x.source.toString()):(i(t.schemeRegex.test(x),"scheme at position "+m+" must be a valid scheme"),d.push(y(x)))}o=d.join("|")}const r="(?:"+(o?"(?:"+o+")":t.scheme)+":"+(g.domain?t.hierPartCapture:t.hierPart)+")",f=g.allowRelative?"(?:"+r+"|"+c+")":r;return b.wrap(f+l,o)},b.wrap=function(g,t){return{raw:g=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${g}`,regex:new RegExp(`^${g}$`),scheme:t}},b.uriRegex=b.createRegex({}),v.regex=function(g={}){return g.scheme||g.allowRelative||g.relativeOnly||g.allowQuerySquareBrackets||g.domain?b.createRegex(g):b.uriRegex}},1447:(_,v)=>{const h={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};v.Parser=class{constructor(i,y={}){if(!y[h.settings]&&y.constants)for(const b in y.constants){const g=y.constants[b];if(g!==null&&!["boolean","number","string"].includes(typeof g))throw new Error(`Formula constant ${b} contains invalid ${typeof g} value type`)}this.settings=y[h.settings]?y:Object.assign({[h.settings]:!0,constants:{},functions:{}},y),this.single=null,this._parts=null,this._parse(i)}_parse(i){let y=[],b="",g=0,t=!1;const l=o=>{if(g)throw new Error("Formula missing closing parenthesis");const r=y.length?y[y.length-1]:null;if(t||b||o){if(r&&r.type==="reference"&&o===")")return r.type="function",r.value=this._subFormula(b,r.value),void(b="");if(o===")"){const f=new v.Parser(b,this.settings);y.push({type:"segment",value:f})}else if(t){if(t==="]")return y.push({type:"reference",value:b}),void(b="");y.push({type:"literal",value:b})}else if(h.operatorCharacters.includes(b))r&&r.type==="operator"&&h.operators.includes(r.value+b)?r.value+=b:y.push({type:"operator",value:b});else if(b.match(h.numberRx))y.push({type:"constant",value:parseFloat(b)});else if(this.settings.constants[b]!==void 0)y.push({type:"constant",value:this.settings.constants[b]});else{if(!b.match(h.tokenRx))throw new Error(`Formula contains invalid token: ${b}`);y.push({type:"reference",value:b})}b=""}};for(const o of i)t?o===t?(l(),t=!1):b+=o:g?o==="("?(b+=o,++g):o===")"?(--g,g?b+=o:l(o)):b+=o:o in h.literals?t=h.literals[o]:o==="("?(l(),++g):h.operatorCharacters.includes(o)?(l(),b=o,l()):o!==" "?b+=o:l();l(),y=y.map(((o,r)=>o.type!=="operator"||o.value!=="-"||r&&y[r-1].type!=="operator"?o:{type:"operator",value:"n"}));let c=!1;for(const o of y){if(o.type==="operator"){if(h.operatorsPrefix.includes(o.value))continue;if(!c)throw new Error("Formula contains an operator in invalid position");if(!h.operators.includes(o.value))throw new Error(`Formula contains an unknown operator ${o.value}`)}else if(c)throw new Error("Formula missing expected operator");c=!c}if(!c)throw new Error("Formula contains invalid trailing operator");y.length===1&&["reference","literal","constant"].includes(y[0].type)&&(this.single={type:y[0].type==="reference"?"reference":"value",value:y[0].value}),this._parts=y.map((o=>{if(o.type==="operator")return h.operatorsPrefix.includes(o.value)?o:o.value;if(o.type!=="reference")return o.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(o.value))throw new Error(`Formula contains invalid reference ${o.value}`);return this.settings.reference?this.settings.reference(o.value):h.reference(o.value)}))}_subFormula(i,y){const b=this.settings.functions[y];if(typeof b!="function")throw new Error(`Formula contains unknown function ${y}`);let g=[];if(i){let t="",l=0,c=!1;const o=()=>{if(!t)throw new Error(`Formula contains function ${y} with invalid arguments ${i}`);g.push(t),t=""};for(let r=0;r<i.length;++r){const f=i[r];c?(t+=f,f===c&&(c=!1)):f in h.literals&&!l?(t+=f,c=h.literals[f]):f!==","||l?(t+=f,f==="("?++l:f===")"&&--l):o()}o()}return g=g.map((t=>new v.Parser(t,this.settings))),function(t){const l=[];for(const c of g)l.push(c.evaluate(t));return b.call(t,...l)}}evaluate(i){const y=this._parts.slice();for(let b=y.length-2;b>=0;--b){const g=y[b];if(g&&g.type==="operator"){const t=y[b+1];y.splice(b+1,1);const l=h.evaluate(t,i);y[b]=h.single(g.value,l)}}return h.operatorsOrder.forEach((b=>{for(let g=1;g<y.length-1;)if(b.includes(y[g])){const t=y[g],l=h.evaluate(y[g-1],i),c=h.evaluate(y[g+1],i);y.splice(g,2);const o=h.calculate(t,l,c);y[g-1]=o===0?0:o}else g+=2})),h.evaluate(y[0],i)}},v.Parser.prototype[h.symbol]=!0,h.reference=function(i){return function(y){return y&&y[i]!==void 0?y[i]:null}},h.evaluate=function(i,y){return i===null?null:typeof i=="function"?i(y):i[h.symbol]?i.evaluate(y):i},h.single=function(i,y){if(i==="!")return!y;const b=-y;return b===0?0:b},h.calculate=function(i,y,b){if(i==="??")return h.exists(y)?y:b;if(typeof y=="string"||typeof b=="string"){if(i==="+")return(y=h.exists(y)?y:"")+(h.exists(b)?b:"")}else switch(i){case"^":return Math.pow(y,b);case"*":return y*b;case"/":return y/b;case"%":return y%b;case"+":return y+b;case"-":return y-b}switch(i){case"<":return y<b;case"<=":return y<=b;case">":return y>b;case">=":return y>=b;case"==":return y===b;case"!=":return y!==b;case"&&":return y&&b;case"||":return y||b}return null},h.exists=function(i){return i!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:_=>{_.exports=JSON.parse('{"version":"17.13.3"}')}},u={},(function _(v){var h=u[v];if(h!==void 0)return h.exports;var i=u[v]={exports:{}};return n[v](i,i.exports,_),i.exports})(5107);var n,u}))})(xn)),xn.exports}var No=jo();const Q=Vn(No),nr=-1,dn=0,Dt=1,ln=2,Xn=3,Zn=4,Jn=5,Qn=6,sr=7,rr=8,Ts=typeof self=="object"?self:globalThis,Co=(s,e)=>{const n=(_,v)=>(s.set(v,_),_),u=_=>{if(s.has(_))return s.get(_);const[v,h]=e[_];switch(v){case dn:case nr:return n(h,_);case Dt:{const i=n([],_);for(const y of h)i.push(u(y));return i}case ln:{const i=n({},_);for(const[y,b]of h)i[u(y)]=u(b);return i}case Xn:return n(new Date(h),_);case Zn:{const{source:i,flags:y}=h;return n(new RegExp(i,y),_)}case Jn:{const i=n(new Map,_);for(const[y,b]of h)i.set(u(y),u(b));return i}case Qn:{const i=n(new Set,_);for(const y of h)i.add(u(y));return i}case sr:{const{name:i,message:y}=h;return n(new Ts[i](y),_)}case rr:return n(BigInt(h),_);case"BigInt":return n(Object(BigInt(h)),_);case"ArrayBuffer":return n(new Uint8Array(h).buffer,h);case"DataView":{const{buffer:i}=new Uint8Array(h);return n(new DataView(i),h)}}return n(new Ts[v](h),_)};return u},Es=s=>Co(new Map,s)(0),vt="",{toString:Oo}={},{keys:$o}=Object,St=s=>{const e=typeof s;if(e!=="object"||!s)return[dn,e];const n=Oo.call(s).slice(8,-1);switch(n){case"Array":return[Dt,vt];case"Object":return[ln,vt];case"Date":return[Xn,vt];case"RegExp":return[Zn,vt];case"Map":return[Jn,vt];case"Set":return[Qn,vt];case"DataView":return[Dt,n]}return n.includes("Array")?[Dt,n]:n.includes("Error")?[sr,n]:[ln,n]},Gt=([s,e])=>s===dn&&(e==="function"||e==="symbol"),Io=(s,e,n,u)=>{const _=(h,i)=>{const y=u.push(h)-1;return n.set(i,y),y},v=h=>{if(n.has(h))return n.get(h);let[i,y]=St(h);switch(i){case dn:{let g=h;switch(y){case"bigint":i=rr,g=h.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+y);g=null;break;case"undefined":return _([nr],h)}return _([i,g],h)}case Dt:{if(y){let l=h;return y==="DataView"?l=new Uint8Array(h.buffer):y==="ArrayBuffer"&&(l=new Uint8Array(h)),_([y,[...l]],h)}const g=[],t=_([i,g],h);for(const l of h)g.push(v(l));return t}case ln:{if(y)switch(y){case"BigInt":return _([y,h.toString()],h);case"Boolean":case"Number":case"String":return _([y,h.valueOf()],h)}if(e&&"toJSON"in h)return v(h.toJSON());const g=[],t=_([i,g],h);for(const l of $o(h))(s||!Gt(St(h[l])))&&g.push([v(l),v(h[l])]);return t}case Xn:return _([i,h.toISOString()],h);case Zn:{const{source:g,flags:t}=h;return _([i,{source:g,flags:t}],h)}case Jn:{const g=[],t=_([i,g],h);for(const[l,c]of h)(s||!(Gt(St(l))||Gt(St(c))))&&g.push([v(l),v(c)]);return t}case Qn:{const g=[],t=_([i,g],h);for(const l of h)(s||!Gt(St(l)))&&g.push(v(l));return t}}const{message:b}=h;return _([i,{name:y,message:b}],h)};return v},Ss=(s,{json:e,lossy:n}={})=>{const u=[];return Io(!(e||n),!!e,new Map,u)(s),u},Mo=typeof structuredClone=="function"?(s,e)=>e&&("json"in e||"lossy"in e)?Es(Ss(s,e)):structuredClone(s):(s,e)=>Es(Ss(s,e)),Do=ir("end"),Lo=ir("start");function ir(s){return e;function e(n){const u=n&&n.position&&n.position[s]||{};if(typeof u.line=="number"&&u.line>0&&typeof u.column=="number"&&u.column>0)return{line:u.line,column:u.column,offset:typeof u.offset=="number"&&u.offset>-1?u.offset:void 0}}}function Po(s){const e=Lo(s),n=Do(s);if(e&&n)return{start:e,end:n}}const it=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Lt={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...it,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...it],h2:[["className","sr-only"]],img:[...it,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...it,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...it],table:[...it],ul:[...it,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Qe={}.hasOwnProperty;function Bo(s,e){let n={type:"root",children:[]};const u={schema:e?{...Lt,...e}:Lt,stack:[]},_=or(u,s);return _&&(Array.isArray(_)?_.length===1?n=_[0]:n.children=_:n=_),n}function or(s,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return Fo(s,n);case"doctype":return zo(s,n);case"element":return Uo(s,n);case"root":return qo(s,n);case"text":return Wo(s,n)}}}function Fo(s,e){if(s.schema.allowComments){const n=typeof e.value=="string"?e.value:"",u=n.indexOf("-->"),v={type:"comment",value:u<0?n:n.slice(0,u)};return Ft(v,e),v}}function zo(s,e){if(s.schema.allowDoctypes){const n={type:"doctype"};return Ft(n,e),n}}function Uo(s,e){const n=typeof e.tagName=="string"?e.tagName:"";s.stack.push(n);const u=ar(s,e.children),_=Ho(s,e.properties);s.stack.pop();let v=!1;if(n&&n!=="*"&&(!s.schema.tagNames||s.schema.tagNames.includes(n))&&(v=!0,s.schema.ancestors&&Qe.call(s.schema.ancestors,n))){const i=s.schema.ancestors[n];let y=-1;for(v=!1;++y<i.length;)s.stack.includes(i[y])&&(v=!0)}if(!v)return s.schema.strip&&!s.schema.strip.includes(n)?u:void 0;const h={type:"element",tagName:n,properties:_,children:u};return Ft(h,e),h}function qo(s,e){const u={type:"root",children:ar(s,e.children)};return Ft(u,e),u}function Wo(s,e){const u={type:"text",value:typeof e.value=="string"?e.value:""};return Ft(u,e),u}function ar(s,e){const n=[];if(Array.isArray(e)){const u=e;let _=-1;for(;++_<u.length;){const v=or(s,u[_]);v&&(Array.isArray(v)?n.push(...v):n.push(v))}}return n}function Ho(s,e){const n=s.stack[s.stack.length-1],u=s.schema.attributes,_=s.schema.required,v=u&&Qe.call(u,n)?u[n]:void 0,h=u&&Qe.call(u,"*")?u["*"]:void 0,i=e&&typeof e=="object"?e:{},y={};let b;for(b in i)if(Qe.call(i,b)){const g=i[b];let t=As(s,Rs(v,b),b,g);t==null&&(t=As(s,Rs(h,b),b,g)),t!=null&&(y[b]=t)}if(_&&Qe.call(_,n)){const g=_[n];for(b in g)Qe.call(g,b)&&!Qe.call(y,b)&&(y[b]=g[b])}return y}function As(s,e,n,u){return e?Array.isArray(u)?Vo(s,e,n,u):lr(s,e,n,u):void 0}function Vo(s,e,n,u){let _=-1;const v=[];for(;++_<u.length;){const h=lr(s,e,n,u[_]);(typeof h=="number"||typeof h=="string")&&v.push(h)}return v}function lr(s,e,n,u){if(!(typeof u!="boolean"&&typeof u!="number"&&typeof u!="string")&&Go(s,n,u)){if(typeof e=="object"&&e.length>1){let _=!1,v=0;for(;++v<e.length;){const h=e[v];if(h&&typeof h=="object"&&"flags"in h){if(h.test(String(u))){_=!0;break}}else if(h===u){_=!0;break}}if(!_)return}return s.schema.clobber&&s.schema.clobberPrefix&&s.schema.clobber.includes(n)?s.schema.clobberPrefix+u:u}}function Go(s,e,n){const u=s.schema.protocols&&Qe.call(s.schema.protocols,e)?s.schema.protocols[e]:void 0;if(!u||u.length===0)return!0;const _=String(n),v=_.indexOf(":"),h=_.indexOf("?"),i=_.indexOf("#"),y=_.indexOf("/");if(v<0||y>-1&&v>y||h>-1&&v>h||i>-1&&v>i)return!0;let b=-1;for(;++b<u.length;){const g=u[b];if(v===g.length&&_.slice(0,g.length)===g)return!0}return!1}function Ft(s,e){const n=Po(e);e.data&&(s.data=Mo(e.data)),n&&(s.position=n)}function Rs(s,e){let n,u=-1;if(s)for(;++u<s.length;){const _=s[u],v=typeof _=="string"?_:_[0];if(v===e)return _;v==="data*"&&(n=_)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function Yo(s){return function(e){return Bo(e,s)}}const Ko=Q.string().domain({tlds:{allow:["eth"]}}),Xo=Q.string().pattern(/^0x[a-fA-F0-9]{40}$/),Zo=(s,e)=>{if(!s)return e.error("any.required");if(s.includes(".eth")){if(Ko.validate(s).error)return e.error("custom.address")}else if(Xo.validate(s).error)return e.error("custom.address");return s},cr=Q.when("useCustomRecipient",{is:!0,then:Q.string().custom(Zo),otherwise:Q.string().empty("")}).messages({"custom.address":'"Address" must be a valid Ethereum name or address'}),ur=s=>(e,n)=>{const u=n.original+"";return u.includes(".")&&u.split(".")[1].length>s?n.error("number.precision",{limit:s}):e},dr=s=>(e,n)=>{const u=Q.number().positive().unsafe(!0).label(s);try{Q.assert(e,u)}catch(_){return n.message(_.details[0].message)}return e.includes(".")&&e.split(".")[1].length>18?n.message(`"${s}" must have at most 18 decimal places after the decimal point`):e.endsWith(".")?e.splice(-1):e},Jo=Q.object().keys({title:Q.string().allow("").label("Title"),description:Q.string().allow("").label("Description"),editionSize:Q.number().integer().min(1).empty("").required().label("Edition size"),royaltyPercentage:Q.number().custom(ur(2)).min(0).max(100).empty("").required().label("Royalty percentage"),useCustomRecipient:Q.boolean().required(),customRecipient:cr.label("Address"),textType:Q.valid("text/plain","text/markdown","text/html").required()}),Qo=Q.object().keys({to:cr.label("Address"),amount:Q.number().integer().min(1).empty("").required().label("Amount")}),ea=Q.object().keys({amount:Q.number().integer().min(1).empty("").required().label("Amount")});Q.object().keys({amount:Q.number().min(1).empty("").label("Amount"),price:Q.string().custom(dr("Price")).empty("").label("Price")});const ta=Q.object().keys({amount:Q.number().min(1).empty("").required().label("Amount"),price:Q.string().custom(dr("Price")).empty("").required().label("Price")});Q.object().keys({amount:Q.number().integer().min(1).empty("").required().label("Amount")});const na=Q.object().keys({royaltyPercentage:Q.number().custom(ur(2)).min(0).max(100).empty("").required().label("Royalty percentage")}),sa={...Lt,protocols:{...Lt.protocols,src:[...Lt.protocols.src,"data"]}},ra={buy:ea,editRoyalty:na,list:ta,validMarkdown:sa,mint:Jo,transfer:Qo};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:fr,setPrototypeOf:js,isFrozen:ia,getPrototypeOf:oa,getOwnPropertyDescriptor:aa}=Object;let{freeze:ge,seal:Ae,create:Dn}=Object,{apply:Ln,construct:Pn}=typeof Reflect<"u"&&Reflect;ge||(ge=function(e){return e});Ae||(Ae=function(e){return e});Ln||(Ln=function(e,n){for(var u=arguments.length,_=new Array(u>2?u-2:0),v=2;v<u;v++)_[v-2]=arguments[v];return e.apply(n,_)});Pn||(Pn=function(e){for(var n=arguments.length,u=new Array(n>1?n-1:0),_=1;_<n;_++)u[_-1]=arguments[_];return new e(...u)});const Yt=ye(Array.prototype.forEach),la=ye(Array.prototype.lastIndexOf),Ns=ye(Array.prototype.pop),At=ye(Array.prototype.push),ca=ye(Array.prototype.splice),en=ye(String.prototype.toLowerCase),wn=ye(String.prototype.toString),kn=ye(String.prototype.match),Rt=ye(String.prototype.replace),ua=ye(String.prototype.indexOf),da=ye(String.prototype.trim),je=ye(Object.prototype.hasOwnProperty),me=ye(RegExp.prototype.test),jt=fa(TypeError);function ye(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,u=new Array(n>1?n-1:0),_=1;_<n;_++)u[_-1]=arguments[_];return Ln(s,e,u)}}function fa(s){return function(){for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return Pn(s,n)}}function G(s,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:en;js&&js(s,null);let u=e.length;for(;u--;){let _=e[u];if(typeof _=="string"){const v=n(_);v!==_&&(ia(e)||(e[u]=v),_=v)}s[_]=!0}return s}function pa(s){for(let e=0;e<s.length;e++)je(s,e)||(s[e]=null);return s}function Ie(s){const e=Dn(null);for(const[n,u]of fr(s))je(s,n)&&(Array.isArray(u)?e[n]=pa(u):u&&typeof u=="object"&&u.constructor===Object?e[n]=Ie(u):e[n]=u);return e}function Nt(s,e){for(;s!==null;){const u=aa(s,e);if(u){if(u.get)return ye(u.get);if(typeof u.value=="function")return ye(u.value)}s=oa(s)}function n(){return null}return n}const Cs=ge(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Tn=ge(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),En=ge(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ha=ge(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Sn=ge(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ma=ge(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Os=ge(["#text"]),$s=ge(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),An=ge(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Is=ge(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Kt=ge(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ga=Ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ya=Ae(/<%[\w\W]*|[\w\W]*%>/gm),ba=Ae(/\$\{[\w\W]*/gm),va=Ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),_a=Ae(/^aria-[\-\w]+$/),pr=Ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xa=Ae(/^(?:\w+script|data):/i),wa=Ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hr=Ae(/^html$/i),ka=Ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ms=Object.freeze({__proto__:null,ARIA_ATTR:_a,ATTR_WHITESPACE:wa,CUSTOM_ELEMENT:ka,DATA_ATTR:va,DOCTYPE_NAME:hr,ERB_EXPR:ya,IS_ALLOWED_URI:pr,IS_SCRIPT_OR_DATA:xa,MUSTACHE_EXPR:ga,TMPLIT_EXPR:ba});const Ct={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ta=function(){return typeof window>"u"?null:window},Ea=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let u=null;const _="data-tt-policy-suffix";n&&n.hasAttribute(_)&&(u=n.getAttribute(_));const v="dompurify"+(u?"#"+u:"");try{return e.createPolicy(v,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+v+" could not be created."),null}},Ds=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function mr(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ta();const e=U=>mr(U);if(e.version="3.3.1",e.removed=[],!s||!s.document||s.document.nodeType!==Ct.document||!s.Element)return e.isSupported=!1,e;let{document:n}=s;const u=n,_=u.currentScript,{DocumentFragment:v,HTMLTemplateElement:h,Node:i,Element:y,NodeFilter:b,NamedNodeMap:g=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:t,DOMParser:l,trustedTypes:c}=s,o=y.prototype,r=Nt(o,"cloneNode"),f=Nt(o,"remove"),a=Nt(o,"nextSibling"),d=Nt(o,"childNodes"),m=Nt(o,"parentNode");if(typeof h=="function"){const U=n.createElement("template");U.content&&U.content.ownerDocument&&(n=U.content.ownerDocument)}let x,k="";const{implementation:A,createNodeIterator:E,createDocumentFragment:p,getElementsByTagName:w}=n,{importNode:T}=u;let R=Ds();e.isSupported=typeof fr=="function"&&typeof m=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:N,ERB_EXPR:C,TMPLIT_EXPR:$,DATA_ATTR:M,ARIA_ATTR:P,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:ee}=Ms;let{IS_ALLOWED_URI:W}=Ms,D=null;const J=G({},[...Cs,...Tn,...En,...Sn,...Os]);let B=null;const X=G({},[...$s,...An,...Is,...Kt]);let q=Object.seal(Dn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ne=null,ue=null;const Z=Object.seal(Dn(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Le=!0,Ge=!0,tt=!1,Pe=!0,Ye=!1,Ke=!0,Be=!1,lt=!1,Fe=!1,ze=!1,be=!1,ct=!1,zt=!0,de=!1;const Xe="user-content-";let Tt=!0,nt=!1,Re={},Te=null;const ut=G({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dt=null;const Ue=G({},["audio","video","img","source","image","track"]);let ft=null;const qe=G({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pt="http://www.w3.org/1998/Math/MathML",ht="http://www.w3.org/2000/svg",Ee="http://www.w3.org/1999/xhtml";let We=Ee,Et=!1,st=null;const Oe=G({},[pt,ht,Ee],wn);let mt=G({},["mi","mo","mn","ms","mtext"]),gt=G({},["annotation-xml"]);const Ut=G({},["title","style","font","a","script"]);let Ze=null;const H=["application/xhtml+xml","text/html"],se="text/html";let Y=null,re=null;const yt=n.createElement("form"),ie=function(j){return j instanceof RegExp||j instanceof Function},fe=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(re&&re===j)){if((!j||typeof j!="object")&&(j={}),j=Ie(j),Ze=H.indexOf(j.PARSER_MEDIA_TYPE)===-1?se:j.PARSER_MEDIA_TYPE,Y=Ze==="application/xhtml+xml"?wn:en,D=je(j,"ALLOWED_TAGS")?G({},j.ALLOWED_TAGS,Y):J,B=je(j,"ALLOWED_ATTR")?G({},j.ALLOWED_ATTR,Y):X,st=je(j,"ALLOWED_NAMESPACES")?G({},j.ALLOWED_NAMESPACES,wn):Oe,ft=je(j,"ADD_URI_SAFE_ATTR")?G(Ie(qe),j.ADD_URI_SAFE_ATTR,Y):qe,dt=je(j,"ADD_DATA_URI_TAGS")?G(Ie(Ue),j.ADD_DATA_URI_TAGS,Y):Ue,Te=je(j,"FORBID_CONTENTS")?G({},j.FORBID_CONTENTS,Y):ut,ne=je(j,"FORBID_TAGS")?G({},j.FORBID_TAGS,Y):Ie({}),ue=je(j,"FORBID_ATTR")?G({},j.FORBID_ATTR,Y):Ie({}),Re=je(j,"USE_PROFILES")?j.USE_PROFILES:!1,Le=j.ALLOW_ARIA_ATTR!==!1,Ge=j.ALLOW_DATA_ATTR!==!1,tt=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ye=j.SAFE_FOR_TEMPLATES||!1,Ke=j.SAFE_FOR_XML!==!1,Be=j.WHOLE_DOCUMENT||!1,ze=j.RETURN_DOM||!1,be=j.RETURN_DOM_FRAGMENT||!1,ct=j.RETURN_TRUSTED_TYPE||!1,Fe=j.FORCE_BODY||!1,zt=j.SANITIZE_DOM!==!1,de=j.SANITIZE_NAMED_PROPS||!1,Tt=j.KEEP_CONTENT!==!1,nt=j.IN_PLACE||!1,W=j.ALLOWED_URI_REGEXP||pr,We=j.NAMESPACE||Ee,mt=j.MATHML_TEXT_INTEGRATION_POINTS||mt,gt=j.HTML_INTEGRATION_POINTS||gt,q=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&ie(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&ie(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye&&(Ge=!1),be&&(ze=!0),Re&&(D=G({},Os),B=[],Re.html===!0&&(G(D,Cs),G(B,$s)),Re.svg===!0&&(G(D,Tn),G(B,An),G(B,Kt)),Re.svgFilters===!0&&(G(D,En),G(B,An),G(B,Kt)),Re.mathMl===!0&&(G(D,Sn),G(B,Is),G(B,Kt))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?Z.tagCheck=j.ADD_TAGS:(D===J&&(D=Ie(D)),G(D,j.ADD_TAGS,Y))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?Z.attributeCheck=j.ADD_ATTR:(B===X&&(B=Ie(B)),G(B,j.ADD_ATTR,Y))),j.ADD_URI_SAFE_ATTR&&G(ft,j.ADD_URI_SAFE_ATTR,Y),j.FORBID_CONTENTS&&(Te===ut&&(Te=Ie(Te)),G(Te,j.FORBID_CONTENTS,Y)),j.ADD_FORBID_CONTENTS&&(Te===ut&&(Te=Ie(Te)),G(Te,j.ADD_FORBID_CONTENTS,Y)),Tt&&(D["#text"]=!0),Be&&G(D,["html","head","body"]),D.table&&(G(D,["tbody"]),delete ne.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw jt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw jt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=j.TRUSTED_TYPES_POLICY,k=x.createHTML("")}else x===void 0&&(x=Ea(c,_)),x!==null&&typeof k=="string"&&(k=x.createHTML(""));ge&&ge(j),re=j}},rt=G({},[...Tn,...En,...ha]),ve=G({},[...Sn,...ma]),we=function(j){let O=m(j);(!O||!O.tagName)&&(O={namespaceURI:We,tagName:"template"});const F=en(j.tagName),te=en(O.tagName);return st[j.namespaceURI]?j.namespaceURI===ht?O.namespaceURI===Ee?F==="svg":O.namespaceURI===pt?F==="svg"&&(te==="annotation-xml"||mt[te]):!!rt[F]:j.namespaceURI===pt?O.namespaceURI===Ee?F==="math":O.namespaceURI===ht?F==="math"&&gt[te]:!!ve[F]:j.namespaceURI===Ee?O.namespaceURI===ht&&!gt[te]||O.namespaceURI===pt&&!mt[te]?!1:!ve[F]&&(Ut[F]||!rt[F]):!!(Ze==="application/xhtml+xml"&&st[j.namespaceURI]):!1},ke=function(j){At(e.removed,{element:j});try{m(j).removeChild(j)}catch{f(j)}},he=function(j,O){try{At(e.removed,{attribute:O.getAttributeNode(j),from:O})}catch{At(e.removed,{attribute:null,from:O})}if(O.removeAttribute(j),j==="is")if(ze||be)try{ke(O)}catch{}else try{O.setAttribute(j,"")}catch{}},mn=function(j){let O=null,F=null;if(Fe)j="<remove></remove>"+j;else{const oe=kn(j,/^[\r\n\t ]+/);F=oe&&oe[0]}Ze==="application/xhtml+xml"&&We===Ee&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const te=x?x.createHTML(j):j;if(We===Ee)try{O=new l().parseFromString(te,Ze)}catch{}if(!O||!O.documentElement){O=A.createDocument(We,"template",null);try{O.documentElement.innerHTML=Et?k:te}catch{}}const pe=O.body||O.documentElement;return j&&F&&pe.insertBefore(n.createTextNode(F),pe.childNodes[0]||null),We===Ee?w.call(O,Be?"html":"body")[0]:Be?O.documentElement:pe},os=function(j){return E.call(j.ownerDocument||j,j,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null)},gn=function(j){return j instanceof t&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof g)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},as=function(j){return typeof i=="function"&&j instanceof i};function He(U,j,O){Yt(U,F=>{F.call(e,j,O,re)})}const ls=function(j){let O=null;if(He(R.beforeSanitizeElements,j,null),gn(j))return ke(j),!0;const F=Y(j.nodeName);if(He(R.uponSanitizeElement,j,{tagName:F,allowedTags:D}),Ke&&j.hasChildNodes()&&!as(j.firstElementChild)&&me(/<[/\w!]/g,j.innerHTML)&&me(/<[/\w!]/g,j.textContent)||j.nodeType===Ct.progressingInstruction||Ke&&j.nodeType===Ct.comment&&me(/<[/\w]/g,j.data))return ke(j),!0;if(!(Z.tagCheck instanceof Function&&Z.tagCheck(F))&&(!D[F]||ne[F])){if(!ne[F]&&us(F)&&(q.tagNameCheck instanceof RegExp&&me(q.tagNameCheck,F)||q.tagNameCheck instanceof Function&&q.tagNameCheck(F)))return!1;if(Tt&&!Te[F]){const te=m(j)||j.parentNode,pe=d(j)||j.childNodes;if(pe&&te){const oe=pe.length;for(let _e=oe-1;_e>=0;--_e){const Ve=r(pe[_e],!0);Ve.__removalCount=(j.__removalCount||0)+1,te.insertBefore(Ve,a(j))}}}return ke(j),!0}return j instanceof y&&!we(j)||(F==="noscript"||F==="noembed"||F==="noframes")&&me(/<\/no(script|embed|frames)/i,j.innerHTML)?(ke(j),!0):(Ye&&j.nodeType===Ct.text&&(O=j.textContent,Yt([N,C,$],te=>{O=Rt(O,te," ")}),j.textContent!==O&&(At(e.removed,{element:j.cloneNode()}),j.textContent=O)),He(R.afterSanitizeElements,j,null),!1)},cs=function(j,O,F){if(zt&&(O==="id"||O==="name")&&(F in n||F in yt))return!1;if(!(Ge&&!ue[O]&&me(M,O))){if(!(Le&&me(P,O))){if(!(Z.attributeCheck instanceof Function&&Z.attributeCheck(O,j))){if(!B[O]||ue[O]){if(!(us(j)&&(q.tagNameCheck instanceof RegExp&&me(q.tagNameCheck,j)||q.tagNameCheck instanceof Function&&q.tagNameCheck(j))&&(q.attributeNameCheck instanceof RegExp&&me(q.attributeNameCheck,O)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(O,j))||O==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&me(q.tagNameCheck,F)||q.tagNameCheck instanceof Function&&q.tagNameCheck(F))))return!1}else if(!ft[O]){if(!me(W,Rt(F,K,""))){if(!((O==="src"||O==="xlink:href"||O==="href")&&j!=="script"&&ua(F,"data:")===0&&dt[j])){if(!(tt&&!me(z,Rt(F,K,"")))){if(F)return!1}}}}}}}return!0},us=function(j){return j!=="annotation-xml"&&kn(j,ee)},ds=function(j){He(R.beforeSanitizeAttributes,j,null);const{attributes:O}=j;if(!O||gn(j))return;const F={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let te=O.length;for(;te--;){const pe=O[te],{name:oe,namespaceURI:_e,value:Ve}=pe,bt=Y(oe),yn=Ve;let ce=oe==="value"?yn:da(yn);if(F.attrName=bt,F.attrValue=ce,F.keepAttr=!0,F.forceKeepAttr=void 0,He(R.uponSanitizeAttribute,j,F),ce=F.attrValue,de&&(bt==="id"||bt==="name")&&(he(oe,j),ce=Xe+ce),Ke&&me(/((--!?|])>)|<\/(style|title|textarea)/i,ce)){he(oe,j);continue}if(bt==="attributename"&&kn(ce,"href")){he(oe,j);continue}if(F.forceKeepAttr)continue;if(!F.keepAttr){he(oe,j);continue}if(!Pe&&me(/\/>/i,ce)){he(oe,j);continue}Ye&&Yt([N,C,$],ps=>{ce=Rt(ce,ps," ")});const fs=Y(j.nodeName);if(!cs(fs,bt,ce)){he(oe,j);continue}if(x&&typeof c=="object"&&typeof c.getAttributeType=="function"&&!_e)switch(c.getAttributeType(fs,bt)){case"TrustedHTML":{ce=x.createHTML(ce);break}case"TrustedScriptURL":{ce=x.createScriptURL(ce);break}}if(ce!==yn)try{_e?j.setAttributeNS(_e,oe,ce):j.setAttribute(oe,ce),gn(j)?ke(j):Ns(e.removed)}catch{he(oe,j)}}He(R.afterSanitizeAttributes,j,null)},Nr=function U(j){let O=null;const F=os(j);for(He(R.beforeSanitizeShadowDOM,j,null);O=F.nextNode();)He(R.uponSanitizeShadowNode,O,null),ls(O),ds(O),O.content instanceof v&&U(O.content);He(R.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(U){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=null,F=null,te=null,pe=null;if(Et=!U,Et&&(U="<!-->"),typeof U!="string"&&!as(U))if(typeof U.toString=="function"){if(U=U.toString(),typeof U!="string")throw jt("dirty is not a string, aborting")}else throw jt("toString is not a function");if(!e.isSupported)return U;if(lt||fe(j),e.removed=[],typeof U=="string"&&(nt=!1),nt){if(U.nodeName){const Ve=Y(U.nodeName);if(!D[Ve]||ne[Ve])throw jt("root node is forbidden and cannot be sanitized in-place")}}else if(U instanceof i)O=mn("<!---->"),F=O.ownerDocument.importNode(U,!0),F.nodeType===Ct.element&&F.nodeName==="BODY"||F.nodeName==="HTML"?O=F:O.appendChild(F);else{if(!ze&&!Ye&&!Be&&U.indexOf("<")===-1)return x&&ct?x.createHTML(U):U;if(O=mn(U),!O)return ze?null:ct?k:""}O&&Fe&&ke(O.firstChild);const oe=os(nt?U:O);for(;te=oe.nextNode();)ls(te),ds(te),te.content instanceof v&&Nr(te.content);if(nt)return U;if(ze){if(be)for(pe=p.call(O.ownerDocument);O.firstChild;)pe.appendChild(O.firstChild);else pe=O;return(B.shadowroot||B.shadowrootmode)&&(pe=T.call(u,pe,!0)),pe}let _e=Be?O.outerHTML:O.innerHTML;return Be&&D["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&me(hr,O.ownerDocument.doctype.name)&&(_e="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+_e),Ye&&Yt([N,C,$],Ve=>{_e=Rt(_e,Ve," ")}),x&&ct?x.createHTML(_e):_e},e.setConfig=function(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fe(U),lt=!0},e.clearConfig=function(){re=null,lt=!1},e.isValidAttribute=function(U,j,O){re||fe({});const F=Y(U),te=Y(j);return cs(F,te,O)},e.addHook=function(U,j){typeof j=="function"&&At(R[U],j)},e.removeHook=function(U,j){if(j!==void 0){const O=la(R[U],j);return O===-1?void 0:ca(R[U],O,1)[0]}return Ns(R[U])},e.removeHooks=function(U){R[U]=[]},e.removeAllHooks=function(){R=Ds()},e}var Sa=mr();const Aa=["html","head","body","div","span","p","br","hr","h1","h2","h3","h4","h5","h6","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","th","td","caption","article","section","nav","aside","header","footer","main","figure","figcaption","details","summary","a","strong","b","em","i","u","s","mark","small","sub","sup","blockquote","q","cite","code","pre","kbd","var","samp","img","audio","video","source","track","picture","style","svg","g","path","rect","circle","ellipse","line","polyline","polygon","text","tspan","textPath","defs","use","symbol","clipPath","mask","pattern","linearGradient","radialGradient","stop","filter","feGaussianBlur","feOffset","feBlend","feColorMatrix","feComposite","feMerge","feMergeNode","feFlood","image","title","desc"],Ra={ALLOWED_TAGS:Aa,ADD_ATTR:["class","style","target","viewBox","xmlns","fill","stroke","stroke-width","d","x","y","width","height","cx","cy","r","rx","ry","x1","y1","x2","y2","points","transform","opacity","id","href","xlink:href","offset","stop-color","stop-opacity","gradientUnits","gradientTransform","spreadMethod","preserveAspectRatio","clip-path","filter","mask","font-size","font-family","text-anchor","dominant-baseline"],FORCE_BODY:!0},Rn=()=>typeof window<"u"?Math.max(Math.round(window.innerHeight*.6),400):400;function es({source:s,compact:e=!1}){const[n,u]=L.useState(Rn),[_,v]=L.useState(!1),h=L.useRef(null),i=()=>{var t,l,c;if(h.current)try{const o=(c=(l=(t=h.current.contentWindow)==null?void 0:t.document)==null?void 0:l.body)==null?void 0:c.scrollHeight;o&&o>100&&u(o+32)}catch{}},y=()=>{i(),setTimeout(()=>{i(),v(!0)},150)};L.useEffect(()=>{v(!1),u(Rn())},[s]);const b=t=>`<!DOCTYPE html>
<html>
<head>
    <style>
        * { box-sizing: border-box; }
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100%;
            background: #18181b;
            color: #e4e4e7;
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body>${Sa.sanitize(t,Ra)}</body>
</html>`;if(e)return S.jsx("iframe",{ref:h,style:{width:"100%",height:"100%",border:"none",display:"block"},srcDoc:b(s),sandbox:"allow-same-origin allow-scripts",title:"NFT HTML Content"});const g=Rn();return S.jsxs("div",{style:{position:"relative"},children:[!_&&S.jsx("div",{style:{height:`${g}px`},children:S.jsx(Jt,{height:"100%",baseColor:"#27272a",highlightColor:"#3f3f46"})}),S.jsx("iframe",{ref:h,onLoad:y,style:{width:"100%",height:_?`${n}px`:"0",border:"none",display:"block",visibility:_?"visible":"hidden",position:_?"relative":"absolute"},srcDoc:b(s),sandbox:"allow-same-origin allow-scripts",title:"NFT HTML Content"})]})}const ja=L.lazy(()=>le(()=>import("./index-CANHyuH1.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5])).then(async s=>(await le(()=>import("./mode-html-dl0JeqJC.js").then(n=>n.m),__vite__mapDeps([6,1])),await le(()=>import("./theme-monokai-Cz4eVLlC.js").then(n=>n.t),__vite__mapDeps([7,1])),await le(()=>import("./ext-language_tools-C41EfQXa.js").then(n=>n.e),__vite__mapDeps([8,1])),(await le(()=>import("./ace-RY8oei4F.js").then(n=>n.a),__vite__mapDeps([9,1,2]))).config.set("useWorker",!1),{default:s.default}))),Na=L.lazy(()=>le(()=>import("./index-BYbqrZW7.js").then(s=>s.i),__vite__mapDeps([10,1])).then(s=>({default:s.Split})));function Ca({value:s,setValue:e,setPreviewOpen:n}){return S.jsx("div",{className:"rounded-lg border border-ink-700 relative",style:{zIndex:0},children:S.jsx("div",{style:{height:"500px"},children:S.jsxs(Na,{horizontal:!1,onSplitChanged:()=>window.dispatchEvent(new Event("resize")),children:[S.jsx("div",{className:"h-full",children:S.jsx(ja,{mode:"html",theme:"monokai",onChange:e,value:s,name:"html-editor",editorProps:{$blockScrolling:!1},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showPrintMargin:!1},width:"100%",height:"100%",fontSize:14})}),S.jsxs("div",{className:"h-full overflow-auto bg-ink-950 relative",children:[S.jsx("button",{type:"button",onClick:()=>n(!0),className:"absolute top-2 right-2 z-10 p-1.5 bg-ink-800/80 hover:bg-ink-700 rounded text-ink-400 hover:text-white transition-colors",title:"Expand preview",children:S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),S.jsx(es,{source:s})]})]})})})}function cc({value:s,setValue:e}){const[n,u]=L.useState(!1);return S.jsxs(L.Fragment,{children:[S.jsx(L.Suspense,{fallback:S.jsx("div",{className:"rounded-lg border border-ink-700 bg-ink-900 flex items-center justify-center",style:{height:"500px"},children:S.jsx("div",{className:"text-ink-400",children:"Loading editor..."})}),children:S.jsx(Ca,{value:s,setValue:e,setPreviewOpen:u})}),n&&S.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[S.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>u(!1)}),S.jsxs("div",{className:"relative w-full max-w-4xl h-[80vh] bg-ink-950 rounded-xl border border-ink-700 overflow-hidden",children:[S.jsx("div",{className:"absolute top-3 right-3 z-10",children:S.jsx("button",{type:"button",onClick:()=>u(!1),className:"p-2 bg-ink-800 hover:bg-ink-700 rounded-lg text-ink-400 hover:text-white transition-colors",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),S.jsx("div",{className:"h-full",children:S.jsx(es,{source:s})})]})]})]})}function Oa({type:s}){if(!s)return null;const e={"text/plain":{label:"TXT",bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:""},"text/markdown":{label:"MD",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400",icon:"#"},"text/html":{label:"HTML",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",icon:"<>"}},n=e[s]||e["text/plain"];return S.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-mono ${n.bg} ${n.border} ${n.text} border`,children:[S.jsx("span",{className:"opacity-60 w-4 text-center",children:n.icon}),n.label]})}function $a({id:s,prefetchedData:e}){const n=un(),[u,_]=L.useState(e?{name:e.name,description:e.description,text_uri:e.text_uri}:null),[v,h]=L.useState((e==null?void 0:e.author)||null),[i,y]=L.useState((e==null?void 0:e.content_type)||null),[b,g]=L.useState((e==null?void 0:e.content)??null),[t,l]=L.useState(!0),c=e==null?void 0:e._stats,[o,r]=L.useState((c==null?void 0:c.totalSupply)??null),[f,a]=L.useState(c!=null&&c.floorPrice?parseFloat(c.floorPrice)/1e18:null),[d,m]=L.useState((c==null?void 0:c.listedCount)??null),[x,k]=L.useState(c!=null&&c.totalVolume?parseFloat(c.totalVolume)/1e18:null),A=Ce.contractAddresses.v1.zang,E=Ce.contractAddresses.v1.marketplace;if(L.useEffect(()=>{if(!s||c!==void 0)return;(async()=>{try{const R=e?Promise.resolve(e):fetch(`/api/nft/${s}`).then(z=>z.ok?z.json():null),[N,C]=await Promise.all([R,ot.readContract({address:A,abi:_t.zang,functionName:"totalSupply",args:[BigInt(s)]})]);!e&&N&&(h(N.author),_({name:N.name,description:N.description,text_uri:N.text_uri}),y(N.content_type),g(N.content)),r(Number(C));const $=await ot.readContract({address:E,abi:_t.marketplace,functionName:"listingCount",args:[BigInt(s)]}),M=Number($);if(M>0){const z=[];for(let D=0;D<M;D++)z.push(ot.readContract({address:E,abi:_t.marketplace,functionName:"listings",args:[BigInt(s),BigInt(D)]}));const W=(await Promise.all(z)).map(([D,J,B])=>({price:D,seller:J,amount:B})).filter(D=>D.seller!==Mr);if(m(W.reduce((D,J)=>D+Number(J.amount),0)),W.length>0){const D=W.map(J=>parseFloat(gs(J.price)));a(Math.min(...D))}}else m(0);const P=await ot.getContractEvents({address:E,abi:_t.marketplace,eventName:"TokenPurchased",args:{_tokenId:BigInt(s)},fromBlock:BigInt(Ce.firstBlocks.v1.base.marketplace)});if(P.length>0){const z=P.reduce((K,ee)=>{const W=parseFloat(gs(ee.args._price)),D=Number(ee.args._amount);return K+W*D},0);k(z)}else k(0)}catch(R){Si(R)&&l(!1)}})()},[s,c,e,A,E]),!t)return null;const p=()=>n("/nft?id="+s),w=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),p())};return S.jsx("div",{className:"group relative cursor-pointer",onClick:p,onKeyDown:w,role:"button",tabIndex:0,children:S.jsxs("div",{className:"relative bg-ink-900/40 border border-ink-800 rounded-xl overflow-hidden transition-all duration-300 hover:border-ink-600 hover:bg-ink-900/60 hover:-translate-y-1 hover:shadow-xl hover:shadow-ink-950/50",children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-ink-800/50 bg-ink-900/30",children:[S.jsxs("span",{className:"text-ink-600 text-xs font-mono",children:["#",s]}),S.jsx(Oa,{type:i})]}),S.jsxs("div",{className:"relative h-52 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 p-4 overflow-hidden",children:i&&b!==null?i==="text/html"?S.jsx("div",{className:"absolute inset-0",children:S.jsx(es,{source:b,compact:!0})}):i==="text/markdown"?S.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-ink-300","data-color-mode":"dark",children:S.jsx(ii.Markdown,{source:b,rehypePlugins:[()=>Yo(ra.validMarkdown)]})}):S.jsx("pre",{className:"font-mono text-sm text-ink-300 leading-relaxed whitespace-pre overflow-x-auto",children:b}):S.jsx("div",{className:"space-y-2",children:S.jsx(Jt,{count:5,baseColor:"#1c1c1e",highlightColor:"#2a2a2e",borderRadius:0})})}),S.jsx("div",{className:"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-ink-900/90 to-transparent pointer-events-none"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-ink-950/40",children:S.jsx("span",{className:"px-4 py-2 bg-white/10 backdrop-blur-sm rounded-lg text-white text-sm font-medium border border-white/20",children:"Read more "})})]}),S.jsxs("div",{className:"px-3 py-2.5 bg-gradient-to-b from-ink-900 to-ink-900/80",children:[S.jsxs("div",{className:"flex items-center justify-between gap-2",children:[S.jsx("h3",{className:"text-ink-100 font-medium text-sm leading-tight line-clamp-1 group-hover:text-white transition-colors flex-1 min-w-0",children:(u==null?void 0:u.name)||S.jsx(Jt,{baseColor:"#1c1c1e",highlightColor:"#2a2a2e",width:"70%"})}),v&&S.jsxs("span",{className:"text-ink-500 text-xs shrink-0",children:[S.jsx("span",{className:"text-ink-600",children:"by "}),S.jsx(Mn,{address:v,shorten:!0,nChar:4,disableLink:!0})]})]}),S.jsxs("div",{className:"flex items-center flex-wrap gap-x-1.5 gap-y-0.5 mt-1.5 text-xs",children:[o!==null?S.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[o," ed."]}):S.jsx(Jt,{width:30,baseColor:"#1c1c1e",highlightColor:"#2a2a2e"}),d!==null&&d>0&&S.jsxs(L.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-ink-500 whitespace-nowrap",children:[d," listed"]})]}),f!==null&&S.jsxs(L.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-green-400 whitespace-nowrap font-mono",children:[f<1e-4?"<0.0001":f.toFixed(4).replace(/\.?0+$/,"")," "]})]}),x!==null&&x>0&&S.jsxs(L.Fragment,{children:[S.jsx("span",{className:"text-ink-700",children:""}),S.jsxs("span",{className:"text-ink-400 whitespace-nowrap font-mono",children:[x.toFixed(4).replace(/\.?0+$/,""),"  vol"]})]})]})]})]})})}function jn({href:s,children:e,...n}){const u=un(),_=v=>{v.preventDefault(),u(s)};return S.jsx("a",{href:s,onClick:_,...n,children:e})}function Ls(){const s=un(),{address:e}=Hn(),[n,u]=L.useState(()=>{try{return localStorage.getItem("profileSetupDismissed")==="true"}catch{return!1}}),[_,v]=L.useState(!1),[h,i]=L.useState(!1);L.useEffect(()=>{if(!e){v(!1),i(!1);return}(async()=>{try{const t=await fetch(`/api/profile/${e.toLowerCase()}`);if(t.ok){const l=await t.json(),c=!l.name&&!l.bio&&!l.xUsername&&!l.instagramUsername&&!l.baseUsername;v(c)}}catch{}i(!0)})()},[e]);const y=g=>{g.stopPropagation(),u(!0);try{localStorage.setItem("profileSetupDismissed","true")}catch{}},b=h&&_&&!n;return S.jsx(Xr.Custom,{children:({account:g,chain:t,openChainModal:l,openConnectModal:c,mounted:o})=>{const r=o,f=r&&g&&t;return S.jsx("div",{...!r&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}},children:f?t.unsupported?S.jsx("button",{onClick:l,className:"p-2 flex items-center justify-center text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition-colors",title:"Wrong network",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}):b?S.jsxs("div",{className:"flex items-center gap-1 bg-accent-cyan/10 rounded-lg border border-accent-cyan/30 pl-3 pr-1",children:[S.jsxs("button",{onClick:()=>s(`/profile?address=${e}`),className:"flex items-center gap-2 py-1.5 text-sm text-accent-cyan hover:text-white transition-colors",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),S.jsx("span",{children:"Set up profile"})]}),S.jsx("button",{onClick:y,className:"p-1.5 text-accent-cyan/50 hover:text-accent-cyan transition-colors",title:"Dismiss",children:S.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):S.jsx("button",{onClick:()=>s(`/profile?address=${e}`),className:"p-2 flex items-center justify-center text-ink-400 hover:text-white hover:bg-ink-800/50 rounded-lg transition-colors",title:"Profile",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}):S.jsx("button",{onClick:c,className:"p-2 flex items-center justify-center text-ink-400 hover:text-white hover:bg-ink-800/50 rounded-lg transition-colors",title:"Connect wallet",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})})}})}function Ia(){const[s,e]=at(Js);return s?S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:S.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3",children:[S.jsx("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("div",{className:"flex-1",children:S.jsxs("p",{className:"text-red-400 text-sm",children:[S.jsx("span",{className:"font-semibold",children:"Error:"})," ",s]})}),S.jsx("button",{onClick:()=>e(null),className:"text-red-400 hover:text-red-300 transition-colors","aria-label":"Dismiss error",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}const De=Object.create(null);De.open="0";De.close="1";De.ping="2";De.pong="3";De.message="4";De.upgrade="5";De.noop="6";const tn=Object.create(null);Object.keys(De).forEach(s=>{tn[De[s]]=s});const Bn={type:"error",data:"parser error"},gr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",yr=typeof ArrayBuffer=="function",br=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ts=({type:s,data:e},n,u)=>gr&&e instanceof Blob?n?u(e):Ps(e,u):yr&&(e instanceof ArrayBuffer||br(e))?n?u(e):Ps(new Blob([e]),u):u(De[s]+(e||"")),Ps=(s,e)=>{const n=new FileReader;return n.onload=function(){const u=n.result.split(",")[1];e("b"+(u||""))},n.readAsDataURL(s)};function Bs(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Nn;function Ma(s,e){if(gr&&s.data instanceof Blob)return s.data.arrayBuffer().then(Bs).then(e);if(yr&&(s.data instanceof ArrayBuffer||br(s.data)))return e(Bs(s.data));ts(s,!1,n=>{Nn||(Nn=new TextEncoder),e(Nn.encode(n))})}const Fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",It=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Fs.length;s++)It[Fs.charCodeAt(s)]=s;const Da=s=>{let e=s.length*.75,n=s.length,u,_=0,v,h,i,y;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const b=new ArrayBuffer(e),g=new Uint8Array(b);for(u=0;u<n;u+=4)v=It[s.charCodeAt(u)],h=It[s.charCodeAt(u+1)],i=It[s.charCodeAt(u+2)],y=It[s.charCodeAt(u+3)],g[_++]=v<<2|h>>4,g[_++]=(h&15)<<4|i>>2,g[_++]=(i&3)<<6|y&63;return b},La=typeof ArrayBuffer=="function",ns=(s,e)=>{if(typeof s!="string")return{type:"message",data:vr(s,e)};const n=s.charAt(0);return n==="b"?{type:"message",data:Pa(s.substring(1),e)}:tn[n]?s.length>1?{type:tn[n],data:s.substring(1)}:{type:tn[n]}:Bn},Pa=(s,e)=>{if(La){const n=Da(s);return vr(n,e)}else return{base64:!0,data:s}},vr=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},_r="",Ba=(s,e)=>{const n=s.length,u=new Array(n);let _=0;s.forEach((v,h)=>{ts(v,!1,i=>{u[h]=i,++_===n&&e(u.join(_r))})})},Fa=(s,e)=>{const n=s.split(_r),u=[];for(let _=0;_<n.length;_++){const v=ns(n[_],e);if(u.push(v),v.type==="error")break}return u};function za(){return new TransformStream({transform(s,e){Ma(s,n=>{const u=n.length;let _;if(u<126)_=new Uint8Array(1),new DataView(_.buffer).setUint8(0,u);else if(u<65536){_=new Uint8Array(3);const v=new DataView(_.buffer);v.setUint8(0,126),v.setUint16(1,u)}else{_=new Uint8Array(9);const v=new DataView(_.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(u))}s.data&&typeof s.data!="string"&&(_[0]|=128),e.enqueue(_),e.enqueue(n)})}})}let Cn;function Xt(s){return s.reduce((e,n)=>e+n.length,0)}function Zt(s,e){if(s[0].length===e)return s.shift();const n=new Uint8Array(e);let u=0;for(let _=0;_<e;_++)n[_]=s[0][u++],u===s[0].length&&(s.shift(),u=0);return s.length&&u<s[0].length&&(s[0]=s[0].slice(u)),n}function Ua(s,e){Cn||(Cn=new TextDecoder);const n=[];let u=0,_=-1,v=!1;return new TransformStream({transform(h,i){for(n.push(h);;){if(u===0){if(Xt(n)<1)break;const y=Zt(n,1);v=(y[0]&128)===128,_=y[0]&127,_<126?u=3:_===126?u=1:u=2}else if(u===1){if(Xt(n)<2)break;const y=Zt(n,2);_=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),u=3}else if(u===2){if(Xt(n)<8)break;const y=Zt(n,8),b=new DataView(y.buffer,y.byteOffset,y.length),g=b.getUint32(0);if(g>Math.pow(2,21)-1){i.enqueue(Bn);break}_=g*Math.pow(2,32)+b.getUint32(4),u=3}else{if(Xt(n)<_)break;const y=Zt(n,_);i.enqueue(ns(v?y:Cn.decode(y),e)),u=0}if(_===0||_>s){i.enqueue(Bn);break}}}})}const xr=4;function ae(s){if(s)return qa(s)}function qa(s){for(var e in ae.prototype)s[e]=ae.prototype[e];return s}ae.prototype.on=ae.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};ae.prototype.once=function(s,e){function n(){this.off(s,n),e.apply(this,arguments)}return n.fn=e,this.on(s,n),this};ae.prototype.off=ae.prototype.removeListener=ae.prototype.removeAllListeners=ae.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+s];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var u,_=0;_<n.length;_++)if(u=n[_],u===e||u.fn===e){n.splice(_,1);break}return n.length===0&&delete this._callbacks["$"+s],this};ae.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+s],u=1;u<arguments.length;u++)e[u-1]=arguments[u];if(n){n=n.slice(0);for(var u=0,_=n.length;u<_;++u)n[u].apply(this,e)}return this};ae.prototype.emitReserved=ae.prototype.emit;ae.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};ae.prototype.hasListeners=function(s){return!!this.listeners(s).length};const fn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Wa="arraybuffer";function wr(s,...e){return e.reduce((n,u)=>(s.hasOwnProperty(u)&&(n[u]=s[u]),n),{})}const Ha=Se.setTimeout,Va=Se.clearTimeout;function pn(s,e){e.useNativeTimers?(s.setTimeoutFn=Ha.bind(Se),s.clearTimeoutFn=Va.bind(Se)):(s.setTimeoutFn=Se.setTimeout.bind(Se),s.clearTimeoutFn=Se.clearTimeout.bind(Se))}const Ga=1.33;function Ya(s){return typeof s=="string"?Ka(s):Math.ceil((s.byteLength||s.size)*Ga)}function Ka(s){let e=0,n=0;for(let u=0,_=s.length;u<_;u++)e=s.charCodeAt(u),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(u++,n+=4);return n}function kr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Xa(s){let e="";for(let n in s)s.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(s[n]));return e}function Za(s){let e={},n=s.split("&");for(let u=0,_=n.length;u<_;u++){let v=n[u].split("=");e[decodeURIComponent(v[0])]=decodeURIComponent(v[1])}return e}class Ja extends Error{constructor(e,n,u){super(e),this.description=n,this.context=u,this.type="TransportError"}}class ss extends ae{constructor(e){super(),this.writable=!1,pn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,u){return super.emitReserved("error",new Ja(e,n,u)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ns(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Xa(e);return n.length?"?"+n:""}}class Qa extends ss{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let u=0;this._polling&&(u++,this.once("pollComplete",function(){--u||n()})),this.writable||(u++,this.once("drain",function(){--u||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=u=>{if(this.readyState==="opening"&&u.type==="open"&&this.onOpen(),u.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(u)};Fa(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ba(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=kr()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Tr=!1;try{Tr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const el=Tr;function tl(){}class nl extends Qa{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let u=location.port;u||(u=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||u!==e.port}}doWrite(e,n){const u=this.request({method:"POST",data:e});u.on("success",n),u.on("error",(_,v)=>{this.onError("xhr post error",_,v)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,u)=>{this.onError("xhr poll error",n,u)}),this.pollXhr=e}}class Me extends ae{constructor(e,n,u){super(),this.createRequest=e,pn(this,u),this._opts=u,this._method=u.method||"GET",this._uri=n,this._data=u.data!==void 0?u.data:null,this._create()}_create(){var e;const n=wr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const u=this._xhr=this.createRequest(n);try{u.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){u.setDisableHeaderCheck&&u.setDisableHeaderCheck(!0);for(let _ in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(_)&&u.setRequestHeader(_,this._opts.extraHeaders[_])}}catch{}if(this._method==="POST")try{u.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{u.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(u),"withCredentials"in u&&(u.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(u.timeout=this._opts.requestTimeout),u.onreadystatechange=()=>{var _;u.readyState===3&&((_=this._opts.cookieJar)===null||_===void 0||_.parseCookies(u.getResponseHeader("set-cookie"))),u.readyState===4&&(u.status===200||u.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof u.status=="number"?u.status:0)},0))},u.send(this._data)}catch(_){this.setTimeoutFn(()=>{this._onError(_)},0);return}typeof document<"u"&&(this._index=Me.requestsCount++,Me.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=tl,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Me.requestsCount=0;Me.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zs);else if(typeof addEventListener=="function"){const s="onpagehide"in Se?"pagehide":"unload";addEventListener(s,zs,!1)}}function zs(){for(let s in Me.requests)Me.requests.hasOwnProperty(s)&&Me.requests[s].abort()}const sl=(function(){const s=Er({xdomain:!1});return s&&s.responseType!==null})();class rl extends nl{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=sl&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Me(Er,this.uri(),e)}}function Er(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||el))return new XMLHttpRequest}catch{}if(!e)try{return new Se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Sr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class il extends ss{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,u=Sr?{}:wr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(u.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,u)}catch(_){return this.emitReserved("error",_)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const u=e[n],_=n===e.length-1;ts(u,this.supportsBinary,v=>{try{this.doWrite(u,v)}catch{}_&&fn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=kr()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const On=Se.WebSocket||Se.MozWebSocket;class ol extends il{createSocket(e,n,u){return Sr?new On(e,n,u):n?new On(e,n):new On(e)}doWrite(e,n){this.ws.send(n)}}class al extends ss{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Ua(Number.MAX_SAFE_INTEGER,this.socket.binaryType),u=e.readable.pipeThrough(n).getReader(),_=za();_.readable.pipeTo(e.writable),this._writer=_.writable.getWriter();const v=()=>{u.read().then(({done:i,value:y})=>{i||(this.onPacket(y),v())}).catch(i=>{})};v();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this._writer.write(h).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const u=e[n],_=n===e.length-1;this._writer.write(u).then(()=>{_&&fn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ll={websocket:ol,webtransport:al,polling:rl},cl=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ul=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fn(s){if(s.length>8e3)throw"URI too long";const e=s,n=s.indexOf("["),u=s.indexOf("]");n!=-1&&u!=-1&&(s=s.substring(0,n)+s.substring(n,u).replace(/:/g,";")+s.substring(u,s.length));let _=cl.exec(s||""),v={},h=14;for(;h--;)v[ul[h]]=_[h]||"";return n!=-1&&u!=-1&&(v.source=e,v.host=v.host.substring(1,v.host.length-1).replace(/;/g,":"),v.authority=v.authority.replace("[","").replace("]","").replace(/;/g,":"),v.ipv6uri=!0),v.pathNames=dl(v,v.path),v.queryKey=fl(v,v.query),v}function dl(s,e){const n=/\/{2,9}/g,u=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&u.splice(0,1),e.slice(-1)=="/"&&u.splice(u.length-1,1),u}function fl(s,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(u,_,v){_&&(n[_]=v)}),n}const zn=typeof addEventListener=="function"&&typeof removeEventListener=="function",nn=[];zn&&addEventListener("offline",()=>{nn.forEach(s=>s())},!1);class et extends ae{constructor(e,n){if(super(),this.binaryType=Wa,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const u=Fn(e);n.hostname=u.host,n.secure=u.protocol==="https"||u.protocol==="wss",n.port=u.port,u.query&&(n.query=u.query)}else n.host&&(n.hostname=Fn(n.host).host);pn(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(u=>{const _=u.prototype.name;this.transports.push(_),this._transportsByName[_]=u}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Za(this.opts.query)),zn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},nn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=xr,n.transport=e,this.id&&(n.sid=this.id);const u=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](u)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&et.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",et.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let u=0;u<this.writeBuffer.length;u++){const _=this.writeBuffer[u].data;if(_&&(n+=Ya(_)),u>0&&n>this._maxPayload)return this.writeBuffer.slice(0,u);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,fn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,u){return this._sendPacket("message",e,n,u),this}send(e,n,u){return this._sendPacket("message",e,n,u),this}_sendPacket(e,n,u,_){if(typeof n=="function"&&(_=n,n=void 0),typeof u=="function"&&(_=u,u=null),this.readyState==="closing"||this.readyState==="closed")return;u=u||{},u.compress=u.compress!==!1;const v={type:e,data:n,options:u};this.emitReserved("packetCreate",v),this.writeBuffer.push(v),_&&this.once("flush",_),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},u=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?u():e()}):this.upgrading?u():e()),this}_onError(e){if(et.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const u=nn.indexOf(this._offlineEventListener);u!==-1&&nn.splice(u,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}et.protocol=xr;class pl extends et{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),u=!1;et.priorWebsocketSuccess=!1;const _=()=>{u||(n.send([{type:"ping",data:"probe"}]),n.once("packet",t=>{if(!u)if(t.type==="pong"&&t.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;et.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{u||this.readyState!=="closed"&&(g(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const l=new Error("probe error");l.transport=n.name,this.emitReserved("upgradeError",l)}}))};function v(){u||(u=!0,g(),n.close(),n=null)}const h=t=>{const l=new Error("probe error: "+t);l.transport=n.name,v(),this.emitReserved("upgradeError",l)};function i(){h("transport closed")}function y(){h("socket closed")}function b(t){n&&t.name!==n.name&&v()}const g=()=>{n.removeListener("open",_),n.removeListener("error",h),n.removeListener("close",i),this.off("close",y),this.off("upgrading",b)};n.once("open",_),n.once("error",h),n.once("close",i),this.once("close",y),this.once("upgrading",b),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{u||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let u=0;u<e.length;u++)~this.transports.indexOf(e[u])&&n.push(e[u]);return n}}let hl=class extends pl{constructor(e,n={}){const u=typeof e=="object"?e:n;(!u.transports||u.transports&&typeof u.transports[0]=="string")&&(u.transports=(u.transports||["polling","websocket","webtransport"]).map(_=>ll[_]).filter(_=>!!_)),super(e,u)}};function ml(s,e="",n){let u=s;n=n||typeof location<"u"&&location,s==null&&(s=n.protocol+"//"+n.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=n.protocol+s:s=n.host+s),/^(https?|wss?):\/\//.test(s)||(typeof n<"u"?s=n.protocol+"//"+s:s="https://"+s),u=Fn(s)),u.port||(/^(http|ws)$/.test(u.protocol)?u.port="80":/^(http|ws)s$/.test(u.protocol)&&(u.port="443")),u.path=u.path||"/";const v=u.host.indexOf(":")!==-1?"["+u.host+"]":u.host;return u.id=u.protocol+"://"+v+":"+u.port+e,u.href=u.protocol+"://"+v+(n&&n.port===u.port?"":":"+u.port),u}const gl=typeof ArrayBuffer=="function",yl=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Ar=Object.prototype.toString,bl=typeof Blob=="function"||typeof Blob<"u"&&Ar.call(Blob)==="[object BlobConstructor]",vl=typeof File=="function"||typeof File<"u"&&Ar.call(File)==="[object FileConstructor]";function rs(s){return gl&&(s instanceof ArrayBuffer||yl(s))||bl&&s instanceof Blob||vl&&s instanceof File}function sn(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let n=0,u=s.length;n<u;n++)if(sn(s[n]))return!0;return!1}if(rs(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return sn(s.toJSON(),!0);for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&sn(s[n]))return!0;return!1}function _l(s){const e=[],n=s.data,u=s;return u.data=Un(n,e),u.attachments=e.length,{packet:u,buffers:e}}function Un(s,e){if(!s)return s;if(rs(s)){const n={_placeholder:!0,num:e.length};return e.push(s),n}else if(Array.isArray(s)){const n=new Array(s.length);for(let u=0;u<s.length;u++)n[u]=Un(s[u],e);return n}else if(typeof s=="object"&&!(s instanceof Date)){const n={};for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=Un(s[u],e));return n}return s}function xl(s,e){return s.data=qn(s.data,e),delete s.attachments,s}function qn(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let n=0;n<s.length;n++)s[n]=qn(s[n],e);else if(typeof s=="object")for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(s[n]=qn(s[n],e));return s}const Rr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],wl=5;var V;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(V||(V={}));class kl{constructor(e){this.replacer=e}encode(e){return(e.type===V.EVENT||e.type===V.ACK)&&sn(e)?this.encodeAsBinary({type:e.type===V.EVENT?V.BINARY_EVENT:V.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===V.BINARY_EVENT||e.type===V.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=_l(e),u=this.encodeAsString(n.packet),_=n.buffers;return _.unshift(u),_}}class is extends ae{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const u=n.type===V.BINARY_EVENT;u||n.type===V.BINARY_ACK?(n.type=u?V.EVENT:V.ACK,this.reconstructor=new Tl(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(rs(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const u={type:Number(e.charAt(0))};if(V[u.type]===void 0)throw new Error("unknown packet type "+u.type);if(u.type===V.BINARY_EVENT||u.type===V.BINARY_ACK){const v=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const h=e.substring(v,n);if(h!=Number(h)||e.charAt(n)!=="-")throw new Error("Illegal attachments");u.attachments=Number(h)}if(e.charAt(n+1)==="/"){const v=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););u.nsp=e.substring(v,n)}else u.nsp="/";const _=e.charAt(n+1);if(_!==""&&Number(_)==_){const v=n+1;for(;++n;){const h=e.charAt(n);if(h==null||Number(h)!=h){--n;break}if(n===e.length)break}u.id=Number(e.substring(v,n+1))}if(e.charAt(++n)){const v=this.tryParse(e.substr(n));if(is.isPayloadValid(u.type,v))u.data=v;else throw new Error("invalid payload")}return u}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case V.CONNECT:return cn(n);case V.DISCONNECT:return n===void 0;case V.CONNECT_ERROR:return typeof n=="string"||cn(n);case V.EVENT:case V.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Rr.indexOf(n[0])===-1);case V.ACK:case V.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Tl{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=xl(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function El(s){return typeof s=="string"}const Sl=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s};function Al(s){return s===void 0||Sl(s)}function cn(s){return Object.prototype.toString.call(s)==="[object Object]"}function Rl(s,e){switch(s){case V.CONNECT:return e===void 0||cn(e);case V.DISCONNECT:return e===void 0;case V.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Rr.indexOf(e[0])===-1);case V.ACK:return Array.isArray(e);case V.CONNECT_ERROR:return typeof e=="string"||cn(e);default:return!1}}function jl(s){return El(s.nsp)&&Al(s.id)&&Rl(s.type,s.data)}const Nl=Object.freeze(Object.defineProperty({__proto__:null,Decoder:is,Encoder:kl,get PacketType(){return V},isPacketValid:jl,protocol:wl},Symbol.toStringTag,{value:"Module"}));function Ne(s,e,n){return s.on(e,n),function(){s.off(e,n)}}const Cl=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jr extends ae{constructor(e,n,u){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,u&&u.auth&&(this.auth=u.auth),this._opts=Object.assign({},u),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ne(e,"open",this.onopen.bind(this)),Ne(e,"packet",this.onpacket.bind(this)),Ne(e,"error",this.onerror.bind(this)),Ne(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var u,_,v;if(Cl.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const h={type:V.EVENT,data:n};if(h.options={},h.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const g=this.ids++,t=n.pop();this._registerAckCallback(g,t),h.id=g}const i=(_=(u=this.io.engine)===null||u===void 0?void 0:u.transport)===null||_===void 0?void 0:_.writable,y=this.connected&&!(!((v=this.io.engine)===null||v===void 0)&&v._hasPingExpired());return this.flags.volatile&&!i||(y?(this.notifyOutgoingListeners(h),this.packet(h)):this.sendBuffer.push(h)),this.flags={},this}_registerAckCallback(e,n){var u;const _=(u=this.flags.timeout)!==null&&u!==void 0?u:this._opts.ackTimeout;if(_===void 0){this.acks[e]=n;return}const v=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);n.call(this,new Error("operation has timed out"))},_),h=(...i)=>{this.io.clearTimeoutFn(v),n.apply(this,i)};h.withError=!0,this.acks[e]=h}emitWithAck(e,...n){return new Promise((u,_)=>{const v=(h,i)=>h?_(h):u(i);v.withError=!0,n.push(v),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const u={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((_,...v)=>(this._queue[0],_!==null?u.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(_)):(this._queue.shift(),n&&n(null,...v)),u.pending=!1,this._drainQueue())),this._queue.push(u),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:V.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(u=>String(u.id)===e)){const u=this.acks[e];delete this.acks[e],u.withError&&u.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case V.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case V.EVENT:case V.BINARY_EVENT:this.onevent(e);break;case V.ACK:case V.BINARY_ACK:this.onack(e);break;case V.DISCONNECT:this.ondisconnect();break;case V.CONNECT_ERROR:this.destroy();const u=new Error(e.data.message);u.data=e.data.data,this.emitReserved("connect_error",u);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const u of n)u.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let u=!1;return function(..._){u||(u=!0,n.packet({type:V.ACK,id:e,data:_}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:V.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let u=0;u<n.length;u++)if(e===n[u])return n.splice(u,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let u=0;u<n.length;u++)if(e===n[u])return n.splice(u,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const u of n)u.apply(this,e.data)}}}function kt(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}kt.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*s);s=(Math.floor(e*10)&1)==0?s-n:s+n}return Math.min(s,this.max)|0};kt.prototype.reset=function(){this.attempts=0};kt.prototype.setMin=function(s){this.ms=s};kt.prototype.setMax=function(s){this.max=s};kt.prototype.setJitter=function(s){this.jitter=s};class Wn extends ae{constructor(e,n){var u;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,pn(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((u=n.randomizationFactor)!==null&&u!==void 0?u:.5),this.backoff=new kt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const _=n.parser||Nl;this.encoder=new _.Encoder,this.decoder=new _.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new hl(this.uri,this.opts);const n=this.engine,u=this;this._readyState="opening",this.skipReconnect=!1;const _=Ne(n,"open",function(){u.onopen(),e&&e()}),v=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),e?e(i):this.maybeReconnectOnOpen()},h=Ne(n,"error",v);if(this._timeout!==!1){const i=this._timeout,y=this.setTimeoutFn(()=>{_(),v(new Error("timeout")),n.close()},i);this.opts.autoUnref&&y.unref(),this.subs.push(()=>{this.clearTimeoutFn(y)})}return this.subs.push(_),this.subs.push(h),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ne(e,"ping",this.onping.bind(this)),Ne(e,"data",this.ondata.bind(this)),Ne(e,"error",this.onerror.bind(this)),Ne(e,"close",this.onclose.bind(this)),Ne(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){fn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let u=this.nsps[e];return u?this._autoConnect&&!u.active&&u.connect():(u=new jr(this,e,n),this.nsps[e]=u),u}_destroy(e){const n=Object.keys(this.nsps);for(const u of n)if(this.nsps[u].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let u=0;u<n.length;u++)this.engine.write(n[u],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var u;this.cleanup(),(u=this.engine)===null||u===void 0||u.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const u=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(_=>{_?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",_)):e.onreconnect()}))},n);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ot={};function rn(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const n=ml(s,e.path||"/socket.io"),u=n.source,_=n.id,v=n.path,h=Ot[_]&&v in Ot[_].nsps,i=e.forceNew||e["force new connection"]||e.multiplex===!1||h;let y;return i?y=new Wn(u,e):(Ot[_]||(Ot[_]=new Wn(u,e)),y=Ot[_]),n.query&&!e.query&&(e.query=n.queryKey),y.socket(n.path,e)}Object.assign(rn,{Manager:Wn,Socket:jr,io:rn,connect:rn});let $t=null;function hn(){return $t||($t=rn(void 0,{transports:["websocket","polling"],autoConnect:!0}),$t.on("connect",()=>{console.log("WebSocket connected")}),$t.on("disconnect",()=>{console.log("WebSocket disconnected")})),$t}function Ol(s){L.useEffect(()=>{const e=hn(),n=u=>{s&&s(u)};return e.on("newEvents",n),()=>{e.off("newEvents",n)}},[s])}function dc(s,e){L.useEffect(()=>{if(!s)return;const n=hn();n.emit("subscribe",s);const u=_=>{const v=_.filter(h=>h.tokenId===s);v.length>0&&e&&e(v)};return n.on("newEvents",u),()=>{n.emit("unsubscribe",s),n.off("newEvents",u)}},[s,e])}function $l(){const[s,e]=L.useState(!1);return L.useEffect(()=>{const n=hn();e(n.connected);const u=()=>e(!0),_=()=>e(!1);return n.on("connect",u),n.on("disconnect",_),()=>{n.off("connect",u),n.off("disconnect",_)}},[]),s}function Il(s){L.useEffect(()=>{const e=hn(),n=u=>{s&&s(u)};return e.on("syncStatus",n),()=>{e.off("syncStatus",n)}},[s])}function Ml(s){if(!s)return"unknown";const n=new Date-new Date(s),u=Math.floor(n/1e3),_=Math.floor(u/60),v=Math.floor(_/60);return u<10?"just now":u<60?`${u}s ago`:_<60?`${_}m ago`:v<24?`${v}h ago`:new Date(s).toLocaleDateString()}function Dl(s,e=30){if(!s)return"unknown";const n=new Date,u=new Date(s),_=(n-u)/1e3;return _<e*2?"fresh":_<e*5?"stale":"very-stale"}function Ll({meta:s,onRefresh:e,compact:n=!1}){const[u,_]=L.useState(""),[v,h]=L.useState(!1);L.useEffect(()=>{const c=()=>_(Ml(s==null?void 0:s.lastSyncTime));c();const o=setInterval(c,1e3);return()=>clearInterval(o)},[s==null?void 0:s.lastSyncTime]);const i=L.useCallback(async()=>{if(!(!e||v)){h(!0);try{await e()}finally{h(!1)}}},[e,v]);if(!s)return null;const y=Dl(s.lastSyncTime,s.syncIntervalSeconds),b=s.isSyncing||v,g={fresh:"text-green-500",stale:"text-yellow-500","very-stale":"text-red-500",unknown:"text-ink-500"},t={fresh:"bg-green-500",stale:"bg-yellow-500","very-stale":"bg-red-500",unknown:"bg-ink-500"},l=s.isCatchingUp||s.syncProgress!==void 0&&s.syncProgress<99;return n?S.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-ink-500",children:[S.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${b||l?"bg-blue-500 animate-pulse":t[y]}`}),S.jsx("span",{children:b?"Syncing...":l?`Syncing ${s.syncProgress}%`:u})]}):S.jsxs("div",{className:"flex items-center justify-between gap-4 px-3 py-2 bg-ink-900/30 rounded-lg border border-ink-800/50",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`w-2 h-2 rounded-full ${b||l?"bg-blue-500 animate-pulse":t[y]}`}),S.jsx("span",{className:"text-xs text-ink-400",children:b?"Syncing blockchain data...":l?S.jsxs(S.Fragment,{children:["Catching up... ",S.jsxs("span",{className:"text-blue-400",children:[s.syncProgress,"%"]}),s.blocksRemaining&&S.jsxs("span",{className:"text-ink-600 ml-1",children:["(",Math.round(s.blocksRemaining/1e3),"k blocks remaining)"]})]}):S.jsxs(S.Fragment,{children:["Updated ",S.jsx("span",{className:g[y],children:u}),s.lastSyncBlock&&S.jsxs("span",{className:"text-ink-600 ml-1",children:["(block ",s.lastSyncBlock.toLocaleString(),")"]})]})})]}),e&&!b&&!l&&y!=="fresh"&&S.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-xs text-ink-400 hover:text-ink-200 transition-colors",children:[S.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}function Pl(){const[s,e]=L.useState(null),n=L.useCallback(u=>{u&&e(u)},[]);return[s,n]}var on={exports:{}},Bl=on.exports,Us;function Fl(){return Us||(Us=1,(function(s,e){(function(u,_){s.exports=_()})(Bl,function(){return(function(n){var u={};function _(v){if(u[v])return u[v].exports;var h=u[v]={exports:{},id:v,loaded:!1};return n[v].call(h.exports,h,h.exports,_),h.loaded=!0,h.exports}return _.m=n,_.c=u,_.p="",_(0)})([function(n,u,_){const v=_(1),h=_(2),i=new Array(4);function y(r){for(let f=0;f<i.length;f++)i[f]=0;for(let f=0;f<r.length;f++)i[f%4]=(i[f%4]<<5)-i[f%4]+r.charCodeAt(f)}function b(){const r=i[0]^i[0]<<11;return i[0]=i[1],i[1]=i[2],i[2]=i[3],i[3]=i[3]^i[3]>>19^r^r>>8,(i[3]>>>0)/(1<<31>>>0)}function g(){const r=Math.floor(b()*360),f=b()*60+40,a=(b()+b()+b()+b())*25;return[r/360,f/100,a/100]}function t(r){const f=r,a=r,d=Math.ceil(f/2),m=f-d,x=[];for(let k=0;k<a;k++){let A=[];for(let p=0;p<d;p++)A[p]=Math.floor(b()*2.3);const E=A.slice(0,m).reverse();A=A.concat(E);for(let p=0;p<A.length;p++)x.push(A[p])}return x}function l(r,f,a,d,m,x){for(let k=0;k<d;k++)for(let A=0;A<m;A++)r.buffer[r.index(f+k,a+A)]=x}function c(r){if(!r.seed)throw new Error("No seed provided");return y(r.seed),Object.assign({size:8,scale:16,color:g(),bgcolor:g(),spotcolor:g()},r)}function o(r){const f=c({seed:r.toLowerCase()}),a=t(f.size),d=Math.sqrt(a.length),m=new v(f.size*f.scale,f.size*f.scale,3);m.color(...h(...f.bgcolor));const x=m.color(...h(...f.color)),k=m.color(...h(...f.spotcolor));for(let A=0;A<a.length;A++){const E=Math.floor(A/d),p=A%d;if(a[A]){const w=a[A]==1?x:k;l(m,p*f.scale,E*f.scale,f.scale,f.scale,w)}}return`data:image/png;base64,${m.getBase64()}`}n.exports=o},function(n,u){/**
 * A handy class to calculate color values.
 *
 * @version 1.0
 * @author Robert Eisele <robert@xarg.org>
 * @copyright Copyright (c) 2010, Robert Eisele
 * @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
 * @license http://www.opensource.org/licenses/bsd-license.php BSD License
 *
 */n.exports=function(_,v,h){function i(d,m){for(var x=2;x<arguments.length;x++)for(var k=0;k<arguments[x].length;k++)d[m++]=arguments[x].charAt(k)}function y(d){return String.fromCharCode(d>>8&255,d&255)}function b(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function g(d){return String.fromCharCode(d&255,d>>8&255)}this.width=_,this.height=v,this.depth=h,this.pix_size=v*(_+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*h+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+h+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var t=new Array,l=0;l<this.buffer_size;l++)this.buffer[l]="\0";i(this.buffer,this.ihdr_offs,b(this.ihdr_size-12),"IHDR",b(_),b(v),"\b"),i(this.buffer,this.plte_offs,b(this.plte_size-12),"PLTE"),i(this.buffer,this.trns_offs,b(this.trns_size-12),"tRNS"),i(this.buffer,this.idat_offs,b(this.idat_size-12),"IDAT"),i(this.buffer,this.iend_offs,b(this.iend_size-12),"IEND");var c=30912;c+=31-c%31,i(this.buffer,this.idat_offs+8,y(c));for(var l=0;(l<<16)-1<this.pix_size;l++){var o,r;l+65535<this.pix_size?(o=65535,r="\0"):(o=this.pix_size-(l<<16)-l,r=""),i(this.buffer,this.idat_offs+8+2+(l<<16)+(l<<2),r,g(o),g(~o))}for(var l=0;l<256;l++){for(var f=l,a=0;a<8;a++)f&1?f=-306674912^f>>1&2147483647:f=f>>1&2147483647;t[l]=f}this.index=function(d,m){var x=m*(this.width+1)+d+1,k=this.idat_offs+8+2+5*Math.floor(x/65535+1)+x;return k},this.color=function(d,m,x,k){k=k>=0?k:255;var A=((k<<8|d)<<8|m)<<8|x;if(typeof this.palette[A]>"u"){if(this.pindex==this.depth)return"\0";var E=this.plte_offs+8+3*this.pindex;this.buffer[E+0]=String.fromCharCode(d),this.buffer[E+1]=String.fromCharCode(m),this.buffer[E+2]=String.fromCharCode(x),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(k),this.palette[A]=String.fromCharCode(this.pindex++)}return this.palette[A]},this.getBase64=function(){var d=this.getDump(),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x,k,A,E,p,w,T,R=d.length,N=0,C="";do x=d.charCodeAt(N),E=x>>2,k=d.charCodeAt(N+1),p=(x&3)<<4|k>>4,A=d.charCodeAt(N+2),R<N+2?w=64:w=(k&15)<<2|A>>6,R<N+3?T=64:T=A&63,C+=m.charAt(E)+m.charAt(p)+m.charAt(w)+m.charAt(T);while((N+=3)<R);return C},this.getDump=function(){for(var d=65521,m=5552,x=1,k=0,A=m,E=0;E<this.height;E++)for(var p=-1;p<this.width;p++)x+=this.buffer[this.index(p,E)].charCodeAt(0),k+=x,(A-=1)==0&&(x%=d,k%=d,A=m);x%=d,k%=d,i(this.buffer,this.idat_offs+this.idat_size-8,b(k<<16|x));function w(T,R,N){for(var C=-1,$=4;$<N-4;$+=1)C=t[(C^T[R+$].charCodeAt(0))&255]^C>>8&16777215;i(T,R+N-4,b(C^-1))}return w(this.buffer,this.ihdr_offs,this.ihdr_size),w(this.buffer,this.plte_offs,this.plte_size),w(this.buffer,this.trns_offs,this.trns_size),w(this.buffer,this.idat_offs,this.idat_size),w(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}}},function(n,u){function _(h,i,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+(i-h)*6*y:y<1/2?i:y<2/3?h+(i-h)*(2/3-y)*6:h}function v(h,i,y){let b,g,t;if(i==0)b=g=t=y;else{const l=y<.5?y*(1+i):y+i-y*i,c=2*y-l;b=_(c,l,h+1/3),g=_(c,l,h),t=_(c,l,h-1/3)}return[Math.round(b*255),Math.round(g*255),Math.round(t*255),255]}n.exports=v}])})})(on)),on.exports}var zl=Fl();const qs=Vn(zl);function Ul({phrases:s}){const[e,n]=L.useState(0),[u,_]=L.useState(""),[v,h]=L.useState(!1),i=Math.max(...s.map(y=>y.length));return L.useEffect(()=>{const y=s[e],b=setTimeout(()=>{v?u.length>0?_(u.slice(0,-1)):(h(!1),n(g=>(g+1)%s.length)):u.length<y.length?_(y.slice(0,u.length+1)):setTimeout(()=>h(!0),2e3)},v?50:100);return()=>clearTimeout(b)},[u,v,e,s]),S.jsxs("span",{className:"inline-block text-center",style:{width:`${i+1}ch`},children:[S.jsx("span",{className:"text-white",children:u}),S.jsx("span",{className:"animate-pulse text-accent-cyan",children:"|"})]})}function Ws({value:s,suffix:e=""}){const[n,u]=L.useState(0);return L.useEffect(()=>{if(s==null)return;const _=1500,v=30,h=s/v;let i=0,y=0;const b=setInterval(()=>{y++,i=Math.min(Math.round(h*y),s),u(i),y>=v&&clearInterval(b)},_/v);return()=>clearInterval(b)},[s]),S.jsxs("span",{children:[n.toLocaleString(),e]})}function ql({events:s}){const[e,n]=L.useState(0);if(L.useEffect(()=>{if(!s||s.length===0)return;const h=setInterval(()=>{n(i=>(i+1)%s.length)},3e3);return()=>clearInterval(h)},[s]),!s||s.length===0)return null;const u=s[e],_=h=>{switch(h.type){case"mint":return`New ${h.contentType} minted`;case"purchase":return`Sold for ${h.price} ETH`;case"list":return`Listed for ${h.price} ETH`;default:return"New activity"}},v=h=>{switch(h.type){case"mint":return"";case"purchase":return"";case"list":return"";default:return""}};return S.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-ink-400",children:[S.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),S.jsxs(Mt,{to:`/nft?id=${u.id}`,className:"transition-opacity duration-300 hover:text-ink-200",children:[v(u)," ",S.jsxs("span",{className:"text-ink-500",children:["#",u.id]})," ",S.jsx("span",{className:"text-ink-200 font-medium",children:u.title})," "," ",_(u)]})]})}function Wl(){const s=un(),[e,n]=L.useState(null),[u,_]=L.useState([]),[v,h]=L.useState({}),[,i]=at(Js),[y,b]=L.useState([]),[g,t]=L.useState(null),[l,c]=L.useState(null),[o,r]=Pl(),[f,a]=L.useState([]),[d,m]=L.useState([]),x=Ce.contractAddresses.v1.zang;L.useEffect(()=>{(async()=>{try{const p=await fetch("/api/home");if(!p.ok)throw new Error("Failed to fetch home data");const w=await p.json();if(n(w.lastNftId),w.stats&&(c(w.stats.uniqueArtists),t(w.stats.totalVolumeEth)),a(w.topArtists||[]),m(w.topCollectors||[]),w._meta&&r(w._meta),w.nfts&&w.nfts.length>0){const T=w.nfts.map(N=>parseInt(N.id,10));_(T);const R={};for(const N of w.nfts)R[N.id]={token_id:N.id,name:N.name,description:N.description,author:N.author,content_type:N.contentType,content:N.content,_stats:{totalSupply:N.totalSupply,floorPrice:N.floorPrice,listedCount:N.listedCount,totalVolume:N.totalVolume}};h(R)}if(w.recentEvents&&w.recentEvents.length>0){const T=w.recentEvents.filter(R=>R.type!=="TransferSingle"||R.type==="TransferSingle").map(R=>{let N="transfer";R.type==="TransferSingle"?N="mint":R.type==="TokenPurchased"?N="purchase":R.type==="TokenListed"&&(N="list");let C="text";return R.contentType==="text/html"?C="HTML":R.contentType==="text/markdown"?C="markdown":R.contentType==="text/plain"&&(C="text"),{type:N,id:R.tokenId.toString(),title:R.title||`#${R.tokenId}`,blockNumber:R.blockNumber,price:R.price,contentType:C}}).filter(R=>R.type!=="transfer").slice(0,10);b(T)}}catch(p){console.error("Error fetching home data:",p);try{const w=await ot.readContract({address:x,abi:_t.zang,functionName:"lastTokenId"});n(Number(w))}catch(w){i(Qs(w))}}})()},[i,x,r]),$l();const k=L.useCallback(async E=>{const p=E.filter(N=>N.type==="TransferSingle"||N.type==="TokenListed"||N.type==="TokenPurchased");if(p.length===0)return;const w=[...new Set(p.map(N=>N.tokenId.toString()))],T={};try{const N=await fetch("/api/nfts/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:w})});if(N.ok){const{nfts:C}=await N.json();for(const $ of C)if($.data){let M="text";$.data.content_type==="text/html"?M="HTML":$.data.content_type==="text/markdown"&&(M="Markdown"),T[$.id]={title:$.data.name||`#${$.id}`,contentType:M}}}}catch{}const R=p.map(N=>{var $,M;let C="transfer";return N.type==="TransferSingle"?C="mint":N.type==="TokenPurchased"?C="purchase":N.type==="TokenListed"&&(C="list"),{type:C,id:N.tokenId.toString(),blockNumber:N.blockNumber,title:(($=T[N.tokenId])==null?void 0:$.title)||`#${N.tokenId}`,contentType:((M=T[N.tokenId])==null?void 0:M.contentType)||"text"}}).filter(N=>N.type!=="transfer");if(b(N=>[...R,...N].slice(0,15)),p.some(N=>N.type==="TransferSingle"))try{const N=await ot.readContract({address:x,abi:_t.zang,functionName:"lastTokenId"});n(Number(N))}catch{}},[x]);Ol(k);const A=L.useCallback(E=>{r({lastSyncBlock:E.lastSyncBlock,lastSyncTime:E.lastSyncTime,isSyncing:E.isSyncing,syncProgress:E.syncProgress,blocksRemaining:E.blocksRemaining,isCatchingUp:E.isCatchingUp})},[r]);return Il(A),S.jsxs("div",{className:"min-h-screen bg-ink-950",children:[S.jsx(ko,{}),S.jsx(Ia,{}),S.jsxs("section",{className:"relative overflow-hidden",children:[S.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:S.jsxs("div",{className:"text-center space-y-8",children:[S.jsx("p",{className:"text-ink-500 font-mono text-xs sm:text-sm tracking-widest uppercase",children:"A canvas for writers & creators"}),S.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-mono leading-tight",children:[S.jsx("span",{className:"text-ink-400 hidden sm:inline",children:">"})," ",S.jsx(Ul,{phrases:["Write beautifully.","Words, forever.","Code is poetry.","Text is art.","Create freely."]})]}),S.jsxs("p",{className:"text-ink-400 text-lg sm:text-xl max-w-2xl mx-auto leading-relaxed",children:["Mint your"," ",S.jsx("span",{className:"text-ink-200",children:"poetry"}),","," ",S.jsx("span",{className:"text-ink-200",children:"stories"}),","," ",S.jsx("span",{className:"text-ink-200",children:"code"}),", and"," ",S.jsx("span",{className:"text-ink-200",children:"HTML art"})," as NFTs. No images required. Pure text, onchain forever."]}),S.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[S.jsx("button",{onClick:()=>s("/mint"),className:"group relative px-8 py-4 bg-white text-ink-950 font-medium rounded-lg hover:bg-ink-100 transition-all duration-200 text-lg",children:S.jsxs("span",{className:"flex items-center justify-center gap-3",children:[S.jsx("span",{className:"font-mono text-ink-500",children:"$"}),"Start Writing"]})}),S.jsx("button",{onClick:()=>{document.getElementById("gallery").scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 border border-ink-700 text-ink-300 font-medium rounded-lg hover:border-ink-500 hover:text-white transition-all duration-200 text-lg",children:"Browse Gallery"})]}),S.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 pt-6",children:[e&&S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-3xl font-mono text-white",children:S.jsx(Ws,{value:e})}),S.jsx("div",{className:"text-ink-500 text-sm",children:"texts minted"})]}),l&&l>0&&S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-3xl font-mono text-white",children:S.jsx(Ws,{value:l})}),S.jsx("div",{className:"text-ink-500 text-sm",children:"artists"})]}),g!==null&&g>0&&S.jsxs("div",{className:"text-center",children:[S.jsxs("div",{className:"text-3xl font-mono text-white",children:[g.toFixed(4)," ",S.jsx("span",{className:"text-ink-400",children:""})]}),S.jsx("div",{className:"text-ink-500 text-sm",children:"total volume"})]})]}),S.jsx("div",{className:"pt-8",children:S.jsx(ql,{events:y})})]})}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ink-800 to-transparent"})]}),S.jsxs("section",{id:"gallery",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[S.jsxs("div",{className:"flex items-center justify-between mb-10",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Latest Works"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"Fresh from the creative minds"})]}),o&&S.jsx("div",{className:"hidden sm:block",children:S.jsx(Ll,{meta:o,compact:!0})})]}),e===null?S.jsx("div",{className:"flex justify-center py-8",children:S.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Loading..."})]})}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:u.slice(0,12).map(E=>S.jsx($a,{id:E,prefetchedData:v[E]},E))}),e>12&&S.jsx("div",{className:"text-center mt-10",children:S.jsxs(Mt,{to:"/gallery",className:"inline-flex items-center gap-2 px-6 py-3 bg-ink-800 text-ink-200 font-medium rounded-lg hover:bg-ink-700 hover:text-white transition-colors",children:["See All Works",S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]}),f.length>0&&S.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[S.jsxs("div",{className:"space-y-1 mb-10",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Artists"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"By sales volume"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.slice(0,6).map((E,p)=>S.jsxs(Mt,{to:`/profile?address=${E.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[S.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:p+1}),S.jsx("img",{src:qs(E.address),alt:"",className:"w-12 h-12 rounded-lg"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-ink-200 font-mono text-sm",children:S.jsx(Mn,{address:E.address,shorten:!0,nChar:6,disableLink:!0})}),S.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[E.totalCreated," works  ",E.volumeEth.toFixed(4)," ETH"]})]})]},E.address))})]}),d.length>0&&S.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 border-t border-ink-800",children:[S.jsxs("div",{className:"space-y-1 mb-10",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-mono text-ink-100",children:"Top Collectors"}),S.jsx("p",{className:"text-ink-500 text-sm",children:"By purchase volume"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.slice(0,6).map((E,p)=>S.jsxs(Mt,{to:`/profile?address=${E.address}`,className:"flex items-center gap-4 p-5 bg-ink-900/50 rounded-xl border border-ink-800 hover:border-ink-600 hover:bg-ink-800/50 transition-colors",children:[S.jsx("span",{className:"text-ink-500 font-mono text-lg w-6",children:p+1}),S.jsx("img",{src:qs(E.address),alt:"",className:"w-12 h-12 rounded-lg"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-ink-200 font-mono text-sm",children:S.jsx(Mn,{address:E.address,shorten:!0,nChar:6,disableLink:!0})}),S.jsxs("div",{className:"text-ink-500 text-xs mt-1",children:[E.totalCollected," collected  ",E.volumeEth.toFixed(4)," ETH"]})]})]},E.address))})]})]})}function Hl(){const{pathname:s}=qr();return L.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function Vl(){return S.jsx("div",{className:"min-h-screen bg-ink-950 flex items-center justify-center",children:S.jsxs("div",{className:"flex items-center gap-3 text-ink-400",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Loading..."})]})})}const Gl=L.lazy(()=>le(()=>import("./nft-BmHxCgdA.js"),__vite__mapDeps([11,4,1,12,3,5,13,14,15,16]))),Yl=L.lazy(()=>le(()=>import("./mint-CA9kOa1A.js"),__vite__mapDeps([17,4,1,14,12,3,5,13,18]))),Kl=L.lazy(()=>le(()=>import("./gallery-CJ1FIn2U.js"),__vite__mapDeps([19,4,1,12,3,5,13]))),Xl=L.lazy(()=>le(()=>import("./activity-BuH5kT33.js"),__vite__mapDeps([20,4,1,12,3,5,15,13]))),Zl=L.lazy(()=>le(()=>import("./profile-DRzoU8Tr.js"),__vite__mapDeps([21,4,1,12,3,5,13]))),Jl=L.lazy(()=>le(()=>import("./bridge-BAy8qj1j.js"),__vite__mapDeps([22,4,1,12,3,5,13]))),Ql=L.lazy(()=>le(()=>import("./404-Bdx3F4hO.js"),__vite__mapDeps([23,4,1,12,3,5,13]))),ec=new Dr;function tc(){return S.jsx(Lr,{config:Ei,children:S.jsx(Pr,{client:ec,children:S.jsx(Zr,{theme:Jr({accentColor:"#22d3ee",accentColorForeground:"#0a0a0a",borderRadius:"medium"}),children:S.jsxs(Wr,{children:[S.jsx(Hl,{}),S.jsx(ao,{children:S.jsx(L.Suspense,{fallback:S.jsx(Vl,{}),children:S.jsxs(Ur,{children:[S.jsx(Je,{path:"/",element:S.jsx(Wl,{})}),S.jsx(Je,{path:"/nft",element:S.jsx(Gl,{})}),S.jsx(Je,{path:"/mint",element:S.jsx(Yl,{})}),S.jsx(Je,{path:"/gallery",element:S.jsx(Kl,{})}),S.jsx(Je,{path:"/activity",element:S.jsx(Xl,{})}),S.jsx(Je,{path:"/profile",element:S.jsx(Zl,{})}),S.jsx(Je,{path:"/bridge",element:S.jsx(Jl,{})}),S.jsx(Je,{path:"*",element:S.jsx(Ql,{})})]})})})]})})})})}li.createRoot(document.getElementById("root")).render(S.jsx(I.StrictMode,{children:S.jsx(zr,{children:S.jsx(tc,{})})}));const fc=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"}));export{Mn as A,ko as H,$a as N,jn as R,Ia as S,ro as V,xo as a,cc as b,Ce as c,xt as d,lc as e,Js as f,ac as g,Qs as h,Pl as i,Il as j,dc as k,rn as l,qs as m,es as n,Ll as o,ot as p,Si as q,Yo as r,ra as s,fc as t,bo as u,_t as v};
